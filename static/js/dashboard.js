var z6=Object.defineProperty;var Z6=(e,t,n)=>t in e?z6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pe=(e,t,n)=>Z6(e,typeof t!="symbol"?t+"":t,n);import{j as s,b as be,B as K,c as Be,a as Y,d as ir,u as gn,S as q6,e as W6,q as U6,f as G6}from"./chunk-BY-ZvIsg.js";import{r as v,R as h,g as Yc,s as K6,a as Dt,$ as Y6,c as c1,p as X6,b as J6,u as jl,d as Q6,e as ey,E as Ko}from"./chunk-CdV9K1BU.js";import{D as ty,a as ny,s as ry,T as ue,b as me,c as fe,B as sy,M as ve,t as ae,d as he,I as Ge,e as yt,u as ay,f as xn,g as vn,h as Ne,_ as Ns,i as Ss,j as _u,k as Ru,l as le,w as Ct,L as ie,m as ze,n as $n,S as xt,A as Yo,o as lr,p as _t,V as oy,q as ye,r as Xo,v as iy,x as os,y as ly,z as Ia,C as zr,E as _n,F as cr,P as cy,G as dy,H as ds,J as qt,K as dr,N as ur,O as mr,Q as fr,R as us,U as pr,W as We,X as d1,Y as hn,Z as _e,$ as uy,a0 as my,a1 as Vu,a2 as Hu,a3 as xo,a4 as fy,a5 as py,a6 as hy,a7 as gy,a8 as Xc,a9 as u1,aa as rc,ab as Jc,ac as Qc,ad as m1,ae as ts,af as ed,ag as Ir,ah as en,ai as xy,aj as vy,ak as yy,al as So,am as Ks,an as by,ao as wy,ap as jy,aq as Ny,ar as f1,as as Sy,at as Gt,au as et,av as sr,aw as Ey,ax as Cy,ay as Iy,az as Ay,aA as My,aB as Dy,aC as td,aD as ky,aE as Oy,aF as Ty,aG as Fy,aH as Ly,aI as Bu,aJ as Py,aK as zu,aL as $y,aM as Es,aN as _y,aO as Ry,aP as Jo,aQ as Qo,aR as nd,aS as ei,aT as Cs,aU as dt,aV as rd,aW as sa,aX as ti,aY as ni,aZ as ri,a_ as si,a$ as sd,b0 as Aa,b1 as ad,b2 as Vy,b3 as p1,b4 as h1,b5 as g1,b6 as ai,b7 as on,b8 as Fr,b9 as Lr,ba as Pr,bb as Hy,bc as Nt,bd as Mn,be as od,bf as By,bg as zy,bh as Zy,bi as Ma,bj as Da,bk as ka,bl as Oa,bm as Ta,bn as Fa,bo as La,bp as Pa,bq as $a,br as qy,bs as x1,bt as Eo,bu as Tn,bv as sc,bw as aa,bx as v1,by as Fn,bz as ac,bA as Wy,bB as id,bC as oi,bD as Uy,bE as Gy,bF as Ky,bG as Yy,bH as y1,bI as ld,bJ as Tt,bK as Xy,bL as Jy,bM as Qy,bN as eb,bO as b1,bP as tb,bQ as w1,bR as nb,bS as rb,bT as sb,bU as ab,bV as ob,bW as ib,bX as lb,bY as cb,bZ as db,b_ as ub}from"./chunk-CgqOMUBg.js";import{D as mb,a as fb,b as pb,c as hb,d as gb,e as xb,f as vb,g as yb,E as j1,U as je,A as N1,h as ii,B as S1,i as bb,T as E1,j as C1,k as I1,M as A1,F as tt,n as Pt,l as M1,m as D1,o as k1,S as cd,p as li,q as oc,v as er,z as kr,r as Nl}from"./chunk-Oea2Ib37.js";import{C as ic,Z as ci,S as wb,c as Le,g as O1,a as dd,B as ud}from"./chunk-DtvdEgkE.js";import{c as rt,a as Ue,b as st,d as de,e as ct,f as jb,g as Ke,h as Ye,i as $e,j as sn,C as _a,k as ut,F as Nb,s as T1,S as Sb,l as Zu,m as Eb,r as Cb}from"./chunk-CGJd0ITG.js";import{u as F1,C as Zr}from"./chunk-Dk8g1OMw.js";const Ib={awaitAfter:0},Ab=e=>{const t={},n=Object.keys(e);for(const r of n)t[r]=Mb(e[r]);return t},Mb=(e,t=0)=>JSON.stringify({state:e,version:t}),Db=e=>({...Ib,...e}),kb={"ZV:audioStore":mb,"ZV:backupDataStore":ty,"ZV:documentStore":fb,"ZV:flowStore":pb,"ZV:funnelStore":hb,"ZV:labelStore":ny,"ZV:mediaStore":gb,"ZV:scheduleStore":xb,"ZV:textMessageStore":vb,"ZV:triggerStore":yb},Ob=["ZV:authStore","ZV:flags","ZV:options","ZV:usageLimitStore","ZV:welcomeModals","ZV:driver"],Tb=Ab(kb);async function L1(e){const t=Db(e),n=await chrome.storage.local.get(),r=Object.keys(n);for(const a of r)Ob.includes(a.trim())||await chrome.storage.local.remove(a);await ic.setOnStorage(Tb),await ry(t.awaitAfter)}const Fb={isBusy:!1,setIsBusy:()=>null},P1=v.createContext(Fb),Lb=({children:e})=>{const[t,n]=v.useState(!1);return s.jsx(P1.Provider,{value:{isBusy:t,setIsBusy:n},children:e})},Is=()=>v.useContext(P1);function qr({actions:e,body:t,title:n}){return s.jsxs("div",{className:"flex h-fit w-full flex-col gap-8 px-0 pb-9 pt-0",children:[s.jsxs("div",{className:" top-0 z-50 flex gap-4 rounded-lg bg-card px-3 py-6 shadow-md max-lg:flex-wrap lg:px-9",id:"details-card",children:[s.jsx("div",{className:"flex overflow-hidden whitespace-nowrap text-2xl",children:s.jsxs(ue,{children:[s.jsx(me,{className:"overflow-hidden text-ellipsis",children:n}),s.jsx(fe,{children:n})]})}),s.jsx("div",{className:"flex h-10 flex-1 justify-end gap-2",children:e})]}),s.jsx("div",{className:"flex h-full max-h-[calc(100vh_-_300px)] flex-col gap-4 overflow-y-auto px-2 md:px-9",children:t})]})}class an{constructor(){pe(this,"audioStore",rt)}async addAudio(...t){await this.audioStore.addAudio(...t)}async deleteAudio(...t){await this.audioStore.deleteAudio(...t)}async findById(...t){return await this.audioStore.findById(...t)}async getAudioDataById(...t){return await this.audioStore.getAudioDataById(...t)}async getAudioList(){return this.audioStore.audioList}async reorderAudioList(...t){await this.audioStore.reorderAudioList(...t)}async saveAudio(...t){await this.audioStore.saveAudio(...t)}async selectAudio(...t){await this.audioStore.selectAudio(...t)}async setAudioFilter(...t){await this.audioStore.setAudioFilter(...t)}async toggleAudioIsFavorite(...t){await this.audioStore.toggleAudioIsFavorite(...t)}}class $1{constructor(t){this.repository=t}async execute({funnelId:t,item:n}){const r=await this.repository.findById(t);if(!r)throw new Error("AddItemOnFunnel: Funnel not found");return r.itemsSequence.push(n),await this.repository.saveFunnel(r),{funnel:r}}}function Pb(e){const t=new $1(e);return t.execute.bind(t)}class Ra extends j1{get name(){return this.props.name}set name(t){this.props.name=t}get itemsSequence(){return this.props.itemsSequence}set itemsSequence(t){this.props.itemsSequence=t}get isFavorite(){return this.props.isFavorite}set isFavorite(t){this.props.isFavorite=t}get metadata(){return{id:this.id,isFavorite:this.props.isFavorite,itemsSequence:this.props.itemsSequence,name:this.props.name}}static create(t,n){return new Ra({...t,itemsSequence:t.itemsSequence??[]},n)}}class _1{constructor(t){this.repository=t}async execute({id:t,isFavorite:n=!1,itemsSequence:r=[],name:a}){const o=a.trim();if(!o)throw new Error("CreateFunnel: Cannot create an funnel with empty name");const i=Ra.create({name:o,itemsSequence:r,isFavorite:n},new je(t));return await this.repository.addFunnel(i),{funnel:i}}}function $b(e){const t=new _1(e);return t.execute.bind(t)}class _b{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("DeleteFunnel: Id must be provided");await this.repository.deleteFunnel(t)}}function Rb(e){const t=new _b(e);return t.execute.bind(t)}class Vb{constructor(t){this.repository=t}async execute(t,n){if(!t||!n)throw new Error("DeleteItemOnFunnel: funnelId and itemOnFunnelId must be provided");const r=await this.repository.findById(t);if(!r)throw new Error("DeleteItemOnFunnel: Funnel not found");const a=r.itemsSequence.findIndex(o=>n===o.id);if(a===-1)throw new Error("DeleteItemOnFunnel: ItemId not found");r.itemsSequence.splice(a,1),await this.repository.saveFunnel(r)}}function Hb(e){const t=new Vb(e);return t.execute.bind(t)}class Bb{constructor(t){this.repository=t}async execute({itemId:t}){const n=await this.repository.findFunnelsWithItem(t),r=n.length===1;if(n.length>0)throw new Error(`O item que você está tentando apagar está cadastrado ${r?"no seguinte funil":"nos seguintes funis"}:

${n.reduce((a,o)=>a+`• ${o}
`,"")}

Remova ele ${r?"desse funil":"desses funis"} antes de apagar`);return{funnelsWithItem:n}}}function zb(e){const t=new Bb(e);return t.execute.bind(t)}const di=zb;class Zb{constructor(t){this.repository=t}async execute({funnelId:t,indexes:{destinationIndex:n,sourceIndex:r}}){const a=await this.repository.findById(t);if(!a)throw new Error("ReorderFunnelItemsList: Funnel not found!");const o=(a==null?void 0:a.itemsSequence)??[],i=o.splice(r,1);o.splice(n,0,...i),a.itemsSequence=o,await this.repository.saveFunnel(a)}}function qb(e){const t=new Zb(e);return t.execute.bind(t)}class R1{constructor(t){this.repository=t}async execute(t){await this.repository.reorderFunnelList(t)}}function Wb(e){const t=new R1(e);return t.execute.bind(t)}class Ub{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectFunnel: Id must be provided");await this.repository.selectFunnel(t)}}function Gb(e){const t=new Ub(e);return t.execute.bind(t)}class Kb{constructor(t){this.repository=t}async execute(t){await this.repository.setFunnelFilter(t)}}function Yb(e){return v.useMemo(()=>{const t=new Kb(e);return t.execute.bind(t)},[e])}class Xb{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleFunnelIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleFunnelIsFavorite: Funnel not found");const r=Ra.create({isFavorite:!n.isFavorite,itemsSequence:n.itemsSequence,name:n.name},new je(n.id));await this.repository.saveFunnel(r)}}function Jb(e){const t=new Xb(e);return t.execute.bind(t)}class Qb{constructor(t){this.repository=t}async execute({id:t,isFavorite:n,itemsSequence:r,name:a}){if(!t)throw new Error("UpdateFunnelData: Id must be provided");const o=await this.repository.findById(t);if(!o)throw new Error("UpdateFunnelData: Funnel not found");const i=Ra.create({isFavorite:n??o.isFavorite,itemsSequence:r??o.itemsSequence,name:a??o.name},new je(o.id));return await this.repository.saveFunnel(i),{funnel:i}}}function e4(e){const t=new Qb(e);return t.execute.bind(t)}class t4{constructor(t){this.repository=t}async execute(t,n){if(!t||!n)throw new Error("UpdateItemOnFunnel: funnelId and item must be provided");const r=await this.repository.findById(t);if(!r)throw new Error("UpdateItemOnFunnel: Funnel not found");const a=r.itemsSequence.findIndex(o=>n.id===o.id);if(a===-1)throw new Error("UpdateItemOnFunnel: Item not found");r.itemsSequence[a]=n,await this.repository.saveFunnel(r)}}function n4(e){const t=new t4(e);return t.execute.bind(t)}class r4{constructor(t){this.repository=t}async execute({itemId:t}){const n=await this.repository.findFlowsWithItem(t),r=n.length===1;if(n.length>0)throw new Error(`O item que você está tentando apagar está cadastrado ${r?"no seguinte fluxo":"nos seguintes fluxos"}:

${n.reduce((a,o)=>a+`• ${o}
`,"")}

Remova ele ${r?"desse fluxo":"desses fluxos"} antes de apagar`);return{flowsWithItem:n}}}function s4(e){const t=new r4(e);return t.execute.bind(t)}const ui=s4;class a4{constructor(t,n,r){this.audioRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteAudio: Id must be provided");await di(this.funnelRepository)({itemId:t}),await ui(this.flowRepository)({itemId:t}),await this.audioRepository.deleteAudio(t)}}function o4(e,t,n){const r=new a4(e,t,n);return r.execute.bind(r)}class i4{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("GetAudioData: Id must be provided");const n=await this.audioRepository.getAudioDataById(t);return n||(console.warn("GetAudioData: Audio not found"),null)}}function Va(e){return v.useMemo(()=>{const t=new i4(e);return t.execute.bind(t)},[e])}class l4{constructor(t){this.audioRepository=t}async execute(t){await this.audioRepository.reorderAudioList(t)}}function c4(e){const t=new l4(e);return t.execute.bind(t)}class d4{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("SelectAudio: Id must be provided");await this.audioRepository.selectAudio(t)}}function u4(e){const t=new d4(e);return t.execute.bind(t)}class m4{constructor(t){this.audioRepository=t}async execute(t){await this.audioRepository.setAudioFilter(t)}}function f4(e){return v.useMemo(()=>{const t=new m4(e);return t.execute.bind(t)},[e])}class p4{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("ToggleAudioIsFavorite: Id must be provided");const n=await this.audioRepository.findById(t);if(!n)throw new Error("ToggleAudioIsFavorite: Audio not found");const r=N1.create({asViewOnce:n.asViewOnce,data:n.data,isFavorite:!n.isFavorite,isPtt:n.isPtt,name:n.name},n.idEntity);await this.audioRepository.saveAudio(r)}}function h4(e){const t=new p4(e);return t.execute.bind(t)}class g4{constructor(t){this.audioRepository=t}async execute({asViewOnce:t,base64:n,id:r,isFavorite:a,isPtt:o,name:i}){if(!r)throw new Error("UpdateAudioData: Id must be provided");const l=await this.audioRepository.findById(r);if(!l)throw new Error("UpdateAudioData: Audio not found");const c=N1.create({asViewOnce:t??l.asViewOnce,data:n??l.data,isFavorite:a??l.isFavorite,isPtt:o??l.isPtt,name:i??l.name},l.idEntity);return await this.audioRepository.saveAudio(c),{audio:c}}}function x4(e){const t=new g4(e);return t.execute.bind(t)}const v4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208.49,152.49l-72,72a12,12,0,0,1-17,0l-72-72a12,12,0,0,1,17-17L116,187V40a12,12,0,0,1,24,0V187l51.51-51.52a12,12,0,0,1,17,17Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M200,144l-72,72L56,144Z",opacity:"0.2"}),h.createElement("path",{d:"M207.39,140.94A8,8,0,0,0,200,136H136V40a8,8,0,0,0-16,0v96H56a8,8,0,0,0-5.66,13.66l72,72a8,8,0,0,0,11.32,0l72-72A8,8,0,0,0,207.39,140.94ZM128,204.69,75.31,152H180.69Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72A8,8,0,0,1,56,136h64V40a8,8,0,0,1,16,0v96h64a8,8,0,0,1,5.66,13.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M204.24,148.24l-72,72a6,6,0,0,1-8.48,0l-72-72a6,6,0,0,1,8.48-8.48L122,201.51V40a6,6,0,0,1,12,0V201.51l61.76-61.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72a8,8,0,0,1,11.32-11.32L120,196.69V40a8,8,0,0,1,16,0V196.69l58.34-58.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M202.83,146.83l-72,72a4,4,0,0,1-5.66,0l-72-72a4,4,0,0,1,5.66-5.66L124,206.34V40a4,4,0,0,1,8,0V206.34l65.17-65.17a4,4,0,0,1,5.66,5.66Z"}))]]),y4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240.49,119.51l-96-96A12,12,0,0,0,124,32V68H80A12,12,0,0,0,68,80v96a12,12,0,0,0,12,12h44v36a12,12,0,0,0,20.49,8.49l96-96A12,12,0,0,0,240.49,119.51ZM148,195V176a12,12,0,0,0-12-12H92V92h44a12,12,0,0,0,12-12V61l67,67ZM52,80v96a12,12,0,0,1-24,0V80a12,12,0,0,1,24,0Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M136,224V176H72V80h64V32l96,96Z",opacity:"0.2"}),h.createElement("path",{d:"M237.66,122.34l-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34ZM144,204.69V176a8,8,0,0,0-8-8H80V88h56a8,8,0,0,0,8-8V51.31L220.69,128ZM48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Zm189.66,42.34-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M236.24,123.76l-96-96A6,6,0,0,0,130,32V74H72a6,6,0,0,0-6,6v96a6,6,0,0,0,6,6h58v42a6,6,0,0,0,10.24,4.24l96-96A6,6,0,0,0,236.24,123.76ZM142,209.51V176a6,6,0,0,0-6-6H78V86h58a6,6,0,0,0,6-6V46.49L223.51,128ZM46,80v96a6,6,0,0,1-12,0V80a6,6,0,0,1,12,0Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M237.66,122.34l-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34ZM144,204.69V176a8,8,0,0,0-8-8H80V88h56a8,8,0,0,0,8-8V51.31L220.69,128ZM48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M234.83,125.17l-96-96A4,4,0,0,0,132,32V76H72a4,4,0,0,0-4,4v96a4,4,0,0,0,4,4h60v44a4,4,0,0,0,2.47,3.7,4,4,0,0,0,4.36-.87l96-96A4,4,0,0,0,234.83,125.17ZM140,214.34V176a4,4,0,0,0-4-4H76V84h60a4,4,0,0,0,4-4V41.66L226.34,128ZM44,80v96a4,4,0,0,1-8,0V80a4,4,0,0,1,8,0Z"}))]]),b4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,128l-72,72V56Z",opacity:"0.2"}),h.createElement("path",{d:"M221.66,122.34l-72-72A8,8,0,0,0,136,56v64H40a8,8,0,0,0,0,16h96v64a8,8,0,0,0,13.66,5.66l72-72A8,8,0,0,0,221.66,122.34ZM152,180.69V75.31L204.69,128Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M220.24,132.24l-72,72a6,6,0,0,1-8.48-8.48L201.51,134H40a6,6,0,0,1,0-12H201.51L139.76,60.24a6,6,0,0,1,8.48-8.48l72,72A6,6,0,0,1,220.24,132.24Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M218.83,130.83l-72,72a4,4,0,0,1-5.66-5.66L206.34,132H40a4,4,0,0,1,0-8H206.34L141.17,58.83a4,4,0,0,1,5.66-5.66l72,72A4,4,0,0,1,218.83,130.83Z"}))]]),w4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,20H72A36,36,0,0,0,36,56V224a12,12,0,0,0,12,12H192a12,12,0,0,0,0-24H60v-4a12,12,0,0,1,12-12H208a12,12,0,0,0,12-12V32A12,12,0,0,0,208,20ZM196,172H72a35.59,35.59,0,0,0-12,2.06V56A12,12,0,0,1,72,44H196Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32V192H72a24,24,0,0,0-24,24V56A24,24,0,0,1,72,32Z",opacity:"0.2"}),h.createElement("path",{d:"M208,24H72A32,32,0,0,0,40,56V224a8,8,0,0,0,8,8H192a8,8,0,0,0,0-16H56a16,16,0,0,1,16-16H208a8,8,0,0,0,8-8V32A8,8,0,0,0,208,24Zm-8,160H72a31.82,31.82,0,0,0-16,4.29V56A16,16,0,0,1,72,40H200Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,32V192a8,8,0,0,1-8,8H72a16,16,0,0,0-16,16H192a8,8,0,0,1,0,16H48a8,8,0,0,1-8-8V56A32,32,0,0,1,72,24H208A8,8,0,0,1,216,32Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,26H72A30,30,0,0,0,42,56V224a6,6,0,0,0,6,6H192a6,6,0,0,0,0-12H54v-2a18,18,0,0,1,18-18H208a6,6,0,0,0,6-6V32A6,6,0,0,0,208,26Zm-6,160H72a29.87,29.87,0,0,0-18,6V56A18,18,0,0,1,72,38H202Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,24H72A32,32,0,0,0,40,56V224a8,8,0,0,0,8,8H192a8,8,0,0,0,0-16H56a16,16,0,0,1,16-16H208a8,8,0,0,0,8-8V32A8,8,0,0,0,208,24Zm-8,160H72a31.82,31.82,0,0,0-16,4.29V56A16,16,0,0,1,72,40H200Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,28H72A28,28,0,0,0,44,56V224a4,4,0,0,0,4,4H192a4,4,0,0,0,0-8H52v-4a20,20,0,0,1,20-20H208a4,4,0,0,0,4-4V32A4,4,0,0,0,208,28Zm-4,160H72a27.94,27.94,0,0,0-20,8.42V56A20,20,0,0,1,72,36H204Z"}))]]),j4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M237.24,213.21C216.12,203,204,180.64,204,152V134.73a19.94,19.94,0,0,0-12.62-18.59l-24.86-9.81a4,4,0,0,1-2.26-5.14l21.33-53A32,32,0,0,0,167.17,6,32.13,32.13,0,0,0,126.25,24.2l-.07.18-21,53.09a3.94,3.94,0,0,1-2.14,2.2,3.89,3.89,0,0,1-3,.06L74.6,69.43A19.89,19.89,0,0,0,52.87,74C31.06,96.43,20,122.68,20,152a115.46,115.46,0,0,0,32.29,80.3A12,12,0,0,0,61,236H232a12,12,0,0,0,5.24-22.79ZM68.19,92.73,91.06,102A28,28,0,0,0,127.5,86.31l20.95-53a8.32,8.32,0,0,1,10.33-4.81,8,8,0,0,1,4.61,10.57,1.17,1.17,0,0,0,0,.11L142,92.29a28.05,28.05,0,0,0,15.68,36.33L180,137.45V152c0,1,0,2.07.05,3.1l-122.44-49A101.91,101.91,0,0,1,68.19,92.73ZM116.74,212a83.73,83.73,0,0,1-22.09-39,12,12,0,0,0-23.25,6,110.27,110.27,0,0,0,14.49,33H66.25A91.53,91.53,0,0,1,44,152a84,84,0,0,1,3.41-24.11l136.67,54.66A86.58,86.58,0,0,0,198.66,212Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M192.8,165.12,43.93,105.57A110.88,110.88,0,0,1,61.47,82.38a8,8,0,0,1,8.67-1.81L95.52,90.85a16,16,0,0,0,20.82-9l21-53.1c4.15-10,15.47-15.33,25.63-11.53a20,20,0,0,1,11.51,26.39L153.13,96.71a16,16,0,0,0,8.93,20.75L187,127.3a8,8,0,0,1,5,7.43V152A104.58,104.58,0,0,0,192.8,165.12Z",opacity:"0.2"}),h.createElement("path",{d:"M235.5,216.81c-22.56-11-35.5-34.58-35.5-64.8V134.73a15.94,15.94,0,0,0-10.09-14.87L165,110a8,8,0,0,1-4.48-10.34l21.32-53a28,28,0,0,0-16.1-37,28.14,28.14,0,0,0-35.82,16,.61.61,0,0,0,0,.12L108.9,79a8,8,0,0,1-10.37,4.49L73.11,73.14A15.89,15.89,0,0,0,55.74,76.8C34.68,98.45,24,123.75,24,152a111.45,111.45,0,0,0,31.18,77.53A8,8,0,0,0,61,232H232a8,8,0,0,0,3.5-15.19ZM67.14,88l25.41,10.3a24,24,0,0,0,31.23-13.45l21-53c2.56-6.11,9.47-9.27,15.43-7a12,12,0,0,1,6.88,15.92L145.69,93.76a24,24,0,0,0,13.43,31.14L184,134.73V152c0,.33,0,.66,0,1L55.77,101.71A108.84,108.84,0,0,1,67.14,88Zm48,128a87.53,87.53,0,0,1-24.34-42,8,8,0,0,0-15.49,4,105.16,105.16,0,0,0,18.36,38H64.44A95.54,95.54,0,0,1,40,152a85.9,85.9,0,0,1,7.73-36.29l137.8,55.12c3,18,10.56,33.48,21.89,45.16Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M235.29,216.7C212.86,205.69,200,182.12,200,152V134.69a15.94,15.94,0,0,0-10.09-14.87l-28.65-11.46A8,8,0,0,1,156.79,98l22.32-56.67C184,28.79,178,14.21,165.34,9.51a24,24,0,0,0-30.7,13.71L112.25,80.08a8,8,0,0,1-10.41,4.5L73.11,73.08a15.91,15.91,0,0,0-17.38,3.66C34.68,98.4,24,123.71,24,152a111.53,111.53,0,0,0,31.15,77.53A8.06,8.06,0,0,0,61,232H232a8,8,0,0,0,8-7.51A8.21,8.21,0,0,0,235.29,216.7ZM115.11,216a87.52,87.52,0,0,1-24.26-41.71,8.21,8.21,0,0,0-9.25-6.18A8,8,0,0,0,75.28,178a105.33,105.33,0,0,0,18.36,38H64.44A95.62,95.62,0,0,1,40,152a85.92,85.92,0,0,1,7.73-36.3l137.8,55.13c3,18.06,10.55,33.5,21.89,45.19Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M234.62,218.6C211.35,207.29,198,183,198,152V134.7a14,14,0,0,0-8.82-13l-24.89-9.83a10,10,0,0,1-5.59-13L180,45.9a26,26,0,0,0-15-34.33c-12.95-4.83-27.88,1.84-33.31,15l-21,53.11a10,10,0,0,1-13,5.61L72.37,75a13.9,13.9,0,0,0-15.2,3.19C36.49,99.42,26,124.26,26,152a109.53,109.53,0,0,0,30.62,76.16A6,6,0,0,0,61,230H232a6,6,0,0,0,2.62-11.4ZM65.77,86.52a2,2,0,0,1,2.12-.43l25.4,10.29a22,22,0,0,0,28.63-12.32l21-53c3-7.13,11-10.81,18-8.21a14,14,0,0,1,8,18.54l-21.36,53.1A22.05,22.05,0,0,0,159.86,123l24.88,9.83A2,2,0,0,1,186,134.7V152c0,1.34,0,2.65.08,4L52.74,102.61A110.07,110.07,0,0,1,65.77,86.52ZM114.33,218a89.6,89.6,0,0,1-25.5-43.5,6,6,0,1,0-11.62,3A102.87,102.87,0,0,0,97.81,218H63.56A97.56,97.56,0,0,1,38,152a87.42,87.42,0,0,1,8.71-38.86L187.35,169.4c3.15,19.92,11.77,36.66,25,48.6Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M235.5,216.81c-22.56-11-35.5-34.58-35.5-64.8V134.73a15.94,15.94,0,0,0-10.09-14.87L165,110a8,8,0,0,1-4.48-10.34l21.32-53a28,28,0,0,0-16.1-37,28.14,28.14,0,0,0-35.82,16,.61.61,0,0,0,0,.12L108.9,79a8,8,0,0,1-10.37,4.49L73.11,73.14A15.89,15.89,0,0,0,55.74,76.8C34.68,98.45,24,123.75,24,152a111.45,111.45,0,0,0,31.18,77.53A8,8,0,0,0,61,232H232a8,8,0,0,0,3.5-15.19ZM67.14,88l25.41,10.3a24,24,0,0,0,31.23-13.45l21-53c2.56-6.11,9.47-9.27,15.43-7a12,12,0,0,1,6.88,15.92L145.69,93.76a24,24,0,0,0,13.43,31.14L184,134.73V152c0,.33,0,.66,0,1L55.77,101.71A108.84,108.84,0,0,1,67.14,88Zm48,128a87.53,87.53,0,0,1-24.34-42,8,8,0,0,0-15.49,4,105.16,105.16,0,0,0,18.36,38H64.44A95.54,95.54,0,0,1,40,152a85.9,85.9,0,0,1,7.73-36.29l137.8,55.12c3,18,10.56,33.48,21.89,45.16Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M233.75,220.4C209.76,208.75,196,183.82,196,152V134.72a12,12,0,0,0-7.56-11.15l-24.89-9.83a12,12,0,0,1-6.71-15.55l21.33-53a23.88,23.88,0,0,0-31.93-31A24.72,24.72,0,0,0,133.62,27.3l-21,53.1A12,12,0,0,1,97,87.13L71.63,76.84a12,12,0,0,0-13,2.73C38.3,100.45,28,124.82,28,152a107.5,107.5,0,0,0,30.07,74.77A4,4,0,0,0,61,228H232a4,4,0,0,0,1.75-7.6ZM64.34,85.15a3.94,3.94,0,0,1,4.3-.89L94,94.55a20,20,0,0,0,26-11.2l21-53C144.39,22.19,153.61,18,161.58,21a16,16,0,0,1,9.19,21.16L149.41,95.22a20,20,0,0,0,11.18,26l24.9,9.83a4,4,0,0,1,2.51,3.72V152c0,2.36.08,4.69.22,7l-138.5-55.4A110.84,110.84,0,0,1,64.34,85.15ZM113.56,220A91.35,91.35,0,0,1,86.9,175a4,4,0,0,0-7.75,2,100.21,100.21,0,0,0,23.09,43H62.68A99.5,99.5,0,0,1,36,152a89.37,89.37,0,0,1,9.73-41.4L189.13,168c3.22,22,13.23,40.09,28.8,52Z"}))]]),N4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L137,128ZM57,128l71.52-71.51a12,12,0,0,0-17-17l-80,80a12,12,0,0,0,0,17l80,80a12,12,0,0,0,17-17Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M200,48V208l-80-80Z",opacity:"0.2"}),h.createElement("path",{d:"M203.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,208,208V48A8,8,0,0,0,203.06,40.61ZM192,188.69,131.31,128,192,67.31Zm-66.34,13.65a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L51.31,128Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,48V208a8,8,0,0,1-13.66,5.66L128,147.31V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,128,48v60.69l66.34-66.35A8,8,0,0,1,208,48Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M204.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L128.49,128ZM48.49,128l75.75-75.76a6,6,0,0,0-8.48-8.48l-80,80a6,6,0,0,0,0,8.48l80,80a6,6,0,1,0,8.48-8.48Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M205.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L131.31,128ZM51.31,128l74.35-74.34a8,8,0,0,0-11.32-11.32l-80,80a8,8,0,0,0,0,11.32l80,80a8,8,0,0,0,11.32-11.32Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M202.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L125.66,128ZM45.66,128l77.17-77.17a4,4,0,0,0-5.66-5.66l-80,80a4,4,0,0,0,0,5.66l80,80a4,4,0,1,0,5.66-5.66Z"}))]]),S4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M144.49,136.49l-80,80a12,12,0,0,1-17-17L119,128,47.51,56.49a12,12,0,0,1,17-17l80,80A12,12,0,0,1,144.49,136.49Zm80-17-80-80a12,12,0,1,0-17,17L199,128l-71.52,71.51a12,12,0,0,0,17,17l80-80A12,12,0,0,0,224.49,119.51Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M136,128,56,208V48Z",opacity:"0.2"}),h.createElement("path",{d:"M141.66,122.34l-80-80A8,8,0,0,0,48,48V208a8,8,0,0,0,13.66,5.66l80-80A8,8,0,0,0,141.66,122.34ZM64,188.69V67.31L124.69,128Zm157.66-55-80,80a8,8,0,0,1-11.32-11.32L204.69,128,130.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,221.66,133.66Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M221.66,133.66l-80,80A8,8,0,0,1,128,208V147.31L61.66,213.66A8,8,0,0,1,48,208V48a8,8,0,0,1,13.66-5.66L128,108.69V48a8,8,0,0,1,13.66-5.66l80,80A8,8,0,0,1,221.66,133.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M140.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L127.51,128,51.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,140.24,132.24Zm80-8.48-80-80a6,6,0,0,0-8.48,8.48L207.51,128l-75.75,75.76a6,6,0,1,0,8.48,8.48l80-80A6,6,0,0,0,220.24,123.76Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M141.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L124.69,128,50.34,53.66A8,8,0,0,1,61.66,42.34l80,80A8,8,0,0,1,141.66,133.66Zm80-11.32-80-80a8,8,0,0,0-11.32,11.32L204.69,128l-74.35,74.34a8,8,0,0,0,11.32,11.32l80-80A8,8,0,0,0,221.66,122.34Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M138.83,130.83l-80,80a4,4,0,0,1-5.66-5.66L130.34,128,53.17,50.83a4,4,0,0,1,5.66-5.66l80,80A4,4,0,0,1,138.83,130.83Zm80-5.66-80-80a4,4,0,0,0-5.66,5.66L210.34,128l-77.17,77.17a4,4,0,0,0,5.66,5.66l80-80A4,4,0,0,0,218.83,125.17Z"}))]]),E4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),h.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]),C4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M176,128,96,208V48Z",opacity:"0.2"}),h.createElement("path",{d:"M181.66,122.34l-80-80A8,8,0,0,0,88,48V208a8,8,0,0,0,13.66,5.66l80-80A8,8,0,0,0,181.66,122.34ZM104,188.69V67.31L164.69,128Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M181.66,133.66l-80,80A8,8,0,0,1,88,208V48a8,8,0,0,1,13.66-5.66l80,80A8,8,0,0,1,181.66,133.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M180.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L167.51,128,91.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,180.24,132.24Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M178.83,130.83l-80,80a4,4,0,0,1-5.66-5.66L170.34,128,93.17,50.83a4,4,0,0,1,5.66-5.66l80,80A4,4,0,0,1,178.83,130.83Z"}))]]),I4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M79.51,144.49a12,12,0,1,1,17-17L112,143l47.51-47.52a12,12,0,0,1,17,17l-56,56a12,12,0,0,1-17,0ZM228,48V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28H208A20,20,0,0,1,228,48Zm-24,4H52V204H204Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),h.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm-34.34,77.66-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76ZM222,48V208a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34H208A14,14,0,0,1,222,48Zm-12,0a2,2,0,0,0-2-2H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M170.83,101.17a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17ZM220,48V208a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36H208A12,12,0,0,1,220,48Zm-8,0a4,4,0,0,0-4-4H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4Z"}))]]),A4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M152.41,88.56l-89.6,88a12,12,0,0,1-16.82,0L7.59,138.85a12,12,0,0,1,16.82-17.13l30,29.46,81.19-79.74a12,12,0,0,1,16.82,17.12Zm96.15-17a12,12,0,0,0-17-.15L150.4,151.18l-7.88-7.74a12,12,0,0,0-16.82,17.12l16.29,16a12,12,0,0,0,16.82,0l89.6-88A12,12,0,0,0,248.56,71.59Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240,64V192a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V64A16,16,0,0,1,32,48H224A16,16,0,0,1,240,64Z",opacity:"0.2"}),h.createElement("path",{d:"M149.61,85.71l-89.6,88a8,8,0,0,1-11.22,0L10.39,136a8,8,0,1,1,11.22-11.41L54.4,156.79l84-82.5a8,8,0,1,1,11.22,11.42Zm96.1-11.32a8,8,0,0,0-11.32-.1l-84,82.5-18.83-18.5a8,8,0,0,0-11.21,11.42l24.43,24a8,8,0,0,0,11.22,0l89.6-88A8,8,0,0,0,245.71,74.39Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM72,168a8,8,0,0,1-5.66-2.34l-24-24a8,8,0,0,1,11.32-11.32L72,148.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-64,64A8,8,0,0,1,72,168Zm141.66-66.34-64,64a8,8,0,0,1-11.32,0l-16-16a8,8,0,0,1,11.32-11.32L144,148.69l58.34-58.35a8,8,0,0,1,11.32,11.32Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M148.2,84.28l-89.6,88a6,6,0,0,1-8.4,0L11.8,134.57A6,6,0,1,1,20.2,126l34.2,33.58,85.4-83.87a6,6,0,1,1,8.4,8.56Zm96.08-8.48a6,6,0,0,0-8.48-.08l-85.4,83.87-20.23-19.87a6,6,0,1,0-8.41,8.56l24.44,24a6,6,0,0,0,8.4,0l89.6-88A6,6,0,0,0,244.28,75.8Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M149.61,85.71l-89.6,88a8,8,0,0,1-11.22,0L10.39,136a8,8,0,1,1,11.22-11.41L54.4,156.79l84-82.5a8,8,0,1,1,11.22,11.42Zm96.1-11.32a8,8,0,0,0-11.32-.1l-84,82.5-18.83-18.5a8,8,0,0,0-11.21,11.42l24.43,24a8,8,0,0,0,11.22,0l89.6-88A8,8,0,0,0,245.71,74.39Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M146.8,82.85l-89.6,88a4,4,0,0,1-5.6,0L13.2,133.14a4,4,0,0,1,5.6-5.71l35.6,35,86.8-85.24a4,4,0,0,1,5.6,5.7Zm96-5.65a4,4,0,0,0-5.65,0l-86.8,85.24-21.63-21.24a4,4,0,1,0-5.61,5.7l24.44,24a4,4,0,0,0,5.6,0l89.6-88A4,4,0,0,0,242.85,77.2Z"}))]]),M4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M192.49,167.51a12,12,0,0,1,0,17l-32,32a12,12,0,0,1-17,0l-32-32a12,12,0,1,1,17-17L140,179V128a12,12,0,0,1,24,0v51l11.51-11.52A12,12,0,0,1,192.49,167.51ZM160,36A92.08,92.08,0,0,0,79,84.37,68,68,0,1,0,72,220H84a12,12,0,0,0,0-24H72a44,44,0,0,1-1.81-87.95A91.7,91.7,0,0,0,68,128a12,12,0,0,0,24,0,68,68,0,0,1,136,0,67.27,67.27,0,0,1-7.25,30.59,12,12,0,1,0,21.42,10.82A91.08,91.08,0,0,0,252,128,92.1,92.1,0,0,0,160,36Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240,128a80,80,0,0,1-80,80H72A56,56,0,1,1,85.92,97.74l0,.1A80,80,0,0,1,240,128Z",opacity:"0.2"}),h.createElement("path",{d:"M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-69.66,42.34L160,188.69V128a8,8,0,0,0-16,0v60.69l-18.34-18.35a8,8,0,0,0-11.32,11.32l32,32a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0-11.32-11.32Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M247.93,124.52C246.11,77.54,207.07,40,160.06,40A88.1,88.1,0,0,0,81.29,88.67h0A87.48,87.48,0,0,0,72,127.73,8.18,8.18,0,0,1,64.57,136,8,8,0,0,1,56,128a103.66,103.66,0,0,1,5.34-32.92,4,4,0,0,0-4.75-5.18A64.09,64.09,0,0,0,8,152c0,35.19,29.75,64,65,64H160A88.09,88.09,0,0,0,247.93,124.52Zm-50.27,25.14-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L152,156.69V96a8,8,0,0,1,16,0v60.69l18.34-18.35a8,8,0,0,1,11.32,11.32Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M246,128a85.27,85.27,0,0,1-17.2,51.6,6,6,0,1,1-9.6-7.2A74,74,0,1,0,86,128a6,6,0,0,1-12,0,85.54,85.54,0,0,1,3.91-25.64A50.68,50.68,0,0,0,72,102a50,50,0,0,0,0,100H96a6,6,0,0,1,0,12H72A62,62,0,1,1,82.43,90.88,86,86,0,0,1,246,128Zm-66.24,43.76L158,193.51V128a6,6,0,0,0-12,0v65.51l-21.76-21.75a6,6,0,0,0-8.48,8.48l32,32a6,6,0,0,0,8.48,0l32-32a6,6,0,0,0-8.48-8.48Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-69.66,42.34L160,188.69V128a8,8,0,0,0-16,0v60.69l-18.34-18.35a8,8,0,0,0-11.32,11.32l32,32a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0-11.32-11.32Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M244,128a83.28,83.28,0,0,1-16.8,50.4,4,4,0,1,1-6.4-4.8A76,76,0,1,0,84,128a4,4,0,0,1-8,0,83.45,83.45,0,0,1,4.57-27.27A52,52,0,1,0,72,204H96a4,4,0,0,1,0,8H72A60,60,0,1,1,83.61,93.13,84,84,0,0,1,244,128Zm-62.83,45.17L156,198.34V128a4,4,0,0,0-8,0v70.34l-25.17-25.17a4,4,0,0,0-5.66,5.66l32,32a4,4,0,0,0,5.66,0l32-32a4,4,0,0,0-5.66-5.66Z"}))]]),D4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,40V168H168V88H88V40Z",opacity:"0.2"}),h.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"}))]]),k4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32V224a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V32A16,16,0,0,1,64,16H192A16,16,0,0,1,208,32Z",opacity:"0.2"}),h.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M192,16H64A16,16,0,0,0,48,32V224a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V32A16,16,0,0,0,192,16ZM100,200a12,12,0,1,1,12-12A12,12,0,0,1,100,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,80Zm56,120a12,12,0,1,1,12-12A12,12,0,0,1,156,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,80Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M102,60A10,10,0,1,1,92,50,10,10,0,0,1,102,60Zm62,10a10,10,0,1,0-10-10A10,10,0,0,0,164,70ZM92,118a10,10,0,1,0,10,10A10,10,0,0,0,92,118Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,118ZM92,186a10,10,0,1,0,10,10A10,10,0,0,0,92,186Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,186Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M100,60a8,8,0,1,1-8-8A8,8,0,0,1,100,60Zm64,8a8,8,0,1,0-8-8A8,8,0,0,0,164,68ZM92,120a8,8,0,1,0,8,8A8,8,0,0,0,92,120Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,120ZM92,188a8,8,0,1,0,8,8A8,8,0,0,0,92,188Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,188Z"}))]]),O4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"}),h.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"}))]]),T4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"}),h.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40A8,8,0,0,0,168,96H136V32a8,8,0,0,0-16,0V96H88a8,8,0,0,0-5.66,13.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,129.51V32a6,6,0,0,0-12,0v97.51L92.24,99.76a6,6,0,0,0-8.48,8.48Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,134.34V32a4,4,0,0,0-8,0V134.34L90.83,101.17a4,4,0,0,0-5.66,5.66Z"}))]]),F4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Zm100.49-60.49a12,12,0,0,1,0,17l-24,24a12,12,0,0,1-17,0l-24-24a12,12,0,0,1,17-17L116,155V124a12,12,0,0,1,24,0v31l3.51-3.52A12,12,0,0,1,160.49,151.51Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-61.66a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35A8,8,0,0,1,157.66,154.34Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Zm-56,83.32-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35a8,8,0,0,1,11.32,11.32ZM152,88V44l44,44Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Zm-43.76-62.24a6,6,0,0,1,0,8.48l-24,24a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L122,169.51V120a6,6,0,0,1,12,0v49.51l13.76-13.75A6,6,0,0,1,156.24,155.76Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-61.66a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35A8,8,0,0,1,157.66,154.34Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Zm-45.17-62.83a4,4,0,0,1,0,5.66l-24,24a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L124,174.34V120a4,4,0,0,1,8,0v54.34l17.17-17.17A4,4,0,0,1,154.83,157.17Z"}))]]),L4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM183,80H160V57ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Zm100.49-72.49a12,12,0,0,1-17,17L140,153v31a12,12,0,0,1-24,0V153l-3.51,3.52a12,12,0,0,1-17-17l24-24a12,12,0,0,1,17,0Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-77.66a8,8,0,0,1-11.32,11.32L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Zm-56,67.32a8,8,0,0,1-11.32,0L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0l24,24A8,8,0,0,1,157.66,149.66ZM152,88V44l44,44Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Zm-43.76-78.24a6,6,0,1,1-8.48,8.48L134,134.49V184a6,6,0,0,1-12,0V134.49l-13.76,13.75a6,6,0,0,1-8.48-8.48l24-24a6,6,0,0,1,8.48,0Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-77.66a8,8,0,0,1-11.32,11.32L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Zm-45.17-78.83a4,4,0,0,1-5.66,5.66L132,129.66V184a4,4,0,0,1-8,0V129.66l-17.17,17.17a4,4,0,0,1-5.66-5.66l24-24a4,4,0,0,1,5.66,0Z"}))]]),P4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M248.49,71.51l-32-32a12,12,0,0,0-17,17L211,68h-3c-52,0-64.8,30.71-75.08,55.38-8.82,21.17-15.45,37.05-42.75,40.09a44,44,0,1,0,.28,24.08c43.34-3.87,55.07-32,64.63-54.93C164.9,109,172,92,208,92h3l-11.52,11.51a12,12,0,0,0,17,17l32-32A12,12,0,0,0,248.49,71.51ZM48,196a20,20,0,1,1,20-20A20,20,0,0,1,48,196Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M80,176a32,32,0,1,1-32-32A32,32,0,0,1,80,176Z",opacity:"0.2"}),h.createElement("path",{d:"M245.66,74.34l-32-32a8,8,0,0,0-11.32,11.32L220.69,72H208c-49.33,0-61.05,28.12-71.38,52.92-9.38,22.51-16.92,40.59-49.48,42.84a40,40,0,1,0,.1,16c43.26-2.65,54.34-29.15,64.14-52.69C161.41,107,169.33,88,208,88h12.69l-18.35,18.34a8,8,0,0,0,11.32,11.32l32-32A8,8,0,0,0,245.66,74.34ZM48,200a24,24,0,1,1,24-24A24,24,0,0,1,48,200Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M245.66,85.66l-32,32a8,8,0,0,1-11.32-11.32L220.69,88H208c-38.67,0-46.59,19-56.62,43.08C141.05,155.88,129.33,184,80,184H79a32,32,0,1,1,0-16h1c38.67,0,46.59-19,56.62-43.08C147,100.12,158.67,72,208,72h12.69L202.34,53.66a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,245.66,85.66Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M244.24,75.76l-32-32a6,6,0,0,0-8.48,8.48L225.51,74H208c-48,0-59.44,27.46-69.54,51.69-9.43,22.64-17.66,42.33-53,44.16a38,38,0,1,0,.06,12c43.34-2.06,54.29-28.29,64-51.55C159.44,106.53,168,86,208,86h17.51l-21.75,21.76a6,6,0,1,0,8.48,8.48l32-32A6,6,0,0,0,244.24,75.76ZM48,202a26,26,0,1,1,26-26A26,26,0,0,1,48,202Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M245.66,74.34l-32-32a8,8,0,0,0-11.32,11.32L220.69,72H208c-49.33,0-61.05,28.12-71.38,52.92-9.38,22.51-16.92,40.59-49.48,42.84a40,40,0,1,0,.1,16c43.26-2.65,54.34-29.15,64.14-52.69C161.41,107,169.33,88,208,88h12.69l-18.35,18.34a8,8,0,0,0,11.32,11.32l32-32A8,8,0,0,0,245.66,74.34ZM48,200a24,24,0,1,1,24-24A24,24,0,0,1,48,200Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M242.83,77.17l-32-32a4,4,0,0,0-5.66,5.66L230.34,76H208c-46.67,0-57.84,26.81-67.69,50.46-9.46,22.69-18.4,44.16-56.55,45.48a36,36,0,1,0,0,8c43.49-1.42,54.33-27.39,63.91-50.39C157.45,106.12,166.67,84,208,84h22.34l-25.17,25.17a4,4,0,0,0,5.66,5.66l32-32A4,4,0,0,0,242.83,77.17ZM48,204a28,28,0,1,1,28-28A28,28,0,0,1,48,204Z"}))]]),$4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm92-27.21v-1.58l14-17.51a12,12,0,0,0,2.23-10.59A111.75,111.75,0,0,0,225,71.89,12,12,0,0,0,215.89,66L193.61,63.5l-1.11-1.11L190,40.1A12,12,0,0,0,184.11,31a111.67,111.67,0,0,0-27.23-11.27A12,12,0,0,0,146.3,22L128.79,36h-1.58L109.7,22a12,12,0,0,0-10.59-2.23A111.75,111.75,0,0,0,71.89,31.05,12,12,0,0,0,66,40.11L63.5,62.39,62.39,63.5,40.1,66A12,12,0,0,0,31,71.89,111.67,111.67,0,0,0,19.77,99.12,12,12,0,0,0,22,109.7l14,17.51v1.58L22,146.3a12,12,0,0,0-2.23,10.59,111.75,111.75,0,0,0,11.29,27.22A12,12,0,0,0,40.11,190l22.28,2.48,1.11,1.11L66,215.9A12,12,0,0,0,71.89,225a111.67,111.67,0,0,0,27.23,11.27A12,12,0,0,0,109.7,234l17.51-14h1.58l17.51,14a12,12,0,0,0,10.59,2.23A111.75,111.75,0,0,0,184.11,225a12,12,0,0,0,5.91-9.06l2.48-22.28,1.11-1.11L215.9,190a12,12,0,0,0,9.06-5.91,111.67,111.67,0,0,0,11.27-27.23A12,12,0,0,0,234,146.3Zm-24.12-4.89a70.1,70.1,0,0,1,0,8.2,12,12,0,0,0,2.61,8.22l12.84,16.05A86.47,86.47,0,0,1,207,166.86l-20.43,2.27a12,12,0,0,0-7.65,4,69,69,0,0,1-5.8,5.8,12,12,0,0,0-4,7.65L166.86,207a86.47,86.47,0,0,1-10.49,4.35l-16.05-12.85a12,12,0,0,0-7.5-2.62c-.24,0-.48,0-.72,0a70.1,70.1,0,0,1-8.2,0,12.06,12.06,0,0,0-8.22,2.6L99.63,211.33A86.47,86.47,0,0,1,89.14,207l-2.27-20.43a12,12,0,0,0-4-7.65,69,69,0,0,1-5.8-5.8,12,12,0,0,0-7.65-4L49,166.86a86.47,86.47,0,0,1-4.35-10.49l12.84-16.05a12,12,0,0,0,2.61-8.22,70.1,70.1,0,0,1,0-8.2,12,12,0,0,0-2.61-8.22L44.67,99.63A86.47,86.47,0,0,1,49,89.14l20.43-2.27a12,12,0,0,0,7.65-4,69,69,0,0,1,5.8-5.8,12,12,0,0,0,4-7.65L89.14,49a86.47,86.47,0,0,1,10.49-4.35l16.05,12.85a12.06,12.06,0,0,0,8.22,2.6,70.1,70.1,0,0,1,8.2,0,12,12,0,0,0,8.22-2.6l16.05-12.85A86.47,86.47,0,0,1,166.86,49l2.27,20.43a12,12,0,0,0,4,7.65,69,69,0,0,1,5.8,5.8,12,12,0,0,0,7.65,4L207,89.14a86.47,86.47,0,0,1,4.35,10.49l-12.84,16.05A12,12,0,0,0,195.88,123.9Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M207.86,123.18l16.78-21a99.14,99.14,0,0,0-10.07-24.29l-26.7-3a81,81,0,0,0-6.81-6.81l-3-26.71a99.43,99.43,0,0,0-24.3-10l-21,16.77a81.59,81.59,0,0,0-9.64,0l-21-16.78A99.14,99.14,0,0,0,77.91,41.43l-3,26.7a81,81,0,0,0-6.81,6.81l-26.71,3a99.43,99.43,0,0,0-10,24.3l16.77,21a81.59,81.59,0,0,0,0,9.64l-16.78,21a99.14,99.14,0,0,0,10.07,24.29l26.7,3a81,81,0,0,0,6.81,6.81l3,26.71a99.43,99.43,0,0,0,24.3,10l21-16.77a81.59,81.59,0,0,0,9.64,0l21,16.78a99.14,99.14,0,0,0,24.29-10.07l3-26.7a81,81,0,0,0,6.81-6.81l26.71-3a99.43,99.43,0,0,0,10-24.3l-16.77-21A81.59,81.59,0,0,0,207.86,123.18ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}),h.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8.06,8.06,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8.06,8.06,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,130.16q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162ZM214,130.84c.06-1.89.06-3.79,0-5.68L229.33,106a6,6,0,0,0,1.11-5.29A105.34,105.34,0,0,0,219.76,74.9a6,6,0,0,0-4.53-3l-24.45-2.71q-1.93-2.07-4-4l-2.72-24.46a6,6,0,0,0-3-4.53,105.65,105.65,0,0,0-25.77-10.66A6,6,0,0,0,150,26.68l-19.2,15.37c-1.89-.06-3.79-.06-5.68,0L106,26.67a6,6,0,0,0-5.29-1.11A105.34,105.34,0,0,0,74.9,36.24a6,6,0,0,0-3,4.53L69.23,65.22q-2.07,1.94-4,4L40.76,72a6,6,0,0,0-4.53,3,105.65,105.65,0,0,0-10.66,25.77A6,6,0,0,0,26.68,106l15.37,19.2c-.06,1.89-.06,3.79,0,5.68L26.67,150.05a6,6,0,0,0-1.11,5.29A105.34,105.34,0,0,0,36.24,181.1a6,6,0,0,0,4.53,3l24.45,2.71q1.94,2.07,4,4L72,215.24a6,6,0,0,0,3,4.53,105.65,105.65,0,0,0,25.77,10.66,6,6,0,0,0,5.29-1.11L125.16,214c1.89.06,3.79.06,5.68,0l19.21,15.38a6,6,0,0,0,3.75,1.31,6.2,6.2,0,0,0,1.54-.2,105.34,105.34,0,0,0,25.76-10.68,6,6,0,0,0,3-4.53l2.71-24.45q2.07-1.93,4-4l24.46-2.72a6,6,0,0,0,4.53-3,105.49,105.49,0,0,0,10.66-25.77,6,6,0,0,0-1.11-5.29Zm-3.1,41.63-23.64,2.63a6,6,0,0,0-3.82,2,75.14,75.14,0,0,1-6.31,6.31,6,6,0,0,0-2,3.82l-2.63,23.63A94.28,94.28,0,0,1,155.14,218l-18.57-14.86a6,6,0,0,0-3.75-1.31h-.36a78.07,78.07,0,0,1-8.92,0,6,6,0,0,0-4.11,1.3L100.87,218a94.13,94.13,0,0,1-17.34-7.17L80.9,187.21a6,6,0,0,0-2-3.82,75.14,75.14,0,0,1-6.31-6.31,6,6,0,0,0-3.82-2l-23.63-2.63A94.28,94.28,0,0,1,38,155.14l14.86-18.57a6,6,0,0,0,1.3-4.11,78.07,78.07,0,0,1,0-8.92,6,6,0,0,0-1.3-4.11L38,100.87a94.13,94.13,0,0,1,7.17-17.34L68.79,80.9a6,6,0,0,0,3.82-2,75.14,75.14,0,0,1,6.31-6.31,6,6,0,0,0,2-3.82l2.63-23.63A94.28,94.28,0,0,1,100.86,38l18.57,14.86a6,6,0,0,0,4.11,1.3,78.07,78.07,0,0,1,8.92,0,6,6,0,0,0,4.11-1.3L155.13,38a94.13,94.13,0,0,1,17.34,7.17l2.63,23.64a6,6,0,0,0,2,3.82,75.14,75.14,0,0,1,6.31,6.31,6,6,0,0,0,3.82,2l23.63,2.63A94.28,94.28,0,0,1,218,100.86l-14.86,18.57a6,6,0,0,0-1.3,4.11,78.07,78.07,0,0,1,0,8.92,6,6,0,0,0,1.3,4.11L218,155.13A94.13,94.13,0,0,1,210.85,172.47Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,84a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,84Zm0,80a36,36,0,1,1,36-36A36,36,0,0,1,128,164Zm83.93-32.49q.13-3.51,0-7l15.83-19.79a4,4,0,0,0,.75-3.53A103.64,103.64,0,0,0,218,75.9a4,4,0,0,0-3-2l-25.19-2.8c-1.58-1.71-3.24-3.37-4.95-4.95L182.07,41a4,4,0,0,0-2-3A104,104,0,0,0,154.82,27.5a4,4,0,0,0-3.53.74L131.51,44.07q-3.51-.14-7,0L104.7,28.24a4,4,0,0,0-3.53-.75A103.64,103.64,0,0,0,75.9,38a4,4,0,0,0-2,3l-2.8,25.19c-1.71,1.58-3.37,3.24-4.95,4.95L41,73.93a4,4,0,0,0-3,2A104,104,0,0,0,27.5,101.18a4,4,0,0,0,.74,3.53l15.83,19.78q-.14,3.51,0,7L28.24,151.3a4,4,0,0,0-.75,3.53A103.64,103.64,0,0,0,38,180.1a4,4,0,0,0,3,2l25.19,2.8c1.58,1.71,3.24,3.37,4.95,4.95l2.8,25.2a4,4,0,0,0,2,3,104,104,0,0,0,25.28,10.46,4,4,0,0,0,3.53-.74l19.78-15.83q3.51.13,7,0l19.79,15.83a4,4,0,0,0,2.5.88,4,4,0,0,0,1-.13A103.64,103.64,0,0,0,180.1,218a4,4,0,0,0,2-3l2.8-25.19c1.71-1.58,3.37-3.24,4.95-4.95l25.2-2.8a4,4,0,0,0,3-2,104,104,0,0,0,10.46-25.28,4,4,0,0,0-.74-3.53Zm.17,42.83-24.67,2.74a4,4,0,0,0-2.55,1.32,76.2,76.2,0,0,1-6.48,6.48,4,4,0,0,0-1.32,2.55l-2.74,24.66a95.45,95.45,0,0,1-19.64,8.15l-19.38-15.51a4,4,0,0,0-2.5-.87h-.24a73.67,73.67,0,0,1-9.16,0,4,4,0,0,0-2.74.87l-19.37,15.5a95.33,95.33,0,0,1-19.65-8.13l-2.74-24.67a4,4,0,0,0-1.32-2.55,76.2,76.2,0,0,1-6.48-6.48,4,4,0,0,0-2.55-1.32l-24.66-2.74a95.45,95.45,0,0,1-8.15-19.64l15.51-19.38a4,4,0,0,0,.87-2.74,77.76,77.76,0,0,1,0-9.16,4,4,0,0,0-.87-2.74l-15.5-19.37A95.33,95.33,0,0,1,43.9,81.66l24.67-2.74a4,4,0,0,0,2.55-1.32,76.2,76.2,0,0,1,6.48-6.48,4,4,0,0,0,1.32-2.55l2.74-24.66a95.45,95.45,0,0,1,19.64-8.15l19.38,15.51a4,4,0,0,0,2.74.87,73.67,73.67,0,0,1,9.16,0,4,4,0,0,0,2.74-.87l19.37-15.5a95.33,95.33,0,0,1,19.65,8.13l2.74,24.67a4,4,0,0,0,1.32,2.55,76.2,76.2,0,0,1,6.48,6.48,4,4,0,0,0,2.55,1.32l24.66,2.74a95.45,95.45,0,0,1,8.15,19.64l-15.51,19.38a4,4,0,0,0-.87,2.74,77.76,77.76,0,0,1,0,9.16,4,4,0,0,0,.87,2.74l15.5,19.37A95.33,95.33,0,0,1,212.1,174.34Z"}))]]),_4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,68H190.06A33.82,33.82,0,0,0,196,49.69,36.62,36.62,0,0,0,158.31,12,33.44,33.44,0,0,0,134,23.25a54.65,54.65,0,0,0-6,8.3,54.65,54.65,0,0,0-6-8.3A33.44,33.44,0,0,0,97.69,12,36.62,36.62,0,0,0,60,49.69,33.82,33.82,0,0,0,65.94,68H40A20,20,0,0,0,20,88v32a20,20,0,0,0,16,19.6V200a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V139.6A20,20,0,0,0,236,120V88A20,20,0,0,0,216,68Zm-4,48H140V92h72ZM152,39.17A9.59,9.59,0,0,1,159,36h.35A12.62,12.62,0,0,1,172,49,9.59,9.59,0,0,1,168.83,56c-6.9,6.12-18.25,9.26-27.63,10.76C142.7,57.42,145.84,46.07,152,39.17ZM87.7,39.7A12.8,12.8,0,0,1,96.61,36H97A9.59,9.59,0,0,1,104,39.17c6.12,6.9,9.26,18.24,10.75,27.61C105.45,65.27,94,62.13,87.17,56A9.59,9.59,0,0,1,84,49,12.72,12.72,0,0,1,87.7,39.7ZM44,92h72v24H44Zm16,48h56v56H60Zm80,56V140h56v56Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,128v72a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V128Z",opacity:"0.2"}),h.createElement("path",{d:"M216,72H180.92c.39-.33.79-.65,1.17-1A29.53,29.53,0,0,0,192,49.57,32.62,32.62,0,0,0,158.44,16,29.53,29.53,0,0,0,137,25.91a54.94,54.94,0,0,0-9,14.48,54.94,54.94,0,0,0-9-14.48A29.53,29.53,0,0,0,97.56,16,32.62,32.62,0,0,0,64,49.57,29.53,29.53,0,0,0,73.91,71c.38.33.78.65,1.17,1H40A16,16,0,0,0,24,88v32a16,16,0,0,0,16,16v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V136a16,16,0,0,0,16-16V88A16,16,0,0,0,216,72ZM149,36.51a13.69,13.69,0,0,1,10-4.5h.49A16.62,16.62,0,0,1,176,49.08a13.69,13.69,0,0,1-4.5,10c-9.49,8.4-25.24,11.36-35,12.4C137.7,60.89,141,45.5,149,36.51Zm-64.09.36A16.63,16.63,0,0,1,96.59,32h.49a13.69,13.69,0,0,1,10,4.5c8.39,9.48,11.35,25.2,12.39,34.92-9.72-1-25.44-4-34.92-12.39a13.69,13.69,0,0,1-4.5-10A16.6,16.6,0,0,1,84.87,36.87ZM40,88h80v32H40Zm16,48h64v64H56Zm144,64H136V136h64Zm16-80H136V88h80v32Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,72H180.92c.39-.33.79-.65,1.17-1A29.53,29.53,0,0,0,192,49.57,32.62,32.62,0,0,0,158.44,16,29.53,29.53,0,0,0,137,25.91a54.94,54.94,0,0,0-9,14.48,54.94,54.94,0,0,0-9-14.48A29.53,29.53,0,0,0,97.56,16,32.62,32.62,0,0,0,64,49.57,29.53,29.53,0,0,0,73.91,71c.38.33.78.65,1.17,1H40A16,16,0,0,0,24,88v32a16,16,0,0,0,16,16v64a16,16,0,0,0,16,16h60a4,4,0,0,0,4-4V120H40V88h80v32h16V88h80v32H136v92a4,4,0,0,0,4,4h60a16,16,0,0,0,16-16V136a16,16,0,0,0,16-16V88A16,16,0,0,0,216,72ZM84.51,59a13.69,13.69,0,0,1-4.5-10A16.62,16.62,0,0,1,96.59,32h.49a13.69,13.69,0,0,1,10,4.5c8.39,9.48,11.35,25.2,12.39,34.92C109.71,70.39,94,67.43,84.51,59Zm87,0c-9.49,8.4-25.24,11.36-35,12.4C137.7,60.89,141,45.5,149,36.51a13.69,13.69,0,0,1,10-4.5h.49A16.62,16.62,0,0,1,176,49.08,13.69,13.69,0,0,1,171.49,59Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,74H174.74a46.41,46.41,0,0,0,6-4.48,27.56,27.56,0,0,0,9.22-20A30.63,30.63,0,0,0,158.5,18a27.56,27.56,0,0,0-20,9.22A57.1,57.1,0,0,0,128,45.76a57.1,57.1,0,0,0-10.48-18.53A27.56,27.56,0,0,0,97.5,18,30.63,30.63,0,0,0,66,49.51a27.56,27.56,0,0,0,9.22,20,45.74,45.74,0,0,0,6,4.48H40A14,14,0,0,0,26,88v32a14,14,0,0,0,14,14h2v66a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V134h2a14,14,0,0,0,14-14V88A14,14,0,0,0,216,74ZM135.77,63c2.25-12.12,6.29-21.75,11.69-27.85A15.68,15.68,0,0,1,158.86,30h.55A18.6,18.6,0,0,1,178,49.14a15.68,15.68,0,0,1-5.18,11.4C162.1,70,143.92,72.83,134.34,73.65,134.59,70.76,135,67.08,135.77,63ZM83.45,35.45A18.69,18.69,0,0,1,96.59,30h.55a15.68,15.68,0,0,1,11.4,5.18C118,45.9,120.83,64.08,121.65,73.66c-2.89-.25-6.57-.68-10.61-1.43C98.92,70,89.29,65.94,83.19,60.53A15.64,15.64,0,0,1,78,49.14,18.65,18.65,0,0,1,83.45,35.45ZM38,120V88a2,2,0,0,1,2-2h82v36H40A2,2,0,0,1,38,120Zm16,80V134h68v68H56A2,2,0,0,1,54,200Zm148,0a2,2,0,0,1-2,2H134V134h68Zm16-80a2,2,0,0,1-2,2H134V86h82a2,2,0,0,1,2,2Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,72H180.92c.39-.33.79-.65,1.17-1A29.53,29.53,0,0,0,192,49.57,32.62,32.62,0,0,0,158.44,16,29.53,29.53,0,0,0,137,25.91a54.94,54.94,0,0,0-9,14.48,54.94,54.94,0,0,0-9-14.48A29.53,29.53,0,0,0,97.56,16,32.62,32.62,0,0,0,64,49.57,29.53,29.53,0,0,0,73.91,71c.38.33.78.65,1.17,1H40A16,16,0,0,0,24,88v32a16,16,0,0,0,16,16v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V136a16,16,0,0,0,16-16V88A16,16,0,0,0,216,72ZM149,36.51a13.69,13.69,0,0,1,10-4.5h.49A16.62,16.62,0,0,1,176,49.08a13.69,13.69,0,0,1-4.5,10c-9.49,8.4-25.24,11.36-35,12.4C137.7,60.89,141,45.5,149,36.51Zm-64.09.36A16.63,16.63,0,0,1,96.59,32h.49a13.69,13.69,0,0,1,10,4.5c8.39,9.48,11.35,25.2,12.39,34.92-9.72-1-25.44-4-34.92-12.39a13.69,13.69,0,0,1-4.5-10A16.6,16.6,0,0,1,84.87,36.87ZM40,88h80v32H40Zm16,48h64v64H56Zm144,64H136V136h64Zm16-80H136V88h80v32Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,76H166.81a50.54,50.54,0,0,0,12.63-8A25.53,25.53,0,0,0,188,49.44,28.62,28.62,0,0,0,158.56,20,25.53,25.53,0,0,0,140,28.56c-5.91,6.67-9.63,15.36-12,23.69-2.35-8.33-6.07-17-12-23.69A25.53,25.53,0,0,0,97.44,20,28.62,28.62,0,0,0,68,49.44,25.53,25.53,0,0,0,76.56,68a50.54,50.54,0,0,0,12.63,8H40A12,12,0,0,0,28,88v32a12,12,0,0,0,12,12h4v68a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V132h4a12,12,0,0,0,12-12V88A12,12,0,0,0,216,76ZM146,33.86A17.59,17.59,0,0,1,158.8,28h.61A20.62,20.62,0,0,1,180,49.2,17.6,17.6,0,0,1,174.14,62c-12.09,10.7-33.07,13.21-42,13.79C132.76,66.93,135.26,46,146,33.86ZM76,49.2A20.62,20.62,0,0,1,96.59,28h.61A17.59,17.59,0,0,1,110,33.86c10.71,12.09,13.21,33.07,13.79,42-8.89-.58-29.87-3.09-42-13.79A17.6,17.6,0,0,1,76,49.2ZM36,120V88a4,4,0,0,1,4-4h84v40H40A4,4,0,0,1,36,120Zm16,80V132h72v72H56A4,4,0,0,1,52,200Zm152,0a4,4,0,0,1-4,4H132V132h72Zm16-80a4,4,0,0,1-4,4H132V84h84a4,4,0,0,1,4,4Z"}))]]),R4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M222.14,105.85l-80-80a20,20,0,0,0-28.28,0l-80,80A19.86,19.86,0,0,0,28,120v96a12,12,0,0,0,12,12h64a12,12,0,0,0,12-12V164h24v52a12,12,0,0,0,12,12h64a12,12,0,0,0,12-12V120A19.86,19.86,0,0,0,222.14,105.85ZM204,204H164V152a12,12,0,0,0-12-12H104a12,12,0,0,0-12,12v52H52V121.65l76-76,76,76Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,120v96H152V152H104v64H40V120a8,8,0,0,1,2.34-5.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,216,120Z",opacity:"0.2"}),h.createElement("path",{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,120v96a8,8,0,0,1-8,8H160a8,8,0,0,1-8-8V164a4,4,0,0,0-4-4H108a4,4,0,0,0-4,4v52a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V120a16,16,0,0,1,4.69-11.31l80-80a16,16,0,0,1,22.62,0l80,80A16,16,0,0,1,224,120Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M217.9,110.1l-80-80a14,14,0,0,0-19.8,0l-80,80A13.92,13.92,0,0,0,34,120v96a6,6,0,0,0,6,6h64a6,6,0,0,0,6-6V158h36v58a6,6,0,0,0,6,6h64a6,6,0,0,0,6-6V120A13.92,13.92,0,0,0,217.9,110.1ZM210,210H158V152a6,6,0,0,0-6-6H104a6,6,0,0,0-6,6v58H46V120a2,2,0,0,1,.58-1.42l80-80a2,2,0,0,1,2.84,0l80,80A2,2,0,0,1,210,120Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216.49,111.51l-80-80a12,12,0,0,0-17,0l-80,80A12,12,0,0,0,36,120v96a4,4,0,0,0,4,4h64a4,4,0,0,0,4-4V156h40v60a4,4,0,0,0,4,4h64a4,4,0,0,0,4-4V120A12,12,0,0,0,216.49,111.51ZM212,212H156V152a4,4,0,0,0-4-4H104a4,4,0,0,0-4,4v60H44V120a4,4,0,0,1,1.17-2.83l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,212,120Z"}))]]),V4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,44H40A12,12,0,0,0,28,56V208a20,20,0,0,0,20,20H88a20,20,0,0,0,20-20V164h40v12a20,20,0,0,0,20,20h40a20,20,0,0,0,20-20V56A12,12,0,0,0,216,44Zm-12,64H172V68h32ZM84,68v40H52V68Zm0,136H52V132H84Zm24-64V68h40v72Zm64,32V132h32v40Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,56v64H160V56ZM40,208a8,8,0,0,0,8,8H88a8,8,0,0,0,8-8V120H40Z",opacity:"0.2"}),h.createElement("path",{d:"M216,48H40a8,8,0,0,0-8,8V208a16,16,0,0,0,16,16H88a16,16,0,0,0,16-16V160h48v16a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V56A8,8,0,0,0,216,48Zm-8,64H168V64h40ZM88,64v48H48V64Zm0,144H48V128H88Zm16-64V64h48v80Zm64,32V128h40v48Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M160,56v96a8,8,0,0,1-8,8H112a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8h40A8,8,0,0,1,160,56Zm64-8H184a8,8,0,0,0-8,8v52a4,4,0,0,0,4,4h48a4,4,0,0,0,4-4V56A8,8,0,0,0,224,48Zm4,80H180a4,4,0,0,0-4,4v44a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V132A4,4,0,0,0,228,128ZM80,48H40a8,8,0,0,0-8,8v52a4,4,0,0,0,4,4H84a4,4,0,0,0,4-4V56A8,8,0,0,0,80,48Zm4,80H36a4,4,0,0,0-4,4v76a16,16,0,0,0,16,16H72a16,16,0,0,0,16-16V132A4,4,0,0,0,84,128Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,50H40a6,6,0,0,0-6,6V208a14,14,0,0,0,14,14H88a14,14,0,0,0,14-14V158h52v18a14,14,0,0,0,14,14h40a14,14,0,0,0,14-14V56A6,6,0,0,0,216,50Zm-6,64H166V62h44ZM90,62v52H46V62Zm0,146a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V126H90Zm12-62V62h52v84Zm106,32H168a2,2,0,0,1-2-2V126h44v50A2,2,0,0,1,208,178Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48H40a8,8,0,0,0-8,8V208a16,16,0,0,0,16,16H88a16,16,0,0,0,16-16V160h48v16a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V56A8,8,0,0,0,216,48ZM88,208H48V128H88Zm0-96H48V64H88Zm64,32H104V64h48Zm56,32H168V128h40Zm0-64H168V64h40Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,52H40a4,4,0,0,0-4,4V208a12,12,0,0,0,12,12H88a12,12,0,0,0,12-12V156h56v20a12,12,0,0,0,12,12h40a12,12,0,0,0,12-12V56A4,4,0,0,0,216,52ZM92,208a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V124H92Zm0-92H44V60H92Zm64,32H100V60h56Zm56,28a4,4,0,0,1-4,4H168a4,4,0,0,1-4-4V124h48Zm0-60H164V60h48Z"}))]]),H4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M196,76a16,16,0,1,1-16-16A16,16,0,0,1,196,76Zm48,22.74A84.3,84.3,0,0,1,160.11,180H160a83.52,83.52,0,0,1-23.65-3.38l-7.86,7.87A12,12,0,0,1,120,188H108v12a12,12,0,0,1-12,12H84v12a12,12,0,0,1-12,12H40a20,20,0,0,1-20-20V187.31a19.86,19.86,0,0,1,5.86-14.14l53.52-53.52A84,84,0,1,1,244,98.74ZM202.43,53.57A59.48,59.48,0,0,0,158,36c-32,1-58,27.89-58,59.89a59.69,59.69,0,0,0,4.2,22.19,12,12,0,0,1-2.55,13.21L44,189v23H60V200a12,12,0,0,1,12-12H84V176a12,12,0,0,1,12-12h19l9.65-9.65a12,12,0,0,1,13.22-2.55A59.58,59.58,0,0,0,160,156h.08c32,0,58.87-26.07,59.89-58A59.55,59.55,0,0,0,202.43,53.57Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M232,98.36C230.73,136.92,198.67,168,160.09,168a71.68,71.68,0,0,1-26.92-5.17h0L120,176H96v24H72v24H40a8,8,0,0,1-8-8V187.31a8,8,0,0,1,2.34-5.65l58.83-58.83h0A71.68,71.68,0,0,1,88,95.91c0-38.58,31.08-70.64,69.64-71.87A72,72,0,0,1,232,98.36Z",opacity:"0.2"}),h.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM224,98.1c-1.09,34.09-29.75,61.86-63.89,61.9H160a63.7,63.7,0,0,1-23.65-4.51,8,8,0,0,0-8.84,1.68L116.69,168H96a8,8,0,0,0-8,8v16H72a8,8,0,0,0-8,8v16H40V187.31l58.83-58.82a8,8,0,0,0,1.68-8.84A63.72,63.72,0,0,1,96,95.92c0-34.14,27.81-62.8,61.9-63.89A64,64,0,0,1,224,98.1ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM180,92a16,16,0,1,1,16-16A16,16,0,0,1,180,92Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M215.15,40.85A78,78,0,0,0,86.2,121.31l-56.1,56.1a13.94,13.94,0,0,0-4.1,9.9V216a14,14,0,0,0,14,14H72a6,6,0,0,0,6-6V206H96a6,6,0,0,0,6-6V182h18a6,6,0,0,0,4.24-1.76l10.45-10.44A77.59,77.59,0,0,0,160,174h.1A78,78,0,0,0,215.15,40.85ZM226,98.16c-1.12,35.16-30.67,63.8-65.88,63.84a65.93,65.93,0,0,1-24.51-4.67,6,6,0,0,0-6.64,1.26L117.51,170H96a6,6,0,0,0-6,6v18H72a6,6,0,0,0-6,6v18H40a2,2,0,0,1-2-2V187.31a2,2,0,0,1,.58-1.41l58.83-58.83a6,6,0,0,0,1.26-6.64A65.61,65.61,0,0,1,94,95.92C94,60.71,122.68,31.16,157.83,30A66,66,0,0,1,226,98.16ZM190,76a10,10,0,1,1-10-10A10,10,0,0,1,190,76Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM224,98.1c-1.09,34.09-29.75,61.86-63.89,61.9H160a63.7,63.7,0,0,1-23.65-4.51,8,8,0,0,0-8.84,1.68L116.69,168H96a8,8,0,0,0-8,8v16H72a8,8,0,0,0-8,8v16H40V187.31l58.83-58.82a8,8,0,0,0,1.68-8.84A63.72,63.72,0,0,1,96,95.92c0-34.14,27.81-62.8,61.9-63.89A64,64,0,0,1,224,98.1ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M213.74,42.26A76,76,0,0,0,88.51,121.84l-57,57A11.93,11.93,0,0,0,28,187.31V216a12,12,0,0,0,12,12H72a4,4,0,0,0,4-4V204H96a4,4,0,0,0,4-4V180h20a4,4,0,0,0,2.83-1.17l11.33-11.34A75.72,75.72,0,0,0,160,172h.1A76,76,0,0,0,213.74,42.26Zm14.22,56c-1.15,36.22-31.6,65.72-67.87,65.77H160a67.52,67.52,0,0,1-25.21-4.83,4,4,0,0,0-4.45.83l-12,12H96a4,4,0,0,0-4,4v20H72a4,4,0,0,0-4,4v20H40a4,4,0,0,1-4-4V187.31a4.06,4.06,0,0,1,1.17-2.83L96,125.66a4,4,0,0,0,.83-4.45A67.51,67.51,0,0,1,92,95.91C92,59.64,121.55,29.19,157.77,28A68,68,0,0,1,228,98.23ZM188,76a8,8,0,1,1-8-8A8,8,0,0,1,188,76Z"}))]]),B4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M241.47,30.53a36,36,0,0,0-50.92,0h0a36.06,36.06,0,0,0-1.2,49.66l-23.83,44.26a36.08,36.08,0,0,0-21,3.07l-16-16a36,36,0,0,0-57.94-41h0a36,36,0,0,0-1.2,49.66L45.5,164.45a36,36,0,0,0-31,10.1h0a36,36,0,1,0,52.12,1.26l23.83-44.26A35.21,35.21,0,0,0,96,132a36.07,36.07,0,0,0,15.51-3.5l16,16a36,36,0,1,0,59.14-8.68L210.5,91.55A36.32,36.32,0,0,0,216,92a36,36,0,0,0,25.46-61.45Zm-154,57a12,12,0,0,1,17,17h0a12,12,0,0,1-17-17Zm-39,121a12,12,0,1,1,0-17A12,12,0,0,1,48.47,208.5Zm120-40a12,12,0,1,1,0-17A12,12,0,0,1,168.49,168.49Zm56-104a12,12,0,1,1,0-17A12,12,0,0,1,224.5,64.48Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M57,183A24,24,0,1,1,23,183,24,24,0,0,1,57,183ZM79,79A24,24,0,1,0,113,79,24,24,0,0,0,79,79Zm64,64A24,24,0,1,0,177,143,24,24,0,0,0,143,143ZM233,39A24,24,0,1,0,233,73,24,24,0,0,0,233,39Z",opacity:"0.2"}),h.createElement("path",{d:"M238.64,33.36a32,32,0,0,0-45.26,0h0a32,32,0,0,0,0,45.26c.29.29.6.57.9.85l-26.63,49.46a32.19,32.19,0,0,0-23.9,3.5l-20.18-20.18a32,32,0,0,0-50.2-38.89h0a32,32,0,0,0,0,45.26c.29.29.59.57.89.85L47.63,168.94a32,32,0,0,0-30.27,8.44h0a32,32,0,1,0,45.26,0c-.29-.29-.6-.57-.9-.85l26.63-49.46A32.4,32.4,0,0,0,96,128a32,32,0,0,0,16.25-4.41l20.18,20.18a32,32,0,1,0,50.2-6.38c-.29-.29-.59-.57-.89-.85l26.63-49.46A32.33,32.33,0,0,0,216,88a32,32,0,0,0,22.63-54.62ZM51.3,211.33a16,16,0,0,1-22.63-22.64h0A16,16,0,1,1,51.3,211.33Zm33.38-104a16,16,0,0,1,0-22.63h0a16,16,0,1,1,0,22.63Zm86.64,64a16,16,0,0,1-22.63-22.63h0a16,16,0,0,1,22.63,22.63Zm56-104A16,16,0,1,1,204.7,44.67h0a16,16,0,0,1,22.63,22.64Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M235.81,75.79A27.91,27.91,0,0,1,216,84a28.49,28.49,0,0,1-5.67-.58l-30.57,56.77,0,0a28,28,0,1,1-44.43,6.49l-26.06-26.06A28.07,28.07,0,0,1,96,124a28.41,28.41,0,0,1-5.67-.58L59.76,180.18l0,0a28,28,0,1,1-39.6,0h0a28,28,0,0,1,25.47-7.61l30.57-56.77,0,0a28.05,28.05,0,0,1,0-39.61h0a28,28,0,0,1,44.43,33.12l26.06,26.06a28.1,28.1,0,0,1,19-2.77l30.57-56.77,0,0a28,28,0,0,1,0-39.6h0a28,28,0,0,1,39.6,39.6Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M237.23,34.77a30.06,30.06,0,0,0-42.44,0h0a30.06,30.06,0,0,0,0,42.44c.65.64,1.32,1.24,2,1.81l-28.14,52.26A30.11,30.11,0,0,0,143.46,135L121,112.54A30,30,0,0,0,74.78,74.78h0a30,30,0,0,0,0,42.43,26.28,26.28,0,0,0,2,1.82L48.64,171.29a30,30,0,0,0-29.87,7.5h0a30,30,0,1,0,42.44,0c-.65-.64-1.32-1.24-2-1.81l28.14-52.26A30.07,30.07,0,0,0,112.54,121L135,143.46a30,30,0,1,0,46.25-4.67,26.28,26.28,0,0,0-2-1.82l28.14-52.26a30,30,0,0,0,29.87-49.94Zm-184.51,178a18,18,0,1,1,0-25.46A18,18,0,0,1,52.72,212.74Zm30.55-104a18,18,0,1,1,25.46,0A18,18,0,0,1,83.27,108.73Zm89.46,64a18,18,0,1,1,0-25.46A18,18,0,0,1,172.73,172.73Zm56-104a18,18,0,1,1,0-25.46A18,18,0,0,1,228.74,68.72Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M238.64,33.36a32,32,0,0,0-45.26,0h0a32,32,0,0,0,0,45.26c.29.29.6.57.9.85l-26.63,49.46a32.19,32.19,0,0,0-23.9,3.5l-20.18-20.18a32,32,0,0,0-50.2-38.89h0a32,32,0,0,0,0,45.26c.29.29.59.57.89.85L47.63,168.94a32,32,0,0,0-30.27,8.44h0a32,32,0,1,0,45.26,0c-.29-.29-.6-.57-.9-.85l26.63-49.46A32.4,32.4,0,0,0,96,128a32,32,0,0,0,16.25-4.41l20.18,20.18a32,32,0,1,0,50.2-6.38c-.29-.29-.59-.57-.89-.85l26.63-49.46A32.33,32.33,0,0,0,216,88a32,32,0,0,0,22.63-54.62ZM51.3,211.33a16,16,0,0,1-22.63-22.64h0A16,16,0,1,1,51.3,211.33Zm33.38-104a16,16,0,0,1,0-22.63h0a16,16,0,1,1,0,22.63Zm86.64,64a16,16,0,0,1-22.63-22.63h0a16,16,0,0,1,22.63,22.63Zm56-104A16,16,0,1,1,204.7,44.67h0a16,16,0,0,1,22.63,22.64Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M235.81,36.19a28,28,0,0,0-39.6,0h0a28,28,0,0,0,0,39.6,26.62,26.62,0,0,0,3.14,2.71l-29.73,55.21a28.08,28.08,0,0,0-26.38,3.87l-24.82-24.82A28,28,0,0,0,76.2,76.19h0a28,28,0,0,0,3.14,42.31L49.6,173.72a28,28,0,0,0-29.41,6.49h0a28,28,0,1,0,39.6,0,28.63,28.63,0,0,0-3.14-2.71l29.73-55.21a28,28,0,0,0,26.38-3.87l24.82,24.82a28,28,0,1,0,39.09-5.74L206.4,82.28a28,28,0,0,0,29.41-46.09Zm-181.68,178a20,20,0,1,1,0-28.28A20,20,0,0,1,54.13,214.15Zm27.72-104a20,20,0,1,1,28.29,0h0A20,20,0,0,1,81.85,110.14Zm92.3,64a20,20,0,1,1,0-28.29A20,20,0,0,1,174.15,174.15Zm56-104a20,20,0,1,1,0-28.29A20,20,0,0,1,230.15,70.14Z"}))]]),z4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M218.34,119.6,183.6,154.34a46.58,46.58,0,0,1-44.31,12.26c-.31.34-.62.67-.95,1L103.6,202.34A46.63,46.63,0,1,1,37.66,136.4L72.4,101.66A46.6,46.6,0,0,1,116.71,89.4c.31-.34.62-.67,1-1L152.4,53.66a46.63,46.63,0,0,1,65.94,65.94Z",opacity:"0.2"}),h.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,7.78,8.22H152a8,8,0,0,0,8-7.78A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM115.7,192.49a43.31,43.31,0,0,1-55-66.43l25.37-25.37a43.35,43.35,0,0,1,61.25,0,42.9,42.9,0,0,1,9.95,15.43,8,8,0,1,1-15,5.6A27.33,27.33,0,0,0,97.37,112L72,137.37a27.32,27.32,0,0,0,34.68,41.91,8,8,0,1,1,9,13.21Zm79.61-62.55-25.37,25.37A43,43,0,0,1,139.32,168h0a43.35,43.35,0,0,1-40.53-28.12,8,8,0,1,1,15-5.6A27.35,27.35,0,0,0,139.28,152h0a27.14,27.14,0,0,0,19.32-8L184,118.63a27.32,27.32,0,0,0-34.68-41.91,8,8,0,1,1-9-13.21,43.32,43.32,0,0,1,55,66.43Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M238,88.18a52.42,52.42,0,0,1-15.4,35.66l-34.75,34.75A52.28,52.28,0,0,1,150.62,174h-.05A52.63,52.63,0,0,1,98,119.9a6,6,0,0,1,6-5.84h.17a6,6,0,0,1,5.83,6.16A40.62,40.62,0,0,0,150.58,162h0a40.4,40.4,0,0,0,28.73-11.9l34.75-34.74A40.63,40.63,0,0,0,156.63,57.9l-11,11a6,6,0,0,1-8.49-8.49l11-11a52.62,52.62,0,0,1,74.43,0A52.83,52.83,0,0,1,238,88.18Zm-127.62,98.9-11,11A40.36,40.36,0,0,1,70.6,210h0a40.63,40.63,0,0,1-28.7-69.36L76.62,105.9A40.63,40.63,0,0,1,146,135.77a6,6,0,0,0,5.83,6.16H152a6,6,0,0,0,6-5.84A52.63,52.63,0,0,0,68.14,97.42L33.38,132.16A52.63,52.63,0,0,0,70.56,222h0a52.26,52.26,0,0,0,37.22-15.42l11-11a6,6,0,1,0-8.49-8.48Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"}))]]),Z4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M195.8,60.2a28,28,0,0,0-39.51-.09L144.68,72.28a12,12,0,1,1-17.36-16.56L139,43.43l.2-.2a52,52,0,0,1,73.54,73.54l-.2.2-12.29,11.71a12,12,0,0,1-16.56-17.36l12.17-11.61A28,28,0,0,0,195.8,60.2ZM111.32,183.72,99.71,195.89a28,28,0,0,1-39.6-39.6l12.17-11.61a12,12,0,0,0-16.56-17.36L43.43,139l-.2.2a52,52,0,0,0,73.54,73.54l.2-.2,11.71-12.29a12,12,0,1,0-17.36-16.56ZM216,148H192a12,12,0,0,0,0,24h24a12,12,0,0,0,0-24ZM40,108H64a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm120,72a12,12,0,0,0-12,12v24a12,12,0,0,0,24,0V192A12,12,0,0,0,160,180ZM96,76a12,12,0,0,0,12-12V40a12,12,0,0,0-24,0V64A12,12,0,0,0,96,76Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M204.28,108.28l-96,96a40,40,0,0,1-56.56-56.56l96-96a40,40,0,0,1,56.56,56.56Z",opacity:"0.2"}),h.createElement("path",{d:"M198.63,57.37a32,32,0,0,0-45.19-.06L141.79,69.52a8,8,0,0,1-11.58-11l11.72-12.29a1.59,1.59,0,0,1,.13-.13,48,48,0,0,1,67.88,67.88,1.59,1.59,0,0,1-.13.13l-12.29,11.72a8,8,0,0,1-11-11.58l12.21-11.65A32,32,0,0,0,198.63,57.37ZM114.21,186.48l-11.65,12.21a32,32,0,0,1-45.25-45.25l12.21-11.65a8,8,0,0,0-11-11.58L46.19,141.93a1.59,1.59,0,0,0-.13.13,48,48,0,0,0,67.88,67.88,1.59,1.59,0,0,0,.13-.13l11.72-12.29a8,8,0,1,0-11.58-11ZM216,152H192a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM40,104H64a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm120,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V192A8,8,0,0,0,160,184ZM96,72a8,8,0,0,0,8-8V40a8,8,0,0,0-16,0V64A8,8,0,0,0,96,72Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM96,64a8,8,0,0,1,16,0V80a8,8,0,0,1-16,0ZM64,96H80a8,8,0,0,1,0,16H64a8,8,0,0,1,0-16Zm64.08,85.66-7.21,7.21a38,38,0,1,1-53.74-53.74l7.21-7.21a8,8,0,1,1,11.32,11.31l-7.22,7.21a22,22,0,0,0,31.12,31.12l7.21-7.22a8,8,0,1,1,11.31,11.32ZM160,192a8,8,0,0,1-16,0V176a8,8,0,0,1,16,0Zm32-32H176a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm-3.13-39.13-7.21,7.21a8,8,0,1,1-11.32-11.31l7.22-7.21a22,22,0,0,0-31.12-31.12l-7.21,7.22a8,8,0,1,1-11.31-11.32l7.21-7.21a38,38,0,1,1,53.74,53.74Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M200,56a34,34,0,0,0-48-.05L140.34,68.14a6,6,0,1,1-8.68-8.28l11.71-12.28.1-.11a46,46,0,0,1,65.06,65.06l-.11.1-12.28,11.71a6,6,0,1,1-8.28-8.68L200.09,104A34,34,0,0,0,200,56Zm-84.38,131.9L104,200.09A34,34,0,0,1,55.91,152l12.23-11.67a6,6,0,0,0-8.28-8.68L47.58,143.37l-.11.1a46,46,0,0,0,65.06,65.06l.1-.11,11.71-12.28a6,6,0,1,0-8.68-8.28ZM216,154H192a6,6,0,0,0,0,12h24a6,6,0,0,0,0-12ZM40,102H64a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Zm120,84a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V192A6,6,0,0,0,160,186ZM96,70a6,6,0,0,0,6-6V40a6,6,0,0,0-12,0V64A6,6,0,0,0,96,70Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M198.63,57.37a32,32,0,0,0-45.19-.06L141.79,69.52a8,8,0,0,1-11.58-11l11.72-12.29a1.59,1.59,0,0,1,.13-.13,48,48,0,0,1,67.88,67.88,1.59,1.59,0,0,1-.13.13l-12.29,11.72a8,8,0,0,1-11-11.58l12.21-11.65A32,32,0,0,0,198.63,57.37ZM114.21,186.48l-11.65,12.21a32,32,0,0,1-45.25-45.25l12.21-11.65a8,8,0,0,0-11-11.58L46.19,141.93a1.59,1.59,0,0,0-.13.13,48,48,0,0,0,67.88,67.88,1.59,1.59,0,0,0,.13-.13l11.72-12.29a8,8,0,1,0-11.58-11ZM216,152H192a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM40,104H64a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm120,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V192A8,8,0,0,0,160,184ZM96,72a8,8,0,0,0,8-8V40a8,8,0,0,0-16,0V64A8,8,0,0,0,96,72Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M201.46,54.54a36.06,36.06,0,0,0-50.92,0L138.89,66.76a4,4,0,0,1-5.78-5.52L144.82,49a44,44,0,1,1,62.29,62.15l-12.35,11.78a4,4,0,0,1-5.52-5.78l12.28-11.72A36,36,0,0,0,201.46,54.54Zm-84.35,134.7-11.65,12.22a36,36,0,0,1-51-50.85l12.28-11.72a4,4,0,0,0-5.52-5.78L48.89,144.89A44,44,0,1,0,111.18,207l11.71-12.28a4,4,0,1,0-5.78-5.52ZM216,156H192a4,4,0,0,0,0,8h24a4,4,0,0,0,0-8ZM40,100H64a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Zm120,88a4,4,0,0,0-4,4v24a4,4,0,0,0,8,0V192A4,4,0,0,0,160,188ZM96,68a4,4,0,0,0,4-4V40a4,4,0,0,0-8,0V64A4,4,0,0,0,96,68Z"}))]]),q4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28Zm-4,176H52V52H204ZM76,128a12,12,0,0,1,12-12h80a12,12,0,0,1,0,24H88A12,12,0,0,1,76,128Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,128Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM168,136H88a8,8,0,0,1,0-16h80a8,8,0,0,1,0,16Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34Zm2,174a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-36-80a6,6,0,0,1-6,6H88a6,6,0,0,1,0-12h80A6,6,0,0,1,174,128Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,128Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M208,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36Zm4,172a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-40-80a4,4,0,0,1-4,4H88a4,4,0,0,1,0-8h80A4,4,0,0,1,172,128Z"}))]]),W4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M225.6,62.64l-88-48.17a19.91,19.91,0,0,0-19.2,0l-88,48.17A20,20,0,0,0,20,80.19v95.62a20,20,0,0,0,10.4,17.55l88,48.17a19.89,19.89,0,0,0,19.2,0l88-48.17A20,20,0,0,0,236,175.81V80.19A20,20,0,0,0,225.6,62.64ZM128,36.57,200,76,178.57,87.73l-72-39.42Zm0,78.83L56,76,81.56,62l72,39.41ZM44,96.79l72,39.4v76.67L44,173.44Zm96,116.07V136.19l24-13.13V152a12,12,0,0,0,24,0V109.92l24-13.13v76.65Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,129.09V232a8,8,0,0,1-3.84-1l-88-48.18a8,8,0,0,1-4.16-7V80.18a8,8,0,0,1,.7-3.25Z",opacity:"0.2"}),h.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.35,44L178.57,92.29l-80.35-44Zm0,88L47.65,76,81.56,57.43l80.35,44Zm88,55.85h0l-80,43.79V133.83l32-17.51V152a8,8,0,0,0,16,0V107.56l32-17.51v85.76Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M222.72,67.91l-88-48.18a13.9,13.9,0,0,0-13.44,0l-88,48.18A14,14,0,0,0,26,80.18v95.64a14,14,0,0,0,7.28,12.27l88,48.18a13.92,13.92,0,0,0,13.44,0l88-48.18A14,14,0,0,0,230,175.82V80.18A14,14,0,0,0,222.72,67.91ZM127,30.25a2,2,0,0,1,1.92,0L212.51,76,178.57,94.57,94.05,48.31ZM122,223,39,177.57a2,2,0,0,1-1-1.75V86.66l84,46ZM43.49,76,81.56,55.15l84.51,46.26L128,122.24ZM218,175.82a2,2,0,0,1-1,1.75h0L134,223V132.64l36-19.71V152a6,6,0,0,0,12,0V106.37l36-19.71Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M221.76,69.66l-88-48.18a12,12,0,0,0-11.52,0l-88,48.18A12,12,0,0,0,28,80.18v95.64a12,12,0,0,0,6.24,10.52l88,48.18a11.95,11.95,0,0,0,11.52,0l88-48.18A12,12,0,0,0,228,175.82V80.18A12,12,0,0,0,221.76,69.66ZM126.08,28.5a3.94,3.94,0,0,1,3.84,0L216.67,76,178.5,96.89a4,4,0,0,0-.58-.4l-88-48.18Zm1.92,96L39.33,76,81.56,52.87l88.67,48.54Zm-89.92,54.8a4,4,0,0,1-2.08-3.5V83.29l88,48.16v94.91Zm179.84,0h0l-85.92,47V131.45l40-21.89V152a4,4,0,0,0,8,0V105.18l40-21.89v92.53A4,4,0,0,1,217.92,179.32Z"}))]]),U4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M230.14,70.54,185.46,25.85a20,20,0,0,0-28.29,0L33.86,149.17A19.85,19.85,0,0,0,28,163.31V208a20,20,0,0,0,20,20H92.69a19.86,19.86,0,0,0,14.14-5.86L230.14,98.82a20,20,0,0,0,0-28.28ZM93,180l71-71,11,11-71,71ZM76,163,65,152l71-71,11,11ZM52,173l15.51,15.51h0L83,204H52ZM192,103,153,64l18.34-18.34,39,39Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"}),h.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160l90.35-90.35,16.68,16.69L68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188l90.35-90.35h0l16.68,16.69Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M225.9,74.78,181.21,30.09a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H92.69a13.94,13.94,0,0,0,9.9-4.1L225.9,94.58a14,14,0,0,0,0-19.8ZM48.49,160,136,72.48,155.51,92,68,179.51ZM46,208V174.48L81.51,210H48A2,2,0,0,1,46,208Zm50-.49L76.49,188,164,100.48,183.51,120ZM217.41,86.1,192,111.51,144.49,64,169.9,38.58a2,2,0,0,1,2.83,0l44.68,44.69a2,2,0,0,1,0,2.83Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.52,154.83A11.9,11.9,0,0,0,36,163.31V208a12,12,0,0,0,12,12H92.69a12,12,0,0,0,8.48-3.51L224.48,93.17a12,12,0,0,0,0-17ZM45.66,160,136,69.65,158.34,92,68,182.34ZM44,208V169.66l21.17,21.17h0L86.34,212H48A4,4,0,0,1,44,208Zm52,2.34L73.66,188,164,97.65,186.34,120ZM218.83,87.51,192,114.34,141.66,64l26.82-26.83a4,4,0,0,1,5.66,0l44.69,44.68a4,4,0,0,1,0,5.66Z"}))]]),G4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm52-84a12,12,0,0,1-12,12H140v28a12,12,0,0,1-24,0V140H88a12,12,0,0,1,0-24h28V88a12,12,0,0,1,24,0v28h28A12,12,0,0,1,180,128Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),h.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24Zm40,112H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32a8,8,0,0,1,0,16Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm46-90a6,6,0,0,1-6,6H134v34a6,6,0,0,1-12,0V134H88a6,6,0,0,1,0-12h34V88a6,6,0,0,1,12,0v34h34A6,6,0,0,1,174,128Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm44-92a4,4,0,0,1-4,4H132v36a4,4,0,0,1-8,0V132H88a4,4,0,0,1,0-8h36V88a4,4,0,0,1,8,0v36h36A4,4,0,0,1,172,128Z"}))]]),K4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M124,216a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V40A12,12,0,0,1,48,28h64a12,12,0,0,1,0,24H60V204h52A12,12,0,0,1,124,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L195,116H112a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,232.49,119.51Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,56V200a16,16,0,0,1-16,16H48V40H208A16,16,0,0,1,224,56Z",opacity:"0.2"}),h.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40A8,8,0,0,0,176,88v32H112a8,8,0,0,0,0,16h64v32a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,229.66,122.34Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M118,216a6,6,0,0,1-6,6H48a6,6,0,0,1-6-6V40a6,6,0,0,1,6-6h64a6,6,0,0,1,0,12H54V210h58A6,6,0,0,1,118,216Zm110.24-92.24-40-40a6,6,0,0,0-8.48,8.48L209.51,122H112a6,6,0,0,0,0,12h97.51l-29.75,29.76a6,6,0,1,0,8.48,8.48l40-40A6,6,0,0,0,228.24,123.76Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M116,216a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h64a4,4,0,0,1,0,8H52V212h60A4,4,0,0,1,116,216Zm110.83-90.83-40-40a4,4,0,0,0-5.66,5.66L214.34,124H112a4,4,0,0,0,0,8H214.34l-33.17,33.17a4,4,0,0,0,5.66,5.66l40-40A4,4,0,0,0,226.83,125.17Z"}))]]),Y4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M228,48V152a20,20,0,0,1-20,20H112.92a12,12,0,0,1-17.41,16.49l-20-20a12,12,0,0,1,0-17l20-20A12,12,0,0,1,112.92,148H204V52H100a12,12,0,0,1-24,0V48A20,20,0,0,1,96,28H208A20,20,0,0,1,228,48ZM168,192a12,12,0,0,0-12,12H52V108h91.08a12,12,0,0,0,17.41,16.49l20-20a12,12,0,0,0,0-17l-20-20A12,12,0,0,0,143.08,84H48a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20H160a20,20,0,0,0,20-20v-4A12,12,0,0,0,168,192Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48V152a8,8,0,0,1-8,8H168v48a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V104a8,8,0,0,1,8-8H88V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),h.createElement("path",{d:"M224,48V152a16,16,0,0,1-16,16H99.31l10.35,10.34a8,8,0,0,1-11.32,11.32l-24-24a8,8,0,0,1,0-11.32l24-24a8,8,0,0,1,11.32,11.32L99.31,152H208V48H96v8a8,8,0,0,1-16,0V48A16,16,0,0,1,96,32H208A16,16,0,0,1,224,48ZM168,192a8,8,0,0,0-8,8v8H48V104H156.69l-10.35,10.34a8,8,0,0,0,11.32,11.32l24-24a8,8,0,0,0,0-11.32l-24-24a8,8,0,0,0-11.32,11.32L156.69,88H48a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16H160a16,16,0,0,0,16-16v-8A8,8,0,0,0,168,192Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,48V152a16,16,0,0,1-16,16H112v16a8,8,0,0,1-13.66,5.66l-24-24a8,8,0,0,1,0-11.32l24-24A8,8,0,0,1,112,136v16h96V48H96v8a8,8,0,0,1-16,0V48A16,16,0,0,1,96,32H208A16,16,0,0,1,224,48ZM168,192a8,8,0,0,0-8,8v8H48V104h96v16a8,8,0,0,0,13.66,5.66l24-24a8,8,0,0,0,0-11.32l-24-24A8,8,0,0,0,144,72V88H48a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16H160a16,16,0,0,0,16-16v-8A8,8,0,0,0,168,192Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M222,48V152a14,14,0,0,1-14,14H94.49l13.75,13.76a6,6,0,1,1-8.48,8.48l-24-24a6,6,0,0,1,0-8.48l24-24a6,6,0,0,1,8.48,8.48L94.49,154H208a2,2,0,0,0,2-2V48a2,2,0,0,0-2-2H96a2,2,0,0,0-2,2v8a6,6,0,0,1-12,0V48A14,14,0,0,1,96,34H208A14,14,0,0,1,222,48ZM168,194a6,6,0,0,0-6,6v8a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V104a2,2,0,0,1,2-2H161.51l-13.75,13.76a6,6,0,1,0,8.48,8.48l24-24a6,6,0,0,0,0-8.48l-24-24a6,6,0,0,0-8.48,8.48L161.51,90H48a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14H160a14,14,0,0,0,14-14v-8A6,6,0,0,0,168,194Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,48V152a16,16,0,0,1-16,16H99.31l10.35,10.34a8,8,0,0,1-11.32,11.32l-24-24a8,8,0,0,1,0-11.32l24-24a8,8,0,0,1,11.32,11.32L99.31,152H208V48H96v8a8,8,0,0,1-16,0V48A16,16,0,0,1,96,32H208A16,16,0,0,1,224,48ZM168,192a8,8,0,0,0-8,8v8H48V104H156.69l-10.35,10.34a8,8,0,0,0,11.32,11.32l24-24a8,8,0,0,0,0-11.32l-24-24a8,8,0,0,0-11.32,11.32L156.69,88H48a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16H160a16,16,0,0,0,16-16v-8A8,8,0,0,0,168,192Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M220,48V152a12,12,0,0,1-12,12H89.66l17.17,17.17a4,4,0,0,1-5.66,5.66l-24-24a4,4,0,0,1,0-5.66l24-24a4,4,0,0,1,5.66,5.66L89.66,156H208a4,4,0,0,0,4-4V48a4,4,0,0,0-4-4H96a4,4,0,0,0-4,4v8a4,4,0,0,1-8,0V48A12,12,0,0,1,96,36H208A12,12,0,0,1,220,48ZM168,196a4,4,0,0,0-4,4v8a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V104a4,4,0,0,1,4-4H166.34l-17.17,17.17a4,4,0,0,0,5.66,5.66l24-24a4,4,0,0,0,0-5.66l-24-24a4,4,0,0,0-5.66,5.66L166.34,92H48a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12H160a12,12,0,0,0,12-12v-8A4,4,0,0,0,168,196Z"}))]]),X4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M246.15,133.18,146.83,33.86A19.85,19.85,0,0,0,132.69,28H40A12,12,0,0,0,28,40v92.69a19.85,19.85,0,0,0,5.86,14.14l99.32,99.32a20,20,0,0,0,28.28,0l84.69-84.69A20,20,0,0,0,246.15,133.18Zm-98.83,93.17L52,131V52h79l95.32,95.32ZM104,88A16,16,0,1,1,88,72,16,16,0,0,1,104,88Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M237.66,153,153,237.66a8,8,0,0,1-11.31,0L42.34,138.34A8,8,0,0,1,40,132.69V40h92.69a8,8,0,0,1,5.65,2.34l99.32,99.32A8,8,0,0,1,237.66,153Z",opacity:"0.2"}),h.createElement("path",{d:"M243.31,136,144,36.69A15.86,15.86,0,0,0,132.69,32H40a8,8,0,0,0-8,8v92.69A15.86,15.86,0,0,0,36.69,144L136,243.31a16,16,0,0,0,22.63,0l84.68-84.68a16,16,0,0,0,0-22.63Zm-96,96L48,132.69V48h84.69L232,147.31ZM96,84A12,12,0,1,1,84,72,12,12,0,0,1,96,84Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M243.31,136,144,36.69A15.86,15.86,0,0,0,132.69,32H40a8,8,0,0,0-8,8v92.69A15.86,15.86,0,0,0,36.69,144L136,243.31a16,16,0,0,0,22.63,0l84.68-84.68a16,16,0,0,0,0-22.63ZM84,96A12,12,0,1,1,96,84,12,12,0,0,1,84,96Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M241.91,137.42,142.59,38.1a13.94,13.94,0,0,0-9.9-4.1H40a6,6,0,0,0-6,6v92.69a13.94,13.94,0,0,0,4.1,9.9l99.32,99.32a14,14,0,0,0,19.8,0l84.69-84.69A14,14,0,0,0,241.91,137.42Zm-8.49,11.31-84.69,84.69a2,2,0,0,1-2.83,0L46.59,134.1a2,2,0,0,1-.59-1.41V46h86.69a2,2,0,0,1,1.41.59l99.32,99.31A2,2,0,0,1,233.42,148.73ZM94,84A10,10,0,1,1,84,74,10,10,0,0,1,94,84Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M243.31,136,144,36.69A15.86,15.86,0,0,0,132.69,32H40a8,8,0,0,0-8,8v92.69A15.86,15.86,0,0,0,36.69,144L136,243.31a16,16,0,0,0,22.63,0l84.68-84.68a16,16,0,0,0,0-22.63Zm-96,96L48,132.69V48h84.69L232,147.31ZM96,84A12,12,0,1,1,84,72,12,12,0,0,1,96,84Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M240.49,138.83,141.17,39.51A11.93,11.93,0,0,0,132.69,36H40a4,4,0,0,0-4,4v92.69a11.93,11.93,0,0,0,3.51,8.48l99.32,99.32a12,12,0,0,0,17,0l84.69-84.69a12,12,0,0,0,0-17Zm-5.66,11.31-84.69,84.69a4,4,0,0,1-5.65,0L45.17,135.51A4,4,0,0,1,44,132.69V44h88.69a4,4,0,0,1,2.82,1.17l99.32,99.32A4,4,0,0,1,234.83,150.14ZM92,84a8,8,0,1,1-8-8A8,8,0,0,1,92,84Z"}))]]),J4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M90.86,50.89a12,12,0,0,0-21.72,0l-64,136a12,12,0,0,0,21.71,10.22L42.44,164h75.12l15.58,33.11a12,12,0,0,0,21.72-10.22ZM53.74,140,80,84.18,106.27,140ZM200,84c-13.85,0-24.77,3.86-32.45,11.48a12,12,0,1,0,16.9,17c3-3,8.26-4.52,15.55-4.52,11,0,20,7.18,20,16v4.39A47.28,47.28,0,0,0,200,124c-24.26,0-44,17.94-44,40s19.74,40,44,40a47.18,47.18,0,0,0,22-5.38A12,12,0,0,0,244,192V124C244,101.94,224.26,84,200,84Zm0,96c-11,0-20-7.18-20-16s9-16,20-16,20,7.18,20,16S211,180,200,180Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M232,164c0,15.46-14.33,28-32,28s-32-12.54-32-28,14.33-28,32-28S232,148.54,232,164ZM34.82,152h90.36L80,56Z",opacity:"0.2"}),h.createElement("path",{d:"M87.24,52.59a8,8,0,0,0-14.48,0l-64,136a8,8,0,1,0,14.48,6.81L39.9,160h80.2l16.66,35.4a8,8,0,1,0,14.48-6.81ZM47.43,144,80,74.79,112.57,144ZM200,96c-12.76,0-22.73,3.47-29.63,10.32a8,8,0,0,0,11.26,11.36c3.8-3.77,10-5.68,18.37-5.68,13.23,0,24,9,24,20v3.22A42.76,42.76,0,0,0,200,128c-22.06,0-40,16.15-40,36s17.94,36,40,36a42.73,42.73,0,0,0,24-7.25,8,8,0,0,0,16-.75V132C240,112.15,222.06,96,200,96Zm0,88c-13.23,0-24-9-24-20s10.77-20,24-20,24,9,24,20S213.23,184,200,184Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M200,156c0,6.5-7.33,12-16,12s-16-5.5-16-12,7.33-12,16-12S200,149.5,200,156ZM232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM143.37,172.88l-44-104a8,8,0,0,0-14.74,0l-44,104a8,8,0,0,0,14.74,6.24L66.84,152h50.32l11.47,27.12a8,8,0,0,0,14.74-6.24ZM216,124c0-15.44-14.36-28-32-28a34.86,34.86,0,0,0-20.78,6.68,8,8,0,0,0,9.56,12.83A18.84,18.84,0,0,1,184,112c8.56,0,15.8,5.36,16,11.76v8A35.24,35.24,0,0,0,184,128c-17.64,0-32,12.56-32,28s14.36,28,32,28a35.13,35.13,0,0,0,16.93-4.26A8,8,0,0,0,216,176ZM73.61,136h36.78L92,92.53Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M85.43,53.45a6,6,0,0,0-10.86,0l-64,136a6,6,0,1,0,10.86,5.11L38.63,158h82.74l17.2,36.55a6,6,0,1,0,10.86-5.11ZM44.28,146,80,70.09,115.72,146ZM200,98c-12.21,0-21.71,3.28-28.23,9.74a6,6,0,0,0,8.46,8.52c4.18-4.15,10.84-6.26,19.77-6.26,14.34,0,26,9.87,26,22v7.24A40.36,40.36,0,0,0,200,130c-20.95,0-38,15.25-38,34s17.05,34,38,34a40.36,40.36,0,0,0,26-9.24V192a6,6,0,0,0,12,0V132C238,113.25,221,98,200,98Zm0,88c-14.34,0-26-9.87-26-22s11.66-22,26-22,26,9.87,26,22S214.34,186,200,186Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M87.24,52.59a8,8,0,0,0-14.48,0l-64,136a8,8,0,1,0,14.48,6.81L39.9,160h80.2l16.66,35.4a8,8,0,1,0,14.48-6.81ZM47.43,144,80,74.79,112.57,144ZM200,96c-12.76,0-22.73,3.47-29.63,10.32a8,8,0,0,0,11.26,11.36c3.8-3.77,10-5.68,18.37-5.68,13.23,0,24,9,24,20v3.22A42.76,42.76,0,0,0,200,128c-22.06,0-40,16.15-40,36s17.94,36,40,36a42.73,42.73,0,0,0,24-7.25,8,8,0,0,0,16-.75V132C240,112.15,222.06,96,200,96Zm0,88c-13.23,0-24-9-24-20s10.77-20,24-20,24,9,24,20S213.23,184,200,184Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M83.62,54.3a4,4,0,0,0-7.24,0l-64,136a4,4,0,0,0,7.24,3.4L37.36,156h85.28l17.74,37.7a4,4,0,1,0,7.24-3.4ZM41.13,148,80,65.39,118.87,148ZM200,100c-11.67,0-20.69,3.08-26.82,9.16a4,4,0,1,0,5.64,5.68c4.57-4.54,11.7-6.84,21.18-6.84,15.44,0,28,10.77,28,24v11.92A37.78,37.78,0,0,0,200,132c-19.85,0-36,14.35-36,32s16.15,32,36,32a37.78,37.78,0,0,0,28-11.92V192a4,4,0,0,0,8,0V132C236,114.36,219.85,100,200,100Zm0,88c-15.44,0-28-10.77-28-24s12.56-24,28-24,28,10.77,28,24S215.44,188,200,188Z"}))]]),Q4=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20ZM79.57,196.57a60,60,0,0,1,96.86,0,83.72,83.72,0,0,1-96.86,0ZM100,120a28,28,0,1,1,28,28A28,28,0,0,1,100,120ZM194,179.94a83.48,83.48,0,0,0-29-23.42,52,52,0,1,0-74,0,83.48,83.48,0,0,0-29,23.42,84,84,0,1,1,131.9,0Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M224,128a95.76,95.76,0,0,1-31.8,71.37A72,72,0,0,0,128,160a40,40,0,1,0-40-40,40,40,0,0,0,40,40,72,72,0,0,0-64.2,39.37h0A96,96,0,1,1,224,128Z",opacity:"0.2"}),h.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM74.08,197.5a64,64,0,0,1,107.84,0,87.83,87.83,0,0,1-107.84,0ZM96,120a32,32,0,1,1,32,32A32,32,0,0,1,96,120Zm97.76,66.41a79.66,79.66,0,0,0-36.06-28.75,48,48,0,1,0-59.4,0,79.66,79.66,0,0,0-36.06,28.75,88,88,0,1,1,131.52,0Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M172,120a44,44,0,1,1-44-44A44.05,44.05,0,0,1,172,120Zm60,8A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88.09,88.09,0,0,0-91.47-87.93C77.43,41.89,39.87,81.12,40,128.25a87.65,87.65,0,0,0,22.24,58.16A79.71,79.71,0,0,1,84,165.1a4,4,0,0,1,4.83.32,59.83,59.83,0,0,0,78.28,0,4,4,0,0,1,4.83-.32,79.71,79.71,0,0,1,21.79,21.31A87.62,87.62,0,0,0,216,128Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26ZM71.44,198a66,66,0,0,1,113.12,0,89.8,89.8,0,0,1-113.12,0ZM94,120a34,34,0,1,1,34,34A34,34,0,0,1,94,120Zm99.51,69.64a77.53,77.53,0,0,0-40-31.38,46,46,0,1,0-51,0,77.53,77.53,0,0,0-40,31.38,90,90,0,1,1,131,0Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM74.08,197.5a64,64,0,0,1,107.84,0,87.83,87.83,0,0,1-107.84,0ZM96,120a32,32,0,1,1,32,32A32,32,0,0,1,96,120Zm97.76,66.41a79.66,79.66,0,0,0-36.06-28.75,48,48,0,1,0-59.4,0,79.66,79.66,0,0,0-36.06,28.75,88,88,0,1,1,131.52,0Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28ZM68.87,198.42a68,68,0,0,1,118.26,0,91.8,91.8,0,0,1-118.26,0Zm124.3-5.55a75.61,75.61,0,0,0-44.51-34,44,44,0,1,0-41.32,0,75.61,75.61,0,0,0-44.51,34,92,92,0,1,1,130.34,0ZM128,156a36,36,0,1,1,36-36A36,36,0,0,1,128,156Z"}))]]),ew=new Map([["bold",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,36H40A20,20,0,0,0,20,56V160a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A20,20,0,0,0,216,36Zm-4,120H44V60H212Zm24,52a12,12,0,0,1-12,12H32a12,12,0,0,1,0-24H224A12,12,0,0,1,236,208ZM104,128V88a12,12,0,0,1,18.36-10.18l32,20a12,12,0,0,1,0,20.36l-32,20A12,12,0,0,1,104,128Z"}))],["duotone",h.createElement(h.Fragment,null,h.createElement("path",{d:"M216,48H40a8,8,0,0,0-8,8V168a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V56A8,8,0,0,0,216,48ZM112,144V80l48,32Z",opacity:"0.2"}),h.createElement("path",{d:"M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"}))],["fill",h.createElement(h.Fragment,null,h.createElement("path",{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Zm0-152V168a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Zm-68,56a8,8,0,0,0-3.41-6.55l-40-28A8,8,0,0,0,108,84v56a8,8,0,0,0,12.59,6.55l40-28A8,8,0,0,0,164,112Z"}))],["light",h.createElement(h.Fragment,null,h.createElement("path",{d:"M163.33,107l-48-32A6,6,0,0,0,106,80v64a6,6,0,0,0,9.33,5l48-32a6,6,0,0,0,0-10ZM118,132.79V91.21L149.18,112ZM216,42H40A14,14,0,0,0,26,56V168a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42Zm2,126a2,2,0,0,1-2,2H40a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H216a2,2,0,0,1,2,2Zm12,40a6,6,0,0,1-6,6H32a6,6,0,0,1,0-12H224A6,6,0,0,1,230,208Z"}))],["regular",h.createElement(h.Fragment,null,h.createElement("path",{d:"M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"}))],["thin",h.createElement(h.Fragment,null,h.createElement("path",{d:"M162.22,108.67l-48-32A4,4,0,0,0,108,80v64a4,4,0,0,0,2.11,3.53,4,4,0,0,0,4.11-.2l48-32a4,4,0,0,0,0-6.66ZM116,136.53V87.47L152.79,112ZM216,44H40A12,12,0,0,0,28,56V168a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44Zm4,124a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H216a4,4,0,0,1,4,4Zm8,40a4,4,0,0,1-4,4H32a4,4,0,0,1,0-8H224A4,4,0,0,1,228,208Z"}))]]);var tw=Object.defineProperty,nw=Object.defineProperties,rw=Object.getOwnPropertyDescriptors,qu=Object.getOwnPropertySymbols,sw=Object.prototype.hasOwnProperty,aw=Object.prototype.propertyIsEnumerable,Wu=(e,t,n)=>t in e?tw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ow=(e,t)=>{for(var n in t||(t={}))sw.call(t,n)&&Wu(e,n,t[n]);if(qu)for(var n of qu(t))aw.call(t,n)&&Wu(e,n,t[n]);return e},iw=(e,t)=>nw(e,rw(t));const V1=v.forwardRef((e,t)=>h.createElement(be,iw(ow({ref:t},e),{weights:v4})));V1.displayName="ArrowDown";var lw=Object.defineProperty,cw=Object.defineProperties,dw=Object.getOwnPropertyDescriptors,Uu=Object.getOwnPropertySymbols,uw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,Gu=(e,t,n)=>t in e?lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fw=(e,t)=>{for(var n in t||(t={}))uw.call(t,n)&&Gu(e,n,t[n]);if(Uu)for(var n of Uu(t))mw.call(t,n)&&Gu(e,n,t[n]);return e},pw=(e,t)=>cw(e,dw(t));const H1=v.forwardRef((e,t)=>h.createElement(be,pw(fw({ref:t},e),{weights:y4})));H1.displayName="ArrowFatLineRight";var hw=Object.defineProperty,gw=Object.defineProperties,xw=Object.getOwnPropertyDescriptors,Ku=Object.getOwnPropertySymbols,vw=Object.prototype.hasOwnProperty,yw=Object.prototype.propertyIsEnumerable,Yu=(e,t,n)=>t in e?hw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bw=(e,t)=>{for(var n in t||(t={}))vw.call(t,n)&&Yu(e,n,t[n]);if(Ku)for(var n of Ku(t))yw.call(t,n)&&Yu(e,n,t[n]);return e},ww=(e,t)=>gw(e,xw(t));const ar=v.forwardRef((e,t)=>h.createElement(be,ww(bw({ref:t},e),{weights:b4})));ar.displayName="ArrowRight";var jw=Object.defineProperty,Nw=Object.defineProperties,Sw=Object.getOwnPropertyDescriptors,Xu=Object.getOwnPropertySymbols,Ew=Object.prototype.hasOwnProperty,Cw=Object.prototype.propertyIsEnumerable,Ju=(e,t,n)=>t in e?jw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iw=(e,t)=>{for(var n in t||(t={}))Ew.call(t,n)&&Ju(e,n,t[n]);if(Xu)for(var n of Xu(t))Cw.call(t,n)&&Ju(e,n,t[n]);return e},Aw=(e,t)=>Nw(e,Sw(t));const B1=v.forwardRef((e,t)=>h.createElement(be,Aw(Iw({ref:t},e),{weights:w4})));B1.displayName="Book";var Mw=Object.defineProperty,Dw=Object.defineProperties,kw=Object.getOwnPropertyDescriptors,Qu=Object.getOwnPropertySymbols,Ow=Object.prototype.hasOwnProperty,Tw=Object.prototype.propertyIsEnumerable,e0=(e,t,n)=>t in e?Mw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fw=(e,t)=>{for(var n in t||(t={}))Ow.call(t,n)&&e0(e,n,t[n]);if(Qu)for(var n of Qu(t))Tw.call(t,n)&&e0(e,n,t[n]);return e},Lw=(e,t)=>Dw(e,kw(t));const z1=v.forwardRef((e,t)=>h.createElement(be,Lw(Fw({ref:t},e),{weights:j4})));z1.displayName="Broom";var Pw=Object.defineProperty,$w=Object.defineProperties,_w=Object.getOwnPropertyDescriptors,t0=Object.getOwnPropertySymbols,Rw=Object.prototype.hasOwnProperty,Vw=Object.prototype.propertyIsEnumerable,n0=(e,t,n)=>t in e?Pw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hw=(e,t)=>{for(var n in t||(t={}))Rw.call(t,n)&&n0(e,n,t[n]);if(t0)for(var n of t0(t))Vw.call(t,n)&&n0(e,n,t[n]);return e},Bw=(e,t)=>$w(e,_w(t));const Z1=v.forwardRef((e,t)=>h.createElement(be,Bw(Hw({ref:t},e),{weights:N4})));Z1.displayName="CaretDoubleLeft";var zw=Object.defineProperty,Zw=Object.defineProperties,qw=Object.getOwnPropertyDescriptors,r0=Object.getOwnPropertySymbols,Ww=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable,s0=(e,t,n)=>t in e?zw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gw=(e,t)=>{for(var n in t||(t={}))Ww.call(t,n)&&s0(e,n,t[n]);if(r0)for(var n of r0(t))Uw.call(t,n)&&s0(e,n,t[n]);return e},Kw=(e,t)=>Zw(e,qw(t));const q1=v.forwardRef((e,t)=>h.createElement(be,Kw(Gw({ref:t},e),{weights:S4})));q1.displayName="CaretDoubleRight";var Yw=Object.defineProperty,Xw=Object.defineProperties,Jw=Object.getOwnPropertyDescriptors,a0=Object.getOwnPropertySymbols,Qw=Object.prototype.hasOwnProperty,e3=Object.prototype.propertyIsEnumerable,o0=(e,t,n)=>t in e?Yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t3=(e,t)=>{for(var n in t||(t={}))Qw.call(t,n)&&o0(e,n,t[n]);if(a0)for(var n of a0(t))e3.call(t,n)&&o0(e,n,t[n]);return e},n3=(e,t)=>Xw(e,Jw(t));const md=v.forwardRef((e,t)=>h.createElement(be,n3(t3({ref:t},e),{weights:E4})));md.displayName="CaretLeft";var r3=Object.defineProperty,s3=Object.defineProperties,a3=Object.getOwnPropertyDescriptors,i0=Object.getOwnPropertySymbols,o3=Object.prototype.hasOwnProperty,i3=Object.prototype.propertyIsEnumerable,l0=(e,t,n)=>t in e?r3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l3=(e,t)=>{for(var n in t||(t={}))o3.call(t,n)&&l0(e,n,t[n]);if(i0)for(var n of i0(t))i3.call(t,n)&&l0(e,n,t[n]);return e},c3=(e,t)=>s3(e,a3(t));const W1=v.forwardRef((e,t)=>h.createElement(be,c3(l3({ref:t},e),{weights:C4})));W1.displayName="CaretRight";var d3=Object.defineProperty,u3=Object.defineProperties,m3=Object.getOwnPropertyDescriptors,c0=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,d0=(e,t,n)=>t in e?d3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h3=(e,t)=>{for(var n in t||(t={}))f3.call(t,n)&&d0(e,n,t[n]);if(c0)for(var n of c0(t))p3.call(t,n)&&d0(e,n,t[n]);return e},g3=(e,t)=>u3(e,m3(t));const U1=v.forwardRef((e,t)=>h.createElement(be,g3(h3({ref:t},e),{weights:I4})));U1.displayName="CheckSquare";var x3=Object.defineProperty,v3=Object.defineProperties,y3=Object.getOwnPropertyDescriptors,u0=Object.getOwnPropertySymbols,b3=Object.prototype.hasOwnProperty,w3=Object.prototype.propertyIsEnumerable,m0=(e,t,n)=>t in e?x3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j3=(e,t)=>{for(var n in t||(t={}))b3.call(t,n)&&m0(e,n,t[n]);if(u0)for(var n of u0(t))w3.call(t,n)&&m0(e,n,t[n]);return e},N3=(e,t)=>v3(e,y3(t));const G1=v.forwardRef((e,t)=>h.createElement(be,N3(j3({ref:t},e),{weights:A4})));G1.displayName="Checks";var S3=Object.defineProperty,E3=Object.defineProperties,C3=Object.getOwnPropertyDescriptors,f0=Object.getOwnPropertySymbols,I3=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable,p0=(e,t,n)=>t in e?S3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M3=(e,t)=>{for(var n in t||(t={}))I3.call(t,n)&&p0(e,n,t[n]);if(f0)for(var n of f0(t))A3.call(t,n)&&p0(e,n,t[n]);return e},D3=(e,t)=>E3(e,C3(t));const K1=v.forwardRef((e,t)=>h.createElement(be,D3(M3({ref:t},e),{weights:M4})));K1.displayName="CloudArrowDown";var k3=Object.defineProperty,O3=Object.defineProperties,T3=Object.getOwnPropertyDescriptors,h0=Object.getOwnPropertySymbols,F3=Object.prototype.hasOwnProperty,L3=Object.prototype.propertyIsEnumerable,g0=(e,t,n)=>t in e?k3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P3=(e,t)=>{for(var n in t||(t={}))F3.call(t,n)&&g0(e,n,t[n]);if(h0)for(var n of h0(t))L3.call(t,n)&&g0(e,n,t[n]);return e},$3=(e,t)=>O3(e,T3(t));const Y1=v.forwardRef((e,t)=>h.createElement(be,$3(P3({ref:t},e),{weights:D4})));Y1.displayName="Copy";var _3=Object.defineProperty,R3=Object.defineProperties,V3=Object.getOwnPropertyDescriptors,x0=Object.getOwnPropertySymbols,H3=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable,v0=(e,t,n)=>t in e?_3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z3=(e,t)=>{for(var n in t||(t={}))H3.call(t,n)&&v0(e,n,t[n]);if(x0)for(var n of x0(t))B3.call(t,n)&&v0(e,n,t[n]);return e},Z3=(e,t)=>R3(e,V3(t));const X1=v.forwardRef((e,t)=>h.createElement(be,Z3(z3({ref:t},e),{weights:k4})));X1.displayName="DotsSixVertical";var q3=Object.defineProperty,W3=Object.defineProperties,U3=Object.getOwnPropertyDescriptors,y0=Object.getOwnPropertySymbols,G3=Object.prototype.hasOwnProperty,K3=Object.prototype.propertyIsEnumerable,b0=(e,t,n)=>t in e?q3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y3=(e,t)=>{for(var n in t||(t={}))G3.call(t,n)&&b0(e,n,t[n]);if(y0)for(var n of y0(t))K3.call(t,n)&&b0(e,n,t[n]);return e},X3=(e,t)=>W3(e,U3(t));const J1=v.forwardRef((e,t)=>h.createElement(be,X3(Y3({ref:t},e),{weights:O4})));J1.displayName="DotsThree";var J3=Object.defineProperty,Q3=Object.defineProperties,ej=Object.getOwnPropertyDescriptors,w0=Object.getOwnPropertySymbols,tj=Object.prototype.hasOwnProperty,nj=Object.prototype.propertyIsEnumerable,j0=(e,t,n)=>t in e?J3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rj=(e,t)=>{for(var n in t||(t={}))tj.call(t,n)&&j0(e,n,t[n]);if(w0)for(var n of w0(t))nj.call(t,n)&&j0(e,n,t[n]);return e},sj=(e,t)=>Q3(e,ej(t));const Wr=v.forwardRef((e,t)=>h.createElement(be,sj(rj({ref:t},e),{weights:T4})));Wr.displayName="DownloadSimple";var aj=Object.defineProperty,oj=Object.defineProperties,ij=Object.getOwnPropertyDescriptors,N0=Object.getOwnPropertySymbols,lj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable,S0=(e,t,n)=>t in e?aj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dj=(e,t)=>{for(var n in t||(t={}))lj.call(t,n)&&S0(e,n,t[n]);if(N0)for(var n of N0(t))cj.call(t,n)&&S0(e,n,t[n]);return e},uj=(e,t)=>oj(e,ij(t));const mi=v.forwardRef((e,t)=>h.createElement(be,uj(dj({ref:t},e),{weights:F4})));mi.displayName="FileArrowDown";var mj=Object.defineProperty,fj=Object.defineProperties,pj=Object.getOwnPropertyDescriptors,E0=Object.getOwnPropertySymbols,hj=Object.prototype.hasOwnProperty,gj=Object.prototype.propertyIsEnumerable,C0=(e,t,n)=>t in e?mj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xj=(e,t)=>{for(var n in t||(t={}))hj.call(t,n)&&C0(e,n,t[n]);if(E0)for(var n of E0(t))gj.call(t,n)&&C0(e,n,t[n]);return e},vj=(e,t)=>fj(e,pj(t));const fd=v.forwardRef((e,t)=>h.createElement(be,vj(xj({ref:t},e),{weights:L4})));fd.displayName="FileArrowUp";var yj=Object.defineProperty,bj=Object.defineProperties,wj=Object.getOwnPropertyDescriptors,I0=Object.getOwnPropertySymbols,jj=Object.prototype.hasOwnProperty,Nj=Object.prototype.propertyIsEnumerable,A0=(e,t,n)=>t in e?yj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sj=(e,t)=>{for(var n in t||(t={}))jj.call(t,n)&&A0(e,n,t[n]);if(I0)for(var n of I0(t))Nj.call(t,n)&&A0(e,n,t[n]);return e},Ej=(e,t)=>bj(e,wj(t));const fi=v.forwardRef((e,t)=>h.createElement(be,Ej(Sj({ref:t},e),{weights:P4})));fi.displayName="FlowArrow";var Cj=Object.defineProperty,Ij=Object.defineProperties,Aj=Object.getOwnPropertyDescriptors,M0=Object.getOwnPropertySymbols,Mj=Object.prototype.hasOwnProperty,Dj=Object.prototype.propertyIsEnumerable,D0=(e,t,n)=>t in e?Cj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kj=(e,t)=>{for(var n in t||(t={}))Mj.call(t,n)&&D0(e,n,t[n]);if(M0)for(var n of M0(t))Dj.call(t,n)&&D0(e,n,t[n]);return e},Oj=(e,t)=>Ij(e,Aj(t));const mt=v.forwardRef((e,t)=>h.createElement(be,Oj(kj({ref:t},e),{weights:$4})));mt.displayName="Gear";var Tj=Object.defineProperty,Fj=Object.defineProperties,Lj=Object.getOwnPropertyDescriptors,k0=Object.getOwnPropertySymbols,Pj=Object.prototype.hasOwnProperty,$j=Object.prototype.propertyIsEnumerable,O0=(e,t,n)=>t in e?Tj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_j=(e,t)=>{for(var n in t||(t={}))Pj.call(t,n)&&O0(e,n,t[n]);if(k0)for(var n of k0(t))$j.call(t,n)&&O0(e,n,t[n]);return e},Rj=(e,t)=>Fj(e,Lj(t));const Q1=v.forwardRef((e,t)=>h.createElement(be,Rj(_j({ref:t},e),{weights:_4})));Q1.displayName="Gift";var Vj=Object.defineProperty,Hj=Object.defineProperties,Bj=Object.getOwnPropertyDescriptors,T0=Object.getOwnPropertySymbols,zj=Object.prototype.hasOwnProperty,Zj=Object.prototype.propertyIsEnumerable,F0=(e,t,n)=>t in e?Vj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qj=(e,t)=>{for(var n in t||(t={}))zj.call(t,n)&&F0(e,n,t[n]);if(T0)for(var n of T0(t))Zj.call(t,n)&&F0(e,n,t[n]);return e},Wj=(e,t)=>Hj(e,Bj(t));const eh=v.forwardRef((e,t)=>h.createElement(be,Wj(qj({ref:t},e),{weights:R4})));eh.displayName="House";var Uj=Object.defineProperty,Gj=Object.defineProperties,Kj=Object.getOwnPropertyDescriptors,L0=Object.getOwnPropertySymbols,Yj=Object.prototype.hasOwnProperty,Xj=Object.prototype.propertyIsEnumerable,P0=(e,t,n)=>t in e?Uj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jj=(e,t)=>{for(var n in t||(t={}))Yj.call(t,n)&&P0(e,n,t[n]);if(L0)for(var n of L0(t))Xj.call(t,n)&&P0(e,n,t[n]);return e},Qj=(e,t)=>Gj(e,Kj(t));const th=v.forwardRef((e,t)=>h.createElement(be,Qj(Jj({ref:t},e),{weights:V4})));th.displayName="Kanban";var e5=Object.defineProperty,t5=Object.defineProperties,n5=Object.getOwnPropertyDescriptors,$0=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,s5=Object.prototype.propertyIsEnumerable,_0=(e,t,n)=>t in e?e5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a5=(e,t)=>{for(var n in t||(t={}))r5.call(t,n)&&_0(e,n,t[n]);if($0)for(var n of $0(t))s5.call(t,n)&&_0(e,n,t[n]);return e},o5=(e,t)=>t5(e,n5(t));const nh=v.forwardRef((e,t)=>h.createElement(be,o5(a5({ref:t},e),{weights:H4})));nh.displayName="Key";var i5=Object.defineProperty,l5=Object.defineProperties,c5=Object.getOwnPropertyDescriptors,R0=Object.getOwnPropertySymbols,d5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,V0=(e,t,n)=>t in e?i5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m5=(e,t)=>{for(var n in t||(t={}))d5.call(t,n)&&V0(e,n,t[n]);if(R0)for(var n of R0(t))u5.call(t,n)&&V0(e,n,t[n]);return e},f5=(e,t)=>l5(e,c5(t));const rh=v.forwardRef((e,t)=>h.createElement(be,f5(m5({ref:t},e),{weights:B4})));rh.displayName="LineSegments";var p5=Object.defineProperty,h5=Object.defineProperties,g5=Object.getOwnPropertyDescriptors,H0=Object.getOwnPropertySymbols,x5=Object.prototype.hasOwnProperty,v5=Object.prototype.propertyIsEnumerable,B0=(e,t,n)=>t in e?p5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y5=(e,t)=>{for(var n in t||(t={}))x5.call(t,n)&&B0(e,n,t[n]);if(H0)for(var n of H0(t))v5.call(t,n)&&B0(e,n,t[n]);return e},b5=(e,t)=>h5(e,g5(t));const pi=v.forwardRef((e,t)=>h.createElement(be,b5(y5({ref:t},e),{weights:z4})));pi.displayName="Link";var w5=Object.defineProperty,j5=Object.defineProperties,N5=Object.getOwnPropertyDescriptors,z0=Object.getOwnPropertySymbols,S5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,Z0=(e,t,n)=>t in e?w5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C5=(e,t)=>{for(var n in t||(t={}))S5.call(t,n)&&Z0(e,n,t[n]);if(z0)for(var n of z0(t))E5.call(t,n)&&Z0(e,n,t[n]);return e},I5=(e,t)=>j5(e,N5(t));const sh=v.forwardRef((e,t)=>h.createElement(be,I5(C5({ref:t},e),{weights:Z4})));sh.displayName="LinkBreak";var A5=Object.defineProperty,M5=Object.defineProperties,D5=Object.getOwnPropertyDescriptors,q0=Object.getOwnPropertySymbols,k5=Object.prototype.hasOwnProperty,O5=Object.prototype.propertyIsEnumerable,W0=(e,t,n)=>t in e?A5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T5=(e,t)=>{for(var n in t||(t={}))k5.call(t,n)&&W0(e,n,t[n]);if(q0)for(var n of q0(t))O5.call(t,n)&&W0(e,n,t[n]);return e},F5=(e,t)=>M5(e,D5(t));const ah=v.forwardRef((e,t)=>h.createElement(be,F5(T5({ref:t},e),{weights:q4})));ah.displayName="MinusSquare";var L5=Object.defineProperty,P5=Object.defineProperties,$5=Object.getOwnPropertyDescriptors,U0=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,R5=Object.prototype.propertyIsEnumerable,G0=(e,t,n)=>t in e?L5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V5=(e,t)=>{for(var n in t||(t={}))_5.call(t,n)&&G0(e,n,t[n]);if(U0)for(var n of U0(t))R5.call(t,n)&&G0(e,n,t[n]);return e},H5=(e,t)=>P5(e,$5(t));const pd=v.forwardRef((e,t)=>h.createElement(be,H5(V5({ref:t},e),{weights:W4})));pd.displayName="Package";var B5=Object.defineProperty,z5=Object.defineProperties,Z5=Object.getOwnPropertyDescriptors,K0=Object.getOwnPropertySymbols,q5=Object.prototype.hasOwnProperty,W5=Object.prototype.propertyIsEnumerable,Y0=(e,t,n)=>t in e?B5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U5=(e,t)=>{for(var n in t||(t={}))q5.call(t,n)&&Y0(e,n,t[n]);if(K0)for(var n of K0(t))W5.call(t,n)&&Y0(e,n,t[n]);return e},G5=(e,t)=>z5(e,Z5(t));const Kt=v.forwardRef((e,t)=>h.createElement(be,G5(U5({ref:t},e),{weights:U4})));Kt.displayName="Pencil";var K5=Object.defineProperty,Y5=Object.defineProperties,X5=Object.getOwnPropertyDescriptors,X0=Object.getOwnPropertySymbols,J5=Object.prototype.hasOwnProperty,Q5=Object.prototype.propertyIsEnumerable,J0=(e,t,n)=>t in e?K5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eN=(e,t)=>{for(var n in t||(t={}))J5.call(t,n)&&J0(e,n,t[n]);if(X0)for(var n of X0(t))Q5.call(t,n)&&J0(e,n,t[n]);return e},tN=(e,t)=>Y5(e,X5(t));const oh=v.forwardRef((e,t)=>h.createElement(be,tN(eN({ref:t},e),{weights:G4})));oh.displayName="PlusCircle";var nN=Object.defineProperty,rN=Object.defineProperties,sN=Object.getOwnPropertyDescriptors,Q0=Object.getOwnPropertySymbols,aN=Object.prototype.hasOwnProperty,oN=Object.prototype.propertyIsEnumerable,em=(e,t,n)=>t in e?nN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iN=(e,t)=>{for(var n in t||(t={}))aN.call(t,n)&&em(e,n,t[n]);if(Q0)for(var n of Q0(t))oN.call(t,n)&&em(e,n,t[n]);return e},lN=(e,t)=>rN(e,sN(t));const hd=v.forwardRef((e,t)=>h.createElement(be,lN(iN({ref:t},e),{weights:K4})));hd.displayName="SignOut";var cN=Object.defineProperty,dN=Object.defineProperties,uN=Object.getOwnPropertyDescriptors,tm=Object.getOwnPropertySymbols,mN=Object.prototype.hasOwnProperty,fN=Object.prototype.propertyIsEnumerable,nm=(e,t,n)=>t in e?cN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pN=(e,t)=>{for(var n in t||(t={}))mN.call(t,n)&&nm(e,n,t[n]);if(tm)for(var n of tm(t))fN.call(t,n)&&nm(e,n,t[n]);return e},hN=(e,t)=>dN(e,uN(t));const lc=v.forwardRef((e,t)=>h.createElement(be,hN(pN({ref:t},e),{weights:Y4})));lc.displayName="Swap";var gN=Object.defineProperty,xN=Object.defineProperties,vN=Object.getOwnPropertyDescriptors,rm=Object.getOwnPropertySymbols,yN=Object.prototype.hasOwnProperty,bN=Object.prototype.propertyIsEnumerable,sm=(e,t,n)=>t in e?gN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wN=(e,t)=>{for(var n in t||(t={}))yN.call(t,n)&&sm(e,n,t[n]);if(rm)for(var n of rm(t))bN.call(t,n)&&sm(e,n,t[n]);return e},jN=(e,t)=>xN(e,vN(t));const gd=v.forwardRef((e,t)=>h.createElement(be,jN(wN({ref:t},e),{weights:X4})));gd.displayName="Tag";var NN=Object.defineProperty,SN=Object.defineProperties,EN=Object.getOwnPropertyDescriptors,am=Object.getOwnPropertySymbols,CN=Object.prototype.hasOwnProperty,IN=Object.prototype.propertyIsEnumerable,om=(e,t,n)=>t in e?NN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AN=(e,t)=>{for(var n in t||(t={}))CN.call(t,n)&&om(e,n,t[n]);if(am)for(var n of am(t))IN.call(t,n)&&om(e,n,t[n]);return e},MN=(e,t)=>SN(e,EN(t));const xd=v.forwardRef((e,t)=>h.createElement(be,MN(AN({ref:t},e),{weights:J4})));xd.displayName="TextAa";var DN=Object.defineProperty,kN=Object.defineProperties,ON=Object.getOwnPropertyDescriptors,im=Object.getOwnPropertySymbols,TN=Object.prototype.hasOwnProperty,FN=Object.prototype.propertyIsEnumerable,lm=(e,t,n)=>t in e?DN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LN=(e,t)=>{for(var n in t||(t={}))TN.call(t,n)&&lm(e,n,t[n]);if(im)for(var n of im(t))FN.call(t,n)&&lm(e,n,t[n]);return e},PN=(e,t)=>kN(e,ON(t));const ih=v.forwardRef((e,t)=>h.createElement(be,PN(LN({ref:t},e),{weights:Q4})));ih.displayName="UserCircle";var $N=Object.defineProperty,_N=Object.defineProperties,RN=Object.getOwnPropertyDescriptors,cm=Object.getOwnPropertySymbols,VN=Object.prototype.hasOwnProperty,HN=Object.prototype.propertyIsEnumerable,dm=(e,t,n)=>t in e?$N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BN=(e,t)=>{for(var n in t||(t={}))VN.call(t,n)&&dm(e,n,t[n]);if(cm)for(var n of cm(t))HN.call(t,n)&&dm(e,n,t[n]);return e},zN=(e,t)=>_N(e,RN(t));const vd=v.forwardRef((e,t)=>h.createElement(be,zN(BN({ref:t},e),{weights:ew})));vd.displayName="Video";const lh=new sy(new ci);class Te{constructor(){pe(this,"backupDataStore",lh)}async addOption(...t){return await this.backupDataStore.addOption(...t)}async removeOption(...t){return await this.backupDataStore.removeOption(...t)}async setOptions(...t){return await this.backupDataStore.setOptions(...t)}async updateOption(...t){return await this.backupDataStore.updateOption(...t)}}class Se{constructor(){pe(this,"flowStore",Ue)}async addFlow(...t){return await this.flowStore.addFlow(...t)}async addNodeToFlow(...t){return await this.flowStore.addNodeToFlow(...t)}deleteFlow(...t){return this.flowStore.deleteFlow(...t)}findAll(...t){return this.flowStore.findAll(...t)}findById(...t){return this.flowStore.findById(...t)}findFlowsWithItem(...t){return this.flowStore.findFlowsWithItem(...t)}removeNodeFromFlow(...t){return this.flowStore.removeNodeFromFlow(...t)}selectFlow(...t){this.flowStore.selectFlow(...t)}async updateFlow(...t){return await this.flowStore.updateFlow(...t)}updateNode(...t){return this.flowStore.updateNode(...t)}updateManyNodes(...t){return this.flowStore.updateManyNodes(...t)}updateStartNode(...t){return this.flowStore.updateStartNode(...t)}}class vt{constructor(){pe(this,"funnelStore",st)}getAll(){return st.funnelList}async addFunnel(...t){await this.funnelStore.addFunnel(...t)}async deleteFunnel(...t){await this.funnelStore.deleteFunnel(...t)}async findById(...t){return await this.funnelStore.findById(...t)}async findFunnelsWithItem(...t){return await this.funnelStore.findFunnelsWithItem(...t)}async getFunnelList(){return this.funnelStore.funnelList}async getSequenceItems(...t){return await this.funnelStore.getSequenceItems(...t)}async reorderFunnelList(...t){await this.funnelStore.reorderFunnelList(...t)}async saveFunnel(...t){await this.funnelStore.saveFunnel(...t)}async selectFunnel(...t){await this.funnelStore.selectFunnel(...t)}async setFunnelFilter(...t){await this.funnelStore.setFunnelFilter(...t)}}class ZN{constructor(t){this.backupDataRepository=t}async execute({optionKey:t,optionIdToRemove:n}){return await this.backupDataRepository.removeOption({optionKey:t,optionIdToRemove:n})}}function Ur(e){const t=new ZN(e);return t.execute.bind(t)}function qN({audio:e}){const t=o4(new an,new vt,new Se),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"audios",optionIdToRemove:e.id})}).then(()=>{ae({title:`Áudio "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o áudio "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir o áudio"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir áudio"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function WN({audio:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("a",{download:e==null?void 0:e.name,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:s.jsx(K,{icon:s.jsx(Wr,{size:24}),variant:"action",size:"action"})})}),s.jsx(fe,{children:"Baixar"})]})}const UN=({audioIsForwarded:e,audioName:t,itemId:n,mode:r,viewOnce:a})=>{const[o,i]=v.useState(a),[l,c]=v.useState(void 0),[d,u]=v.useState(void 0),[m,f]=v.useState(e),[p,g]=v.useState(t),x=new an,y=new Te,b=ay(x),w=Va(x),j=x4(x),N=xn(y),I=vn(y);v.useEffect(()=>{e!==m&&f(e),t!==p&&g(t),a!==o&&i(a)},[e,t,a]);const S=()=>{r==="edit"?(g(t),f(e)):(g(""),c(void 0),f(!1))},E=(C,D)=>{c(C),u(D)},A=async C=>{if(C&&r==="edit"&&n){const D=await w(n);D&&(c(D.data),f(!D.isPtt))}},O=async()=>{if(r==="create"&&l){const{audio:C}=await b({asViewOnce:o,base64:l,isPtt:!m,name:p.trim()});return await N({optionKey:"audios",optionToAdd:{id:C.id,name:C.name,size:await Ne(C,{itemData:C.data})}}),ae({title:`Áudio "${p.trim()}" adicionado com sucesso.`}),S(),C.id}else if(r==="edit"&&n){const{audio:C}=await j({asViewOnce:o,base64:l,id:n,isPtt:!m,name:p.trim()});return await I({optionKey:"audios",optionToUpdate:{id:C.id,name:C.name,size:await Ne(C,{itemData:C.data})}}),ae({title:`Áudio "${p.trim()}" atualizado com sucesso.`}),C.id}},M=C=>(C.stopPropagation(),c(void 0)),T={value:p,onChange:C=>g(C.target.value)},$={checked:m,onCheckedChange:f},P={checked:o,onCheckedChange:i};return{base64:l,clearAllState:S,fileName:d,handleModalAction:O,handleOpenChange:A,handleRemoveUploadedAudio:M,handleUploadedAudio:E,hasAudio:!!l&&!!d,nameHandler:T,notReady:p.trim()===""||r==="create"&&!l,forwardedHandler:$,sendAs:m?"gravado":"encaminhado",title:r==="create"?"Adicionar áudio":"Editar áudio",viewOnceHandler:P}};var ch={exports:{}},GN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KN=GN,YN=KN;function dh(){}function uh(){}uh.resetWarningCache=dh;var XN=function(){function e(r,a,o,i,l,c){if(c!==YN){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uh,resetWarningCache:dh};return n.PropTypes=n,n};ch.exports=XN();var JN=ch.exports;const Ae=Yc(JN);var QN=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Ha(e,t){var n=eS(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function eS(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),a=QN.get(r);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var tS=[".DS_Store","Thumbs.db"];function nS(e){return Ns(this,void 0,void 0,function(){return Ss(this,function(t){return Co(e)&&rS(e.dataTransfer)?[2,iS(e.dataTransfer,e.type)]:sS(e)?[2,aS(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,oS(e)]:[2,[]]})})}function rS(e){return Co(e)}function sS(e){return Co(e)&&Co(e.target)}function Co(e){return typeof e=="object"&&e!==null}function aS(e){return cc(e.target.files).map(function(t){return Ha(t)})}function oS(e){return Ns(this,void 0,void 0,function(){var t;return Ss(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return Ha(r)})]}})})}function iS(e,t){return Ns(this,void 0,void 0,function(){var n,r;return Ss(this,function(a){switch(a.label){case 0:return e.items?(n=cc(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(lS))]):[3,2];case 1:return r=a.sent(),[2,um(mh(r))];case 2:return[2,um(cc(e.files).map(function(o){return Ha(o)}))]}})})}function um(e){return e.filter(function(t){return tS.indexOf(t.name)===-1})}function cc(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function lS(e){if(typeof e.webkitGetAsEntry!="function")return mm(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?fh(t):mm(e)}function mh(e){return e.reduce(function(t,n){return _u(_u([],Ru(t),!1),Ru(Array.isArray(n)?mh(n):[n]),!1)},[])}function mm(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=Ha(t);return Promise.resolve(n)}function cS(e){return Ns(this,void 0,void 0,function(){return Ss(this,function(t){return[2,e.isDirectory?fh(e):dS(e)]})})}function fh(e){var t=e.createReader();return new Promise(function(n,r){var a=[];function o(){var i=this;t.readEntries(function(l){return Ns(i,void 0,void 0,function(){var c,d,u;return Ss(this,function(m){switch(m.label){case 0:if(l.length)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return c=m.sent(),n(c),[3,4];case 3:return d=m.sent(),r(d),[3,4];case 4:return[3,6];case 5:u=Promise.all(l.map(cS)),a.push(u),o(),m.label=6;case 6:return[2]}})})},function(l){r(l)})}o()})}function dS(e){return Ns(this,void 0,void 0,function(){return Ss(this,function(t){return[2,new Promise(function(n,r){e.file(function(a){var o=Ha(a,e.fullPath);n(o)},function(a){r(a)})})]})})}var Sl=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?o===l.replace(/\/.*$/,""):a===l})}return!0};function fm(e){return fS(e)||mS(e)||hh(e)||uS()}function uS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mS(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fS(e){if(Array.isArray(e))return dc(e)}function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pm(Object(n),!0).forEach(function(r){ph(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ph(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return gS(e)||hS(e,t)||hh(e,t)||pS()}function pS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hh(e,t){if(e){if(typeof e=="string")return dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dc(e,t)}}function dc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hS(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,l;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(c){o=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function gS(e){if(Array.isArray(e))return e}var xS=typeof Sl=="function"?Sl:Sl.default,gh="file-invalid-type",xh="file-too-large",vh="file-too-small",yh="too-many-files",gm={FileInvalidType:gh,FileTooLarge:xh,FileTooSmall:vh,TooManyFiles:yh},vS=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:gh,message:"File type must be ".concat(n)}},xm=function(t){return{code:xh,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},vm=function(t){return{code:vh,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},yS={code:yh,message:"Too many files"};function bh(e,t){var n=e.type==="application/x-moz-file"||xS(e,t);return[n,n?null:vS(t)]}function wh(e,t,n){if(Dr(e.size))if(Dr(t)&&Dr(n)){if(e.size>n)return[!1,xm(n)];if(e.size<t)return[!1,vm(t)]}else{if(Dr(t)&&e.size<t)return[!1,vm(t)];if(Dr(n)&&e.size>n)return[!1,xm(n)]}return[!0,null]}function Dr(e){return e!=null}function bS(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles,l=e.validator;return!o&&t.length>1||o&&i>=1&&t.length>i?!1:t.every(function(c){var d=bh(c,n),u=oa(d,1),m=u[0],f=wh(c,r,a),p=oa(f,1),g=p[0],x=l?l(c):null;return m&&g&&!x})}function Io(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function to(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ym(e){e.preventDefault()}function wS(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function jS(e){return e.indexOf("Edge/")!==-1}function NS(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return wS(e)||jS(e)}function un(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return t.some(function(l){return!Io(r)&&l&&l.apply(void 0,[r].concat(o)),Io(r)})}}function SS(){return"showOpenFilePicker"in window}function ES(e){if(Dr(e)){var t=Object.entries(e).filter(function(n){var r=oa(n,2),a=r[0],o=r[1],i=!0;return jh(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(Nh))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,r){var a=oa(r,2),o=a[0],i=a[1];return hm(hm({},n),{},ph({},o,i))},{});return[{description:"Files",accept:t}]}return e}function CS(e){if(Dr(e))return Object.entries(e).reduce(function(t,n){var r=oa(n,2),a=r[0],o=r[1];return[].concat(fm(t),[a],fm(o))},[]).filter(function(t){return jh(t)||Nh(t)}).join(",")}function IS(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function AS(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function jh(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Nh(e){return/^.*\.[\w]+$/.test(e)}var MS=["children"],DS=["open"],kS=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],OS=["refKey","onChange","onClick"];function TS(e){return PS(e)||LS(e)||Sh(e)||FS()}function FS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LS(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PS(e){if(Array.isArray(e))return uc(e)}function El(e,t){return RS(e)||_S(e,t)||Sh(e,t)||$S()}function $S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sh(e,t){if(e){if(typeof e=="string")return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(e,t)}}function uc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _S(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,l;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(c){o=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function RS(e){if(Array.isArray(e))return e}function bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bm(Object(n),!0).forEach(function(r){mc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e,t){if(e==null)return{};var n=VS(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function VS(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var yd=v.forwardRef(function(e,t){var n=e.children,r=Ao(e,MS),a=Ch(r),o=a.open,i=Ao(a,DS);return v.useImperativeHandle(t,function(){return{open:o}},[o]),h.createElement(v.Fragment,null,n(Pe(Pe({},i),{},{open:o})))});yd.displayName="Dropzone";var Eh={disabled:!1,getFilesFromEvent:nS,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};yd.defaultProps=Eh;yd.propTypes={children:Ae.func,accept:Ae.objectOf(Ae.arrayOf(Ae.string)),multiple:Ae.bool,preventDropOnDocument:Ae.bool,noClick:Ae.bool,noKeyboard:Ae.bool,noDrag:Ae.bool,noDragEventsBubbling:Ae.bool,minSize:Ae.number,maxSize:Ae.number,maxFiles:Ae.number,disabled:Ae.bool,getFilesFromEvent:Ae.func,onFileDialogCancel:Ae.func,onFileDialogOpen:Ae.func,useFsAccessApi:Ae.bool,autoFocus:Ae.bool,onDragEnter:Ae.func,onDragLeave:Ae.func,onDragOver:Ae.func,onDrop:Ae.func,onDropAccepted:Ae.func,onDropRejected:Ae.func,onError:Ae.func,validator:Ae.func};var fc={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Ch(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Pe(Pe({},Eh),e),n=t.accept,r=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,i=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,u=t.onDragLeave,m=t.onDragOver,f=t.onDrop,p=t.onDropAccepted,g=t.onDropRejected,x=t.onFileDialogCancel,y=t.onFileDialogOpen,b=t.useFsAccessApi,w=t.autoFocus,j=t.preventDropOnDocument,N=t.noClick,I=t.noKeyboard,S=t.noDrag,E=t.noDragEventsBubbling,A=t.onError,O=t.validator,M=v.useMemo(function(){return CS(n)},[n]),T=v.useMemo(function(){return ES(n)},[n]),$=v.useMemo(function(){return typeof y=="function"?y:wm},[y]),P=v.useMemo(function(){return typeof x=="function"?x:wm},[x]),C=v.useRef(null),D=v.useRef(null),k=v.useReducer(HS,fc),L=El(k,2),F=L[0],_=L[1],H=F.isFocused,q=F.isFileDialogActive,z=v.useRef(typeof window<"u"&&window.isSecureContext&&b&&SS()),V=function(){!z.current&&q&&setTimeout(function(){if(D.current){var oe=D.current.files;oe.length||(_({type:"closeDialog"}),P())}},300)};v.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[D,q,P,z]);var R=v.useRef([]),B=function(oe){C.current&&C.current.contains(oe.target)||(oe.preventDefault(),R.current=[])};v.useEffect(function(){return j&&(document.addEventListener("dragover",ym,!1),document.addEventListener("drop",B,!1)),function(){j&&(document.removeEventListener("dragover",ym),document.removeEventListener("drop",B))}},[C,j]),v.useEffect(function(){return!r&&w&&C.current&&C.current.focus(),function(){}},[C,w,r]);var W=v.useCallback(function(J){A?A(J):console.error(J)},[A]),Z=v.useCallback(function(J){J.preventDefault(),J.persist(),ce(J),R.current=[].concat(TS(R.current),[J.target]),to(J)&&Promise.resolve(a(J)).then(function(oe){if(!(Io(J)&&!E)){var Ie=oe.length,Oe=Ie>0&&bS({files:oe,accept:M,minSize:i,maxSize:o,multiple:l,maxFiles:c,validator:O}),qe=Ie>0&&!Oe;_({isDragAccept:Oe,isDragReject:qe,isDragActive:!0,type:"setDraggedFiles"}),d&&d(J)}}).catch(function(oe){return W(oe)})},[a,d,W,E,M,i,o,l,c,O]),U=v.useCallback(function(J){J.preventDefault(),J.persist(),ce(J);var oe=to(J);if(oe&&J.dataTransfer)try{J.dataTransfer.dropEffect="copy"}catch{}return oe&&m&&m(J),!1},[m,E]),ee=v.useCallback(function(J){J.preventDefault(),J.persist(),ce(J);var oe=R.current.filter(function(Oe){return C.current&&C.current.contains(Oe)}),Ie=oe.indexOf(J.target);Ie!==-1&&oe.splice(Ie,1),R.current=oe,!(oe.length>0)&&(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),to(J)&&u&&u(J))},[C,u,E]),X=v.useCallback(function(J,oe){var Ie=[],Oe=[];J.forEach(function(qe){var Vt=bh(qe,M),Un=El(Vt,2),Ls=Un[0],Ps=Un[1],$s=wh(qe,i,o),Qr=El($s,2),_s=Qr[0],Rs=Qr[1],Vs=O?O(qe):null;if(Ls&&_s&&!Vs)Ie.push(qe);else{var Hs=[Ps,Rs];Vs&&(Hs=Hs.concat(Vs)),Oe.push({file:qe,errors:Hs.filter(function(bl){return bl})})}}),(!l&&Ie.length>1||l&&c>=1&&Ie.length>c)&&(Ie.forEach(function(qe){Oe.push({file:qe,errors:[yS]})}),Ie.splice(0)),_({acceptedFiles:Ie,fileRejections:Oe,type:"setFiles"}),f&&f(Ie,Oe,oe),Oe.length>0&&g&&g(Oe,oe),Ie.length>0&&p&&p(Ie,oe)},[_,l,M,i,o,c,f,p,g,O]),te=v.useCallback(function(J){J.preventDefault(),J.persist(),ce(J),R.current=[],to(J)&&Promise.resolve(a(J)).then(function(oe){Io(J)&&!E||X(oe,J)}).catch(function(oe){return W(oe)}),_({type:"reset"})},[a,X,W,E]),G=v.useCallback(function(){if(z.current){_({type:"openDialog"}),$();var J={multiple:l,types:T};window.showOpenFilePicker(J).then(function(oe){return a(oe)}).then(function(oe){X(oe,null),_({type:"closeDialog"})}).catch(function(oe){IS(oe)?(P(oe),_({type:"closeDialog"})):AS(oe)?(z.current=!1,D.current?(D.current.value=null,D.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):W(oe)});return}D.current&&(_({type:"openDialog"}),$(),D.current.value=null,D.current.click())},[_,$,P,b,X,W,T,l]),ne=v.useCallback(function(J){!C.current||!C.current.isEqualNode(J.target)||(J.key===" "||J.key==="Enter"||J.keyCode===32||J.keyCode===13)&&(J.preventDefault(),G())},[C,G]),ge=v.useCallback(function(){_({type:"focus"})},[]),Ve=v.useCallback(function(){_({type:"blur"})},[]),He=v.useCallback(function(){N||(NS()?setTimeout(G,0):G())},[N,G]),ot=function(oe){return r?null:oe},qn=function(oe){return I?null:ot(oe)},Sn=function(oe){return S?null:ot(oe)},ce=function(oe){E&&oe.stopPropagation()},At=v.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=J.refKey,Ie=oe===void 0?"ref":oe,Oe=J.role,qe=J.onKeyDown,Vt=J.onFocus,Un=J.onBlur,Ls=J.onClick,Ps=J.onDragEnter,$s=J.onDragOver,Qr=J.onDragLeave,_s=J.onDrop,Rs=Ao(J,kS);return Pe(Pe(mc({onKeyDown:qn(un(qe,ne)),onFocus:qn(un(Vt,ge)),onBlur:qn(un(Un,Ve)),onClick:ot(un(Ls,He)),onDragEnter:Sn(un(Ps,Z)),onDragOver:Sn(un($s,U)),onDragLeave:Sn(un(Qr,ee)),onDrop:Sn(un(_s,te)),role:typeof Oe=="string"&&Oe!==""?Oe:"presentation"},Ie,C),!r&&!I?{tabIndex:0}:{}),Rs)}},[C,ne,ge,Ve,He,Z,U,ee,te,I,S,r]),Wn=v.useCallback(function(J){J.stopPropagation()},[]),dn=v.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=J.refKey,Ie=oe===void 0?"ref":oe,Oe=J.onChange,qe=J.onClick,Vt=Ao(J,OS),Un=mc({accept:M,multiple:l,type:"file",style:{display:"none"},onChange:ot(un(Oe,te)),onClick:ot(un(qe,Wn)),tabIndex:-1},Ie,D);return Pe(Pe({},Un),Vt)}},[D,n,l,te,r]);return Pe(Pe({},F),{},{isFocused:H&&!r,getRootProps:At,getInputProps:dn,rootRef:C,inputRef:D,open:ot(G)})}function HS(e,t){switch(t.type){case"focus":return Pe(Pe({},e),{},{isFocused:!0});case"blur":return Pe(Pe({},e),{},{isFocused:!1});case"openDialog":return Pe(Pe({},fc),{},{isFileDialogActive:!0});case"closeDialog":return Pe(Pe({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Pe(Pe({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Pe(Pe({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Pe({},fc);default:return e}}function wm(){}function hi({accept:e,className:t,disabled:n=!1,dragHintText:r,hintText:a,maxSize:o,onSelect:i,returnFile:l=!1}){const c=v.useCallback((p,g)=>{for(const x of p)if(x instanceof File){if(l)return i(x,x.name,x.type.split("/")[0]);const y=new FileReader;y.onabort=()=>console.log("file reading was aborted"),y.onerror=()=>console.log("file reading has failed"),y.onload=()=>{const b=y.result;typeof b=="string"?i(b,x.name,x.type.split("/")[0]):i()},y.readAsDataURL(x)}for(const x of g)for(const y of x.errors)y.code===gm.FileTooLarge&&o&&le({title:`O tamanho do arquivo é maior do que o permitido de ${o/1e6}MB`}),y.code===gm.FileInvalidType&&le({title:"O tipo do arquivo não é permitido.",description:e?s.jsxs("span",{children:["Formatos aceitos:"," ",Object.values(e).map(b=>b.map(w=>s.jsxs("span",{className:"text-primary",children:[w," "]},w)))]}):void 0})},[e,o,i,l]),{getRootProps:d,getInputProps:u,isDragActive:m}=Ch({onDrop:c,accept:e,maxSize:o,preventDropOnDocument:!0}),f=v.useMemo(()=>Be("border border-dashed p-4 text-center rounded-md max-h-44 items-center flex justify-center overflow-y-auto",m&&"bg-primary-200/80 text-white h-24"),[m]);return s.jsx("div",{"aria-disabled":n,className:Be("flex w-full max-w-3xl flex-col gap-2 bg-background text-center transition-all duration-300",n&&"pointer-events-none bg-muted text-muted-foreground opacity-50"),children:s.jsxs("div",{...d(),className:Be(f,t),children:[s.jsx("input",{...u()}),m?typeof r=="string"?s.jsx("p",{className:"text-base",children:r}):r:typeof a=="string"?s.jsx("p",{className:"text-base",children:a}):a]})})}function BS({fileName:e,onRemoveUploaded:t}){return s.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,s.jsx(K,{variant:"actionDestructive",icon:s.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function zS({actionName:e,fileName:t,hasAudio:n,onRemoveUploaded:r,onSelectAudio:a,errorMessage:o}){return s.jsxs("div",{children:[s.jsx(hi,{className:Y(e==="inserir"&&!n&&"border-destructive zv-dark:border-destructive-foreground"),accept:{"audio/*":[".mp3",".ogg"]},onSelect:a,dragHintText:s.jsx("p",{className:"text-base",children:"Solte o áudio aqui..."}),hintText:s.jsxs("p",{className:"text-base leading-8",children:[n?s.jsx(BS,{fileName:t,onRemoveUploaded:r}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:["Para ",e," o áudio, clique aqui ou arraste o arquivo para esta área."]}),s.jsx("br",{})]}),s.jsx("span",{children:"Formatos aceitos: “.ogg” e “.mp3”"})]})}),o?typeof o=="string"?s.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:o}):o:""]})}function bd({itemId:e,audioIsForwarded:t=!1,audioName:n="",mode:r="create",trigger:a,viewOnce:o=!1,className:i,callBackFunction:l}){const{base64:c,clearAllState:d,fileName:u,handleModalAction:m,handleOpenChange:f,handleRemoveUploadedAudio:p,handleUploadedAudio:g,hasAudio:x,nameHandler:y,notReady:b,forwardedHandler:w,title:j,viewOnceHandler:N}=UN({itemId:e,audioIsForwarded:t,audioName:n,mode:r,viewOnce:o});return s.jsx(ve,{className:i,onCancel:d,onAction:async()=>{const I=await m();l&&I&&l(I)},action:"Salvar",actionProps:{icon:s.jsx(Ct,{}),disabled:b},description:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"audioName",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"audioName",placeholder:"Nome do áudio",ref:$n,...y,errorMessage:!y.value.trim()&&"Campo obrigatório"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[s.jsx(xt,{id:"as-forwarded",...w}),s.jsxs(ie,{htmlFor:"as-forwarded",children:["Enviar áudio como"," ",s.jsx("span",{className:"text-primary",children:"encaminhado"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[s.jsx(xt,{id:"as-view-once",...N}),s.jsxs(ie,{htmlFor:"as-view-once",children:["Enviar áudio como"," ",s.jsx("span",{className:"text-primary",children:"visualização única"})]})]})]}),s.jsx(zS,{actionName:r==="create"?"inserir":"alterar",fileName:u,hasAudio:x,onRemoveUploaded:p,onSelectAudio:g,errorMessage:r==="create"&&!x&&"Campo obrigatório"}),s.jsx(Yo,{data:c})]}),onOpenChange:f,title:j,trigger:a,cancel:"Cancelar"})}function Ih({audio:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(bd,{mode:"edit",itemId:e.id,audioIsForwarded:!e.isPtt,audioName:e.name,viewOnce:e.asViewOnce,trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),s.jsx(fe,{children:"Editar"})]})}function Ah({audio:e}){const t=h4(new an);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Áudio "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}function wd({size:e}){return s.jsx(bd,{trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),children:"Adicionar"})})}function ZS({url:e,icon:t,text:n}){return s.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:s.jsx(K,{variant:"outline",icon:t,children:n})})}function It({tutorial:e}){var n;const t=(n=e==null?void 0:e.payload)==null?void 0:n["video-url"];return!(e!=null&&e.enabled)||!t?null:s.jsx(ZS,{icon:s.jsx(oy,{}),text:"Ver vídeo",url:t})}function qS(){const[e]=ye("dashboard-audio-help-video",de);return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center",children:[s.jsx("img",{src:"./audio.svg",alt:"Imagem indicativa de que não há áudios cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione um áudio para visualizar ou clique em "}),s.jsx(wd,{size:"sm"}),s.jsx("span",{children:" para criar um novo áudio."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})})]})}function WS(){const{selectedAudioId:e,dummyTrigger:t}=rt.useGetSelectedAudioId(),n=rt.audioList,r=Va(new an),[a,o]=v.useState(null);return v.useEffect(()=>{const i=n.find(c=>c.id===e);o(c=>({asViewOnce:(i==null?void 0:i.asViewOnce)??!1,id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",isPtt:(i==null?void 0:i.isPtt)??!1,data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){try{const c=await r(e);if(!c)return;o(d=>({asViewOnce:(d==null?void 0:d.asViewOnce)??!1,id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",isPtt:(d==null?void 0:d.isPtt)??!1,data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}catch{}}l()},[e,t]),s.jsx("div",{className:Be("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?s.jsx(qr,{actions:a&&s.jsxs(s.Fragment,{children:[s.jsx(qN,{audio:a}),s.jsx(WN,{audio:a}),s.jsx(Ih,{audio:a}),s.jsx(Ah,{audio:a})]}),body:a&&s.jsxs("div",{children:[s.jsx("p",{className:"text-base",children:a.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),s.jsx("p",{className:"text-base",children:a.asViewOnce&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xo,{size:20,weight:"duotone",className:"text-primary"}),"Enviando áudio como visualização única"]})}),s.jsx(Yo,{data:a.data,className:"mt-1"})]}),title:a==null?void 0:a.name}):s.jsx(qS,{})})}function jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jm(Object(n),!0).forEach(function(r){iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Cl=function(){return Math.random().toString(36).substring(7).split("").join(".")},Em={INIT:"@@redux/INIT"+Cl(),REPLACE:"@@redux/REPLACE"+Cl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Cl()}};function US(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Mh(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wt(1));return n(Mh)(e,t)}if(typeof e!="function")throw new Error(wt(2));var a=e,o=t,i=[],l=i,c=!1;function d(){l===i&&(l=i.slice())}function u(){if(c)throw new Error(wt(3));return o}function m(x){if(typeof x!="function")throw new Error(wt(4));if(c)throw new Error(wt(5));var y=!0;return d(),l.push(x),function(){if(y){if(c)throw new Error(wt(6));y=!1,d();var w=l.indexOf(x);l.splice(w,1),i=null}}}function f(x){if(!US(x))throw new Error(wt(7));if(typeof x.type>"u")throw new Error(wt(8));if(c)throw new Error(wt(9));try{c=!0,o=a(o,x)}finally{c=!1}for(var y=i=l,b=0;b<y.length;b++){var w=y[b];w()}return x}function p(x){if(typeof x!="function")throw new Error(wt(10));a=x,f({type:Em.REPLACE})}function g(){var x,y=m;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(wt(11));function j(){w.next&&w.next(u())}j();var N=y(j);return{unsubscribe:N}}},x[Sm]=function(){return this},x}return f({type:Em.INIT}),r={dispatch:f,subscribe:m,getState:u,replaceReducer:p},r[Sm]=g,r}function Cm(e,t){return function(){return t(e.apply(this,arguments))}}function Im(e,t){if(typeof e=="function")return Cm(e,t);if(typeof e!="object"||e===null)throw new Error(wt(16));var n={};for(var r in e){var a=e[r];typeof a=="function"&&(n[r]=Cm(a,t))}return n}function Dh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,a){return function(){return r(a.apply(void 0,arguments))}})}function GS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var a=r.apply(void 0,arguments),o=function(){throw new Error(wt(15))},i={getState:a.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(c){return c(i)});return o=Dh.apply(void 0,l)(a.dispatch),Nm(Nm({},a),{},{dispatch:o})}}}function KS(e){e()}let kh=KS;const YS=e=>kh=e,XS=()=>kh,Am=Symbol.for("react-redux-context"),Mm=typeof globalThis<"u"?globalThis:{};function JS(){var e;if(!v.createContext)return{};const t=(e=Mm[Am])!=null?e:Mm[Am]=new Map;let n=t.get(v.createContext);return n||(n=v.createContext(null),t.set(v.createContext,n)),n}const Oh=JS(),QS=()=>{throw new Error("uSES not initialized!")};function Th(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Fh={exports:{}},Ee={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=typeof Symbol=="function"&&Symbol.for,jd=Qe?Symbol.for("react.element"):60103,Nd=Qe?Symbol.for("react.portal"):60106,gi=Qe?Symbol.for("react.fragment"):60107,xi=Qe?Symbol.for("react.strict_mode"):60108,vi=Qe?Symbol.for("react.profiler"):60114,yi=Qe?Symbol.for("react.provider"):60109,bi=Qe?Symbol.for("react.context"):60110,Sd=Qe?Symbol.for("react.async_mode"):60111,wi=Qe?Symbol.for("react.concurrent_mode"):60111,ji=Qe?Symbol.for("react.forward_ref"):60112,Ni=Qe?Symbol.for("react.suspense"):60113,eE=Qe?Symbol.for("react.suspense_list"):60120,Si=Qe?Symbol.for("react.memo"):60115,Ei=Qe?Symbol.for("react.lazy"):60116,tE=Qe?Symbol.for("react.block"):60121,nE=Qe?Symbol.for("react.fundamental"):60117,rE=Qe?Symbol.for("react.responder"):60118,sE=Qe?Symbol.for("react.scope"):60119;function Rt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jd:switch(e=e.type,e){case Sd:case wi:case gi:case vi:case xi:case Ni:return e;default:switch(e=e&&e.$$typeof,e){case bi:case ji:case Ei:case Si:case yi:return e;default:return t}}case Nd:return t}}}function Lh(e){return Rt(e)===wi}Ee.AsyncMode=Sd;Ee.ConcurrentMode=wi;Ee.ContextConsumer=bi;Ee.ContextProvider=yi;Ee.Element=jd;Ee.ForwardRef=ji;Ee.Fragment=gi;Ee.Lazy=Ei;Ee.Memo=Si;Ee.Portal=Nd;Ee.Profiler=vi;Ee.StrictMode=xi;Ee.Suspense=Ni;Ee.isAsyncMode=function(e){return Lh(e)||Rt(e)===Sd};Ee.isConcurrentMode=Lh;Ee.isContextConsumer=function(e){return Rt(e)===bi};Ee.isContextProvider=function(e){return Rt(e)===yi};Ee.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jd};Ee.isForwardRef=function(e){return Rt(e)===ji};Ee.isFragment=function(e){return Rt(e)===gi};Ee.isLazy=function(e){return Rt(e)===Ei};Ee.isMemo=function(e){return Rt(e)===Si};Ee.isPortal=function(e){return Rt(e)===Nd};Ee.isProfiler=function(e){return Rt(e)===vi};Ee.isStrictMode=function(e){return Rt(e)===xi};Ee.isSuspense=function(e){return Rt(e)===Ni};Ee.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gi||e===wi||e===vi||e===xi||e===Ni||e===eE||typeof e=="object"&&e!==null&&(e.$$typeof===Ei||e.$$typeof===Si||e.$$typeof===yi||e.$$typeof===bi||e.$$typeof===ji||e.$$typeof===nE||e.$$typeof===rE||e.$$typeof===sE||e.$$typeof===tE)};Ee.typeOf=Rt;Fh.exports=Ee;var aE=Fh.exports,Ed=aE,oE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},iE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lE={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ph={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Cd={};Cd[Ed.ForwardRef]=lE;Cd[Ed.Memo]=Ph;function Dm(e){return Ed.isMemo(e)?Ph:Cd[e.$$typeof]||oE}var cE=Object.defineProperty,dE=Object.getOwnPropertyNames,km=Object.getOwnPropertySymbols,uE=Object.getOwnPropertyDescriptor,mE=Object.getPrototypeOf,Om=Object.prototype;function $h(e,t,n){if(typeof t!="string"){if(Om){var r=mE(t);r&&r!==Om&&$h(e,r,n)}var a=dE(t);km&&(a=a.concat(km(t)));for(var o=Dm(e),i=Dm(t),l=0;l<a.length;++l){var c=a[l];if(!iE[c]&&!(n&&n[c])&&!(i&&i[c])&&!(o&&o[c])){var d=uE(t,c);try{cE(e,c,d)}catch{}}}}return e}var fE=$h;const Tm=Yc(fE);var _h={exports:{}},Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),Ad=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),Ii=Symbol.for("react.strict_mode"),Ai=Symbol.for("react.profiler"),Mi=Symbol.for("react.provider"),Di=Symbol.for("react.context"),pE=Symbol.for("react.server_context"),ki=Symbol.for("react.forward_ref"),Oi=Symbol.for("react.suspense"),Ti=Symbol.for("react.suspense_list"),Fi=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),hE=Symbol.for("react.offscreen"),Rh;Rh=Symbol.for("react.module.reference");function Yt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Id:switch(e=e.type,e){case Ci:case Ai:case Ii:case Oi:case Ti:return e;default:switch(e=e&&e.$$typeof,e){case pE:case Di:case ki:case Li:case Fi:case Mi:return e;default:return t}}case Ad:return t}}}Ce.ContextConsumer=Di;Ce.ContextProvider=Mi;Ce.Element=Id;Ce.ForwardRef=ki;Ce.Fragment=Ci;Ce.Lazy=Li;Ce.Memo=Fi;Ce.Portal=Ad;Ce.Profiler=Ai;Ce.StrictMode=Ii;Ce.Suspense=Oi;Ce.SuspenseList=Ti;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(e){return Yt(e)===Di};Ce.isContextProvider=function(e){return Yt(e)===Mi};Ce.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Id};Ce.isForwardRef=function(e){return Yt(e)===ki};Ce.isFragment=function(e){return Yt(e)===Ci};Ce.isLazy=function(e){return Yt(e)===Li};Ce.isMemo=function(e){return Yt(e)===Fi};Ce.isPortal=function(e){return Yt(e)===Ad};Ce.isProfiler=function(e){return Yt(e)===Ai};Ce.isStrictMode=function(e){return Yt(e)===Ii};Ce.isSuspense=function(e){return Yt(e)===Oi};Ce.isSuspenseList=function(e){return Yt(e)===Ti};Ce.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ci||e===Ai||e===Ii||e===Oi||e===Ti||e===hE||typeof e=="object"&&e!==null&&(e.$$typeof===Li||e.$$typeof===Fi||e.$$typeof===Mi||e.$$typeof===Di||e.$$typeof===ki||e.$$typeof===Rh||e.getModuleId!==void 0)};Ce.typeOf=Yt;_h.exports=Ce;var gE=_h.exports;const xE=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vE(e,t,n,r,{areStatesEqual:a,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,d,u,m,f;function p(w,j){return c=w,d=j,u=e(c,d),m=t(r,d),f=n(u,m,d),l=!0,f}function g(){return u=e(c,d),t.dependsOnOwnProps&&(m=t(r,d)),f=n(u,m,d),f}function x(){return e.dependsOnOwnProps&&(u=e(c,d)),t.dependsOnOwnProps&&(m=t(r,d)),f=n(u,m,d),f}function y(){const w=e(c,d),j=!i(w,u);return u=w,j&&(f=n(u,m,d)),f}function b(w,j){const N=!o(j,d),I=!a(w,c,j,d);return c=w,d=j,N&&I?g():N?x():I?y():f}return function(j,N){return l?b(j,N):p(j,N)}}function yE(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:a}=t,o=Th(t,xE);const i=n(e,o),l=r(e,o),c=a(e,o);return vE(i,l,c,e,o)}function bE(e,t){const n={};for(const r in e){const a=e[r];typeof a=="function"&&(n[r]=(...o)=>t(a(...o)))}return n}function pc(e){return function(n){const r=e(n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function Fm(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Vh(e,t){return function(r,{displayName:a}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=Fm(e);let d=o(l,c);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=Fm(d),d=o(l,c)),d},o}}function Md(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function wE(e){return e&&typeof e=="object"?pc(t=>bE(e,t)):e?typeof e=="function"?Vh(e):Md(e,"mapDispatchToProps"):pc(t=>({dispatch:t}))}function jE(e){return e?typeof e=="function"?Vh(e):Md(e,"mapStateToProps"):pc(()=>({}))}function NE(e,t,n){return os({},n,e,t)}function SE(e){return function(n,{displayName:r,areMergedPropsEqual:a}){let o=!1,i;return function(c,d,u){const m=e(c,d,u);return o?a(m,i)||(i=m):(o=!0,i=m),i}}}function EE(e){return e?typeof e=="function"?SE(e):Md(e,"mergeProps"):()=>NE}function CE(){const e=XS();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],a=t;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!a||t===null||(a=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const Lm={notify(){},get:()=>[]};function Hh(e,t){let n,r=Lm,a=0,o=!1;function i(x){u();const y=r.subscribe(x);let b=!1;return()=>{b||(b=!0,y(),m())}}function l(){r.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return o}function u(){a++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=CE())}function m(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=Lm)}function f(){o||(o=!0,u())}function p(){o&&(o=!1,m())}const g={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return g}const IE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mo=IE?v.useLayoutEffect:v.useEffect;function Pm(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Il(e,t){if(Pm(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Pm(e[n[a]],t[n[a]]))return!1;return!0}const AE=["reactReduxForwardedRef"];let Bh=QS;const ME=e=>{Bh=e},DE=[null,null];function kE(e,t,n){Mo(()=>e(...t),n)}function OE(e,t,n,r,a,o){e.current=r,n.current=!1,a.current&&(a.current=null,o())}function TE(e,t,n,r,a,o,i,l,c,d,u){if(!e)return()=>{};let m=!1,f=null;const p=()=>{if(m||!l.current)return;const x=t.getState();let y,b;try{y=r(x,a.current)}catch(w){b=w,f=w}b||(f=null),y===o.current?i.current||d():(o.current=y,c.current=y,i.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function FE(e,t){return e===t}function zh(e,t,n,{pure:r,areStatesEqual:a=FE,areOwnPropsEqual:o=Il,areStatePropsEqual:i=Il,areMergedPropsEqual:l=Il,forwardRef:c=!1,context:d=Oh}={}){const u=d,m=jE(e),f=wE(t),p=EE(n),g=!!e;return y=>{const b=y.displayName||y.name||"Component",w=`Connect(${b})`,j={shouldHandleStateChanges:g,displayName:w,wrappedComponentName:b,WrappedComponent:y,initMapStateToProps:m,initMapDispatchToProps:f,initMergeProps:p,areStatesEqual:a,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function N(E){const[A,O,M]=v.useMemo(()=>{const{reactReduxForwardedRef:G}=E,ne=Th(E,AE);return[E.context,G,ne]},[E]),T=v.useMemo(()=>A&&A.Consumer&&gE.isContextConsumer(v.createElement(A.Consumer,null))?A:u,[A,u]),$=v.useContext(T),P=!!E.store&&!!E.store.getState&&!!E.store.dispatch,C=!!$&&!!$.store,D=P?E.store:$.store,k=C?$.getServerState:D.getState,L=v.useMemo(()=>yE(D.dispatch,j),[D]),[F,_]=v.useMemo(()=>{if(!g)return DE;const G=Hh(D,P?void 0:$.subscription),ne=G.notifyNestedSubs.bind(G);return[G,ne]},[D,P,$]),H=v.useMemo(()=>P?$:os({},$,{subscription:F}),[P,$,F]),q=v.useRef(),z=v.useRef(M),V=v.useRef(),R=v.useRef(!1);v.useRef(!1);const B=v.useRef(!1),W=v.useRef();Mo(()=>(B.current=!0,()=>{B.current=!1}),[]);const Z=v.useMemo(()=>()=>V.current&&M===z.current?V.current:L(D.getState(),M),[D,M]),U=v.useMemo(()=>ne=>F?TE(g,D,F,L,z,q,R,B,V,_,ne):()=>{},[F]);kE(OE,[z,q,R,M,V,_]);let ee;try{ee=Bh(U,Z,k?()=>L(k(),M):Z)}catch(G){throw W.current&&(G.message+=`
The error may be correlated with this previous error:
${W.current.stack}

`),G}Mo(()=>{W.current=void 0,V.current=void 0,q.current=ee});const X=v.useMemo(()=>v.createElement(y,os({},ee,{ref:O})),[O,y,ee]);return v.useMemo(()=>g?v.createElement(T.Provider,{value:H},X):X,[T,X,H])}const S=v.memo(N);if(S.WrappedComponent=y,S.displayName=N.displayName=w,c){const A=v.forwardRef(function(M,T){return v.createElement(S,os({},M,{reactReduxForwardedRef:T}))});return A.displayName=w,A.WrappedComponent=y,Tm(A,y)}return Tm(S,y)}}function LE({store:e,context:t,children:n,serverState:r,stabilityCheck:a="once",noopCheck:o="once"}){const i=v.useMemo(()=>{const d=Hh(e);return{store:e,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:a,noopCheck:o}},[e,r,a,o]),l=v.useMemo(()=>e.getState(),[e]);Mo(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const c=t||Oh;return v.createElement(c.Provider,{value:i},n)}ME(K6.useSyncExternalStore);YS(Dt.unstable_batchedUpdates);function PE(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Zh(e,t){var n=v.useState(function(){return{inputs:t,result:e()}})[0],r=v.useRef(!0),a=v.useRef(n),o=r.current||!!(t&&a.current.inputs&&PE(t,a.current.inputs)),i=o?a.current:{inputs:t,result:e()};return v.useEffect(function(){r.current=!1,a.current=i},[i]),i.result}function $E(e,t){return Zh(function(){return e},t)}var we=Zh,se=$E,_E="Invariant failed";function RE(e,t){throw new Error(_E)}var nn=function(t){var n=t.top,r=t.right,a=t.bottom,o=t.left,i=r-o,l=a-n,c={top:n,right:r,bottom:a,left:o,width:i,height:l,x:o,y:n,center:{x:(r+o)/2,y:(a+n)/2}};return c},Dd=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},$m=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},VE=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Al={top:0,right:0,bottom:0,left:0},kd=function(t){var n=t.borderBox,r=t.margin,a=r===void 0?Al:r,o=t.border,i=o===void 0?Al:o,l=t.padding,c=l===void 0?Al:l,d=nn(Dd(n,a)),u=nn($m(n,i)),m=nn($m(u,c));return{marginBox:d,borderBox:nn(n),paddingBox:u,contentBox:m,margin:a,border:i,padding:c}},Ht=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var a=Number(n);return isNaN(a)&&RE(),a},HE=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Do=function(t,n){var r=t.borderBox,a=t.border,o=t.margin,i=t.padding,l=VE(r,n);return kd({borderBox:l,border:a,margin:o,padding:i})},ko=function(t,n){return n===void 0&&(n=HE()),Do(t,n)},qh=function(t,n){var r={top:Ht(n.marginTop),right:Ht(n.marginRight),bottom:Ht(n.marginBottom),left:Ht(n.marginLeft)},a={top:Ht(n.paddingTop),right:Ht(n.paddingRight),bottom:Ht(n.paddingBottom),left:Ht(n.paddingLeft)},o={top:Ht(n.borderTopWidth),right:Ht(n.borderRightWidth),bottom:Ht(n.borderBottomWidth),left:Ht(n.borderLeftWidth)};return kd({borderBox:t,margin:r,padding:a,border:o})},Wh=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return qh(n,r)},_m=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function BE(e,t){return!!(e===t||_m(e)&&_m(t))}function zE(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!BE(e[n],t[n]))return!1;return!0}function Xe(e,t){t===void 0&&(t=zE);var n=null;function r(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var i=e.apply(this,a);return n={lastResult:i,lastArgs:a,lastThis:this},i}return r.clear=function(){n=null},r}var ia=function(t){var n=[],r=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return a.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},a};function Uh(e,t){}Uh.bind(null,"warn");Uh.bind(null,"error");function tr(){}function ZE(e,t){return{...e,...t}}function zt(e,t,n){const r=t.map(a=>{const o=ZE(n,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){r.forEach(o=>{o()})}}const qE="Invariant failed";class Oo extends Error{}Oo.prototype.toString=function(){return this.message};function Q(e,t){throw new Oo(qE)}class WE extends h.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=tr,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Oo&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=zt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Oo){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const UE=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,To=e=>e+1,GE=e=>`
  You have lifted an item in position ${To(e.source.index)}
`,Gh=(e,t)=>{const n=e.droppableId===t.droppableId,r=To(e.index),a=To(t.index);return n?`
      You have moved the item from position ${r}
      to position ${a}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},Kh=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,KE=e=>{const t=e.destination;if(t)return Gh(e.source,t);const n=e.combine;return n?Kh(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Rm=e=>`
  The item has returned to its starting position
  of ${To(e.index)}
`,YE=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Rm(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Gh(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Kh(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Rm(e.source)}
  `},XE={dragHandleUsageInstructions:UE,onDragStart:GE,onDragUpdate:KE,onDragEnd:YE};var vo=XE;const Je={x:0,y:0},nt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ot=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),nr=(e,t)=>e.x===t.x&&e.y===t.y,As=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Rr=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},la=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Vm=(e,t)=>Math.min(...t.map(n=>la(e,n))),Yh=e=>t=>({x:e(t.x),y:e(t.y)});var JE=(e,t)=>{const n=nn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Ba=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Hm=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],QE={top:0,right:0,bottom:0,left:0},eC=(e,t)=>t?Ba(e,t.scroll.diff.displacement):e,tC=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,nC=(e,t)=>t&&t.shouldClipSubject?JE(t.pageMarginBox,e):nn(e);var ms=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const a=eC(e.marginBox,r),o=tC(a,n,t),i=nC(o,r);return{page:e,withPlaceholder:t,active:i}},Od=(e,t)=>{e.frame||Q();const n=e.frame,r=Ot(t,n.scroll.initial),a=As(r),o={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:a},max:n.scroll.max}},i=ms({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};const Xh=Xe(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Jh=Xe(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Pi=Xe(e=>Object.values(e)),rC=Xe(e=>Object.values(e));var Ms=Xe((e,t)=>rC(t).filter(r=>e===r.descriptor.droppableId).sort((r,a)=>r.descriptor.index-a.descriptor.index));function Td(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function $i(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var _i=Xe((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),sC=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:a})=>{if(!n.isCombineEnabled||!Td(a))return null;function i(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...a,at:g}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=_i(t,r);if(!c){if(!d.length)return null;const p=d[d.length-1];return i(p.descriptor.id)}const u=d.findIndex(p=>p.descriptor.id===c);u===-1&&Q();const m=u-1;if(m<0)return null;const f=d[m];return i(f.descriptor.id)},Ds=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Qh={point:Je,value:0},ca={invisible:{},visible:{},all:[]},aC={displaced:ca,displacedBy:Qh,at:null};var oC=aC,Wt=(e,t)=>n=>e<=n&&n<=t,eg=e=>{const t=Wt(e.top,e.bottom),n=Wt(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;const c=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return c&&d?!0:c&&i||d&&o}},iC=e=>{const t=Wt(e.top,e.bottom),n=Wt(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const Fd={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},tg={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var lC=e=>t=>{const n=Wt(t.top,t.bottom),r=Wt(t.left,t.right);return a=>e===Fd?n(a.top)&&n(a.bottom):r(a.left)&&r(a.right)};const cC=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Je;return Ba(e,n)},dC=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,uC=(e,t,n)=>n(t)(e),Ld=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:a})=>{const o=r?cC(e,t):e;return dC(o,t,a)&&uC(o,n,a)},mC=e=>Ld({...e,isVisibleThroughFrameFn:eg}),ng=e=>Ld({...e,isVisibleThroughFrameFn:iC}),fC=e=>Ld({...e,isVisibleThroughFrameFn:lC(e.destination.axis)}),pC=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:a}=t;if(r[e])return!1;const o=a[e];return o?o.shouldAnimate:!0};function hC(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return nn(Dd(n,r))}function da({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:a,last:o}){return e.reduce(function(l,c){const d=hC(c,n),u=c.descriptor.id;if(l.all.push(u),!mC({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=pC(u,o,a),p={draggableId:u,shouldAnimate:f};return l.visible[u]=p,l},{all:[],visible:{},invisible:{}})}function gC(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Bm({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const a=gC(e,{inHomeList:t});return{displaced:ca,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Fo({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:a,last:o,index:i,forceShouldAnimate:l}){const c=Ds(e,n);if(i==null)return Bm({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const d=t.find(g=>g.descriptor.index===i);if(!d)return Bm({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const u=_i(e,t),m=t.indexOf(d),f=u.slice(m);return{displaced:da({afterDragging:f,destination:n,displacedBy:a,last:o,viewport:r.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function or(e,t){return!!t.effected[e]}var xC=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const o=r.draggableId,l=n[o].descriptor.index;return or(o,a)?e?l:l-1:e?l+1:l},vC=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const a=r.index,o=e?a+1:a-1,i=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},yC=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:a,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||Q(),d.type==="REORDER"){const m=vC({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:o});return m==null?null:Fo({draggable:n,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:m})}const u=xC({isMovingForward:e,destination:a,displaced:i.displaced,draggables:r,combine:d.combine,afterCritical:c});return u==null?null:Fo({draggable:n,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})},bC=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const a=!!(e.visible[n]||e.invisible[n]);return or(n,t)?a?Je:As(r.point):a?r.point:Je},wC=({afterCritical:e,impact:t,draggables:n})=>{const r=$i(t);r||Q();const a=r.draggableId,o=n[a].page.borderBox.center,i=bC({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return nt(o,i)};const rg=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,jC=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Pd=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,zm=({axis:e,moveRelativeTo:t,isMoving:n})=>Rr(e.line,t.marginBox[e.end]+rg(e,n),Pd(e,t.marginBox,n)),Zm=({axis:e,moveRelativeTo:t,isMoving:n})=>Rr(e.line,t.marginBox[e.start]-jC(e,n),Pd(e,t.marginBox,n)),NC=({axis:e,moveInto:t,isMoving:n})=>Rr(e.line,t.contentBox[e.start]+rg(e,n),Pd(e,t.contentBox,n));var SC=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:a})=>{const o=Ms(r.descriptor.id,n),i=t.page,l=r.axis;if(!o.length)return NC({axis:l,moveInto:r.page,isMoving:i});const{displaced:c,displacedBy:d}=e,u=c.all[0];if(u){const f=n[u];if(or(u,a))return Zm({axis:l,moveRelativeTo:f.page,isMoving:i});const p=Do(f.page,d.point);return Zm({axis:l,moveRelativeTo:p,isMoving:i})}const m=o[o.length-1];if(m.descriptor.id===t.descriptor.id)return i.borderBox.center;if(or(m.descriptor.id,a)){const f=Do(m.page,As(a.displacedBy.point));return zm({axis:l,moveRelativeTo:f,isMoving:i})}return zm({axis:l,moveRelativeTo:m.page,isMoving:i})},hc=(e,t)=>{const n=e.frame;return n?nt(t,n.scroll.diff.displacement):t};const EC=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:a})=>{const o=t.page.borderBox.center,i=e.at;return!n||!i?o:i.type==="REORDER"?SC({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a}):wC({impact:e,draggables:r,afterCritical:a})};var Ri=e=>{const t=EC(e),n=e.droppable;return n?hc(n,t):t},sg=(e,t)=>{const n=Ot(t,e.scroll.initial),r=As(n);return{frame:nn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function qm(e,t){return e.map(n=>t[n])}function CC(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var IC=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:a})=>{const o=sg(t,nt(t.scroll.current,a)),i=n.frame?Od(n,nt(n.frame.scroll.current,a)):n,l=e.displaced,c=da({afterDragging:qm(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=da({afterDragging:qm(l.all,r),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},m={},f=[l,c,d];return l.all.forEach(g=>{const x=CC(g,f);if(x){m[g]=x;return}u[g]=!0}),{...e,displaced:{all:l.all,invisible:u,visible:m}}},AC=(e,t)=>nt(e.scroll.diff.displacement,t),$d=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=AC(n,e),a=Ot(r,t.page.borderBox.center);return nt(t.client.borderBox.center,a)},ag=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:a,onlyOnMainAxis:o=!1})=>{const i=Ot(n,e.page.borderBox.center),c={target:Ba(e.page.borderBox,i),destination:t,withDroppableDisplacement:a,viewport:r};return o?fC(c):ng(c)},MC=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:a,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const d=Ms(n.descriptor.id,r),u=Ds(t,n),m=sC({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:a})||yC({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!m)return null;const f=Ri({impact:m,draggable:t,droppable:n,draggables:r,afterCritical:c});if(ag({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:$d({pageBorderBoxCenter:f,draggable:t,viewport:o}),impact:m,scrollJumpRequest:null};const g=Ot(f,i),x=IC({impact:m,viewport:o,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:l,impact:x,scrollJumpRequest:g}};const pt=e=>{const t=e.subject.active;return t||Q(),t};var DC=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:a})=>{const o=n.subject.active;if(!o)return null;const i=n.axis,l=Wt(o[i.start],o[i.end]),c=Pi(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>eg(a.frame)(pt(u))).filter(u=>{const m=pt(u);return e?o[i.crossAxisEnd]<m[i.crossAxisEnd]:m[i.crossAxisStart]<o[i.crossAxisStart]}).filter(u=>{const m=pt(u),f=Wt(m[i.start],m[i.end]);return l(m[i.start])||l(m[i.end])||f(o[i.start])||f(o[i.end])}).sort((u,m)=>{const f=pt(u)[i.crossAxisStart],p=pt(m)[i.crossAxisStart];return e?f-p:p-f}).filter((u,m,f)=>pt(u)[i.crossAxisStart]===pt(f[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(u=>Wt(pt(u)[i.start],pt(u)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((u,m)=>pt(u)[i.start]-pt(m)[i.start])[0]:c.sort((u,m)=>{const f=Vm(t,Hm(pt(u))),p=Vm(t,Hm(pt(m)));return f!==p?f-p:pt(u)[i.start]-pt(m)[i.start]})[0]};const Wm=(e,t)=>{const n=e.page.borderBox.center;return or(e.descriptor.id,t)?Ot(n,t.displacedBy.point):n},kC=(e,t)=>{const n=e.page.borderBox;return or(e.descriptor.id,t)?Ba(n,As(t.displacedBy.point)):n};var OC=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:a})=>r.filter(i=>ng({target:kC(i,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=la(e,hc(n,Wm(i,a))),d=la(e,hc(n,Wm(l,a)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,za=Xe(function(t,n){const r=n[t.line];return{value:r,point:Rr(t.line,r)}});const TC=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Rr(r.line,t[r.line]);const a=e.subject.page.contentBox[r.size],c=Ms(e.descriptor.id,n).reduce((d,u)=>d+u.client.marginBox[r.size],0)+t[r.line]-a;return c<=0?null:Rr(r.line,c)},og=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),ig=(e,t,n)=>{const r=e.frame;Ds(t,e)&&Q(),e.subject.withPlaceholder&&Q();const a=za(e.axis,t.displaceBy).point,o=TC(e,a,n),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const u=ms({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:u}}const l=o?nt(r.scroll.max,o):r.scroll.max,c=og(r,l),d=ms({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},FC=e=>{const t=e.subject.withPlaceholder;t||Q();const n=e.frame;if(!n){const i=ms({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const r=t.oldFrameMaxScroll;r||Q();const a=og(n,r),o=ms({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:o,frame:a}};var LC=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:a,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(n.length)return null;const m={displaced:ca,displacedBy:Qh,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},f=Ri({impact:m,draggable:r,droppable:o,draggables:a,afterCritical:l}),p=Ds(r,o)?o:ig(o,r,a);return ag({draggable:r,destination:p,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],d=(()=>{const m=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?m:m+1})(),u=za(o.axis,r.displaceBy);return Fo({draggable:r,insideDestination:n,destination:o,viewport:i,displacedBy:u,last:ca,index:d})},PC=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:a,droppables:o,viewport:i,afterCritical:l})=>{const c=DC({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:o,viewport:i});if(!c)return null;const d=Ms(c.descriptor.id,a),u=OC({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),m=LC({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:a,moveRelativeTo:u,insideDestination:d,viewport:i,afterCritical:l});if(!m)return null;const f=Ri({impact:m,draggable:n,droppable:c,draggables:a,afterCritical:l});return{clientSelection:$d({pageBorderBoxCenter:f,draggable:n,viewport:i}),impact:m,scrollJumpRequest:null}},Ft=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const $C=(e,t)=>{const n=Ft(e);return n?t[n]:null};var _C=({state:e,type:t})=>{const n=$C(e.impact,e.dimensions.droppables),r=!!n,a=e.dimensions.droppables[e.critical.droppable.id],o=n||a,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:m,droppables:f}=e.dimensions;return l?MC({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):PC({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:o,draggables:m,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Ar(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function lg(e){const t=Wt(e.top,e.bottom),n=Wt(e.left,e.right);return function(a){return t(a.y)&&n(a.x)}}function RC(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function VC({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,a=n.map(o=>{const i=o.axis,l=Rr(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:la(r,l)}}).sort((o,i)=>i.distance-o.distance);return a[0]?a[0].id:null}function HC({pageBorderBox:e,draggable:t,droppables:n}){const r=Pi(n).filter(a=>{if(!a.isEnabled)return!1;const o=a.subject.active;if(!o||!RC(e,o))return!1;if(lg(o)(e.center))return!0;const i=a.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],u=Wt(o[i.crossAxisStart],o[i.crossAxisEnd]),m=u(c),f=u(d);return!m&&!f?!0:m?c<l:d>l});return r.length?r.length===1?r[0].descriptor.id:VC({pageBorderBox:e,draggable:t,candidates:r}):null}const cg=(e,t)=>nn(Ba(e,t));var BC=(e,t)=>{const n=e.frame;return n?cg(t,n.scroll.diff.value):t};function dg({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function zC({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var ZC=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:a,viewport:o,afterCritical:i})=>{const l=n.axis,c=za(n.axis,t.displaceBy),d=c.value,u=e[l.start],m=e[l.end],p=_i(t,r).find(x=>{const y=x.descriptor.id,b=x.page.borderBox.center[l.line],w=or(y,i),j=dg({displaced:a,id:y});return w?j?m<=b:u<b-d:j?m<=b+d:u<b})||null,g=zC({draggable:t,closest:p,inHomeList:Ds(t,n)});return Fo({draggable:t,insideDestination:r,destination:n,viewport:o,last:a,displacedBy:c,index:g})};const qC=4;var WC=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:a,afterCritical:o})=>{if(!r.isCombineEnabled)return null;const i=r.axis,l=za(r.axis,e.displaceBy),c=l.value,d=t[i.start],u=t[i.end],f=_i(e,a).find(g=>{const x=g.descriptor.id,y=g.page.borderBox,w=y[i.size]/qC,j=or(x,o),N=dg({displaced:n.displaced,id:x});return j?N?u>y[i.start]+w&&u<y[i.end]-w:d>y[i.start]-c+w&&d<y[i.end]-c-w:N?u>y[i.start]+c+w&&u<y[i.end]+c-w:d>y[i.start]+w&&d<y[i.end]-w});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},ug=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:a,viewport:o,afterCritical:i})=>{const l=cg(t.page.borderBox,e),c=HC({pageBorderBox:l,draggable:t,droppables:r});if(!c)return oC;const d=r[c],u=Ms(d.descriptor.id,n),m=BC(d,l);return WC({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:a,destination:d,insideDestination:u,afterCritical:i})||ZC({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:d,insideDestination:u,last:a.displaced,viewport:o,afterCritical:i})},_d=(e,t)=>({...e,[t.descriptor.id]:t});const UC=({previousImpact:e,impact:t,droppables:n})=>{const r=Ft(e),a=Ft(t);if(!r||r===a)return n;const o=n[r];if(!o.subject.withPlaceholder)return n;const i=FC(o);return _d(n,i)};var GC=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:a})=>{const o=UC({previousImpact:r,impact:a,droppables:n}),i=Ft(a);if(!i)return o;const l=n[i];if(Ds(e,l)||l.subject.withPlaceholder)return o;const c=ig(l,e,t);return _d(o,c)},ea=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:a,scrollJumpRequest:o})=>{const i=r||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,d=Ot(c,e.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:nt(e.initial.client.borderBoxCenter,d)},m={selection:nt(u.selection,i.scroll.current),borderBoxCenter:nt(u.borderBoxCenter,i.scroll.current),offset:nt(u.offset,i.scroll.diff.value)},f={client:u,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:f};const p=l.draggables[e.critical.draggable.id],g=a||ug({pageOffset:m.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=GC({draggable:p,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:x},impact:g,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function KC(e,t){return e.map(n=>t[n])}var mg=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:a})=>{const o=e.displaced,i=KC(o.all,n),l=da({afterDragging:i,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:o});return{...e,displaced:l}},fg=({impact:e,draggable:t,droppable:n,draggables:r,viewport:a,afterCritical:o})=>{const i=Ri({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o});return $d({pageBorderBoxCenter:i,draggable:t,viewport:a})},pg=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Q();const r=e.impact,a=n||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],d=Ft(r);d||Q();const u=l[d],m=mg({impact:r,viewport:a,destination:u,draggables:i}),f=fg({impact:m,draggable:c,droppable:u,draggables:i,viewport:a,afterCritical:e.afterCritical});return ea({impact:m,clientSelection:f,state:e,dimensions:o,viewport:a})},YC=e=>({index:e.index,droppableId:e.droppableId}),hg=({draggable:e,home:t,draggables:n,viewport:r})=>{const a=za(t.axis,e.displaceBy),o=Ms(t.descriptor.id,n),i=o.indexOf(e);i===-1&&Q();const l=o.slice(i+1),c=l.reduce((f,p)=>(f[p.descriptor.id]=!0,f),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:da({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:YC(e.descriptor)}},afterCritical:d}},XC=(e,t)=>({draggables:e.draggables,droppables:_d(e.droppables,t)}),JC=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Do(e.client,t),a=ko(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:a}},QC=e=>{const t=e.frame;return t||Q(),t},eI=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(a=>{const o=a.descriptor.droppableId,i=t[o],c=QC(i).scroll.diff.value,d=nt(r,c);return JC({draggable:a,offset:d,initialWindowScroll:n.scroll.initial})})},tI=({state:e,published:t})=>{const n=t.modified.map(b=>{const w=e.dimensions.droppables[b.droppableId];return Od(w,b.scroll)}),r={...e.dimensions.droppables,...Xh(n)},a=Jh(eI({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),o={...e.dimensions.draggables,...a};t.removals.forEach(b=>{delete o[b]});const i={droppables:r,draggables:o},l=Ft(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],u=i.droppables[e.critical.droppable.id],{impact:m,afterCritical:f}=hg({draggable:d,home:u,draggables:o,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:m,g=ug({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:f}),x={...e,phase:"DRAGGING",impact:g,onLiftImpact:m,dimensions:i,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const gc=e=>e.movementMode==="SNAP",Ml=(e,t,n)=>{const r=XC(e.dimensions,t);return!gc(e)||n?ea({state:e,dimensions:r}):pg({state:e,dimensions:r})};function Dl(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Um={phase:"IDLE",completed:null,shouldFlush:!1};var nI=(e=Um,t)=>{if(t.type==="FLUSH")return{...Um,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Q();const{critical:n,clientSelection:r,viewport:a,dimensions:o,movementMode:i}=t.payload,l=o.draggables[n.draggable.id],c=o.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:Je},u={client:d,page:{selection:nt(d.selection,a.scroll.initial),borderBoxCenter:nt(d.selection,a.scroll.initial),offset:nt(d.selection,a.scroll.diff.value)}},m=Pi(o.droppables).every(x=>!x.isFixedOnPage),{impact:f,afterCritical:p}=hg({draggable:l,home:c,draggables:o.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:o,initial:u,current:u,isWindowScrollAllowed:m,impact:f,afterCritical:p,onLiftImpact:f,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Q(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Q(),tI({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ar(e)||Q();const{client:n}=t.payload;return nr(n,e.current.client.selection)?e:ea({state:e,clientSelection:n,impact:gc(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Dl(e);Ar(e)||Q();const{id:n,newScroll:r}=t.payload,a=e.dimensions.droppables[n];if(!a)return e;const o=Od(a,r);return Ml(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ar(e)||Q();const{id:n,isEnabled:r}=t.payload,a=e.dimensions.droppables[n];a||Q(),a.isEnabled===r&&Q();const o={...a,isEnabled:r};return Ml(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ar(e)||Q();const{id:n,isCombineEnabled:r}=t.payload,a=e.dimensions.droppables[n];a||Q(),a.isCombineEnabled===r&&Q();const o={...a,isCombineEnabled:r};return Ml(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ar(e)||Q(),e.isWindowScrollAllowed||Q();const n=t.payload.newScroll;if(nr(e.viewport.scroll.current,n))return Dl(e);const r=sg(e.viewport,n);return gc(e)?pg({state:e,viewport:r}):ea({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ar(e))return e;const n=t.payload.maxScroll;if(nr(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Q();const n=_C({state:e,type:t.type});return n?ea({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Q(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Q(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const rI=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),sI=e=>({type:"LIFT",payload:e}),aI=e=>({type:"INITIAL_PUBLISH",payload:e}),oI=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),iI=()=>({type:"COLLECTION_STARTING",payload:null}),lI=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),cI=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),dI=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),gg=e=>({type:"MOVE",payload:e}),uI=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),mI=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),fI=()=>({type:"MOVE_UP",payload:null}),pI=()=>({type:"MOVE_DOWN",payload:null}),hI=()=>({type:"MOVE_RIGHT",payload:null}),gI=()=>({type:"MOVE_LEFT",payload:null}),Rd=()=>({type:"FLUSH",payload:null}),xI=e=>({type:"DROP_ANIMATE",payload:e}),Vd=e=>({type:"DROP_COMPLETE",payload:e}),xg=e=>({type:"DROP",payload:e}),vI=e=>({type:"DROP_PENDING",payload:e}),vg=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var yI=e=>({getState:t,dispatch:n})=>r=>a=>{if(a.type!=="LIFT"){r(a);return}const{id:o,clientSelection:i,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&n(Vd({completed:c.completed})),t().phase!=="IDLE"&&Q(),n(Rd()),n(rI({draggableId:o,movementMode:l}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:m,dimensions:f,viewport:p}=e.startPublishing(u);n(aI({critical:m,dimensions:f,clientSelection:i,movementMode:l,viewport:p}))},bI=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const Hd={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ua={opacity:{drop:0,combining:.7},scale:{drop:.75}},yg={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},jr=`${yg.outOfTheWay}s ${Hd.outOfTheWay}`,ta={fluid:`opacity ${jr}`,snap:`transform ${jr}, opacity ${jr}`,drop:e=>{const t=`${e}s ${Hd.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${jr}`,placeholder:`height ${jr}, width ${jr}, margin ${jr}`},Gm=e=>nr(e,Je)?void 0:`translate(${e.x}px, ${e.y}px)`,xc={moveTo:Gm,drop:(e,t)=>{const n=Gm(e);if(n)return t?`${n} scale(${ua.scale.drop})`:n}},{minDropTime:vc,maxDropTime:bg}=yg,wI=bg-vc,Km=1500,jI=.6;var NI=({current:e,destination:t,reason:n})=>{const r=la(e,t);if(r<=0)return vc;if(r>=Km)return bg;const a=r/Km,o=vc+wI*a,i=n==="CANCEL"?o*jI:o;return Number(i.toFixed(2))},SI=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:a})=>{const{draggables:o,droppables:i}=n,l=Ft(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],u=fg({impact:e,draggable:t,draggables:o,afterCritical:a,droppable:c||d,viewport:r});return Ot(u,t.client.borderBox.center)},EI=({draggables:e,reason:t,lastImpact:n,home:r,viewport:a,onLiftImpact:o})=>!n.at||t!=="DROP"?{impact:mg({draggables:e,impact:o,destination:r,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:ca},didDropInsideDroppable:!0};const CI=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const a=e(),o=r.payload.reason;if(a.phase==="COLLECTING"){t(vI({reason:o}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&Q(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Q();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:u,didDropInsideDroppable:m}=EI({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=m?Td(u):null,p=m?$i(u):null,g={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:g,reason:o,mode:a.movementMode,destination:f,combine:p},y=SI({impact:u,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),b={critical:a.critical,afterCritical:a.afterCritical,result:x,impact:u};if(!(!nr(a.current.client.offset,y)||!!x.combine)){t(Vd({completed:b}));return}const j=NI({current:a.current.client.offset,destination:y,reason:o});t(xI({newHomeClientOffset:y,dropDuration:j,completed:b}))};var II=CI,wg=()=>({x:window.pageXOffset,y:window.pageYOffset});function AI(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function MI({onWindowScroll:e}){function t(){e(wg())}const n=ia(t),r=AI(n);let a=tr;function o(){return a!==tr}function i(){o()&&Q(),a=zt(window,[r])}function l(){o()||Q(),n.cancel(),a(),a=tr}return{start:i,stop:l,isActive:o}}const DI=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",kI=e=>{const t=MI({onWindowScroll:n=>{e.dispatch(uI({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&DI(r)&&t.stop(),n(r)}};var OI=kI,TI=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),a=o=>{t||n||(t=!0,e(o),clearTimeout(r))};return a.wasCalled=()=>t,a},FI=()=>{const e=[],t=a=>{const o=e.findIndex(l=>l.timerId===a);o===-1&&Q();const[i]=e.splice(o,1);i.callback()};return{add:a=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:a};e.push(i)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const LI=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,PI=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,$I=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Bs=(e,t)=>{t()},no=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function kl(e,t,n,r){if(!e){n(r(t));return}const a=TI(n);e(t,{announce:a}),a.wasCalled()||n(r(t))}var _I=(e,t)=>{const n=FI();let r=null;const a=(m,f)=>{r&&Q(),Bs("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:m,mode:f})})},o=(m,f)=>{r&&Q(),Bs("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(no(m,f))})},i=(m,f)=>{r&&Q();const p=no(m,f);r={mode:f,lastCritical:m,lastLocation:p.source,lastCombine:null},n.add(()=>{Bs("onDragStart",()=>kl(e().onDragStart,p,t,vo.onDragStart))})},l=(m,f)=>{const p=Td(f),g=$i(f);r||Q();const x=!$I(m,r.lastCritical);x&&(r.lastCritical=m);const y=!LI(r.lastLocation,p);y&&(r.lastLocation=p);const b=!PI(r.lastCombine,g);if(b&&(r.lastCombine=g),!x&&!y&&!b)return;const w={...no(m,r.mode),combine:g,destination:p};n.add(()=>{Bs("onDragUpdate",()=>kl(e().onDragUpdate,w,t,vo.onDragUpdate))})},c=()=>{r||Q(),n.flush()},d=m=>{r||Q(),r=null,Bs("onDragEnd",()=>kl(e().onDragEnd,m,t,vo.onDragEnd))};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:c,drop:d,abort:()=>{if(!r)return;const m={...no(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(m)}}},RI=(e,t)=>{const n=_I(e,t);return r=>a=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const l=o.payload.critical;n.beforeStart(l,o.payload.movementMode),a(o),n.start(l,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const l=o.payload.completed.result;n.flush(),a(o),n.drop(l);return}if(a(o),o.type==="FLUSH"){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const VI=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&Q(),e.dispatch(Vd({completed:r.completed}))};var HI=VI;const BI=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return a=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&r(),a(o),o.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(vg())}};n=requestAnimationFrame(()=>{n=null,t=zt(window,[i])})}};var zI=BI,ZI=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},qI=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const a=r.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const WI=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var UI=e=>t=>n=>r=>{if(WI(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const a=t.getState();a.phase!=="DRAGGING"&&Q(),e.start(a);return}n(r),e.scroll(t.getState())};const GI=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(xg({reason:r.reason})))};var KI=GI;const YI=Dh;var XI=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:a,autoScroller:o})=>Mh(nI,YI(GS(bI(n),ZI(e),yI(e),II,HI,zI,KI,UI(o),OI,qI(t),RI(r,a))));const Ol=()=>({additions:{},removals:{},modified:{}});function JI({registry:e,callbacks:t}){let n=Ol(),r=null;const a=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:d,modified:u}=n,m=Object.keys(c).map(g=>e.draggable.getById(g).getDimension(Je)).sort((g,x)=>g.descriptor.index-x.descriptor.index),f=Object.keys(u).map(g=>{const y=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),p={additions:m,removals:Object.keys(d),modified:f};n=Ol(),t.publish(p)}))};return{add:c=>{const d=c.descriptor.id;n.additions[d]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],a()},remove:c=>{const d=c.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],a()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Ol())}}}var jg=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const a=Ot({x:t,y:e},{x:r,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},Ng=()=>{const e=document.documentElement;return e||Q(),e},Sg=()=>{const e=Ng();return jg({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},QI=()=>{const e=wg(),t=Sg(),n=e.y,r=e.x,a=Ng(),o=a.clientWidth,i=a.clientHeight,l=r+o,c=n+i;return{frame:nn({top:n,left:r,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:Je,displacement:Je}}}},eA=({critical:e,scrollOptions:t,registry:n})=>{const r=QI(),a=r.scroll.current,o=e.droppable,i=n.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(a,t)),l=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(a));return{dimensions:{draggables:Jh(l),droppables:Xh(i)},critical:e,viewport:r}};function Ym(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var tA=(e,t)=>{let n=null;const r=JI({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(f,p)=>{e.droppable.exists(f)||Q(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:p})},o=(f,p)=>{n&&(e.droppable.exists(f)||Q(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:p}))},i=(f,p)=>{n&&(e.droppable.exists(f)||Q(),t.updateDroppableScroll({id:f,newScroll:p}))},l=(f,p)=>{n&&e.droppable.getById(f).callbacks.scroll(p)},c=()=>{if(!n)return;r.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},d=f=>{n||Q();const p=n.critical.draggable;f.type==="ADDITION"&&Ym(e,p,f.value)&&r.add(f.value),f.type==="REMOVAL"&&Ym(e,p,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:f=>{n&&Q();const p=e.draggable.getById(f.draggableId),g=e.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:g.descriptor},y=e.subscribe(d);return n={critical:x,unsubscribe:y},eA({critical:x,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},Eg=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",nA=e=>{window.scrollBy(e.x,e.y)};const rA=Xe(e=>Pi(e).filter(t=>!(!t.isEnabled||!t.frame))),sA=(e,t)=>rA(t).find(r=>(r.frame||Q(),lg(r.frame.pageMarginBox)(e)))||null;var aA=({center:e,destination:t,droppables:n})=>{if(t){const a=n[t];return a.frame?a:null}return sA(e,n)};const ma={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var oA=(e,t,n=()=>ma)=>{const r=n(),a=e[t.size]*r.startFromPercentage,o=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:o}},Cg=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Bd=1,iA=(e,t,n=()=>ma)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Bd;const o=1-Cg({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=r.maxPixelScroll*r.ease(o);return Math.ceil(i)},lA=(e,t,n)=>{const r=n(),a=r.durationDampening.accelerateAt,o=r.durationDampening.stopDampeningAt,i=t,l=o,d=Date.now()-i;if(d>=o)return e;if(d<a)return Bd;const u=Cg({startOfRange:a,endOfRange:l,current:d}),m=e*r.ease(u);return Math.ceil(m)},Xm=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:a})=>{const o=iA(e,t,a);return o===0?0:r?Math.max(lA(o,n,a),Bd):o},Jm=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=oA(e,r,o);return t[r.end]<t[r.start]?Xm({distanceToEdge:t[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o}):-1*Xm({distanceToEdge:t[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o})},cA=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,a=t.width>e.width;return!a&&!r?n:a&&r?null:{x:a?0:n.x,y:r?0:n.y}};const dA=Yh(e=>e===0?0:e);var Ig=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=Jm({container:t,distanceToEdges:i,dragStartTime:e,axis:Fd,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),c=Jm({container:t,distanceToEdges:i,dragStartTime:e,axis:tg,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),d=dA({x:c,y:l});if(nr(d,Je))return null;const u=cA({container:t,subject:n,proposedScroll:d});return u?nr(u,Je)?null:u:null};const uA=Yh(e=>e===0?0:e>0?1:-1),zd=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const a=nt(t,r),o={x:e(a.x,n.x),y:e(a.y,n.y)};return nr(o,Je)?null:o}})(),Ag=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=uA(n),o=zd({max:r,current:t,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},Zd=(e,t)=>Ag({current:e.scroll.current,max:e.scroll.max,change:t}),mA=(e,t)=>{if(!Zd(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return zd({current:r,max:n,change:t})},qd=(e,t)=>{const n=e.frame;return n?Ag({current:n.scroll.current,max:n.scroll.max,change:t}):!1},fA=(e,t)=>{const n=e.frame;return!n||!qd(e,t)?null:zd({current:n.scroll.current,max:n.scroll.max,change:t})};var pA=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=Ig({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return i&&Zd(e,i)?i:null},hA=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=Ig({dragStartTime:r,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return l&&qd(e,l)?l:null},Qm=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:a,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,f=pA({dragStartTime:t,viewport:m,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:o});if(f){r(f);return}}const d=aA({center:i,destination:Ft(e.impact),droppables:e.dimensions.droppables});if(!d)return;const u=hA({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:o});u&&a(d.descriptor.id,u)},gA=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ma})=>{const r=ia(e),a=ia(t);let o=null;const i=d=>{o||Q();const{shouldUseTimeDampening:u,dragStartTime:m}=o;Qm({state:d,scrollWindow:r,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:d=>{o&&Q();const u=Date.now();let m=!1;const f=()=>{m=!0};Qm({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),o={dragStartTime:u,shouldUseTimeDampening:m},m&&i(d)},stop:()=>{o&&(r.cancel(),a.cancel(),o=null)},scroll:i}},xA=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,c)=>{const d=nt(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!qd(l,c))return c;const d=fA(l,c);if(!d)return t(l.descriptor.id,c),null;const u=Ot(c,d);return t(l.descriptor.id,u),Ot(c,u)},o=(l,c,d)=>{if(!l||!Zd(c,d))return d;const u=mA(c,d);if(!u)return n(d),null;const m=Ot(d,u);return n(m),Ot(d,m)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=Ft(l.impact);d||Q();const u=a(l.dimensions.droppables[d],c);if(!u)return;const m=l.viewport,f=o(l.isWindowScrollAllowed,m,u);f&&r(l,f)}},vA=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const a=gA({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),o=xA({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:a.start,stop:a.stop}};const fs="data-rfd",ps=(()=>{const e=`${fs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),yc=(()=>{const e=`${fs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),yA=(()=>{const e=`${fs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ef={contextId:`${fs}-scroll-container-context-id`},bA=e=>t=>`[${t}="${e}"]`,zs=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),wA="pointer-events: none;";var jA=e=>{const t=bA(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ps.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:wA,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${ta.outOfTheWay};
    `;return{selector:t(yc.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(yA.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:zs(i,"always"),resting:zs(i,"resting"),dragging:zs(i,"dragging"),dropAnimating:zs(i,"dropAnimating"),userCancel:zs(i,"userCancel")}};const NA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect;var Lt=NA;const Tl=()=>{const e=document.querySelector("head");return e||Q(),e},tf=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function SA(e,t){const n=we(()=>jA(e),[e]),r=v.useRef(null),a=v.useRef(null),o=se(Xe(m=>{const f=a.current;f||Q(),f.textContent=m}),[]),i=se(m=>{const f=r.current;f||Q(),f.textContent=m},[]);Lt(()=>{!r.current&&!a.current||Q();const m=tf(t),f=tf(t);return r.current=m,a.current=f,m.setAttribute(`${fs}-always`,e),f.setAttribute(`${fs}-dynamic`,e),Tl().appendChild(m),Tl().appendChild(f),i(n.always),o(n.resting),()=>{const p=g=>{const x=g.current;x||Q(),Tl().removeChild(x),g.current=null};p(r),p(a)}},[t,i,o,n.always,n.resting,e]);const l=se(()=>o(n.dragging),[o,n.dragging]),c=se(m=>{if(m==="DROP"){o(n.dropAnimating);return}o(n.userCancel)},[o,n.dropAnimating,n.userCancel]),d=se(()=>{a.current&&o(n.resting)},[o,n.resting]);return we(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function Mg(e,t){return Array.from(e.querySelectorAll(t))}var Dg=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Vi(e){return e instanceof Dg(e).HTMLElement}function EA(e,t){const n=`[${ps.contextId}="${e}"]`,r=Mg(document,n);if(!r.length)return null;const a=r.find(o=>o.getAttribute(ps.draggableId)===t);return!a||!Vi(a)?null:a}function CA(e){const t=v.useRef({}),n=v.useRef(null),r=v.useRef(null),a=v.useRef(!1),o=se(function(f,p){const g={id:f,focus:p};return t.current[f]=g,function(){const y=t.current;y[f]!==g&&delete y[f]}},[]),i=se(function(f){const p=EA(e,f);p&&p!==document.activeElement&&p.focus()},[e]),l=se(function(f,p){n.current===f&&(n.current=p)},[]),c=se(function(){r.current||a.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=n.current;f&&i(f)}))},[i]),d=se(function(f){n.current=null;const p=document.activeElement;p&&p.getAttribute(ps.draggableId)===f&&(n.current=f)},[]);return Lt(()=>(a.current=!0,function(){a.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),we(()=>({register:o,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,d,c,l])}function IA(){const e={draggables:{},droppables:{}},t=[];function n(m){return t.push(m),function(){const p=t.indexOf(m);p!==-1&&t.splice(p,1)}}function r(m){t.length&&t.forEach(f=>f(m))}function a(m){return e.draggables[m]||null}function o(m){const f=a(m);return f||Q(),f}const i={register:m=>{e.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,f)=>{const p=e.draggables[f.descriptor.id];p&&p.uniqueId===m.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const f=m.descriptor.id,p=a(f);p&&m.uniqueId===p.uniqueId&&(delete e.draggables[f],e.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:o,findById:a,exists:m=>!!a(m),getAllByType:m=>Object.values(e.draggables).filter(f=>f.descriptor.type===m)};function l(m){return e.droppables[m]||null}function c(m){const f=l(m);return f||Q(),f}const d={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const f=l(m.descriptor.id);f&&m.uniqueId===f.uniqueId&&delete e.droppables[m.descriptor.id]},getById:c,findById:l,exists:m=>!!l(m),getAllByType:m=>Object.values(e.droppables).filter(f=>f.descriptor.type===m)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:n,clean:u}}function AA(){const e=we(IA,[]);return v.useEffect(()=>function(){h.version.startsWith("16")||h.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var Wd=h.createContext(null),Lo=()=>{const e=document.body;return e||Q(),e};const MA={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var DA=MA;const kA=e=>`rfd-announcement-${e}`;function OA(e){const t=we(()=>kA(e),[e]),n=v.useRef(null);return v.useEffect(function(){const o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),os(o.style,DA),Lo().appendChild(o),function(){setTimeout(function(){const c=Lo();c.contains(o)&&c.removeChild(o),o===n.current&&(n.current=null)})}},[t]),se(a=>{const o=n.current;if(o){o.textContent=a;return}},[])}let TA=0;const kg={separator:"::"};function FA(e,t=kg){return we(()=>`${e}${t.separator}${TA++}`,[t.separator,e])}function LA(e,t=kg){const n=h.useId();return we(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var Ud="useId"in h?LA:FA;function PA({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function $A({contextId:e,text:t}){const n=Ud("hidden-text",{separator:"-"}),r=we(()=>PA({contextId:e,uniqueId:n}),[n,e]);return v.useEffect(function(){const o=document.createElement("div");return o.id=r,o.textContent=t,o.style.display="none",Lo().appendChild(o),function(){const l=Lo();l.contains(o)&&l.removeChild(o)}},[r,t]),r}var Hi=h.createContext(null);function Og(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),t}function _A(){let e=null;function t(){return!!e}function n(i){return i===e}function r(i){e&&Q();const l={abandon:i};return e=l,l}function a(){e||Q(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:n,claim:r,release:a,tryAbandon:o}}function fa(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const RA=9,VA=13,Gd=27,Tg=32,HA=33,BA=34,zA=35,ZA=36,qA=37,WA=38,UA=39,GA=40,KA={[VA]:!0,[RA]:!0};var Fg=e=>{KA[e.keyCode]&&e.preventDefault()};const YA=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var Bi=YA;const Lg=0,nf=5;function XA(e,t){return Math.abs(t.x-e.x)>=nf||Math.abs(t.y-e.y)>=nf}const rf={type:"IDLE"};function JA({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:a=>{const{button:o,clientX:i,clientY:l}=a;if(o!==Lg)return;const c={x:i,y:l},d=n();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&Q();const u=d.point;if(!XA(u,c))return;a.preventDefault();const m=d.actions.fluidLift(c);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:a=>{const o=n();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{n().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(n().type==="PENDING"){e();return}if(a.keyCode===Gd){a.preventDefault(),e();return}Fg(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const o=n();if(o.type==="IDLE"&&Q(),o.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:Bi,fn:e}]}function QA(e){const t=v.useRef(rf),n=v.useRef(tr),r=we(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==Lg||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const f=e.findClosestDraggableId(m);if(!f)return;const p=e.tryGetLock(f,i,{sourceEvent:m});if(!p)return;m.preventDefault();const g={x:m.clientX,y:m.clientY};n.current(),d(p,g)}}),[e]),a=we(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const m=e.findClosestDraggableId(u);if(!m)return;const f=e.findOptionsForDraggable(m);f&&(f.shouldRespectForcePress||e.canGetLock(m)&&u.preventDefault())}}),[e]),o=se(function(){const m={passive:!1,capture:!0};n.current=zt(window,[a,r],m)},[a,r]),i=se(()=>{t.current.type!=="IDLE"&&(t.current=rf,n.current(),o())},[o]),l=se(()=>{const u=t.current;i(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[i]),c=se(function(){const m={capture:!0,passive:!1},f=JA({cancel:l,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});n.current=zt(window,f,m)},[l,i]),d=se(function(m,f){t.current.type!=="IDLE"&&Q(),t.current={type:"PENDING",point:f,actions:m},c()},[c]);Lt(function(){return o(),function(){n.current()}},[o])}function e7(){}const t7={[BA]:!0,[HA]:!0,[ZA]:!0,[zA]:!0};function n7(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===Gd){a.preventDefault(),n();return}if(a.keyCode===Tg){a.preventDefault(),r();return}if(a.keyCode===GA){a.preventDefault(),e.moveDown();return}if(a.keyCode===WA){a.preventDefault(),e.moveUp();return}if(a.keyCode===UA){a.preventDefault(),e.moveRight();return}if(a.keyCode===qA){a.preventDefault(),e.moveLeft();return}if(t7[a.keyCode]){a.preventDefault();return}Fg(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Bi,fn:n}]}function r7(e){const t=v.useRef(e7),n=we(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Tg)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,u,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const d=l.snapLift();t.current();function u(){c||Q(),c=!1,t.current(),r()}t.current=zt(window,n7(d,u),{capture:!0,passive:!1})}}),[e]),r=se(function(){const o={passive:!1,capture:!0};t.current=zt(window,[n],o)},[n]);Lt(function(){return r(),function(){t.current()}},[r])}const Fl={type:"IDLE"},s7=120,a7=.15;function o7({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Gd&&n.preventDefault(),e()}},{eventName:Bi,fn:e}]}function i7({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const a=n();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:o,clientY:i}=r.touches[0],l={x:o,y:i};r.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:r=>{const a=n();if(a.type!=="DRAGGING"){e();return}r.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const a=n();a.type==="IDLE"&&Q();const o=r.touches[0];if(!o||!(o.force>=a7))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Bi,fn:e}]}function l7(e){const t=v.useRef(Fl),n=v.useRef(tr),r=se(function(){return t.current},[]),a=se(function(p){t.current=p},[]),o=we(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const x=e.tryGetLock(g,l,{sourceEvent:p});if(!x)return;const y=p.touches[0],{clientX:b,clientY:w}=y,j={x:b,y:w};n.current(),m(x,j)}}),[e]),i=se(function(){const p={capture:!0,passive:!1};n.current=zt(window,[o],p)},[o]),l=se(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),a(Fl),n.current(),i())},[i,a]),c=se(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=se(function(){const p={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:r},x=zt(window,i7(g),p),y=zt(window,o7(g),p);n.current=function(){x(),y()}},[c,r,l]),u=se(function(){const p=r();p.type!=="PENDING"&&Q();const g=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:g,hasMoved:!1})},[r,a]),m=se(function(p,g){r().type!=="IDLE"&&Q();const x=setTimeout(u,s7);a({type:"PENDING",point:g,actions:p,longPressTimerId:x}),d()},[d,r,a,u]);Lt(function(){return i(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),a(Fl))}},[r,i,a]),Lt(function(){return zt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const c7=["input","button","textarea","select","option","optgroup","video","audio"];function Pg(e,t){if(t==null)return!1;if(c7.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:Pg(e,t.parentElement)}function d7(e,t){const n=t.target;return Vi(n)?Pg(e,n):!1}var u7=e=>nn(e.getBoundingClientRect()).center;function m7(e){return e instanceof Dg(e).Element}const f7=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function $g(e,t){return e==null?null:e[f7](t)?e:$g(e.parentElement,t)}function p7(e,t){return e.closest?e.closest(t):$g(e,t)}function h7(e){return`[${ps.contextId}="${e}"]`}function g7(e,t){const n=t.target;if(!m7(n))return null;const r=h7(e),a=p7(n,r);return!a||!Vi(a)?null:a}function x7(e,t){const n=g7(e,t);return n?n.getAttribute(ps.draggableId):null}function v7(e,t){const n=`[${yc.contextId}="${e}"]`,a=Mg(document,n).find(o=>o.getAttribute(yc.id)===t);return!a||!Vi(a)?null:a}function y7(e){e.preventDefault()}function ro({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function _g({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const a=n.draggable.findById(r);return!(!a||!a.options.isEnabled||!Eg(t.getState(),r))}function b7({lockAPI:e,contextId:t,store:n,registry:r,draggableId:a,forceSensorStop:o,sourceEvent:i}){if(!_g({lockAPI:e,store:n,registry:r,draggableId:a}))return null;const c=r.draggable.getById(a),d=v7(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&d7(d,i))return null;const u=e.claim(o||tr);let m="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function p(){return e.isActive(u)}function g(I,S){ro({expected:I,phase:m,isLockActive:p,shouldWarn:!0})&&n.dispatch(S())}const x=g.bind(null,"DRAGGING");function y(I){function S(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(S(),Q()),n.dispatch(sI(I.liftActionArgs)),m="DRAGGING";function E(A,O={shouldBlockNextClick:!1}){if(I.cleanup(),O.shouldBlockNextClick){const M=zt(window,[{eventName:"click",fn:y7,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(M)}S(),n.dispatch(xg({reason:A}))}return{isActive:()=>ro({expected:"DRAGGING",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:f,drop:A=>E("DROP",A),cancel:A=>E("CANCEL",A),...I.actions}}function b(I){const S=ia(A=>{x(()=>gg({client:A}))});return{...y({liftActionArgs:{id:a,clientSelection:I,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function w(){const I={moveUp:()=>x(fI),moveRight:()=>x(hI),moveDown:()=>x(pI),moveLeft:()=>x(gI)};return y({liftActionArgs:{id:a,clientSelection:u7(d),movementMode:"SNAP"},cleanup:tr,actions:I})}function j(){ro({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>ro({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:b,snapLift:w,abort:j}}const w7=[QA,r7,l7];function j7({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:a}){const o=[...a?w7:[],...r||[]],i=v.useState(()=>_A())[0],l=se(function(y,b){fa(y)&&!fa(b)&&i.tryAbandon()},[i]);Lt(function(){let y=t.getState();return t.subscribe(()=>{const w=t.getState();l(y,w),y=w})},[i,t,l]),Lt(()=>i.tryAbandon,[i.tryAbandon]);const c=se(x=>_g({lockAPI:i,registry:n,store:t,draggableId:x}),[i,n,t]),d=se((x,y,b)=>b7({lockAPI:i,registry:n,contextId:e,store:t,draggableId:x,forceSensorStop:y||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,i,n,t]),u=se(x=>x7(e,x),[e]),m=se(x=>{const y=n.draggable.findById(x);return y?y.options:null},[n.draggable]),f=se(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Rd()))},[i,t]),p=se(()=>i.isClaimed(),[i]),g=we(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:u,findOptionsForDraggable:m,tryReleaseLock:f,isLockClaimed:p}),[c,d,u,m,f,p]);for(let x=0;x<o.length;x++)o[x](g)}const N7=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};h.version.startsWith("16")||h.version.startsWith("17")?n():Dt.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),S7=e=>({...ma,...e.autoScrollerOptions,durationDampening:{...ma.durationDampening,...e.autoScrollerOptions}});function Zs(e){return e.current||Q(),e.current}function E7(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:a,dragHandleUsageInstructions:o}=e,i=v.useRef(null),l=Og(e),c=se(()=>N7(l.current),[l]),d=se(()=>S7(l.current),[l]),u=OA(t),m=$A({contextId:t,text:o}),f=SA(t,a),p=se(M=>{Zs(i).dispatch(M)},[]),g=we(()=>Im({publishWhileDragging:oI,updateDroppableScroll:lI,updateDroppableIsEnabled:cI,updateDroppableIsCombineEnabled:dI,collectionStarting:iI},p),[p]),x=AA(),y=we(()=>tA(x,g),[x,g]),b=we(()=>vA({scrollWindow:nA,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:d,...Im({move:gg},p)}),[y.scrollDroppable,p,d]),w=CA(t),j=we(()=>XI({announce:u,autoScroller:b,dimensionMarshal:y,focusMarshal:w,getResponders:c,styleMarshal:f}),[u,b,y,w,c,f]);i.current=j;const N=se(()=>{const M=Zs(i);M.getState().phase!=="IDLE"&&M.dispatch(Rd())},[]),I=se(()=>{const M=Zs(i).getState();return M.phase==="DROP_ANIMATING"?!0:M.phase==="IDLE"?!1:M.isDragging},[]),S=we(()=>({isDragging:I,tryAbort:N}),[I,N]);n(S);const E=se(M=>Eg(Zs(i).getState(),M),[]),A=se(()=>Ar(Zs(i).getState()),[]),O=we(()=>({marshal:y,focus:w,contextId:t,canLift:E,isMovementAllowed:A,dragHandleUsageInstructionsId:m,registry:x}),[t,y,m,w,E,A,x]);return j7({contextId:t,store:j,registry:x,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),v.useEffect(()=>N,[N]),h.createElement(Hi.Provider,{value:O},h.createElement(LE,{context:Wd,store:j},e.children))}let C7=0;function I7(){return we(()=>`${C7++}`,[])}function A7(){return h.useId()}var M7="useId"in h?A7:I7;function Rg(e){const t=M7(),n=e.dragHandleUsageInstructions||vo.dragHandleUsageInstructions;return h.createElement(WE,null,r=>h.createElement(E7,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const sf={dragging:5e3,dropAnimating:4500},D7=(e,t)=>t?ta.drop(t.duration):e?ta.snap:ta.fluid,k7=(e,t)=>{if(e)return t?ua.opacity.drop:ua.opacity.combining},O7=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function T7(e){const n=e.dimension.client,{offset:r,combineWith:a,dropping:o}=e,i=!!a,l=O7(e),c=!!o,d=c?xc.drop(r,i):xc.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:D7(l,o),transform:d,opacity:k7(i,c),zIndex:c?sf.dropAnimating:sf.dragging,pointerEvents:"none"}}function F7(e){return{transform:xc.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function L7(e){return e.type==="DRAGGING"?T7(e):F7(e)}function P7(e,t,n=Je){const r=window.getComputedStyle(t),a=t.getBoundingClientRect(),o=qh(a,r),i=ko(o,n),l={client:o,tagName:t.tagName.toLowerCase(),display:r.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function $7(e){const t=Ud("draggable"),{descriptor:n,registry:r,getDraggableRef:a,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=we(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),d=se(p=>{const g=a();return g||Q(),P7(n,g,p)},[n,a]),u=we(()=>({uniqueId:t,descriptor:n,options:c,getDimension:d}),[n,d,c,t]),m=v.useRef(u),f=v.useRef(!0);Lt(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),Lt(()=>{if(f.current){f.current=!1;return}const p=m.current;m.current=u,r.draggable.update(u,p)},[u,r.draggable])}var Kd=h.createContext(null);function Po(e){const t=v.useContext(e);return t||Q(),t}function _7(e){e.preventDefault()}const R7=e=>{const t=v.useRef(null),n=se((S=null)=>{t.current=S},[]),r=se(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:o,registry:i}=Po(Hi),{type:l,droppableId:c}=Po(Kd),d=we(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:u,draggableId:m,isEnabled:f,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:x,mapped:y,dropAnimationFinished:b}=e;if(!x){const S=we(()=>({descriptor:d,registry:i,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:f}),[d,i,r,g,p,f]);$7(S)}const w=we(()=>f?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:_7}:null,[a,o,m,f]),j=se(S=>{y.type==="DRAGGING"&&y.dropping&&S.propertyName==="transform"&&(h.version.startsWith("16")||h.version.startsWith("17")?b():Dt.flushSync(b))},[b,y]),N=we(()=>{const S=L7(y),E=y.type==="DRAGGING"&&y.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":m,style:S,onTransitionEnd:E},dragHandleProps:w}},[a,w,m,y,j,n]),I=we(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return h.createElement(h.Fragment,null,u(N,y.snapshot,I))};var V7=R7,Vg=(e,t)=>e===t,Hg=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const H7=e=>e.combine?e.combine.draggableId:null,B7=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function z7(){const e=Xe((a,o)=>({x:a,y:o})),t=Xe((a,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null})),n=Xe((a,o,i,l,c=null,d=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:o,offset:a,dimension:i,forceShouldAnimate:u,snapshot:t(o,l,c,d,null)}}));return(a,o)=>{if(fa(a)){if(a.critical.draggable.id!==o.draggableId)return null;const i=a.current.client.offset,l=a.dimensions.draggables[o.draggableId],c=Ft(a.impact),d=B7(a.impact),u=a.forceShouldAnimate;return n(e(i.x,i.y),a.movementMode,l,o.isClone,c,d,u)}if(a.phase==="DROP_ANIMATING"){const i=a.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=a.dimensions.draggables[o.draggableId],d=i.result,u=d.mode,m=Hg(d),f=H7(d),g={duration:a.dropDuration,curve:Hd.drop,moveTo:a.newHomeClientOffset,opacity:f?ua.opacity.drop:null,scale:f?ua.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:g,draggingOver:m,combineWith:f,mode:u,forceShouldAnimate:null,snapshot:t(u,l,m,f,g)}}}return null}}function Bg(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Z7={mapped:{type:"SECONDARY",offset:Je,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Bg(null)}};function q7(){const e=Xe((i,l)=>({x:i,y:l})),t=Xe(Bg),n=Xe((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),r=i=>i?n(Je,i,!0):null,a=(i,l,c,d)=>{const u=c.displaced.visible[i],m=!!(d.inVirtualList&&d.effected[i]),f=$i(c),p=f&&f.draggableId===i?l:null;if(!u){if(!m)return r(p);if(c.displaced.invisible[i])return null;const y=As(d.displacedBy.point),b=e(y.x,y.y);return n(b,p,!0)}if(m)return r(p);const g=c.displacedBy.point,x=e(g.x,g.y);return n(x,p,u.shouldAnimate)};return(i,l)=>{if(fa(i))return i.critical.draggable.id===l.draggableId?null:a(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const W7=()=>{const e=z7(),t=q7();return(r,a)=>e(r,a)||t(r,a)||Z7},U7={dropAnimationFinished:vg},G7=zh(W7,U7,null,{context:Wd,areStatePropsEqual:Vg})(V7);var K7=G7;function zg(e){return Po(Kd).isUsingCloneFor===e.draggableId&&!e.isClone?null:h.createElement(K7,e)}function Zg(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return h.createElement(zg,os({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const qg=e=>t=>e===t,Y7=qg("scroll"),X7=qg("auto"),af=(e,t)=>t(e.overflowX)||t(e.overflowY),J7=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return af(n,Y7)||af(n,X7)},Q7=()=>!1,Wg=e=>e==null?null:e===document.body?Q7()?e:null:e===document.documentElement?null:J7(e)?e:Wg(e.parentElement);var bc=e=>({x:e.scrollLeft,y:e.scrollTop});const Ug=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Ug(e.parentElement):!1;var e9=e=>{const t=Wg(e),n=Ug(e);return{closestScrollable:t,isFixedOnPage:n}},t9=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:a,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:p}=l,g=jg({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:p,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:Je,displacement:Je}}}})(),d=a==="vertical"?Fd:tg,u=ms({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:o,page:i,frame:c,subject:u}};const n9=(e,t)=>{const n=Wh(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,i=a+t.scrollWidth,c=Dd({top:r,right:i,bottom:o,left:a},n.border);return kd({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var r9=({ref:e,descriptor:t,env:n,windowScroll:r,direction:a,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=n.closestScrollable,d=n9(e,c),u=ko(d,r),m=(()=>{if(!c)return null;const p=Wh(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:ko(p,r),scroll:bc(c),scrollSize:g,shouldClipSubject:l}})();return t9({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:u,closest:m})};const s9={passive:!1},a9={passive:!0};var of=e=>e.shouldPublishImmediately?s9:a9;const so=e=>e&&e.env.closestScrollable||null;function o9(e){const t=v.useRef(null),n=Po(Hi),r=Ud("droppable"),{registry:a,marshal:o}=n,i=Og(e),l=we(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=v.useRef(l),d=we(()=>Xe((N,I)=>{t.current||Q();const S={x:N,y:I};o.updateDroppableScroll(l.id,S)}),[l.id,o]),u=se(()=>{const N=t.current;return!N||!N.env.closestScrollable?Je:bc(N.env.closestScrollable)},[]),m=se(()=>{const N=u();d(N.x,N.y)},[u,d]),f=we(()=>ia(m),[m]),p=se(()=>{const N=t.current,I=so(N);if(N&&I||Q(),N.scrollOptions.shouldPublishImmediately){m();return}f()},[f,m]),g=se((N,I)=>{t.current&&Q();const S=i.current,E=S.getDroppableRef();E||Q();const A=e9(E),O={ref:E,descriptor:l,env:A,scrollOptions:I};t.current=O;const M=r9({ref:E,descriptor:l,env:A,windowScroll:N,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),T=A.closestScrollable;return T&&(T.setAttribute(ef.contextId,n.contextId),T.addEventListener("scroll",p,of(O.scrollOptions))),M},[n.contextId,l,p,i]),x=se(()=>{const N=t.current,I=so(N);return N&&I||Q(),bc(I)},[]),y=se(()=>{const N=t.current;N||Q();const I=so(N);t.current=null,I&&(f.cancel(),I.removeAttribute(ef.contextId),I.removeEventListener("scroll",p,of(N.scrollOptions)))},[p,f]),b=se(N=>{const I=t.current;I||Q();const S=so(I);S||Q(),S.scrollTop+=N.y,S.scrollLeft+=N.x},[]),w=we(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:x,dragStopped:y,scroll:b}),[y,g,x,b]),j=we(()=>({uniqueId:r,descriptor:l,callbacks:w}),[w,l,r]);Lt(()=>(c.current=j.descriptor,a.droppable.register(j),()=>{t.current&&y(),a.droppable.unregister(j)}),[w,l,y,j,o,a.droppable]),Lt(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Lt(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Ll(){}const lf={width:0,height:0,margin:QE},i9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?lf:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},l9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=i9({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?ta.placeholder:null}},c9=e=>{const t=v.useRef(null),n=se(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:a,onClose:o,contextId:i}=e,[l,c]=v.useState(e.animate==="open");v.useEffect(()=>l?r!=="open"?(n(),c(!1),Ll):t.current?Ll:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):Ll,[r,l,n]);const d=se(m=>{m.propertyName==="height"&&(a(),r==="close"&&o())},[r,o,a]),u=l9({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return h.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var d9=h.memo(c9);class u9 extends h.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const m9=e=>{const t=v.useContext(Hi);t||Q();const{contextId:n,isMovementAllowed:r}=t,a=v.useRef(null),o=v.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:u,ignoreContainerClipping:m,isDropDisabled:f,isCombineEnabled:p,snapshot:g,useClone:x,updateViewportMaxScroll:y,getContainerForClone:b}=e,w=se(()=>a.current,[]),j=se((T=null)=>{a.current=T},[]);se(()=>o.current,[]);const N=se((T=null)=>{o.current=T},[]),I=se(()=>{r()&&y({maxScroll:Sg()})},[r,y]);o9({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:m,getDroppableRef:w});const S=we(()=>h.createElement(u9,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:T,data:$,animate:P})=>h.createElement(d9,{placeholder:$,onClose:T,innerRef:N,animate:P,contextId:n,onTransitionEnd:I})),[n,I,e.placeholder,e.shouldAnimatePlaceholder,N]),E=we(()=>({innerRef:j,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,S,j]),A=x?x.dragging.draggableId:null,O=we(()=>({droppableId:l,type:c,isUsingCloneFor:A}),[l,A,c]);function M(){if(!x)return null;const{dragging:T,render:$}=x,P=h.createElement(zg,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(C,D)=>$(C,D,T));return Y6.createPortal(P,b())}return h.createElement(Kd.Provider,{value:O},i(E,g),M())};var f9=m9;function p9(){return document.body||Q(),document.body}const cf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:p9},Gg=e=>{let t={...e},n;for(n in cf)e[n]===void 0&&(t={...t,[n]:cf[n]});return t},Pl=(e,t)=>e===t.droppable.type,df=(e,t)=>t.draggables[e.draggable.id],h9=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Xe(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),r=Xe((o,i,l,c,d,u)=>{const m=d.descriptor.id;if(d.descriptor.droppableId===o){const g=u?{render:u,dragging:n(d.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:g}}if(!i)return t;if(!c)return e;const p={isDraggingOver:l,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const l=Gg(i),c=l.droppableId,d=l.type,u=!l.isDropDisabled,m=l.renderClone;if(fa(o)){const f=o.critical;if(!Pl(d,f))return t;const p=df(f,o.dimensions),g=Ft(o.impact)===c;return r(c,u,g,g,p,m)}if(o.phase==="DROP_ANIMATING"){const f=o.completed;if(!Pl(d,f.critical))return t;const p=df(f.critical,o.dimensions);return r(c,u,Hg(f.result)===c,Ft(f.impact)===c,p,m)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const f=o.completed;if(!Pl(d,f.critical))return t;const p=Ft(f.impact)===c,g=!!(f.impact.at&&f.impact.at.type==="COMBINE"),x=f.critical.droppable.id===c;return p?g?e:t:x?e:t}return t}},g9={updateViewportMaxScroll:mI},x9=zh(h9,g9,(e,t,n)=>({...Gg(n),...e,...t}),{context:Wd,areStatePropsEqual:Vg})(f9);var Kg=x9;const yn=v.forwardRef(({bgColor:e,children:t,droppableId:n,onDragEnd:r,className:a,includeInternalDragDropContext:o=!0},i)=>{const l=s.jsx(Kg,{droppableId:n,children:(c,d)=>s.jsx("div",{ref:c.innerRef,...c.droppableProps,className:"h-full overflow-y-auto overflow-x-hidden",children:s.jsxs("ul",{ref:i,className:Y("flex h-full flex-col gap-5 rounded-md p-4 pb-5 transition-all duration-300",d.isDraggingOver&&e,a),children:[t,c.placeholder]})})});return o?s.jsx(Rg,{onDragEnd:r,children:l}):l});yn.displayName="DraggableList";const Rn=({children:e,className:t,color:n,customHandle:r=!1,customHandleColor:a,draggableId:o,index:i,rotateCurrentDragItem:l=!1})=>s.jsx(Zg,{draggableId:o,index:i,children:(c,d)=>(l&&d.isDragging&&c.draggableProps.style&&c.draggableProps.style.transform!==void 0&&(c.draggableProps.style.transform=`${c.draggableProps.style.transform} rotate(7deg)`),r?s.jsxs("div",{...c.draggableProps,ref:c.innerRef,className:Be(d.isDragging&&`rounded-lg ring-2 ${n}`,"flex items-center",t),children:[s.jsx("div",{...c.dragHandleProps,className:"flex h-full items-center",children:s.jsx(X1,{size:32,weight:"duotone",className:Be(a)})}),e]}):s.jsx("div",{...c.draggableProps,...c.dragHandleProps,ref:c.innerRef,className:Be(d.isDragging&&`rounded-lg ring-2 ${n}`,t),children:e}))}),Gr=e=>{const[t,n]=v.useState(e),r=v.useRef(null);return v.useEffect(()=>{setTimeout(()=>{e>t&&r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end"}),n(e)},200)},[e]),{listRef:r}};function hr({actions:e,cardBgColor:t="bg-card",cardSpacing:n="p-4",className:r,mediaData:a,noShadow:o=!1,onClick:i,subtitle:l,title:c,variant:d="default",labelColor:u}){return s.jsx("div",{className:r,children:d==="default"?s.jsxs("div",{onClick:i,className:Be("flex cursor-pointer items-center space-x-4 rounded-lg",!o&&"shadow-sm",t,n),children:[u&&s.jsx(ly,{size:22,weight:"duotone",color:u}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"break-all text-start text-sm font-medium leading-none",children:c}),s.jsx("div",{className:"text-sm text-muted-foreground",children:l})]}),s.jsx("div",{className:"flex gap-4",children:e})]}):d==="media"?s.jsxs("div",{onClick:i,className:Be("relative flex aspect-square cursor-pointer flex-col overflow-hidden rounded-lg p-[2px] shadow-md",t),children:[s.jsx(Ia,{data:a}),s.jsxs("main",{className:"absolute inset-x-0 bottom-0 top-auto flex h-full flex-col justify-end gap-2 bg-gradient-to-t from-background via-card/80 via-60% to-card/10 p-4",children:[s.jsx("h1",{className:"text-base font-bold",children:c}),s.jsx("div",{className:"flex gap-2 self-end",children:e})]})]}):""})}const v9=function({audio:e,className:t,isSelected:n}){const r=u4(new an);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-audio/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-audio",t),onClick:()=>r(e.id),actions:s.jsxs(s.Fragment,{children:[s.jsx(Ih,{audio:e}),s.jsx(Ah,{audio:e})]}),subtitle:e.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado",title:e.name})},y9=v.memo(v9,(e,t)=>e.audio.id===t.audio.id&&e.audio.name===t.audio.name&&e.audio.isPtt===t.audio.isPtt&&e.audio.isFavorite===t.audio.isFavorite&&e.isSelected===t.isSelected);function b9(){const{filterTerm:e,filteredAudioList:t,selectedAudioId:n}=rt.useDashboardAudioList(),{authError:r,isPremium:a}=ct.useGetAuthData(),o=f4(new an),i=c4(new an),{listRef:l}=Gr(t.length),c=!a||r;return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5 pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:o,storeSearchTerm:e}),s.jsx(wd,{})]}),t.length>0?s.jsx(_n,{className:Y(c?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:s.jsx(yn,{className:"pb-0",ref:l,onDragEnd:d=>{d.destination&&i({destinationIndex:d.destination.index,sourceIndex:d.source.index})},droppableId:"audio-list",bgColor:"bg-item-audio-light/70 zv-dark:bg-item-audio-light/15",children:t.map((d,u)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-audio",draggableId:d.id,index:u,customHandle:!0,customHandleColor:"text-item-audio",children:s.jsx(y9,{audio:d,className:"w-full",isSelected:n===d.id},d.id)},d.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhum áudio encontrado",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-audio/70"})]})}function w9(){const[e]=ye("dashboard-audio-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[s.jsx("img",{src:"./audio.svg",alt:"Imagem indicativa de que não há áudios cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhum áudio cadastrado aqui."}),s.jsx("p",{children:"Que tal adicionar o seu primeiro áudio?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(wd,{})]})]})}const j9=ir("",{variants:{variant:{default:"bg-background",audio:"bg-item-audio",bulkMessages:"bg-item-trigger",document:"bg-item-document",flow:"bg-item-trigger",funnel:"bg-item-funnel",media:"bg-item-media",message:"bg-item-message",scheduleItem:"bg-item-trigger"}},defaultVariants:{variant:"default"}}),N9={default:"Itens enviados",audio:"Áudios enviados",bulkMessages:"Disparos em massa enviados",document:"Documentos enviados",flow:"Fluxos enviados",funnel:"Funis enviados",media:"Mídias enviadas",message:"Mensagens enviadas",scheduleItem:"Itens agendados"};function Gn({max:e,sent:t,variant:n}){if(!e||e<0)return null;const r=N9[n??"default"],a=(t??1)*100/(e??1);return s.jsx("div",{className:"w-56 rounded-md bg-card p-2.5",children:s.jsxs("article",{className:Y("space-y-1 text-end text-xs",t===e&&"brightness-[60%]"),children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h1",{children:r}),s.jsxs("b",{children:[t," / ",e]})]}),s.jsx(cy,{className:"h-1",value:a,indicatorClassName:j9({variant:n})})]})})}function Vn(){const e=jb.useGetUsageLimit();return Object.values(e).some(({max:n})=>n>0)?s.jsx("div",{className:"w-full border-b py-2",id:"zv-dashboard-limits-banner",children:s.jsx("div",{className:"mx-auto min-h-max max-w-7xl",children:s.jsxs("div",{className:"flex flex-wrap justify-center gap-x-2.5 gap-y-2",children:[s.jsx(Gn,{max:e.audio.max,sent:e.audio.sent,variant:"audio"}),s.jsx(Gn,{max:e.media.max,sent:e.media.sent,variant:"media"}),s.jsx(Gn,{max:e.document.max,sent:e.document.sent,variant:"document"}),s.jsx(Gn,{max:e.message.max,sent:e.message.sent,variant:"message"}),s.jsx(Gn,{max:e.funnel.max,sent:e.funnel.sent,variant:"funnel"}),s.jsx(Gn,{max:e.bulkMessages.max,sent:e.bulkMessages.sent,variant:"bulkMessages"}),s.jsx(Gn,{max:e.scheduleItem.max,sent:e.scheduleItem.sent,variant:"scheduleItem"}),s.jsx(Gn,{max:e.flow.max,sent:e.flow.sent,variant:"flow"})]})})}):null}function S9(){const e=rt.useGetHasAudios();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(b9,{}),s.jsx(WS,{})]})}):s.jsx(w9,{})]})}const ft=new dy(new ci);class E9{constructor(t){this.backupDataRepository=t}async execute(){const t=rt.audioList,n=Ke.documentList,r=Ue.flowList,a=st.funnelList,o=ft.labelList,i=Ye.mediaList,l=$e.textMessageList,c=sn.triggerList,d=[];for(const b of t){const w={id:b.id,name:b.name,size:await Ne(b,{itemDataGetter:rt.getAudioDataById})};d.push(w)}const u=[];for(const b of n){const w={id:b.id,name:b.name,size:await Ne(b,{itemDataGetter:Ke.getDocumentDataById})};u.push(w)}const m=[];for(const b of i){const w={id:b.id,name:b.name,size:await Ne(b,{itemDataGetter:Ye.getMediaDataById})};m.push(w)}const f=[];for(const b of l){const w={id:b.id,name:b.name,size:await Ne(b,{itemDataGetter:$e.getTextMessageDataById})};f.push(w)}const p=[];for(const b of r){const w={id:b.id,name:b.published.name,size:await Ne(b)};p.push(w)}const g=[];for(const b of a){const w={id:b.id,name:b.name,size:await Ne(b)};g.push(w)}const x=[];for(const b of o){const w={id:b.id,name:b.name,size:await Ne(b)};x.push(w)}const y=[];for(const b of c){const w={id:b.id,name:b.name,size:await Ne(b)};y.push(w)}return await this.backupDataRepository.setOptions({audios:d,docs:u,flows:p,funnels:g,labels:x,medias:m,messages:f,triggers:y})}}const Yg=e=>{const t=new E9(e);return t.execute.bind(t)},Ln="3.0.0";async function wc({exportAll:e,selectedBackupOptions:t}){const n=rt.store.getState().audioList,r=Ke.store.getState().documentList,a=Ue.store.getState().flowList,o=st.store.getState().funnelList,i=ft.store.getState().labelList,l=Ye.store.getState().mediaList,c=$e.store.getState().textMessageList,d=sn.store.getState().triggerList,u=n.filter(M=>e||t.find(T=>T.id===M.id)),m=r.filter(M=>e||t.find(T=>T.id===M.id)),f=a.filter(M=>e||t.find(T=>T.id===M.id)),p=o.filter(M=>e||t.find(T=>T.id===M.id)),g=i.filter(M=>e||t.find(T=>T.id===M.id)),x=l.filter(M=>e||t.find(T=>T.id===M.id)),y=c.filter(M=>e||t.find(T=>T.id===M.id)),b=d.filter(M=>e||t.find(T=>T.id===M.id));if(n.length===0&&r.length===0&&a.length===0&&o.length===0&&i.length===0&&l.length===0&&c.length===0&&d.length===0)throw Error("Sem dados para exportar");const w=[];for(const M of u){const T=await rt.getAudioDataById(M.id);T&&w.push({data:T.data,id:M.id,isPtt:T.isPtt})}const j=[];for(const M of x){const T=await Ye.getMediaDataById(M.id);T&&j.push({caption:T.caption,data:T.data,id:M.id})}const N=[];for(const M of m){const T=await Ke.getDocumentDataById(M.id);T&&N.push({data:T.data,id:M.id,fileName:T.fileName})}const I=[];for(const M of y){const T=await $e.getTextMessageDataById(M.id);T&&I.push({data:T.data,id:M.id})}const S=[...w,...N,...j,...I],A=JSON.stringify({audios:u,docs:m,flows:f,funnels:p,labels:g,medias:x,messages:y,triggers:b,objectsList:S,version:Ln,type:"partial"}),O=new Blob([A],{type:"application/json"});return{downloadLink:window.URL.createObjectURL(O)}}async function C9({exportAll:e,selectedBackupOptions:t}){const n=ii(new _a,de,navigator.sendBeacon);return new Promise((r,a)=>{try{e?wc({exportAll:e}).then(o=>r(o)).catch(o=>{n.trackException("exception:backup_export:versioned",{exc_backup_version:Ln,exc_message:o.message,fatal:!1}),a(o.message)}):wc({exportAll:e,selectedBackupOptions:t}).then(o=>r(o)).catch(o=>{n.trackException("exception:backup_export:partial",{exc_backup_version:Ln,exc_message:o.message,fatal:!1}),a(o.message)})}catch(o){o instanceof Error?n.trackException("exception:backup_export:invalid",{exc_message:o.message,fatal:!1}):n.trackException("exception:backup_export:invalid",{exc_message:JSON.stringify(o),fatal:!1}),a(new Error("Falha ao exportar backup"))}})}class I9 extends S1{constructor(t,n){super(t,n)}}class A9 extends I9{constructor(t){super(t,"IMPORT_FAILED")}}function M9({objectsList:e,partialAudios:t}){let n=0;const r={},a=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(m=>m.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const m=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],f=Number.isNaN(Number(m))?1:Number(m);r[c].splice(d,1,`${l} x${f+1}`)}},o=t.filter((l,c)=>!l.id||l.id.trim()===""?(a("Áudio inexistente (removido)",l.name?l.name:`Áudio ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.asViewOnce??!1,m=l.isFavorite??!1,f=l.isPtt??!0;if(!c.includes("name")||l.name.trim()===""){n++;const p=`Áudio (corrigido) ${n}`;a("Áudio sem nome",p),d=p}return c.includes("asViewOnce")||a("Áudio sem opção definida (Visualização única)",d),c.includes("isFavorite")||a("Áudio sem opção definida (Favorito)",d),c.includes("isPtt")||a("Áudio sem opção definida (Gravado/encaminhado)",d),{asViewOnce:u,id:l.id,isFavorite:m,isPtt:f,name:d}}),i=o.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",id:c.id,isPtt:!0}),a("Áudio não encontrado (criado um vazio)",c.name)),l),e);return{audios:o,audiosObjectsList:i,audioWarns:r}}function D9({objectsList:e,partialDocuments:t}){let n=0;const r={},a=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(m=>m.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const m=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],f=Number.isNaN(Number(m))?1:Number(m);r[c].splice(d,1,`${l} x${f+1}`)}},o=t.filter((l,c)=>!l.id||l.id.trim()===""?(a("Documento inexistente (removido)",l.name?l.name:`Documento ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.isFavorite??!1;if(!c.includes("name")||l.name.trim()===""){n++;const m=`Documento (corrigido) ${n}`;a("Documento sem nome",m),d=m}return c.includes("isFavorite")||a("Documento sem opção definida (Favorito)",d),{id:l.id,name:d,isFavorite:u}}),i=o.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",fileName:"",id:c.id}),a("Documento não encontrado (criado um vazio)",c.name)),l),e);return{documents:o,documentsObjectsList:i,documentWarns:r}}const uf=864e5;function k9({partialFunnels:e}){let t=0;const n={},r=(o,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(o));if(l===-1)n[i]=[...n[i],o];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${o} x${u+1}`)}};return{funnels:e.filter((o,i)=>!o.id||o.id.trim()===""?(r("Funil inexistente (removido)",o.name?o.name:`Funil ${i+1}`),!1):!0).map(o=>{const i=Object.keys(o);let l=o.name;const c=o.itemsSequence??[],d=o.isFavorite??!1;if(o.itemsSequence||r("Funil sem itens (vazio)",l),i.includes("isFavorite")||r("Funil sem opção definida (Favorito)",l),!i.includes("name")||l.trim()===""){t++;const m=`Funil (corrigido) ${t}`;r("Funil sem nome",m),l=m}return{itemsSequence:c.filter(m=>{const f=Object.keys(m);return!f.includes("id")||m.id.trim()===""?(r("Item de funil inexistente (removido)",l),!1):!f.includes("type")||m.id.trim()===""?(r("Item de funil sem tipo definido (removido)",l),!1):!0}).map(m=>{m.delayBeforeSend!==0&&!m.delayBeforeSend&&r("Item de funil sem delay",l),m.delayBeforeSend<0&&r("Item de funil com delay negativo",l),m.delayBeforeSend>uf&&r("Item de funil com delay maior que o permitido",l);const f=m.delayBeforeSend?Math.min(Math.max(m.delayBeforeSend,0),uf):0;return{...m,delayBeforeSend:f}}),id:o.id,name:l,isFavorite:d}}),funnelWarns:n}}function O9({objectsList:e,partialMedias:t}){let n=0;const r={},a=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(m=>m.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const m=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],f=Number.isNaN(Number(m))?1:Number(m);r[c].splice(d,1,`${l} x${f+1}`)}},o=t.filter((l,c)=>!l.id||l.id.trim()===""?(a("Mídia inexistente (removida)",l.name?l.name:`Mídia ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.asViewOnce??!1,m=l.isFavorite??!1,f=l.isPtv??!1;if(!c.includes("name")||l.name.trim()===""){n++;const p=`Mídia (corrigida) ${n}`;a("Mídia sem nome",p),d=p}return c.includes("asViewOnce")||a("Mídia sem opção definida (Visualização única)",d),c.includes("isFavorite")||a("Mídia sem opção definida (Favorito)",d),{id:l.id,name:d,asViewOnce:u,isFavorite:m,isPtv:f}}),i=o.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({caption:"",data:"",id:c.id}),a("Mídia não encontrada (criada uma vazia)",c.name)),l),e);return{medias:o,mediasObjectsList:i,mediaWarns:r}}function T9({objectsList:e,partialMessages:t}){let n=0;const r={},a=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(m=>m.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const m=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],f=Number.isNaN(Number(m))?1:Number(m);r[c].splice(d,1,`${l} x${f+1}`)}},o=t.filter((l,c)=>!l.id||l.id.trim()===""?(a("Mensagem inexistente (removida)",l.name?l.name:`Mensagem ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.isFavorite??!1;if(!c.includes("name")||l.name.trim()===""){n++;const m=`Mensagem (corrigida) ${n}`;a("Mensagem sem nome",m),d=m}return c.includes("isFavorite")||a("Mensagem sem opção definida (Favorito)",d),{id:l.id,name:d,isFavorite:u}}),i=o.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",id:c.id}),a("Mensagem não encontrada (criada uma vazia)",c.name)),l),e);return{messages:o,messagesObjectsList:i,messageWarns:r}}const mf=864e5;function F9({partialTriggers:e}){let t=0;const n={},r=(o,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(o));if(l===-1)n[i]=[...n[i],o];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${o} x${u+1}`)}};return{triggers:e.filter((o,i)=>!o.id||o.id.trim()===""?(r("Gatilho inexistente (removido)",o.name?o.name:`Gatilho ${i+1}`),!1):!0).map(o=>{const i=Object.keys(o),l=o.keywordRules??[];let c=o.funnelId;const d=o.isCaseSensitive??!1,u=o.isEnabled??!1;let m=o.millisecondsBeforeSend,f=o.name;const p=o.sendToContacts??!0,g=o.sendToGroups??!1,x=o.isFavorite??!1,y=o.triggeredAt||null,b=o.webhook||"";if(o.keywordRules||r("Gatilho sem regras",f),!i.includes("name")||o.name.trim()===""){t++;const N=`Gatilho (corrigido) ${t}`;r("Gatilho sem nome",N),f=N}i.includes("sendToContacts")||r("Gatilho sem opção definida (Enviar para contatos)",f),i.includes("sendToGroups")||r("Gatilho sem opção definida (Enviar para grupos)",f),i.includes("isEnabled")||r("Gatilho sem opção definida (Ativo)",f),i.includes("isCaseSensitive")||r("Gatilho sem opção definida (Ignorar maiúsculas e minúsculas)",f),i.includes("millisecondsBeforeSend")?o.millisecondsBeforeSend<0?r("Gatilho com delay negativo",f):o.millisecondsBeforeSend>mf&&r("Gatilho com delay maior que o permitido",f):r("Gatilho sem opção definida (Delay)",f),m=o.millisecondsBeforeSend?Math.min(Math.max(o.millisecondsBeforeSend,0),mf):5e3,i.includes("isFavorite")||r("Gatilho sem opção definida (Favorito)",f),i.includes("triggeredAt")||r("Gatilho sem opção definida (Data de disparo)",f),i.includes("webhook")||r("Gatilho sem opção definida (Webhook)",f),i.includes("funnelId")||(r("Gatilho sem funil associado",f),c="");const w=["contains","equals","notContains","startsWith"],j=l.filter(N=>!N.id||N.id.trim()===""?(r("Regra de gatilho inexistente (removida)",o.name),!1):!0).map(N=>{let I=N.type;!N.type||N.type.trim()===""?(r("Regra de gatilho sem tipo definido",o.name),I="contains"):w.includes(I)||(r("Regra de gatilho com tipo inválido",o.name),I="contains"),N.keywords||r("Regra de gatilho sem palavras-chave",o.name);const S=N.keywords??[];return{id:N.id,keywords:S,type:I}});return{sendToContacts:p,sendToGroups:g,isEnabled:u,funnelId:c,id:o.id,isCaseSensitive:d,keywordRules:j,name:f,millisecondsBeforeSend:m,isFavorite:x,triggeredAt:y,webhook:b}}),triggerWarns:n}}class Yd extends Error{constructor(t){super(t),this.name="BackupMalformattedError"}}function L9({partialLabels:e}){let t=0;const n={},r=(o,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(o));if(l===-1)n[i]=[...n[i],o];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${o} x${u+1}`)}};return{labels:e.filter((o,i)=>!o.id||o.id.trim()===""?(r("Etiqueta inexistente (removida)",o.name?o.name:`Etiqueta ${i+1}`),!1):o.id!==void 0).map(o=>{var b;const i=structuredClone(Object.keys(o)),l=o.color??"#000000",c=o.createdAtInMs??new Date().getTime(),d=o.createdBy??"user",u=o.description??"",m=o.isFavorite??!1,f=o.phoneNumbers??[],p=o.updatedAtInMs??new Date().getTime(),g=o.updatedBy??"user",x=o.whatsappId??null;let y=o.name??"";if(!i.includes("name")||((b=o.name)==null?void 0:b.trim())===""){t++;const w=`Etiqueta (corrigido) ${t}`;r("Etiqueta sem nome",w),y=w}return i.includes("color")||r("Etiqueta sem opção definida (Cor)",y),i.includes("createdAtInMs")||r("Etiqueta sem opção definida (Timestamp de criação)",y),i.includes("createdBy")||r("Etiqueta sem opção definida (Criador)",y),i.includes("description")||r("Etiqueta sem opção definida (Descrição)",y),i.includes("isFavorite")||r("Etiqueta sem opção definida (Favorito)",y),o.phoneNumbers||r("Etiqueta sem números de telefone",y),i.includes("updatedAtInMs")||r("Etiqueta sem opção definida (Timestamp de atualização)",y),i.includes("updatedBy")||r("Etiqueta sem opção definida (Usuário atualizador)",y),i.includes("whatsappId")||r("Etiqueta sem opção definida (Id da etiqueta no WhatsApp)",y),{color:l,createdAtInMs:c,createdBy:d,description:u,phoneNumbers:f,updatedAtInMs:p,updatedBy:g,id:o.id,name:y,isFavorite:m,whatsappId:x}}),labelWarns:n}}const Xg=e=>typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="string"&&e.version>=Ln&&"audios"in e&&Array.isArray(e.audios)&&"docs"in e&&Array.isArray(e.docs)&&"funnels"in e&&Array.isArray(e.funnels)&&"medias"in e&&Array.isArray(e.medias)&&"messages"in e&&Array.isArray(e.messages)&&"triggers"in e&&Array.isArray(e.triggers)&&"objectsList"in e&&Array.isArray(e.objectsList)&&(!("type"in e)||"type"in e&&e.type==="partial")&&(!("flows"in e)||"flows"in e&&Array.isArray(e.flows))&&(!("labels"in e)||"labels"in e&&Array.isArray(e.labels));async function zi(e,t,n){t==="replace"&&await L1({awaitAfter:5e3});const{flows:r,flowWarns:a}=bb({partialFlows:e.flows??[]}),{labels:o,labelWarns:i}=L9({partialLabels:e.labels??[]}),{funnels:l,funnelWarns:c}=k9({partialFunnels:e.funnels}),{triggers:d,triggerWarns:u}=F9({partialTriggers:e.triggers}),{audiosObjectsList:m,audios:f,audioWarns:p}=M9({objectsList:e.objectsList,partialAudios:e.audios}),{documents:g,documentsObjectsList:x,documentWarns:y}=D9({objectsList:m,partialDocuments:e.docs}),{mediasObjectsList:b,medias:w,mediaWarns:j}=O9({partialMedias:e.medias,objectsList:x}),{messages:N,messagesObjectsList:I,messageWarns:S}=T9({partialMessages:e.messages,objectsList:b});f.length>0&&rt.store.setState(V=>({audioList:V.audioList.map(R=>f.find(W=>W.id===R.id)||R).concat(...f.filter(R=>!V.audioList.find(B=>B.id===R.id))),selectedAudioId:"",filterTerm:""})),g.length>0&&Ke.store.setState(V=>({documentList:V.documentList.map(R=>g.find(W=>W.id===R.id)||R).concat(...g.filter(R=>!V.documentList.find(B=>B.id===R.id))),selectedDocumentId:"",filterTerm:""})),w.length>0&&Ye.store.setState(V=>({mediaList:V.mediaList.map(R=>w.find(W=>W.id===R.id)||R).concat(...w.filter(R=>!V.mediaList.find(B=>B.id===R.id))),selectedMediaId:"",filterTerm:""})),N.length>0&&$e.store.setState(V=>({textMessageList:V.textMessageList.map(R=>N.find(W=>W.id===R.id)||R).concat(...N.filter(R=>!V.textMessageList.find(B=>B.id===R.id))),selectedTextMessageId:"",filterTerm:""})),l.length>0&&st.store.setState(V=>({funnelList:V.funnelList.map(R=>l.find(W=>W.id===R.id)||R).concat(...l.filter(R=>!V.funnelList.find(B=>B.id===R.id))),selectedFunnelId:"",filterTerm:""})),d.length>0&&sn.store.setState(V=>({triggerList:V.triggerList.map(R=>d.find(W=>W.id===R.id)||R).concat(...d.filter(R=>!V.triggerList.find(B=>B.id===R.id))),selectedTriggerId:"",filterTerm:""})),r.length>0&&Ue.store.setState(V=>({flowList:V.flowList.map(R=>r.find(W=>W.id===R.id)||R).concat(...r.filter(R=>!V.flowList.find(B=>B.id===R.id)))})),o.length>0&&ft.store.setState(V=>({labelList:V.labelList.map(R=>o.find(W=>W.id===R.id)||R).concat(...o.filter(R=>!V.labelList.find(B=>B.id===R.id)))}));for(const V of I){if(!(V!=null&&V.id))return;const{id:R,...B}=structuredClone(V);ic.setOnStorage({[R]:B})}await ic.getParsedFromStorage("LocalStorageReady");const E={...p,...n.audioWarns},A={...y,...n.documentWarns},O={...a,...n.flowWarns},M={...i,...n.labelWarns},T={...c,...n.funnelWarns},$={...j,...n.mediaWarns},P={...S,...n.messageWarns},C={...u,...n.triggerWarns},D=Object.keys(E).length>0&&Object.values(E).some(V=>V.length>0),k=Object.keys(A).length>0&&Object.values(A).some(V=>V.length>0),L=Object.keys(O).length>0&&Object.values(O).some(V=>V.length>0),F=Object.keys(M).length>0&&Object.values(M).some(V=>V.length>0),_=Object.keys(T).length>0&&Object.values(T).some(V=>V.length>0),H=Object.keys($).length>0&&Object.values($).some(V=>V.length>0),q=Object.keys(P).length>0&&Object.values(P).some(V=>V.length>0),z=Object.keys(C).length>0&&Object.values(C).some(V=>V.length>0);if(D||k||L||F||_||H||q||z)throw new Yd(JSON.stringify({audiosWithProblem:E,docsWithProblem:A,flowsWithProblem:O,labelsWithProblem:M,funnelsWithProblem:T,mediasWithProblem:$,messagesWithProblem:P,triggersWithProblem:C}))}const P9=e=>typeof e=="object"&&e!==null&&Array.isArray(e),ff=({objectsList:e,oldAudios:t})=>{let n=0;const r={},a=(o,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(o));if(l===-1)r[i]=[...r[i],o];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${o} x${u+1}`)}};try{if(!t)throw new Error("Backup sem áudios");const o=JSON.parse(t);if(!P9(o))throw new Error("Lista de áudios em formato incorreto");const i=o.filter((d,u)=>!d.id||d.id.trim()===""?(a("Áudio inexistente (removido)",d.name?d.name:`Áudio ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let m=d.name,f=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Áudio (corrigido) ${n}`;a("Áudio sem nome",p),m=p}return u.includes("type")?f!=="audios"&&(a("Áudio com tipo errado",m),f="audios"):(a("Áudio sem opção definida (Tipo)",m),f="audios"),{id:d.id,name:m,type:f}}),l=i.map(d=>{var u;return{id:d.id,isFavorite:!1,name:d.name,asViewOnce:!1,isPtt:((u=e==null?void 0:e.find(m=>m.id===d.id&&m.type==="audios"))==null?void 0:u.sendAsForwarded)??!0}}),c=i.reduce((d,u)=>(d.find(m=>m.id===u.id)||(d.push({data:"",name:u.name,id:u.id,sendAsForwarded:!0,type:u.type}),a("Áudio não encontrado (criado um vazio)",u.name)),d),e);return{audios:l,audiosObjectsList:c,audioWarns:r}}catch(o){return console.log(o),o instanceof Error?{audios:[],audiosObjectsList:e,audioWarns:{"Todos os áudios":[o.message]}}:{audios:[],audiosObjectsList:e,audioWarns:{"Todos os áudios":[JSON.stringify(o)]}}}},$9=e=>typeof e=="object"&&e!==null&&Array.isArray(e),_9={audios:"audio",medias:"media",mensagens:"message"},pf=864e5,hf=({oldFunnels:e})=>{let t=0;const n={},r=(a,o)=>{var l;n[o]||(n[o]=[]);const i=n[o].findIndex(c=>c.startsWith(a));if(i===-1)n[o]=[...n[o],a];else{const c=(l=n[o][i].split(" ").at(-1))==null?void 0:l.split("x")[1],d=Number.isNaN(Number(c))?1:Number(c);n[o].splice(i,1,`${a} x${d+1}`)}};try{if(!e)throw new Error("Backup sem funis");const a=JSON.parse(e);if(!$9(a))throw new Error("Lista de funis em formato incorreto");return{funnels:a.filter((l,c)=>!l.id||l.id.trim()===""?(r("Funil inexistente (removido)",l.name?l.name:`Funil ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.data??[];let m=l.type;if(l.data||r("Funil sem itens (vazio)",d),c.includes("type")?m!=="funis"&&(r("Funil com tipo errado",d),m="funis"):(r("Funil sem opção definida (Tipo)",d),m="funis"),!c.includes("name")||d.trim()===""){t++;const p=`Funil (corrigido) ${t}`;r("Funil sem nome",p),d=p}return{data:u.filter(p=>{const g=Object.keys(p);return!g.includes("id")||p.id.trim()===""?(r("Item de funil inexistente (removido)",d),!1):!g.includes("type")||p.type.trim()===""?(r("Item de funil sem tipo definido (removido)",d),!1):!0}).map(p=>{p.delay!==0&&!p.delay&&r("Item de funil sem delay",d),p.delay<0&&r("Item de funil com delay negativo",d),p.delay>pf&&r("Item de funil com delay maior que o permitido",d);const g=p.delay?Math.min(Math.max(p.delay,0),pf):0;return{...p,delay:g}}),id:l.id,name:d,type:m}}).map(l=>{var c;return{id:l.id,isFavorite:!1,name:l.name,itemsSequence:((c=l.data)==null?void 0:c.map(d=>({delayBeforeSend:d.delay,funnelId:l.id,id:new je().toString(),itemId:d.id,type:_9[d.type]})))??[]}}),funnelWarns:n}}catch(a){return console.log(a),a instanceof Error?{funnels:[],funnelWarns:{"Todos os funis":[a.message]}}:{funnels:[],funnelWarns:{"Todos os funis":[JSON.stringify(a)]}}}},R9=e=>typeof e=="object"&&e!==null&&Array.isArray(e),gf=({objectsList:e,oldMedias:t})=>{let n=0;const r={},a=(o,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(o));if(l===-1)r[i]=[...r[i],o];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${o} x${u+1}`)}};try{if(!t)throw new Error("Backup sem mídias");const o=JSON.parse(t);if(!R9(o))throw new Error("Lista de mídias em formato incorreto");const i=o.filter((d,u)=>!d.id||d.id.trim()===""?(a("Mídia inexistente (removida)",d.name?d.name:`Mídia ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let m=d.name,f=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Mídia (corrigida) ${n}`;a("Mídia sem nome",p),m=p}return u.includes("type")?f!=="medias"&&(a("Mídia com tipo errado",m),f="medias"):(a("Mídia sem opção definida (Tipo)",m),f="medias"),{id:d.id,name:m,type:f}}),l=i.map(d=>({id:d.id,isFavorite:!1,name:d.name,asViewOnce:!1,isPtv:!1})),c=i.reduce((d,u)=>(d.find(m=>m.id===u.id)||(d.push({data:"",name:u.name,id:u.id,type:u.type}),a("Mídia não encontrado (criada uma vazia)",u.name)),d),e);return{medias:l,mediasObjectsList:c,mediaWarns:r}}catch(o){return console.log(o),o instanceof Error?{medias:[],mediasObjectsList:e,mediaWarns:{"Todas as mídias":[o.message]}}:{medias:[],mediasObjectsList:e,mediaWarns:{"Todas as mídias":[JSON.stringify(o)]}}}},V9=e=>typeof e=="object"&&e!==null&&Array.isArray(e),xf=({objectsList:e,oldMessages:t})=>{let n=0;const r={},a=(o,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(o));if(l===-1)r[i]=[...r[i],o];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${o} x${u+1}`)}};try{if(!t)throw new Error("Backup sem mensagens");const o=JSON.parse(t);if(!V9(o))throw new Error("Lista de mensagens em formato incorreto");const i=o.filter((d,u)=>!d.id||d.id.trim()===""?(a("Mensagem inexistente (removida)",d.name?d.name:`Mensagem ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let m=d.name,f=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Mensagem (corrigida) ${n}`;a("Mensagem sem nome",p),m=p}return u.includes("type")?f!=="mensagens"&&(a("Mensagem com tipo errado",m),f="mensagens"):(a("Mensagem sem opção definida (Tipo)",m),f="mensagens"),{id:d.id,name:m,type:f}}),l=i.map(d=>({id:d.id,isFavorite:!1,name:d.name})),c=i.reduce((d,u)=>(d.find(m=>m.id===u.id)||(d.push({data:"",name:u.name,id:u.id,type:u.type}),a("Mensagem não encontrada (criada uma vazia)",u.name)),d),e);return{messages:l,messagesObjectsList:c,messageWarns:r}}catch(o){return console.log(o),o instanceof Error?{messages:[],messagesObjectsList:e,messageWarns:{"Todas as mensagens":[o.message]}}:{messages:[],messagesObjectsList:e,messageWarns:{"Todas as mensagens":[JSON.stringify(o)]}}}},Jg=e=>typeof e=="object"&&e!==null&&"audios"in e&&typeof e.audios=="string"&&"medias"in e&&typeof e.medias=="string"&&"mensagens"in e&&typeof e.mensagens=="string"&&(!("funis"in e)||"funis"in e&&typeof e.funis=="string"),Qg=e=>typeof e=="object"&&e!==null&&"audiosIndex"in e&&typeof e.audiosIndex=="string"&&"mediasIndex"in e&&typeof e.mediasIndex=="string"&&"mensagensIndex"in e&&typeof e.mensagensIndex=="string"&&(!("funis"in e)||"funis"in e&&typeof e.funis=="string"),H9=e=>{if(Jg(e)){if(!e.audios&&!e.medias&&!e.mensagens&&!e.funis)throw jc;const{funnels:t,funnelWarns:n}=hf({oldFunnels:e.funis}),{audios:r,audioWarns:a,audiosObjectsList:o}=ff({objectsList:e.objectsList,oldAudios:e.audios}),{medias:i,mediaWarns:l,mediasObjectsList:c}=gf({objectsList:o,oldMedias:e.medias}),{messages:d,messageWarns:u,messagesObjectsList:m}=xf({objectsList:c,oldMessages:e.mensagens}),f=m.map(p=>{switch(p.type){case"audios":return{data:p.data??"",id:p.id,isPtt:!p.sendAsForwarded};case"medias":return{caption:"",data:p.data??"",id:p.id};case"mensagens":return{data:p.data??"",id:p.id};default:throw new Error(`Unexpected item type for item: ${p}`)}});return{migratedBackup:{audios:r,docs:[],flows:[],funnels:t,medias:i,messages:d,objectsList:f,triggers:[],type:"partial",version:Ln},warns:{audioWarns:a,funnelWarns:n,mediaWarns:l,messageWarns:u}}}if(Qg(e)){if(!e.audiosIndex&&!e.mediasIndex&&!e.mensagensIndex&&!e.funis)throw jc;const{funnels:t,funnelWarns:n}=hf({oldFunnels:e.funis}),{audios:r,audioWarns:a,audiosObjectsList:o}=ff({objectsList:e.objectsList,oldAudios:e.audiosIndex}),{medias:i,mediaWarns:l,mediasObjectsList:c}=gf({objectsList:o,oldMedias:e.mediasIndex}),{messages:d,messageWarns:u,messagesObjectsList:m}=xf({objectsList:c,oldMessages:e.mensagensIndex}),f=m.map(p=>{switch(p.type){case"audios":return{data:p.data??"",id:p.id,isPtt:!p.sendAsForwarded};case"medias":return{caption:"",data:p.data??"",id:p.id};case"mensagens":return{data:p.data??"",id:p.id};default:throw new Error(`Unexpected item type for item: ${p}`)}});return{migratedBackup:{audios:r,docs:[],flows:[],funnels:t,medias:i,messages:d,objectsList:f,triggers:[],type:"partial",version:Ln},warns:{audioWarns:a,funnelWarns:n,mediaWarns:l,messageWarns:u}}}throw new Error("Backup em formato inválido")};async function B9(e,t){const{migratedBackup:n,warns:r}=H9(e);zi(n,t,r)}function z9({objectsList:e,oldAudios:t}){let n=0;const r={},a=(c,d)=>{var m;r[d]||(r[d]=[]);const u=r[d].findIndex(f=>f.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const f=(m=r[d][u].split(" ").at(-1))==null?void 0:m.split("x")[1],p=Number.isNaN(Number(f))?1:Number(f);r[d].splice(u,1,`${c} x${p+1}`)}},o=t.filter((c,d)=>!c.id||c.id.trim()===""?(a("Áudio inexistente (removido)",c.name?c.name:`Áudio ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,m=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const f=`Áudio (corrigido) ${n}`;a("Áudio sem nome",f),u=f}return d.includes("type")?m!=="audios"&&(a("Áudio com tipo errado",u),m="audios"):(a("Áudio sem opção definida (Tipo)",u),m="audios"),{id:c.id,name:u,type:m}}),i=o.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",id:d.id,sendAsForwarded:!0,type:d.type}),a("Áudio não encontrado (criado um vazio)",d.name)),c),e);return{audios:o.map(c=>({asViewOnce:!1,id:c.id,isFavorite:!1,isPtt:!0,name:c.name})),audiosObjectsList:i,audioWarns:r}}function Z9({objectsList:e,oldDocuments:t}){let n=0;const r={},a=(c,d)=>{var m;r[d]||(r[d]=[]);const u=r[d].findIndex(f=>f.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const f=(m=r[d][u].split(" ").at(-1))==null?void 0:m.split("x")[1],p=Number.isNaN(Number(f))?1:Number(f);r[d].splice(u,1,`${c} x${p+1}`)}},o=t.filter((c,d)=>!c.id||c.id.trim()===""?(a("Documento inexistente (removido)",c.name?c.name:`Documento ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,m=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const f=`Documento (corrigido) ${n}`;a("Documento sem nome",f),u=f}return d.includes("type")?m!=="docs"&&(a("Documento com tipo errado",u),m="docs"):(a("Documento sem opção definida (Tipo)",u),m="docs"),{id:c.id,name:u,type:m}}),i=o.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",fileName:"",id:d.id,type:d.type}),a("Documento não encontrado (criado um vazio)",d.name)),c),e);return{documents:o.map(c=>({id:c.id,name:c.name,isFavorite:!1})),documentsObjectsList:i,documentWarns:r}}const vf=864e5;function q9({oldFunnels:e}){let t=0;const n={},r=(i,l)=>{var d;n[l]||(n[l]=[]);const c=n[l].findIndex(u=>u.startsWith(i));if(c===-1)n[l]=[...n[l],i];else{const u=(d=n[l][c].split(" ").at(-1))==null?void 0:d.split("x")[1],m=Number.isNaN(Number(u))?1:Number(u);n[l].splice(c,1,`${i} x${m+1}`)}};return{funnels:e.filter((i,l)=>!i.id||i.id.trim()===""?(r("Funil inexistente (removido)",i.name?i.name:`Funil ${l+1}`),!1):!0).map(i=>{const l=Object.keys(i);let c=i.name;const d=i.data??[];let u=i.type;if(i.data||r("Funil sem itens (vazio)",c),l.includes("type")?u!=="funis"&&(r("Funil com tipo errado",c),u="funis"):(r("Funil sem opção definida (Tipo)",c),u="funis"),!l.includes("name")||c.trim()===""){t++;const f=`Funil (corrigido) ${t}`;r("Funil sem nome",f),c=f}return{data:d.filter(f=>{const p=Object.keys(f);return!p.includes("id")||f.id.trim()===""?(r("Item de funil inexistente (removido)",c),!1):!p.includes("type")||f.type.trim()===""?(r("Item de funil sem tipo definido (removido)",c),!1):!0}).map(f=>{f.delay!==0&&!f.delay&&r("Item de funil sem delay",c),f.delay<0&&r("Item de funil com delay negativo",c),f.delay>vf&&r("Item de funil com delay maior que o permitido",c);const p=f.delay?Math.min(Math.max(f.delay,0),vf):0;return{...f,delay:p}}),id:i.id,name:c,type:u}}).map(i=>{var l;return{id:i.id,name:i.name,itemsSequence:((l=i.data)==null?void 0:l.map(c=>{switch(c.type){case"medias":return A1.create({id:new je().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"audios":return I1.create({id:new je().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"docs":return C1.create({id:new je().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"mensagens":return E1.create({id:new je().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;default:throw new Error(`Wrong funnel item type: ${c.type}`)}}))??[],isFavorite:!1}}),funnelWarns:n}}function W9({oldMedias:e,objectsList:t}){let n=0;const r={},a=(c,d)=>{var m;r[d]||(r[d]=[]);const u=r[d].findIndex(f=>f.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const f=(m=r[d][u].split(" ").at(-1))==null?void 0:m.split("x")[1],p=Number.isNaN(Number(f))?1:Number(f);r[d].splice(u,1,`${c} x${p+1}`)}},o=e.filter((c,d)=>!c.id||c.id.trim()===""?(a("Mídia inexistente (removida)",c.name?c.name:`Mídia ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,m=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const f=`Mídia (corrigida) ${n}`;a("Mídia sem nome",f),u=f}return d.includes("type")?m!=="medias"&&(a("Mídia com tipo errado",u),m="medias"):(a("Mídia sem opção definida (Tipo)",u),m="medias"),{id:c.id,name:u,type:m}}),i=o.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({caption:"",data:"",id:d.id,type:d.type}),a("Mídia não encontrada (criada uma vazia)",d.name)),c),t);return{medias:o.map(c=>({id:c.id.toString(),isFavorite:!1,name:c.name,asViewOnce:!1,isPtv:!1})),mediasObjectsList:i,mediaWarns:r}}function U9({objectsList:e,oldMessages:t}){let n=0;const r={},a=(c,d)=>{var m;r[d]||(r[d]=[]);const u=r[d].findIndex(f=>f.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const f=(m=r[d][u].split(" ").at(-1))==null?void 0:m.split("x")[1],p=Number.isNaN(Number(f))?1:Number(f);r[d].splice(u,1,`${c} x${p+1}`)}},o=t.filter((c,d)=>!c.id||c.id.trim()===""?(a("Mensagem inexistente (removida)",c.name?c.name:`Mensagem ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,m=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const f=`Mensagem (corrigida) ${n}`;a("Mensagem sem nome",f),u=f}return d.includes("type")?m!=="mensagens"&&(a("Mensagem com tipo errado",u),m="mensagens"):(a("Mensagem sem opção definida (Tipo)",u),m="mensagens"),{id:c.id,name:u,type:m}}),i=o.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",id:d.id,type:d.type}),a("Mensagem não encontrada (criada uma vazia)",d.name)),c),e);return{messages:o.map(c=>({id:c.id,name:c.name,isFavorite:!1})),messagesObjectsList:i,messageWarns:r}}const yf=86400;function G9({oldTriggers:e}){let t=0;const n={},r=(i,l)=>{var d;n[l]||(n[l]=[]);const c=n[l].findIndex(u=>u.startsWith(i));if(c===-1)n[l]=[...n[l],i];else{const u=(d=n[l][c].split(" ").at(-1))==null?void 0:d.split("x")[1],m=Number.isNaN(Number(u))?1:Number(u);n[l].splice(c,1,`${i} x${m+1}`)}};return{triggers:e.filter((i,l)=>!i.id||i.id.trim()===""?(r("Gatilho inexistente (removido)",i.name?i.name:`Gatilho ${l+1}`),!1):!0).map(i=>{const l=Object.keys(i),c=i.dontSendToContact??!1,d=i.dontSendToGroups??!1,u=i.enabled??!1,m=i.ignoreCaseSensitive??!0,f=i.keywordRules??[];let p=i.funnelId,g=i.name,x=i.secondsBeforeSend,y=i.type;if(i.keywordRules||r("Gatilho sem regras",g),!l.includes("name")||i.name.trim()===""){t++;const w=`Gatilho (corrigido) ${t}`;r("Gatilho sem nome",w),g=w}l.includes("dontSendToContact")||r("Gatilho sem opção definida (Não enviar para contatos)",g),l.includes("dontSendToGroups")||r("Gatilho sem opção definida (Não enviar para grupos)",g),l.includes("enabled")||r("Gatilho sem opção definida (Ativo)",g),l.includes("ignoreCaseSensitive")||r("Gatilho sem opção definida (Ignorar maiúsculas e minúsculas)",g),l.includes("secondsBeforeSend")?i.secondsBeforeSend<0?r("Gatilho com delay negativo",g):i.secondsBeforeSend>yf&&r("Gatilho com delay maior que o permitido",g):r("Gatilho sem opção definida (Delay)",g),x=i.secondsBeforeSend?Math.min(Math.max(i.secondsBeforeSend,0),yf):5,l.includes("type")?y!=="trigger"&&(r("Gatilho com tipo errado",g),y="trigger"):(r("Gatilho sem opção definida (Tipo)",g),y="trigger"),l.includes("funnelId")||(r("Gatilho sem funil associado",g),p="");const b=f.filter(w=>!w.id||w.id.trim()===""?(r("Regra de gatilho inexistente (removida)",i.name),!1):!0).map(w=>{let j=w.type;!w.type||w.type.trim()===""?(r("Regra de gatilho sem tipo definido",i.name),j="contains"):["equals","contains","starts","not_contains"].includes(j)||(r("Regra de gatilho com tipo inválido",i.name),j="contains"),w.keywords||r("Regra de gatilho sem palavras-chave",i.name);const N=w.keywords??[];return{id:w.id,keywords:N,type:j}});return{dontSendToContact:c,dontSendToGroups:d,enabled:u,funnelId:p,id:i.id,ignoreCaseSensitive:m,keywordRules:b,name:g,secondsBeforeSend:x,type:y}}).map(i=>({id:i.id.toString(),name:i.name,isFavorite:!1,funnelId:i.funnelId??null,isCaseSensitive:!i.ignoreCaseSensitive,isEnabled:!!i.enabled,keywordRules:i.keywordRules.map(l=>({id:l.id,keywords:l.keywords.map(c=>c.trim()),type:[l.type].map(c=>{switch(c){case"equals":return"equals";case"contains":return"contains";case"starts":return"startsWith";case"not_contains":return"notContains";default:throw new Error(`Rule type not recognized: ${c}`)}})[0]})),millisecondsBeforeSend:(i.secondsBeforeSend??0)*1e3,sendToContacts:!i.dontSendToContact,sendToGroups:!i.dontSendToGroups,triggeredAt:null,webhook:""})),triggerWarns:n}}const ex=e=>typeof e=="object"&&e!==null&&"audiosIndex"in e&&Array.isArray(e.audiosIndex)&&"docsIndex"in e&&Array.isArray(e.docsIndex)&&"mediasIndex"in e&&Array.isArray(e.mediasIndex)&&"mensagensIndex"in e&&Array.isArray(e.mensagensIndex)&&"funis"in e&&Array.isArray(e.funis)&&"triggers"in e&&Array.isArray(e.triggers)&&"objectsList"in e&&Array.isArray(e.objectsList),K9=e=>{if(ex(e)){if(!e.audiosIndex&&!e.docsIndex&&!e.funis&&!e.mediasIndex&&!e.mensagensIndex&&!e.objectsList&&!e.triggers)throw jc;const{funnels:t,funnelWarns:n}=q9({oldFunnels:e.funis}),{triggers:r,triggerWarns:a}=G9({oldTriggers:e.triggers}),{audios:o,audioWarns:i,audiosObjectsList:l}=z9({objectsList:e.objectsList,oldAudios:e.audiosIndex}),{documents:c,documentWarns:d,documentsObjectsList:u}=Z9({objectsList:l,oldDocuments:e.docsIndex}),{medias:m,mediaWarns:f,mediasObjectsList:p}=W9({objectsList:u,oldMedias:e.mediasIndex}),{messages:g,messageWarns:x,messagesObjectsList:y}=U9({objectsList:p,oldMessages:e.mensagensIndex});return{migratedBackup:{audios:o,docs:c,flows:[],funnels:t,medias:m,messages:g,objectsList:y,triggers:r,type:"partial",version:Ln},warns:{audioWarns:i,documentWarns:d,funnelWarns:n,mediaWarns:f,messageWarns:x,triggerWarns:a}}}throw new Error("Backup em formato inválido")};async function Y9(e,t){const{migratedBackup:n,warns:r}=K9(e);zi(n,t,r)}const jc=new A9("O backup está vazio. Por favor verifique o arquivo."),X9=(e,t)=>{const n=ii(new _a,de,navigator.sendBeacon);return new Promise((r,a)=>{try{Xg(e)?(n.trackEvent("backup:import",{zv_backup_format:"partial",zv_backup_version:Ln}),zi(e,t,{}).then(r).catch(o=>{n.trackException("exception:backup_import:partial",{exc_backup_version:Ln,exc_message:o.message,fatal:!1}),a(o)})):ex(e)?(n.trackEvent("backup:import",{zv_backup_format:"old"}),Y9(e,t).then(r).catch(async o=>{n.trackException("exception:backup_import:old",{exc_message:o.message,fatal:!1}),a(o)})):Jg(e)||Qg(e)?(n.trackEvent("backup:import",{zv_backup_format:"legacy"}),B9(e,t).then(r).catch(async o=>{n.trackException("exception:backup_import:legacy",{exc_message:o.message,fatal:!1}),a(o)})):a(new Error("Formato de backup inválido"))}catch(o){o instanceof Error?n.trackException("exception:backup_import:invalid",{exc_message:o.message,fatal:!1}):n.trackException("exception:backup_import:invalid",{exc_message:JSON.stringify(o),fatal:!1}),a(new Error("Arquivo de backup inválido"))}})},J9={autoSelectItems:!0,downloadLink:"",exportAll:!0,exportBackup:async()=>{},exportFileName:"",file:void 0,fileName:void 0,generateExportBackupOptions:async()=>{},handleRemoveUploadedBackup:()=>{},handleToggleOptionGroupSelection:()=>{},handleToggleOptionSelection:()=>{},handleToggleRootSelection:()=>{},handleUploadedBackup:()=>{},hasBackup:!1,importBackup:async()=>{},importStrategy:"merge",isGeneratingOptions:!1,optionsEntries:[],rootSelectedState:!1,selectedExportOptions:[],setAutoSelectItems:()=>{},setDownloadLink:()=>{},setExportAll:async()=>{},setExportFileName:()=>{},setFile:()=>{},setFileName:()=>{},setImportStrategy:()=>{},setSelectedExportOptions:()=>{},totalSelectedSize:0,totalSize:0},tx=v.createContext(J9),Q9=({children:e,exportOptions:t})=>{const{setIsBusy:n}=Is(),r=Yg(new Te),a=Ue.store.getState().flowList,o=st.store.getState().funnelList,i=sn.store.getState().triggerList,[l,c]=v.useState(!0),[d,u]=v.useState(""),[m,f]=v.useState(!0),[p,g]=v.useState(""),[x,y]=v.useState(void 0),[b,w]=v.useState(void 0),[j,N]=v.useState("merge"),[I,S]=v.useState(!1),[E,A]=v.useState([]),O=Object.entries(t).filter(([,R])=>R.length>0),M=O.filter(R=>R.length>0).flatMap(([,R])=>R),T=M.reduce((R,B)=>B.size+R,0),$=M.every(R=>E.find(B=>B.id===R.id)),P=M.some(R=>E.find(B=>B.id===R.id))&&"indeterminate",C=$||P,D=(R,B)=>{y(R),w(B)},k=R=>(R.stopPropagation(),w(void 0),y(void 0));async function L(){return n(!0),new Promise((R,B)=>{const W=new FileReader;W.onload=async Z=>{var ee;const U=(ee=Z==null?void 0:Z.target)!=null&&ee.result&&String(Z.target.result).length>0?JSON.parse(String(Z.target.result)):[];try{return await X9(U,j),R(ut.setRoute("/home"))}catch(X){return B(X)}},W.onerror=Z=>{B(Z)},W.readAsText(x)}).finally(async()=>{await r(),n(!1)})}async function F(R){return n(!0),C9(R).then(({downloadLink:B})=>u(B)).finally(()=>n(!1))}const _=R=>{const B=[...R];if(l)for(const W of R){const Z=i.find(X=>X.id===W.id),U=o.find(X=>X.id===((Z==null?void 0:Z.funnelId)??W.id)),ee=a.find(X=>X.id===W.id);if(Z){const X=M.find(te=>te.id===Z.funnelId);X&&B.push(X)}if(U){for(const X of U.itemsSequence)if(!B.find(G=>G.id===X.itemId)){const G=M.find(ne=>ne.id===X.itemId);G&&B.push(G)}}if(ee){for(const X of ee.draft.nodes)if((tt.isAudioNode(X)||tt.isDocumentNode(X)||tt.isMediaNode(X)||tt.isTextNode(X))&&!B.find(ne=>ne.id===X.itemId)){const ne=M.find(ge=>ge.id===X.itemId);ne&&B.push(ne)}for(const X of ee.published.nodes)if((tt.isAudioNode(X)||tt.isDocumentNode(X)||tt.isMediaNode(X)||tt.isTextNode(X))&&!B.find(ne=>ne.id===X.itemId)){const ne=M.find(ge=>ge.id===X.itemId);ne&&B.push(ne)}}}A(B)},H=()=>{const R=$?[]:Array.from(new Set(E.concat(...Object.values(t))));_(R)},q=(R,B,W)=>{const Z=R?E.filter(U=>!W.find(ee=>ee.id===U.id)):E.filter(U=>!W.find(ee=>ee.id===U.id)).concat(t[B]);_(Z)},z=(R,B)=>{const W=R?E.filter(Z=>Z.id!==B.id):E.filter(Z=>Z.id!==B.id).concat(B);_(W)},V=async R=>{f(R),R||(S(!0),await r(),S(!1))};return s.jsx(tx.Provider,{value:{autoSelectItems:l,downloadLink:d,exportAll:m,exportBackup:F,exportFileName:p,file:x,fileName:b,generateExportBackupOptions:r,handleRemoveUploadedBackup:k,handleToggleOptionGroupSelection:q,handleToggleOptionSelection:z,handleToggleRootSelection:H,handleUploadedBackup:D,hasBackup:!!x&&!!b,importBackup:L,importStrategy:j,isGeneratingOptions:I,optionsEntries:O,rootSelectedState:C,selectedExportOptions:E,setAutoSelectItems:c,setDownloadLink:u,setExportAll:V,setExportFileName:g,setImportStrategy:N,setFile:y,setFileName:w,setSelectedExportOptions:_,totalSelectedSize:E.reduce((R,B)=>B.size+R,0),totalSize:T},children:e})},Xd=()=>v.useContext(tx);function qs(e){let t=e;const n=1e3,r=["B","KB","MB","GB","TB","PB","EB"];let a=0;for(;t>=n&&a<r.length-1;)t/=n,a++;return`${t.toFixed(2)} ${r[a]}`}function eM(){const[e,t]=v.useState(!1),[n,r]=v.useState(!1),{autoSelectItems:a,downloadLink:o,exportAll:i,exportBackup:l,exportFileName:c,generateExportBackupOptions:d,handleToggleOptionGroupSelection:u,handleToggleOptionSelection:m,handleToggleRootSelection:f,isGeneratingOptions:p,optionsEntries:g,rootSelectedState:x,selectedExportOptions:y,setAutoSelectItems:b,setExportAll:w,setExportFileName:j,setSelectedExportOptions:N,totalSelectedSize:I,totalSize:S}=Xd(),E=()=>{r(!0);const P=We.loading("Preparando backup para o download... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});i?l({exportAll:i}).then(()=>{ae({id:P,title:'Backup gerado com sucesso, clique em "Fazer download"',duration:4e3})}).catch(C=>{le({id:P,title:`Falha ao exportar backup: ${C}`,duration:4e3})}).finally(()=>{setTimeout(()=>We.dismiss(P),4e3),r(!1)}):l({exportAll:i,selectedBackupOptions:y}).then(()=>{ae({id:P,title:'Backup gerado com sucesso, clique em "Fazer download"',duration:4e3})}).catch(C=>{le({id:P,title:`Falha ao exportar backup: ${C}`,duration:4e3})}).finally(()=>{setTimeout(()=>We.dismiss(P),4e3),r(!1)})},A=async()=>{if(g.length===0){const P=We.loading("Procurando items para o backup...",{duration:Number.POSITIVE_INFINITY});await d(),setTimeout(()=>We.dismiss(P),0)}w(!0),t(!0),j(`ZV_backup ${d1.format(new Date).replace(/\//g,"_")}`)},O=qs(S),M=qs(I),T=P=>P>1024*1024*500?"text-destructive zv-dark:text-destructive-foreground brightness-200 drop-shadow-md":P>1024*1024*300?"text-item-trigger/90":P>1024*1024*200?"text-item-funnel/90":P>1024*1024*100?"text-item-audio/80":P>1024*1024*10?"text-item-media/80":"text-neutral-60",$=P=>{switch(P){case"audios":return"Áudios";case"docs":return"Documentos";case"flows":return"Fluxos";case"funnels":return"Funis";case"labels":return"Etiquetas";case"medias":return"Mídias";case"messages":return"Texto";case"triggers":return"Gatilhos"}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"mt-10 flex flex-col items-center gap-4",children:[s.jsx(ds,{open:e,onCancel:()=>{t(!1),N([]),j("")},action:"Exportar backup",actionProps:{disabled:!i&&(y.length===0||c.trim()==="")},description:g.length>0?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{className:"max-sm:hidden",htmlFor:"backup-file-name",children:"Nome do backup"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"backup-file-name",value:Pt(c,{toLowerCase:!1}),onChange:P=>j(P.target.value),errorMessage:!c.trim()&&"Campo não pode ser vazio."})]}),s.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-base",children:[s.jsx(xt,{id:"auto-select-items",checked:i,onCheckedChange:async P=>await w(P)}),s.jsx(ie,{htmlFor:"auto-select-items",children:"Exportar tudo"})]}),s.jsx("p",{className:"text-sm opacity-60",children:"Exportar todos os itens. Desativando essa opção você pode selecionar quais itens serão exportados"})]}),p&&s.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[s.jsx("h2",{className:"text-lg",children:"Procurando items para o backup..."}),s.jsx("p",{className:"text-base opacity-60",children:"O tempo pode variar de acordo com a quantidade de itens que você tem cadastrados. Por favor, aguarde..."})]}),!i&&!p&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-base",children:[s.jsx(xt,{id:"auto-select-items",checked:a,onCheckedChange:P=>b(P)}),s.jsx(ie,{htmlFor:"auto-select-items",children:"Autoseleção de itens"})]}),s.jsx("p",{className:"text-sm opacity-60",children:"Permite que áudios, textos, mídias e documentos sejam marcados automaticamente ao selecionar funis, gatilhos e fluxos, e impede que os mesmos sejam desmarcados"})]}),s.jsx("div",{className:"text-lg font-bold",children:s.jsxs("div",{className:"mt-2 flex w-full items-center space-x-2 text-muted-foreground",children:[s.jsx(qt,{id:"partial-backup-select-all",checked:x,onClick:P=>{P.preventDefault(),f()}}),s.jsxs("div",{className:"flex w-full items-center justify-between gap-1.5 text-sm leading-none",children:[s.jsx(ie,{htmlFor:"partial-backup-select-all",children:"Selecionar tudo"}),s.jsxs("div",{className:"mr-5 flex flex-col items-end gap-1",children:[s.jsxs("p",{children:["Selecionado:"," ",s.jsxs("span",{className:T(I),children:["~",M]})]}),s.jsxs("p",{children:["Total:"," ",s.jsxs("span",{className:T(S),children:["~",O]})]})]})]})]})}),s.jsx("hr",{}),s.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:s.jsx(dr,{type:"single",collapsible:!0,className:"w-full divide-y",children:g.map(([P,C])=>{const D=C.every(z=>y.find(V=>V.id===z.id)),k=C.some(z=>y.find(V=>V.id===z.id))&&"indeterminate",L=D||k,F=C.reduce((z,V)=>V.size+z,0),_=C.filter(z=>y.find(V=>V.id===z.id)).reduce((z,V)=>V.size+z,0),H=qs(F),q=qs(_);return s.jsxs(ur,{value:P,className:"mx-4 border-dashed",children:[s.jsx(mr,{asChild:!0,className:"py-2 hover:no-underline",children:s.jsxs("div",{className:"mt-2 flex w-full items-center space-x-2 text-muted-foreground",children:[s.jsx(qt,{id:P,checked:L,onClick:z=>{z.preventDefault(),u(D,P,C)}}),s.jsxs("div",{className:"flex w-full items-center justify-between gap-1.5 text-sm leading-none",children:[s.jsx("p",{children:$(P)}),s.jsxs("div",{className:"mr-5 flex flex-col items-end gap-1",children:[s.jsxs("p",{children:["Selecionado:"," ",s.jsxs("span",{className:T(_),children:["~",q]})]}),s.jsxs("p",{children:["Total:"," ",s.jsxs("span",{className:T(F),children:["~",H]})]})]})]})]})}),s.jsx(fr,{className:"mb-2 rounded-md bg-main-background p-2",children:s.jsx("ul",{className:"space-y-2",children:C.map(z=>{const V=!!y.find(R=>R.id===z.id);return s.jsx("li",{children:s.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[s.jsx(qt,{id:`${z.id}-${z.name}`,checked:V,onClick:()=>{m(V,z)}}),s.jsxs(ie,{htmlFor:`${z.id}-${z.name}`,className:"flex cursor-pointer gap-2 text-sm",children:[s.jsx("span",{children:z.name}),s.jsxs("span",{children:["(~",qs(z.size),")"]})]})]})},z.id)})})})]},P)})})})]})]})}):s.jsx("div",{children:"Nenhum item encontrado. Crie novos itens ou importe um backup primeiro."}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de exportação"]}),onAction:()=>{t(!1),N([]),E()},cancel:"Cancelar"}),s.jsx(K,{className:"w-64 rounded-sm py-7",size:"lg",disabled:n,onClick:A,icon:s.jsx(pd,{size:24}),children:n?"Gerando backup...":"Gerar backup"}),!n&&o&&s.jsx("a",{href:o,download:`${Pt(c,{toLowerCase:!1})}.json`,className:"rounded-sm bg-black",children:s.jsx(K,{className:"w-64 rounded-sm bg-status-success py-7 hover:bg-status-success/90 zv-dark:bg-status-success-foreground zv-dark:hover:bg-status-success-foreground/90",size:"lg",disabled:n,icon:s.jsx(Wr,{size:24}),children:"Fazer download"})}),s.jsx("div",{className:"w-10/12 min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px]",children:s.jsxs("section",{className:"flex flex-col gap-4 rounded-md p-4",children:[s.jsxs("h1",{className:"flex items-center gap-2 text-start text-sm font-bold text-foreground",children:[s.jsx(pr,{size:20,weight:"regular"})," Informação"]}),s.jsx("p",{className:"text-start text-sm font-light",children:"Aqui você pode exportar um backup de todos os seus dados, é importante que você faça backup regularmente para que você não perca suas configurações e dados"}),s.jsx("p",{className:"mt-2 rounded-md bg-background/65 px-2 py-1 text-start text-sm font-light",children:"A ZapVoice não armazena seus dados de forma permanente, portanto em caso de perda de dados, não será possível recuperá-los."})]})})]})})}function tM({fileName:e,onRemoveUploaded:t}){return s.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,s.jsx(K,{variant:"actionDestructive",icon:s.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function nx({actionName:e,className:t,fileName:n,hasBackup:r,onRemoveUploaded:a,onSelectBackup:o,isFile:i}){return s.jsx(hi,{className:Y("mx-auto h-36 w-1/2 border-primary-200 bg-card max-lg:w-full",t),returnFile:!0,accept:{"application/json":[".json"]},onSelect:o,dragHintText:s.jsx("p",{className:"text-base",children:"Solte o backup aqui..."}),hintText:s.jsxs("div",{className:"flex h-full items-center gap-4",children:[i&&s.jsx(hn,{size:64,className:"text-primary"}),s.jsxs("p",{className:"text-base leading-8",children:[r?s.jsx(tM,{fileName:n,onRemoveUploaded:a}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:["Para ",e," um backup, clique aqui ou arraste o arquivo para esta área."]}),s.jsx("br",{})]}),s.jsxs("span",{children:["Formatos aceitos:"," ",s.jsx("span",{className:"font-bold text-primary",children:".json"})]})]})]})})}function nM(){const[e,t]=v.useState(!1),{file:n,fileName:r,handleRemoveUploadedBackup:a,handleUploadedBackup:o,hasBackup:i,importBackup:l,importStrategy:c,setFile:d,setFileName:u,setImportStrategy:m}=Xd(),[f,p]=v.useState(!1),[g,x]=v.useState(),[y,b]=v.useState(!1);function w(){if(b(!1),t(!0),r&&n){const j=We.loading("Importando backup... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});l().then(()=>{ae({id:j,title:"Backup importado com sucesso",duration:4e3})}).catch(N=>{let I="";if(N instanceof Yd){const S=JSON.parse(N.message);I=S.message,x({flowsWithProblem:S.flowsWithProblem,funnelsWithProblem:S.funnelsWithProblem,triggersWithProblem:S.triggersWithProblem,audiosWithProblem:S.audiosWithProblem,mediasWithProblem:S.mediasWithProblem,messagesWithProblem:S.messagesWithProblem,docsWithProblem:S.docsWithProblem}),he({id:j,title:"Backup corrigido automaticamente",duration:Number.POSITIVE_INFINITY,classNames:{cancelButton:"!bg-status-info-foreground/40 !text-status-info"},cancel:{label:"Ver problemas",onClick:()=>{p(!0),We.dismiss(j)}},description:s.jsxs("div",{children:["Identificamos algumas ",s.jsx("strong",{children:"inconsistências"})," no backup, e tomamos a liberdade de corrigir para você o que conseguimos.",s.jsx("br",{}),s.jsx("span",{className:"underline",children:"Por favor, verifique se está tudo certo."}),s.jsx("br",{}),s.jsx("br",{}),"Clique em ",s.jsx("strong",{children:"Ver problemas"})," para mais detalhes"]}),className:"flex flex-wrap"}),t(!1);return}N instanceof Error?I=N.message:I=JSON.stringify(N),le({id:j,title:"Falha ao importar backup",duration:4e3,description:s.jsx("div",{className:"break-words",children:I})}),t(!1)}).finally(()=>{d(void 0),setTimeout(()=>We.dismiss(j),4e3)})}else le({title:"Selecione um arquivo para importar",duration:4e3});t(!1)}return s.jsxs("div",{className:"flex flex-col items-center gap-4 p-10 ",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[s.jsx(xt,{id:"export-strategy",checked:c==="replace",onCheckedChange:j=>m(j?"replace":"merge")}),s.jsxs(ie,{htmlFor:"export-strategy",children:["Ao importar um backup"," ",s.jsx(_e,{variant:c==="replace"?"destructive":"outline",children:"SUBSTITUIR TODOS OS ITENS EXISTENTES"})]})]}),s.jsx("div",{className:Y(c==="replace"&&"animate-bounce"),children:s.jsx(_e,{variant:c==="replace"?"destructive":"outline",className:Y(c==="replace"&&"mt-4 animate-shakeX text-xl"),children:"ATENÇÃO: Se a opção acima (SUBSTITUIR TODOS OS ITENS EXISTENTES) estiver habilitada, os seus dados atuais serão perdidos"})}),s.jsx(nx,{className:"w-full",actionName:"inserir",fileName:r,hasBackup:i,onRemoveUploaded:a,onSelectBackup:o,isFile:!!n}),s.jsx(ds,{open:f,className:"overflow-y-hidden md:w-fit",action:"Entendi",description:s.jsxs("div",{className:"max-h-[50vh] gap-3 overflow-y-auto",children:[g&&Object.keys(g.messagesWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Mensagens de texto com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.messagesWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.audiosWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Áudios com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.audiosWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.mediasWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Mídias com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.mediasWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.docsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Documentos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.docsWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.funnelsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Funis com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.funnelsWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.triggersWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Gatilhos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.triggersWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]}),g&&Object.keys(g.flowsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Fluxos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.flowsWithProblem).map(([j,N],I)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[j,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((S,E)=>s.jsx("li",{children:S},`${E}-${S}`))})]},`${I}-${j}`))})]})]}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-info"}),"Problemas identificados no arquivo de backup"]}),onCancel:()=>{p(!1)},onAction:()=>{p(!1)}}),s.jsx(K,{disabled:!r||!n||e,icon:s.jsx(mi,{size:24}),onClick:()=>b(!0),children:"Importar"}),s.jsx(ds,{open:y,onCancel:()=>{d(void 0),u(void 0),b(!1)},className:"md:w-fit",action:"Importar backup",description:s.jsxs("div",{children:[s.jsxs("p",{children:["Tem certeza que deseja importar o backup",s.jsxs("span",{className:"text-item-audio drop-shadow-audio",children:[" ",r]}),"?"]}),s.jsx(_e,{className:Y("mx-auto w-fit text-center",c==="replace"?"text-2xl":"text-lg"),size:"item",variant:c==="replace"?"destructive":"secondary",children:c==="replace"?"Esta ação não poderá ser desfeita, e os seus dados atuais serão perdidos.":"Esta ação não poderá ser desfeita."}),s.jsx("p",{children:"Em caso de dúvida, por favor realize o backup dos dados atuais."})]}),descriptionProps:{className:"gap-5 text-lg"},title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de importação"]}),onAction:w,cancel:"Cancelar"}),s.jsx("div",{className:"w-10/12 min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px]",children:s.jsxs("section",{className:"flex flex-col gap-4 rounded-md p-4",children:[s.jsxs("h1",{className:"flex items-center gap-2 text-start text-sm font-bold text-foreground",children:[s.jsx(pr,{size:20,weight:"regular"})," Informação"]}),s.jsx("p",{className:"text-start text-sm font-light",children:"Aqui você pode importar um backup de todos os seus dados, é importante que você faça backup regularmente para que você não perca suas configurações e dados"}),s.jsx("p",{className:"mt-2 rounded-md bg-background/65 px-2 py-1 text-start text-sm font-light",children:"A ZapVoice não armazena seus dados de forma permanente, portanto em caso de perda de dados, não será possível recuperá-los."})]})})]})}const bf="flex w-full flex-1 gap-3 rounded-none border-2 border-solid border-transparent text-muted-foreground data-[state=active]:bg-primary data-[state=active]:text-primary-foreground";function rM(){return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),s.jsxs(uy,{defaultValue:"download",className:"mt-6 flex flex-col items-center justify-center ",children:[s.jsxs(my,{className:" h-auto flex-wrap overflow-hidden rounded-sm border-solid border-border bg-card p-0 [transition:background-color_150ms_ease-in-out_150ms]",children:[s.jsxs(Vu,{value:"upload",className:bf,children:[s.jsx(mi,{size:24})," Importar backup"]}),s.jsxs(Vu,{value:"download",className:bf,children:[s.jsx(fd,{size:24}),"Gerar backup"]})]}),s.jsx(Hu,{value:"upload",className:"w-full",children:s.jsx(nM,{})}),s.jsx(Hu,{value:"download",className:"w-full",children:s.jsx(eM,{})})]})]})}const rx={dummyTrigger:!1,crmList:[{id:"1",name:"CRM name",description:"CRM description",columns:[],createdAtInMs:0,updatedAtInMs:0}],filterTerm:"",selectedCrmId:"1"},wf="ZV:CrmStore";class sM{constructor(t){pe(this,"_store");pe(this,"listeners",[]);pe(this,"useGetHasCrms",()=>jl(this.store,t=>t.crmList.length>0));pe(this,"useGetCrms",()=>jl(this.store,t=>t.crmList));pe(this,"useGetSelectedCrm",()=>jl(this.store,t=>t.crmList.find(n=>n.id===t.selectedCrmId)));pe(this,"setSelectedCrm",t=>{this.store.getState().setSelectedCrm(t)});pe(this,"addColumn",async(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().addColumn(...t)));pe(this,"addItemInColumn",(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().addItemInColumn(...t)));pe(this,"deleteItem",(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().deleteItem(...t)));pe(this,"deleteColumn",(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().deleteColumn(...t)));pe(this,"saveCrm",async(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().saveCrm(...t)));pe(this,"findById",async(...t)=>Dt.unstable_batchedUpdates(()=>this.store.getState().findById(...t)));this.zustandStorage=t,this._store=c1()(X6(n=>({...rx,toggleDummy:()=>n(r=>({dummyTrigger:!r.dummyTrigger})),setSelectedCrm:r=>n({selectedCrmId:r.id}),findById:async r=>this.store.getState().crmList.find(o=>o.id===r),addColumn:async r=>{this.store.getState().crmList[0].columns.push(r),n(o=>({crmList:[...o.crmList]}))},addItemInColumn:async()=>{},deleteItem:async()=>{},deleteColumn:async r=>{const a=this.store.getState().crmList,o=a[0].columns.filter(l=>l.id!==r),i={...a[0],columns:o};n(()=>({crmList:[i]}))},saveCrm:async r=>{const a=this.store.getState().crmList;a[0]=r,n(()=>({crmList:[...a]}))}}),{name:wf,storage:J6(()=>this.zustandStorage),version:0})),this.zustandStorage.addStorageListener(async()=>{this.rehydrateStore()},[wf])}addListener(t){this.listeners.push(t)}dispatchListeners(){for(const t of this.listeners)t()}async rehydrateStore(){setTimeout(async()=>{await this._store.persist.rehydrate();try{this.dispatchListeners()}catch(t){console.log(t)}},300)}get store(){return this._store}}const Dn=new sM(new ci),aM=e=>Object.keys(e).length===0;class oM{constructor(t){this.repository=t}async execute({crmId:t,items:n,title:r,description:a}){if(!r.trim())throw new Error("AddListInCrm: Cannot add a list with empty title");const i=await this.repository.findById(t);if(!i)throw new Error("AddListInCrm: CRM not found");if(i.columns.find(m=>m.title===r))throw new Error("AddListInCrm: List already exists");if(i.columns.some(m=>{const f=m.items.map(g=>g.contact.phoneNumber);return n.map(g=>g.contact.phoneNumber).some(g=>f.includes(g))}))throw new Error("AddListInCrm: Contact already exists in CRM");const d={id:new je().toString(),title:r,description:a,items:n},u={...i,columns:[...i.columns,d],updatedAtInMs:new Date().getTime()};return await this.repository.saveCrm(u),{crm:u}}}function iM(e){const t=new oM(e);return t.execute.bind(t)}function lM({itemId:e,columnName:t="",columnDescription:n="",phoneNumbersParam:r,callback:a,mode:o,isOpenModalParam:i}){const[l,c]=v.useState([]),[d,u]=v.useState(!1),[m,f]=v.useState(t),[p,g]=v.useState(n),[x,y]=v.useState(r);v.useEffect(()=>{t!==m&&f(t),n!==p&&g(n),i!==d&&u(i)},[t,i]),v.useEffect(()=>{const $=Dn.store.getState().crmList[0].columns;c($)},[i]);const b={value:m,onChange:$=>f($.target.value)},w={value:p,onChange:$=>g($.target.value)},j=()=>{o==="edit"?f(t):(f(""),g("")),u(!1)},N=async()=>{if(o==="create"){if(l.find(C=>C.title.trim()===m.trim())){he({title:"Atenção",description:"Já existe uma lista com este nome."});return}const P={title:m,description:p,items:x};await Dn.addColumn({id:new je().toString(),...P}),ae({title:`Lista "${m.trim()}" adicionada com sucesso.`}),a&&a(P)}else if(o==="edit"&&e){const $=Dn.store.getState().crmList[0],P=$.columns.find(D=>D.id===e);P&&(P.title=m,P.description=p,P.items=x,await Dn.saveCrm({...$}),ae({title:`Etiqueta "${m.trim()}" atualizada com sucesso.`})),a&&a({title:m,description:p,items:x})}j()},I=$=>{if($&&o==="edit"&&e){const C=ft.store.getState().labelList.find(D=>D.id===e);C&&g(C.description)}u($)};function S($){const P=$.split(xo);return`Inserir números:
${E(P).join(`;
`)}`}function E($){const P=fy($).map(D=>py(D)),C=hy(P);return gy(C,x.map(D=>D.contact.phoneNumber))}function A($){let P=E($);if(P.length<$.length){let L="";$.length===1?L="O número não foi adicionado pois já havia sido adicionado anteriormente.":L="Alguns números não foram adicionados pois já haviam sido adicionados anteriormente.",he({title:"Atenção",description:L})}const D=l.reduce((L,F)=>(L.push(...F.items.map(_=>_.contact.phoneNumber)),L),[]).filter(L=>P.includes(L));if(D.length>0){P=P.filter(F=>!D.includes(F));let L="";return D.length===1?L="O número já existe na lista.":L="Alguns números já existem na lista.",he({title:"Atenção",description:s.jsxs("div",{children:[s.jsx("p",{children:L}),s.jsx("p",{children:"Número(s) já existente(s):"}),s.jsx("ul",{children:D.map((F,_)=>s.jsx("li",{children:F},`warn-${F}-${_}`))})]})}),P}const k=P.map(L=>({contact:{name:"Contato",phoneNumber:L},createdBy:"user in crm page",createdAtInMs:new Date().getTime(),id:new je().toString(),name:"Contato"}));return y([...x,...k].map((L,F)=>({...L,contact:{name:`Contato ${F+1}`,phoneNumber:L.contact.phoneNumber},name:`Contato ${F+1}`}))),P}function O($){return $.preventDefault(),$.currentTarget.value="",$.clipboardData.getData("text")}function M($){const P=O($);return A(P.split(xo))}function T($){const P=$.target.value;return P===""?[]:A(P.split(xo))}return{nameHandler:b,handleAddNumbers:A,numbersFormatter:S,handleAddNumbersOnBlur:T,crmColumnPhoneNumbers:x,setCrmColumnPhoneNumbers:y,handlePasteNumbers:M,descriptionHandler:w,handleModalAction:N,handleOpenChange:I,isOpenModal:d,notReady:!m.trim(),title:o==="create"?"Nova Lista":"Editar Lista",clearAllState:j}}function sx({itemId:e,columnName:t,columnDescription:n,phoneNumbersParam:r=[],mode:a="create",trigger:o,callback:i,open:l}){const{nameHandler:c,descriptionHandler:d,title:u,handleOpenChange:m,handleModalAction:f,clearAllState:p,handleAddNumbersOnBlur:g,handlePasteNumbers:x,numbersFormatter:y,crmColumnPhoneNumbers:b,setCrmColumnPhoneNumbers:w,notReady:j,handleAddNumbers:N,isOpenModal:I}=lM({itemId:e,columnName:t,mode:a,columnDescription:n,phoneNumbersParam:r,callback:i,isOpenModalParam:l??!1});return s.jsx(ve,{open:I,closeOnAction:!1,onOpenChange:m,trigger:o,title:u,description:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex w-full flex-col gap-2",children:[s.jsx(ie,{htmlFor:"name",children:"Nome da Lista"}),s.jsx(ze,{list:"label-tips",required:!0,className:"bg-background text-base",id:"name",placeholder:"Digite o nome da nova lista",ref:$n,errorMessage:!c.value.trim()&&"Campo obrigatório",...c}),s.jsxs("datalist",{id:"label-tips",children:[s.jsx("option",{value:"Novos Clientes",children:"Novos Clientes"}),s.jsx("option",{value:"Pendentes",children:"Pendentes"}),s.jsx("option",{value:"Concluídos",children:"Concluídos"}),s.jsx("option",{value:"Negociando",children:"Negociando"}),s.jsx("option",{value:"Clientes PRO",children:"Clientes PRO"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{htmlFor:"description",children:"Descrição"}),s.jsx(Xc,{className:"bg-background text-base",id:"description",placeholder:"Digite uma descrição para a etiqueta",rows:4,...d})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:["Números de telefone",s.jsx(u1,{className:"border border-input bg-background text-base",hideList:!0,list:b.map(S=>({label:S.contact.phoneNumber,value:S.contact.phoneNumber})),createIfNotFound:!0,createItemFunction:S=>N(S.split(xo)),onBlur:g,onPaste:x,textFormatter:y,onRemoveItem:S=>w(b.filter(E=>E.contact.phoneNumber!==S.value)),placeholder:"Número de telefone"})]})]}),action:"Salvar",onAction:f,actionProps:{disabled:j,icon:s.jsx(Ct,{})},cancel:"Cancelar",onCancel:()=>{i==null||i(null),p()}})}function cM({callback:e,trigger:t,open:n}){const[r,a]=v.useState(null);return s.jsx(ve,{...n&&{open:n},trigger:t,title:"Adicionar nova lista por etiqueta existente",description:s.jsx("div",{className:"flex flex-col gap-4",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{htmlFor:"description",children:"Selecione uma etiqueta"}),s.jsx(rc,{store:ft,handler:{onValueChange:o=>{a(o)},value:(r==null?void 0:r.name)??""}})]})}),action:"Salvar",onAction:()=>{e(r)},actionProps:{disabled:r===null,icon:s.jsx(Ct,{})},cancel:"Cancelar",onCancel:()=>{e(null),a(null)}})}function dM({size:e}){const[t,n]=v.useState(null),r=iM(Dn);async function a(i){if(i){const l=[];for(const c of i.phoneNumbers)l.push({id:new je().toString(),name:c.title,contact:{name:c.title,phoneNumber:c.number},createdBy:"user in crm page (existing label option)",createdAtInMs:Date.now()});try{await r({crmId:rx.crmList[0].id,items:l,title:i.name,description:i.description}),ae({title:"Lista criada com sucesso!"})}catch(c){if(c instanceof Error)switch(c.message){case"AddListInCrm: List already exists":he({title:"Atenção",description:"Esta lista já existe!"});break;case"AddListInCrm: Cannot add a list with empty title":le({title:"Erro ao criar lista!",description:"O título da lista não pode ser vazio!"});break;case"AddListInCrm: Contact already exists in CRM":he({title:"Atenção",description:"Você já possui uma lista com o número de telefone identico a lista que você está tentando criar!"});break;default:le({title:"Erro ao criar lista!"});break}else console.log("Erro inesperado ao criar lista: "),console.error(c),le({title:"Erro inesperado ao criar lista!",description:"Por favor, tente novamente, caso o erro persista, contate o suporte."})}}}const o=i=>i==="noLabel"?s.jsx(sx,{trigger:null,open:!0}):i==="existingLabel"?s.jsx(cM,{trigger:null,open:!0,callback:async l=>{a(l),n(null)}}):null;return s.jsxs(s.Fragment,{children:[o(t),s.jsxs(Jc,{modal:!1,children:[s.jsx(Qc,{asChild:!0,children:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),variant:"ghost",className:"h-fit min-w-fit rounded-lg bg-card/50 p-4 font-bold",children:"Adicionar outra lista"})}),s.jsxs(m1,{className:"border-transparent shadow-primary/10 max-md:max-w-[90vw]",collisionPadding:10,children:[s.jsx(ts,{children:"Formas de adicionar uma lista"}),s.jsxs(ed,{children:[s.jsx(Ir,{}),s.jsx(en,{className:"cursor-pointer space-x-2",onClick:()=>{n("existingLabel")},children:"Criar com base em uma etiqueta"}),s.jsx(en,{className:"cursor-pointer space-x-2",onClick:()=>{n("noLabel")},children:"Criar lista vazia"})]})]})]})]})}const uM=v.memo(Rn,(e,t)=>e.draggableId===t.draggableId&&e.index===t.index&&e.isSelected===t.isSelected);function mM({column:{id:e,title:t,items:n,description:r},index:a}){const[o,i]=v.useState(!1),[l,c]=v.useState(!1);return s.jsx(Zg,{draggableId:e,index:a,children:d=>s.jsxs("div",{...d.dragHandleProps,...d.draggableProps,ref:d.innerRef,className:"mx-2 flex max-h-full flex-col gap-1 self-start rounded-lg border bg-card shadow-sm",children:[s.jsx(sx,{itemId:e,open:l,mode:"edit",phoneNumbersParam:n,columnDescription:r,columnName:t,trigger:s.jsx(s.Fragment,{}),callback:()=>{c(!1)}}),s.jsxs("header",{className:"flex items-center justify-between gap-1 p-2",children:[s.jsx("h1",{className:"text-base font-bold",children:t}),s.jsxs(Jc,{modal:!1,children:[s.jsx(Qc,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"action",icon:s.jsx(J1,{size:24})})}),s.jsxs(xy,{className:"!z-50 border-transparent bg-card shadow-primary/10 max-md:max-w-[90vw]",collisionPadding:10,children:[s.jsx(ts,{children:"Ações da Lista"}),s.jsxs(ed,{children:[s.jsx(en,{className:"cursor-pointer space-x-2",onClick:()=>{Dn.deleteColumn(e),ae({title:"Lista removida com sucesso"})},children:s.jsx("span",{children:"Remover"})}),s.jsx(en,{className:"cursor-pointer space-x-2",onClick:()=>{c(!0)},children:s.jsx("span",{children:"Editar"})})]})]})]})]}),s.jsx(yn,{bgColor:"",droppableId:e,className:"relative mx-1 max-h-full min-w-64 overflow-y-auto border border-transparent p-0",includeInternalDragDropContext:!1,onDragEnd:()=>null,children:n.map((u,m)=>u&&s.jsx(uM,{color:"bg-item-message-light/70 zv-dark:bg-item-audio-light/15",draggableId:u.id,index:m,rotateCurrentDragItem:!0,children:s.jsxs("div",{className:"rounded-md bg-background/50 p-2 shadow-md",children:[s.jsx("header",{className:"text-sm font-medium",children:u.contact.name}),s.jsx("main",{className:"text-xs",children:u.contact.phoneNumber})]})},`${u.id}-${m}`))}),s.jsx("footer",{className:"flex items-center gap-1 p-1",children:s.jsx(K,{variant:"default",size:"sm",className:Be("m-1 w-full rounded-sm",o&&"w-fit"),onClick:()=>i(!0),disabled:o,icon:s.jsx(_t,{size:18}),children:"Adicionar"})})]})},e)}const fM=e=>{const t=`[${vy}='${e}']`;return document.querySelector(t)};function pM(){const[e,t]=v.useState({}),n=Dn.useGetCrms()[0],r=o=>{const i=structuredClone(n);if(!i)return;t({});const{destination:l,source:c,draggableId:d,type:u}=o,m=!l,f=(l==null?void 0:l.droppableId)===c.droppableId&&l.index===c.index;if(m||f)return;if(u==="column"){const y=i.columns[c.index];i.columns.splice(c.index,1),i.columns.splice(l.index,0,y),Dn.saveCrm(i);return}const p=i.columns.find(y=>y.id===c.droppableId),g=i.columns.find(y=>y.id===l.droppableId),x=p==null?void 0:p.items[c.index];(x==null?void 0:x.id)===d&&(g==null||g.items.splice(l.index,0,x),p==null||p.items.splice(c.index+(l.droppableId===c.droppableId?1:0),1)),Dn.saveCrm(i)},a=o=>{if(!o.destination)return;const i=fM(o.draggableId);if(!i)return;const{clientHeight:l,clientWidth:c}=i,d=o.destination.index,u=o.source.index,m=[...i.parentNode.children],f=m[u];m.splice(u,1);const p=[...m.slice(0,d),f,...m.slice(d+1)],g=Number.parseFloat(window.getComputedStyle(i.parentNode).paddingLeft)+p.slice(0,d).reduce((x,y)=>{const b=window.getComputedStyle(y),w=Number.parseFloat(b.marginLeft);return x+y.clientWidth+w+19},0);t({clientHeight:l,clientWidth:c,clientY:3,clientX:g})};return s.jsxs("div",{className:"flex w-full overflow-x-auto",children:[s.jsx(Rg,{onDragEnd:r,onDragUpdate:a,children:s.jsx(Kg,{droppableId:"all-cols",direction:"horizontal",type:"column",children:(o,i)=>s.jsxs("div",{ref:o.innerRef,...o.droppableProps,className:"relative flex gap-1",children:[n==null?void 0:n.columns.map((l,c)=>s.jsx(mM,{column:l,index:c},l.id)),o.placeholder,!aM(e)&&i.isDraggingOver&&s.jsx("div",{className:"absolute rounded-md border-2 border-dashed border-primary-200 bg-card/50",style:{top:e.clientY,left:e.clientX,height:e.clientHeight,width:e.clientWidth}})]})})}),s.jsx(dM,{})]})}function hM(){return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex h-full justify-center overflow-hidden overflow-x-auto px-1 md:p-8 md:px-3",children:s.jsx(pM,{})})})}class bn{constructor(){pe(this,"documentStore",Ke)}async addDocument(...t){await this.documentStore.addDocument(...t)}async deleteDocument(...t){await this.documentStore.deleteDocument(...t)}async findById(...t){return await this.documentStore.findById(...t)}async getDocumentDataById(...t){return await this.documentStore.getDocumentDataById(...t)}async getDocumentList(){return this.documentStore.documentList}async reorderDocumentList(...t){await this.documentStore.reorderDocumentList(...t)}async saveDocument(...t){await this.documentStore.saveDocument(...t)}async selectDocument(...t){await this.documentStore.selectDocument(...t)}async setDocumentFilter(...t){await this.documentStore.setDocumentFilter(...t)}async toggleDocumentIsFavorite(...t){await this.documentStore.toggleDocumentIsFavorite(...t)}}class gM{constructor(t,n,r){this.documentRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteDocument: Id must be provided");await di(this.funnelRepository)({itemId:t}),await ui(this.flowRepository)({itemId:t}),await this.documentRepository.deleteDocument(t)}}function xM(e,t,n){const r=new gM(e,t,n);return r.execute.bind(r)}class vM{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("GetDocumentData: Id must be provided");const n=await this.repository.getDocumentDataById(t);return n||(console.warn("GetDocumentData: Document not found"),null)}}function Za(e){return v.useMemo(()=>{const t=new vM(e);return t.execute.bind(t)},[e])}class yM{constructor(t){this.repository=t}async execute(t){await this.repository.reorderDocumentList(t)}}function bM(e){const t=new yM(e);return t.execute.bind(t)}class wM{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectDocument: Id must be provided");await this.repository.selectDocument(t)}}function jM(e){const t=new wM(e);return t.execute.bind(t)}class NM{constructor(t){this.repository=t}async execute(t){await this.repository.setDocumentFilter(t)}}function SM(e){return v.useMemo(()=>{const t=new NM(e);return t.execute.bind(t)},[e])}class EM{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleDocumentIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleDocumentIsFavorite: Document not found");const r=M1.create({data:n.data,fileName:n.fileName,isFavorite:!n.isFavorite,name:n.name},n.idEntity);await this.repository.saveDocument(r)}}function CM(e){const t=new EM(e);return t.execute.bind(t)}class IM{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,fileName:a,name:o}){if(!t)throw new Error("UpdateDocumentData: Id must be provided");const i=await this.repository.findById(t);if(!i)throw new Error("UpdateDocumentData: Document not found");const l=M1.create({data:n??i.data,fileName:a??i.fileName,isFavorite:r??i.isFavorite,name:o??i.name},i.idEntity);return await this.repository.saveDocument(l),{document:l}}}function AM(e){const t=new IM(e);return t.execute.bind(t)}const MM=({itemId:e,documentName:t,mode:n})=>{const[r,a]=v.useState(void 0),[o,i]=v.useState(""),[l,c]=v.useState(t),d=new Te,u=new bn,m=xn(d),f=yy(u),p=Za(u),g=AM(u),x=vn(d);v.useEffect(()=>{t!==l&&c(t)},[t]);const y=()=>{n==="edit"?c(t):(c(""),a(void 0))};return{fileName:o,handleModalAction:async()=>{if(n==="create"&&r){const{document:S}=await f({base64:r,fileName:o.trim(),name:l.trim()});return await m({optionKey:"docs",optionToAdd:{id:S.id,name:S.name,size:await Ne(S,{itemData:S.data})}}),ae({title:`Documento "${l.trim()}" adicionado com sucesso.`}),y(),S.id}else if(n==="edit"&&e){const{document:S}=await g({base64:r,fileName:o.trim(),id:e,name:l.trim()});return await x({optionKey:"docs",optionToUpdate:{id:S.id,name:S.name,size:await Ne(S,{itemData:S.data})}}),ae({title:`Documento "${l.trim()}" atualizado com sucesso.`}),S.id}},handleOpenChange:async S=>{if(S&&n==="edit"&&e){const E=await p(e);E&&(a(E.data),i(E.fileName))}},handleUploadedDocument:(S,E)=>{a(S),i(E??""),c((E==null?void 0:E.split(/\.([^.]*)$/)[0])??"")},handleRemoveUploadedDocument:S=>{S.stopPropagation(),a(void 0),i("")},hasDocument:!!r&&!!o,nameHandler:{value:l,onChange:S=>c(S.target.value)},notReady:l.trim()===""||o.trim()===""||!r||r==="",title:n==="create"?"Adicionar documento":"Editar documento",clearAllState:y}};function DM({fileName:e,onRemoveUploaded:t}){return s.jsxs("span",{className:"flex w-full max-w-[500px] flex-wrap items-center justify-center gap-2 text-primary",children:[e,s.jsx(K,{variant:"actionDestructive",icon:s.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function kM({actionName:e,fileName:t,hasDocument:n,onRemoveUploaded:r,onSelectDocument:a,errorMessage:o}){return s.jsxs("div",{children:[s.jsx(hi,{className:Y(e==="inserir"&&!n&&"border-destructive zv-dark:border-destructive-foreground"),onSelect:a,dragHintText:s.jsx("p",{className:"text-base",children:"Solte o documento aqui..."}),hintText:s.jsx("p",{className:"break-all text-base leading-8",children:n?s.jsx(DM,{fileName:t,onRemoveUploaded:r}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:["Para ",e," o documento, clique aqui ou arraste o arquivo para esta área."]}),s.jsx("br",{})]})})}),o?typeof o=="string"?s.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:o}):o:""]})}function Jd({itemId:e,documentName:t="",mode:n="create",trigger:r,className:a,callBackFunction:o}){const{fileName:i,handleModalAction:l,handleOpenChange:c,handleUploadedDocument:d,handleRemoveUploadedDocument:u,hasDocument:m,nameHandler:f,notReady:p,title:g,clearAllState:x}=MM({itemId:e,documentName:t,mode:n});return s.jsx(ve,{className:a,onCancel:x,onAction:async()=>{const y=await l();o&&y&&o(y)},action:"Salvar",actionProps:{disabled:p,icon:s.jsx(Ct,{})},description:s.jsxs(s.Fragment,{children:[s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"documentName",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,disabled:!m,className:"bg-background text-base",id:"documentName",placeholder:"Nome do documento",ref:$n,...f,errorMessage:f.value.trim().length===0&&m?"Campo obrigatório":""})]})}),s.jsxs(fe,{className:"max-w-[562px] break-words max-md:w-screen",children:["Você pode editar o nome do documento depois de realizar o upload.",s.jsx("br",{}),"Essa alteração é apenas para exibição na ZapVoice, o nome do arquivo a ser enviado/baixado permanecerá o mesmo."]})]}),s.jsx(kM,{actionName:n==="create"?"inserir":"alterar",fileName:i,hasDocument:m,onRemoveUploaded:u,onSelectDocument:d,errorMessage:n==="create"&&!m&&"Campo obrigatório"})]}),onOpenChange:c,title:g,trigger:r,cancel:"Cancelar"})}const OM=function({document:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(Jd,{mode:"edit",itemId:e==null?void 0:e.id,documentName:e==null?void 0:e.name,trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),s.jsx(fe,{children:"Editar"})]})},ax=v.memo(OM,(e,t)=>e.document.id===t.document.id&&e.document.name===t.document.name);function ox({document:e}){const t=CM(new bn);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Documento "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}function TM({document:e,className:t,isSelected:n}){const r=jM(new bn);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-document/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-document",t),onClick:()=>{r(e.id)},actions:s.jsxs(s.Fragment,{children:[s.jsx(ax,{document:e}),s.jsx(ox,{document:e})]}),subtitle:"",title:e.name})}const FM=v.memo(TM,(e,t)=>e.document.id===t.document.id&&e.document.name===t.document.name&&e.document.isFavorite===t.document.isFavorite&&e.isSelected===t.isSelected);function Qd({size:e}){return s.jsx(Jd,{trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),children:"Adicionar"})})}function LM(){const e=new bn,t=SM(e),n=bM(e),{filterTerm:r,filteredDocumentList:a,selectedDocumentId:o}=Ke.useDashboardDocumentList(),{listRef:i}=Gr(a.length);return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),s.jsx(Qd,{})]}),a.length>0?s.jsx(_n,{className:"h-full",children:s.jsx(yn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"document-list",bgColor:"bg-item-document-light/70 zv-dark:bg-item-document-light/15",children:a.map((l,c)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-document",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-document",children:s.jsx(FM,{document:l,className:"w-full",isSelected:o===l.id},l.id)},l.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhum documento encontrado",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-document/70"})]})}function PM({document:e}){const t=xM(new bn,new vt,new Se),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"docs",optionIdToRemove:e.id})}).then(()=>{ae({title:`Documento "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o documento "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir o documento"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir documento"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function $M({document:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("a",{download:e==null?void 0:e.fileName,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:s.jsx(K,{icon:s.jsx(Wr,{size:24}),variant:"action",size:"action"})})}),s.jsx(fe,{children:"Baixar"})]})}function _M(){const[e]=ye("dashboard-document-help-video",de);return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center",children:[s.jsx("img",{src:"./document.svg",alt:"Imagem indicativa de que não há documentos cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione um documento para visualizar ou clique em "}),s.jsx(Qd,{size:"sm"}),s.jsx("span",{children:" para criar um novo documento."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})})]})}function RM(){const e=Ke.useGetDocumentList(),{dummyTrigger:t}=Ke.useGetSelectedDocument(),{selectedDocumentId:n}=Ke.useGetSelectedDocument(),r=Za(new bn),[a,o]=v.useState(null);return v.useEffect(()=>{const i=e.find(c=>c.id===n);o(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",fileName:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.fileName)??"":"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){try{const c=await r(n);if(!c)return;o(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",fileName:c.fileName??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}catch{}}l()},[n,t]),s.jsx("div",{className:Be("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!n&&"justify-center"),children:n?s.jsx(qr,{actions:a&&s.jsxs(s.Fragment,{children:[s.jsx(PM,{document:a}),s.jsx($M,{document:a}),s.jsx(ax,{document:a}),s.jsx(ox,{document:a})]}),body:a&&s.jsxs("div",{className:"h-full space-y-1 bg-background p-2 text-base",children:[s.jsx(_e,{variant:"outline",children:"Nome do arquivo: "}),s.jsx("p",{className:"break-words",children:a.fileName})]}),title:a==null?void 0:a.name}):s.jsx(_M,{})})}function VM(){const[e]=ye("dashboard-document-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[s.jsx("img",{src:"./document.svg",alt:"Imagem indicativa de que não há documentos cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhum documento cadastrado aqui."}),s.jsx("p",{children:"Que tal adicionar o seu primeiro documento?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(Qd,{})]})]})}function HM(){const e=Ke.useGetHasDocuments();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(LM,{}),s.jsx(RM,{})]})}):s.jsx(VM,{})]})}const BM={setType:()=>null,type:null},ix=v.createContext(BM),zM=({children:e})=>{const[t,n]=v.useState(null);return s.jsx(ix.Provider,{value:{type:t,setType:n},children:e})},lx=()=>v.useContext(ix);class ZM{constructor(t,n){this.repository=t,this.tracker=n}async execute({key:t,keyId:n,managerId:r,ownerId:a,shouldGetUsage:o}={key:null,keyId:null,managerId:null,ownerId:null,shouldGetUsage:!1}){try{const i=await this.repository.login({key:t,keyId:n,managerId:r,ownerId:a,shouldGetUsage:o});i.isLoggedIn?(i.userName&&ae({title:`Olá, ${i.userName}!`}),i.authError==="expiredKey"&&he({action:s.jsx(So,{secretKey:i.key??""}),title:i.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),i.authError==="restrictedKey"&&he({action:s.jsx(So,{secretKey:i.key??""}),title:i.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),i.authError==="inactiveKey"&&he({action:s.jsx(Ks,{}),title:i.authErrorMessage,description:"Ative sua chave no gerenciador de chaves ou entre em contato com nosso suporte."}),i.authError==="unknown"&&he({action:s.jsx(Ks,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),this.tracker.trackEvent("auth:login:end")):(i.authError==="userNotFound"&&he({className:"",custom:!0,action:s.jsx(Ks,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves se a chave está ativa ou entre em contato com nosso suporte."}),i.authError==="managerNotFound"&&he({action:s.jsx(Ks,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),this.tracker.trackException("exception:auth:not_logged_in",{exc_auth_error:i.authError??"",exc_auth_error_message:i.authErrorMessage??"",fatal:!1}))}catch(i){i instanceof Nb?(le({title:"Ops! Algo deu errado...",description:s.jsxs("div",{children:[s.jsx("div",{children:"Estamos com problemas... Tente novamente em alguns minutos."}),s.jsx("div",{children:"Se o error persistir, entre em contato com o nosso suporte."})]})}),this.tracker.trackException("exception:auth",{exc_message:`fetch_failed|${i.message}`,fatal:!0})):i instanceof Error?(le({title:i.toString()}),this.tracker.trackException("exception:auth",{exc_message:i.message,fatal:!0})):(le({title:JSON.stringify(i)}),this.tracker.trackException("exception:auth",{exc_message:JSON.stringify(i),fatal:!0}))}}}function qM(e,t){const n=new ZM(e,t);return n.execute.bind(n)}class WM{constructor(t){this.repository=t}async execute(){await this.repository.logout()}}function cx(e){const t=new WM(e);return t.execute.bind(t)}class UM{constructor(t,n,r){this.mediaRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteMedia: Id must be provided");await di(this.funnelRepository)({itemId:t}),await ui(this.flowRepository)({itemId:t}),await this.mediaRepository.deleteMedia(t)}}function GM(e,t,n){const r=new UM(e,t,n);return r.execute.bind(r)}class KM{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("GetMediaData: Id must be provided");const n=await this.repository.getMediaDataById(t);return n||(console.warn("GetMediaData: Media not found"),console.warn(`Media Id: ${t}`),null)}}function qa(e){return v.useMemo(()=>{const t=new KM(e);return t.execute.bind(t)},[e])}class YM{constructor(t){this.repository=t}async execute(t){await this.repository.reorderMediaList(t)}}function XM(e){const t=new YM(e);return t.execute.bind(t)}class JM{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectMedia: Id must be provided");await this.repository.selectMedia(t)}}function QM(e){const t=new JM(e);return t.execute.bind(t)}class eD{constructor(t){this.repository=t}async execute(t){await this.repository.setMediaFilter(t)}}function tD(e){return v.useMemo(()=>{const t=new eD(e);return t.execute.bind(t)},[e])}class nD{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleMediaIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleMediaIsFavorite: Media not found");const r=D1.create({data:n.data,isFavorite:!n.isFavorite,caption:n.caption,name:n.name,asViewOnce:n.asViewOnce},n.idEntity);await this.repository.saveMedia(r)}}function rD(e){const t=new nD(e);return t.execute.bind(t)}class sD{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,caption:a,name:o,asViewOnce:i,isPtv:l}){if(!t)throw new Error("UpdateMediaData: Id must be provided");const c=await this.repository.findById(t);if(!c)throw new Error("UpdateMediaData: Media not found");const d=D1.create({data:n??c.data,isFavorite:r??c.isFavorite,caption:a??c.caption,name:o??c.name,asViewOnce:i??c.asViewOnce,isPtv:l??c.isPtv},c.idEntity);return await this.repository.saveMedia(d),{media:d}}}function aD(e){const t=new sD(e);return t.execute.bind(t)}class oD{constructor(t,n,r){this.messageRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteTextMessage: Id must be provided");await di(this.funnelRepository)({itemId:t}),await ui(this.flowRepository)({itemId:t}),await this.messageRepository.deleteTextMessage(t)}}function iD(e,t,n){const r=new oD(e,t,n);return r.execute.bind(r)}class lD{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("GetTextMessageData: Id must be provided");const n=await this.repository.getTextMessageDataById(t);return n||(console.warn("GetTextMessageData: TextMessage not found"),null)}}function Wa(e){return v.useMemo(()=>{const t=new lD(e);return t.execute.bind(t)},[e])}class dx{constructor(t){this.repository=t}async execute(t){await this.repository.reorderTextMessageList(t)}}function cD(e){const t=new dx(e);return t.execute.bind(t)}class dD{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectTextMessage: Id must be provided");await this.repository.selectTextMessage(t)}}function uD(e){const t=new dD(e);return t.execute.bind(t)}class mD{constructor(t){this.repository=t}async execute(t){await this.repository.setTextMessageFilter(t)}}function fD(e){return v.useMemo(()=>{const t=new mD(e);return t.execute.bind(t)},[e])}class pD{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTextMessageIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTextMessageIsFavorite: TextMessage not found");const r=k1.create({data:n.data,isFavorite:!n.isFavorite,name:n.name},n.idEntity);await this.repository.saveTextMessage(r)}}function hD(e){const t=new pD(e);return t.execute.bind(t)}class gD{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,name:a}){if(!t)throw new Error("UpdateTextMessageData: Id must be provided");const o=await this.repository.findById(t);if(!o)throw new Error("UpdateTextMessageData: TextMessage not found");const i=k1.create({data:n??o.data,isFavorite:r??o.isFavorite,name:a??o.name},o.idEntity);return await this.repository.saveTextMessage(i),{textMessage:i}}}function xD(e){const t=new gD(e);return t.execute.bind(t)}var gr=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54","(..) ........",0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) ........."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["Côte d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251"],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63",".... ......."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["Réunion","re","262"],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],vD="react-international-phone-",ux=(...e)=>e.filter(t=>!!t).join(" ").trim(),yD=(...e)=>ux(...e).split(" ").map(t=>`${vD}${t}`).join(" "),lt=({addPrefix:e,rawClassNames:t})=>ux(yD(...e),...t),bD=({value:e,mask:t,maskSymbol:n,offset:r=0,trimNonMaskCharsLeftover:a=!1})=>{if(e.length<r)return e;let o=e.slice(0,r),i=e.slice(r),l=o,c=0;for(let d of t.split("")){if(c>=i.length){if(!a&&d!==n){l+=d;continue}break}d===n?(l+=i[c],c+=1):l+=d}return l},es=e=>e?/^\d+$/.test(e):!1,Zi=e=>e.replace(/\D/g,""),wD=(e,t)=>{let n=e.style.display;n!=="block"&&(e.style.display="block");let r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=a.top-r.top,i=r.bottom-a.bottom;o>=0&&i>=0||(Math.abs(o)<Math.abs(i)?e.scrollTop+=o:e.scrollTop-=i),e.style.display=n},jD=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh"),ND=(e,t)=>{let n=t.disableDialCodeAndPrefix?!1:t.forceDialCode,r=t.disableDialCodeAndPrefix?!1:t.insertDialCodeOnEmpty,a=e,o=d=>t.trimNonDigitsEnd?d.trim():d;if(!a)return r&&!a.length||n?o(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`):o(a);if(a=Zi(a),a===t.dialCode&&!t.disableDialCodeAndPrefix)return o(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(t.dialCode.startsWith(a)&&!t.disableDialCodeAndPrefix)return o(n?`${t.prefix}${t.dialCode}${t.charAfterDialCode}`:`${t.prefix}${a}`);if(!a.startsWith(t.dialCode)&&!t.disableDialCodeAndPrefix){if(n)return o(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(a.length<t.dialCode.length)return o(`${t.prefix}${a}`)}let i=()=>{let d=t.dialCode.length,u=a.slice(0,d),m=a.slice(d);return{phoneLeftSide:u,phoneRightSide:m}},{phoneLeftSide:l,phoneRightSide:c}=i();return l=`${t.prefix}${l}${t.charAfterDialCode}`,c=bD({value:c,mask:t.mask,maskSymbol:t.maskChar,trimNonMaskCharsLeftover:t.trimNonDigitsEnd||t.disableDialCodeAndPrefix&&c.length===0}),t.disableDialCodeAndPrefix&&(l=""),o(`${l}${c}`)},SD=({phoneBeforeInput:e,phoneAfterInput:t,phoneAfterFormatted:n,cursorPositionAfterInput:r,leftOffset:a=0,deletion:o})=>{if(r<a)return a;if(!e)return n.length;let i=null;for(let u=r-1;u>=0;u-=1)if(es(t[u])){i=u;break}if(i===null){for(let u=0;u<t.length;u+=1)if(es(n[u]))return u;return t.length}let l=0;for(let u=0;u<i;u+=1)es(t[u])&&(l+=1);let c=0,d=0;for(let u=0;u<n.length&&(c+=1,es(n[u])&&(d+=1),!(d>=l+1));u+=1);if(o!=="backward")for(;!es(n[c])&&c<n.length;)c+=1;return c},yo=({phone:e,prefix:t})=>e?`${t}${Zi(e)}`:"";function Nc({value:e,country:t,insertDialCodeOnEmpty:n,trimNonDigitsEnd:r,countries:a,prefix:o,charAfterDialCode:i,forceDialCode:l,disableDialCodeAndPrefix:c,defaultMask:d,countryGuessingEnabled:u,disableFormatting:m}){let f=e;c&&(f=f.startsWith(`${o}`)?f:`${o}${t.dialCode}${f}`);let p=u?TD({phone:f,countries:a,currentCountryIso2:t==null?void 0:t.iso2}):void 0,g=(p==null?void 0:p.country)??t,x=ND(f,{prefix:o,mask:kD({phone:f,country:g,defaultMask:d,disableFormatting:m}),maskChar:mx,dialCode:g.dialCode,trimNonDigitsEnd:r,charAfterDialCode:i,forceDialCode:l,insertDialCodeOnEmpty:n,disableDialCodeAndPrefix:c}),y=u&&!(p!=null&&p.fullDialCodeMatch)?t:g;return{phone:yo({phone:c?`${y.dialCode}${x}`:x,prefix:o}),inputValue:x,country:y}}var ED=e=>{if((e==null?void 0:e.toLocaleLowerCase().includes("delete"))??!1)return e!=null&&e.toLocaleLowerCase().includes("forward")?"forward":"backward"},CD=(e,{country:t,insertDialCodeOnEmpty:n,phoneBeforeInput:r,prefix:a,charAfterDialCode:o,forceDialCode:i,disableDialCodeAndPrefix:l,countryGuessingEnabled:c,defaultMask:d,disableFormatting:u,countries:m})=>{let f=e.nativeEvent,p=f.inputType,g=ED(p),x=!!(p!=null&&p.startsWith("insertFrom")),y=p==="insertText",b=(f==null?void 0:f.data)||void 0,w=e.target.value,j=e.target.selectionStart??0;if(p!=null&&p.includes("history"))return{inputValue:r,phone:yo({phone:r,prefix:a}),cursorPosition:r.length,country:t};if(y&&!es(b)&&w!==a)return{inputValue:r,phone:yo({phone:l?`${t.dialCode}${r}`:r,prefix:a}),cursorPosition:j-((b==null?void 0:b.length)??0),country:t};if(i&&!w.startsWith(`${a}${t.dialCode}`)&&!x){let A=w?r:`${a}${t.dialCode}${o}`;return{inputValue:A,phone:yo({phone:A,prefix:a}),cursorPosition:a.length+t.dialCode.length+o.length,country:t}}let{phone:N,inputValue:I,country:S}=Nc({value:w,country:t,trimNonDigitsEnd:g==="backward",insertDialCodeOnEmpty:n,countryGuessingEnabled:c,countries:m,prefix:a,charAfterDialCode:o,forceDialCode:i,disableDialCodeAndPrefix:l,disableFormatting:u,defaultMask:d}),E=SD({cursorPositionAfterInput:j,phoneBeforeInput:r,phoneAfterInput:w,phoneAfterFormatted:I,leftOffset:i?a.length+t.dialCode.length+o.length:0,deletion:g});return{phone:N,inputValue:I,cursorPosition:E,country:S}},ID=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a of n)if(e[a]!==t[a])return!1;return!0},AD=()=>{let e=v.useRef(),t=v.useRef(Date.now());return{check:()=>{let n=Date.now(),r=e.current?n-t.current:void 0;return e.current=t.current,t.current=n,r}}},MD={size:20,overrideLastItemDebounceMS:-1};function DD(e,t){let{size:n,overrideLastItemDebounceMS:r,onChange:a}={...MD,...t},[o,i]=v.useState(e),[l,c]=v.useState([o]),[d,u]=v.useState(0),m=AD();return[o,(f,p)=>{if(typeof f=="object"&&typeof o=="object"&&ID(f,o)||f===o)return;let g=r>0,x=m.check(),y=g&&x!==void 0?x>r:!0;if((p==null?void 0:p.overrideLastItem)!==void 0?p.overrideLastItem:!y)c(b=>[...b.slice(0,d),f]);else{let b=l.length>=n;c(w=>[...w.slice(b?1:0,d+1),f]),b||u(w=>w+1)}i(f),a==null||a(f)},()=>{if(d<=0)return{success:!1};let f=l[d-1];return i(f),u(p=>p-1),a==null||a(f),{success:!0,value:f}},()=>{if(d+1>=l.length)return{success:!1};let f=l[d+1];return i(f),u(p=>p+1),a==null||a(f),{success:!0,value:f}}]}var mx=".",Bt={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:gr,preferredCountries:[]},qi=({defaultCountry:e=Bt.defaultCountry,value:t=Bt.value,countries:n=Bt.countries,prefix:r=Bt.prefix,defaultMask:a=Bt.defaultMask,charAfterDialCode:o=Bt.charAfterDialCode,historySaveDebounceMS:i=Bt.historySaveDebounceMS,disableCountryGuess:l=Bt.disableCountryGuess,disableDialCodePrefill:c=Bt.disableDialCodePrefill,forceDialCode:d=Bt.forceDialCode,disableDialCodeAndPrefix:u=Bt.disableDialCodeAndPrefix,disableFormatting:m=Bt.disableFormatting,onChange:f,inputRef:p})=>{let g={countries:n,prefix:r,charAfterDialCode:o,forceDialCode:u?!1:d,disableDialCodeAndPrefix:u,defaultMask:a,countryGuessingEnabled:!l,disableFormatting:m},x=v.useRef(null),y=p||x,b=C=>{Promise.resolve().then(()=>{var D;typeof window>"u"||y.current!==(document==null?void 0:document.activeElement)||((D=y.current)==null||D.setSelectionRange(C,C))})},[{phone:w,inputValue:j,country:N},I,S,E]=DD(()=>{let C=ns({value:e,field:"iso2",countries:n});C||console.error(`[react-international-phone]: can not find a country with "${e}" iso2 code`);let D=C||ns({value:"us",field:"iso2",countries:n}),{phone:k,inputValue:L,country:F}=Nc({value:t,country:D,insertDialCodeOnEmpty:!c,...g});return b(L.length),{phone:k,inputValue:L,country:F.iso2}},{overrideLastItemDebounceMS:i,onChange:({inputValue:C,phone:D,country:k})=>{if(!f)return;let L=A(k);f({phone:D,inputValue:C,country:L})}}),A=v.useCallback(C=>ns({value:C,field:"iso2",countries:n}),[n]),O=v.useMemo(()=>A(N),[N,A]);v.useEffect(()=>{let C=y.current;if(!C)return;let D=k=>{if(!k.key)return;let L=k.ctrlKey,F=k.metaKey,_=k.shiftKey;if(k.key.toLowerCase()==="z"){if(jD()){if(!F)return}else if(!L)return;_?E():S()}};return C.addEventListener("keydown",D),()=>{C.removeEventListener("keydown",D)}},[y,S,E]);let M=C=>{C.preventDefault();let{phone:D,inputValue:k,country:L,cursorPosition:F}=CD(C,{country:O,phoneBeforeInput:j,insertDialCodeOnEmpty:!1,...g});return I({inputValue:k,phone:D,country:L.iso2}),b(F),t},T=(C,D={focusOnInput:!1})=>{let k=ns({value:C,field:"iso2",countries:n});if(!k){console.error(`[react-international-phone]: can not find a country with "${C}" iso2 code`);return}let L=u?"":`${r}${k.dialCode}${o}`;I({inputValue:L,phone:`${r}${k.dialCode}`,country:k.iso2}),D.focusOnInput&&Promise.resolve().then(()=>{var F;(F=y.current)==null||F.focus()})},[$,P]=v.useState(!1);return v.useEffect(()=>{if(!$){P(!0),t!==w&&(f==null||f({inputValue:j,phone:w,country:O}));return}if(t===w)return;let{phone:C,inputValue:D,country:k}=Nc({value:t,country:O,insertDialCodeOnEmpty:!c,...g});I({phone:C,inputValue:D,country:k.iso2})},[t]),{phone:w,inputValue:j,country:O,setCountry:T,handlePhoneValueChange:M,inputRef:y}},kD=({phone:e,country:t,defaultMask:n="............",disableFormatting:r=!1})=>{let a=t.format,o=l=>r?l.replace(new RegExp(`[^${mx}]`,"g"),""):l;if(!a)return o(n);if(typeof a=="string")return o(a);if(!a.default)return console.error(`[react-international-phone]: default mask for ${t.iso2} is not provided`),o(n);let i=Object.keys(a).find(l=>{if(l==="default")return!1;if(!(l.charAt(0)==="/"&&l.charAt(l.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${l}" for ${t.iso2} is not valid`),!1;let c=new RegExp(l.substring(1,l.length-1)),d=e.replace(t.dialCode,"");return c.test(Zi(d))});return o(i?a[i]:a.default)},Mt=e=>{let[t,n,r,a,o,i]=e;return{name:t,iso2:n,dialCode:r,format:a,priority:o,areaCodes:i}},OD=e=>`Field "${e}" is not supported`,ns=({field:e,value:t,countries:n=gr})=>{if(["priority"].includes(e))throw new Error(OD(e));let r=n.find(a=>{let o=Mt(a);return t===o[e]});if(r)return Mt(r)},TD=({phone:e,countries:t=gr,currentCountryIso2:n})=>{var l;let r={country:void 0,fullDialCodeMatch:!1};if(!e)return r;let a=Zi(e);if(!a)return r;let o=r,i=({country:c,fullDialCodeMatch:d})=>{var f,p;let u=c.dialCode===((f=o.country)==null?void 0:f.dialCode),m=(c.priority??0)<(((p=o.country)==null?void 0:p.priority)??0);(!u||m)&&(o={country:c,fullDialCodeMatch:d})};for(let c of t){let d=Mt(c),{dialCode:u,areaCodes:m}=d;if(a.startsWith(u)){let f=o.country?Number(u)>=Number(o.country.dialCode):!0;if(m){let p=a.substring(u.length);for(let g of m)if(p.startsWith(g))return{country:d,fullDialCodeMatch:!0}}(f||u===a||!o.fullDialCodeMatch)&&i({country:d,fullDialCodeMatch:!0})}o.fullDialCodeMatch||a.length<u.length&&u.startsWith(a)&&(!o.country||Number(u)<=Number(o.country.dialCode))&&i({country:d,fullDialCodeMatch:!1})}if(n){let c=ns({value:n,field:"iso2",countries:t});if(!c)return o;let d=c?(u=>{if(!(u!=null&&u.areaCodes))return!1;let m=a.substring(u.dialCode.length);return u.areaCodes.some(f=>f.startsWith(m))})(c):!1;o&&((l=o.country)==null?void 0:l.dialCode)===c.dialCode&&o.country!==c&&o.fullDialCodeMatch&&(!c.areaCodes||d)&&(o={country:c,fullDialCodeMatch:!0})}return o},FD=(e,t)=>{let n=parseInt(e,16);return Number(n+t).toString(16)},LD="abcdefghijklmnopqrstuvwxyz",PD="1f1e6",jf=LD.split("").reduce((e,t,n)=>({...e,[t]:FD(PD,n)}),{}),$D=e=>[jf[e[0]],jf[e[1]]].join("-"),hs=({iso2:e,size:t,src:n,protocol:r="https",disableLazyLoading:a,className:o,style:i,...l})=>{if(!e)return h.createElement("img",{className:lt({addPrefix:["flag-emoji"],rawClassNames:[o]}),width:t,height:t,...l});let c=()=>{if(n)return n;let d=$D(e);return`${r}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${d}.svg`};return h.createElement("img",{className:lt({addPrefix:["flag-emoji"],rawClassNames:[o]}),src:c(),width:t,height:t,draggable:!1,"data-country":e,loading:a?void 0:"lazy",style:{width:t,height:t,...i},alt:"",...l})},_D=1e3,RD=({show:e,dialCodePrefix:t="+",selectedCountry:n,countries:r=gr,preferredCountries:a=[],flags:o,onSelect:i,onClose:l,...c})=>{let d=v.useRef(null),u=v.useRef(),m=v.useMemo(()=>{if(!a||!a.length)return r;let S=[],E=[...r];for(let A of a){let O=E.findIndex(M=>Mt(M).iso2===A);if(O!==-1){let M=E.splice(O,1)[0];S.push(M)}}return S.concat(E)},[r,a]),f=v.useRef({updatedAt:void 0,value:""}),p=S=>{let E=f.current.updatedAt&&new Date().getTime()-f.current.updatedAt.getTime()>_D;f.current={value:E?S:`${f.current.value}${S}`,updatedAt:new Date};let A=m.findIndex(O=>Mt(O).name.toLowerCase().startsWith(f.current.value));A!==-1&&y(A)},g=v.useCallback(S=>m.findIndex(E=>Mt(E).iso2===S),[m]),[x,y]=v.useState(g(n)),b=()=>{u.current!==n&&y(g(n))},w=v.useCallback(S=>{y(g(S.iso2)),i==null||i(S)},[i,g]),j=S=>{let E=m.length-1,A=O=>S==="prev"?O-1:S==="next"?O+1:S==="last"?E:0;y(O=>{let M=A(O);return M<0?0:M>E?E:M})},N=S=>{if(S.stopPropagation(),S.key==="Enter"){S.preventDefault();let E=Mt(m[x]);w(E);return}if(S.key==="Escape"){l==null||l();return}if(S.key==="ArrowUp"){S.preventDefault(),j("prev");return}if(S.key==="ArrowDown"){S.preventDefault(),j("next");return}if(S.key==="PageUp"){S.preventDefault(),j("first");return}if(S.key==="PageDown"){S.preventDefault(),j("last");return}S.key===" "&&S.preventDefault(),S.key.length===1&&!S.altKey&&!S.ctrlKey&&!S.metaKey&&p(S.key.toLocaleLowerCase())},I=v.useCallback(()=>{if(!d.current||x===void 0)return;let S=Mt(m[x]).iso2;if(S===u.current)return;let E=d.current.querySelector(`[data-country="${S}"]`);E&&(wD(d.current,E),u.current=S)},[x,m]);return v.useEffect(()=>{I()},[x,I]),v.useEffect(()=>{d.current&&(e?d.current.focus():b())},[e]),v.useEffect(()=>{b()},[n]),h.createElement("ul",{ref:d,role:"listbox",className:lt({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{display:e?"block":"none",...c.style},onKeyDown:N,onBlur:l,tabIndex:-1,"aria-activedescendant":`react-international-phone__${Mt(m[x]).iso2}-option`},m.map((S,E)=>{let A=Mt(S),O=A.iso2===n,M=E===x,T=a.includes(A.iso2),$=E===a.length-1,P=o==null?void 0:o.find(C=>C.iso2===A.iso2);return h.createElement(h.Fragment,{key:A.iso2},h.createElement("li",{"data-country":A.iso2,role:"option","aria-selected":O,"aria-label":`${A.name} ${t}${A.dialCode}`,id:`react-international-phone__${A.iso2}-option`,className:lt({addPrefix:["country-selector-dropdown__list-item",T&&"country-selector-dropdown__list-item--preferred",O&&"country-selector-dropdown__list-item--selected",M&&"country-selector-dropdown__list-item--focused"],rawClassNames:[c.listItemClassName]}),onClick:()=>w(A),style:c.listItemStyle,title:A.name},h.createElement(hs,{iso2:A.iso2,src:P==null?void 0:P.src,className:lt({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),h.createElement("span",{className:lt({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},A.name),h.createElement("span",{className:lt({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},t,A.dialCode)),$?h.createElement("hr",{className:lt({addPrefix:["country-selector-dropdown__preferred-list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}):null)}))},VD=({selectedCountry:e,onSelect:t,disabled:n,hideDropdown:r,countries:a=gr,preferredCountries:o=[],flags:i,renderButtonWrapper:l,...c})=>{let[d,u]=v.useState(!1),m=v.useMemo(()=>{if(e)return ns({value:e,field:"iso2",countries:a})},[a,e]),f=v.useRef(null),p=x=>{x.key&&["ArrowUp","ArrowDown"].includes(x.key)&&(x.preventDefault(),u(!0))},g=()=>{var b;let x={title:m==null?void 0:m.name,onClick:()=>u(w=>!w),onMouseDown:w=>w.preventDefault(),onKeyDown:p,disabled:r||n,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":d},y=h.createElement("div",{className:lt({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},h.createElement(hs,{iso2:e,src:(b=i==null?void 0:i.find(w=>w.iso2===e))==null?void 0:b.src,className:lt({addPrefix:["country-selector-button__flag-emoji",n&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:e?"visible":"hidden",...c.flagStyle}}),!r&&h.createElement("div",{className:lt({addPrefix:["country-selector-button__dropdown-arrow",n&&"country-selector-button__dropdown-arrow--disabled",d&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return l?l({children:y,rootProps:x}):h.createElement("button",{...x,type:"button",className:lt({addPrefix:["country-selector-button",d&&"country-selector-button--active",n&&"country-selector-button--disabled",r&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":e,style:c.buttonStyle},y)};return h.createElement("div",{className:lt({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:f},g(),h.createElement(RD,{show:d,countries:a,preferredCountries:o,flags:i,onSelect:x=>{u(!1),t==null||t(x)},selectedCountry:e,onClose:()=>{u(!1)},...c.dropdownStyleProps}))},HD=({dialCode:e,prefix:t,disabled:n,style:r,className:a})=>h.createElement("div",{className:lt({addPrefix:["dial-code-preview",n&&"dial-code-preview--disabled"],rawClassNames:[a]}),style:r},`${t}${e}`);v.forwardRef(({value:e,onChange:t,countries:n=gr,preferredCountries:r=[],hideDropdown:a,showDisabledDialCodeAndPrefix:o,disableFocusAfterCountrySelect:i,flags:l,style:c,className:d,inputStyle:u,inputClassName:m,countrySelectorStyleProps:f,dialCodePreviewStyleProps:p,inputProps:g,placeholder:x,disabled:y,name:b,onFocus:w,onBlur:j,required:N,autoFocus:I,...S},E)=>{let{phone:A,inputValue:O,inputRef:M,country:T,setCountry:$,handlePhoneValueChange:P}=qi({value:e,countries:n,...S,onChange:D=>{t==null||t(D.phone,{country:D.country,inputValue:D.inputValue})}}),C=S.disableDialCodeAndPrefix&&o&&(T==null?void 0:T.dialCode);return v.useImperativeHandle(E,()=>M.current?Object.assign(M.current,{setCountry:$,state:{phone:A,inputValue:O,country:T}}):null,[M,$,A,O,T]),h.createElement("div",{ref:E,className:lt({addPrefix:["input-container"],rawClassNames:[d]}),style:c},h.createElement(VD,{onSelect:D=>$(D.iso2,{focusOnInput:!i}),flags:l,selectedCountry:T.iso2,countries:n,preferredCountries:r,disabled:y,hideDropdown:a,...f}),C&&h.createElement(HD,{dialCode:T.dialCode,prefix:S.prefix??"+",disabled:y,...p}),h.createElement("input",{onChange:P,value:O,type:"tel",ref:M,className:lt({addPrefix:["input",y&&"input--disabled"],rawClassNames:[m]}),placeholder:x,disabled:y,style:u,name:b,onFocus:w,onBlur:j,autoFocus:I,required:N,...g}))});class Wi{constructor(){pe(this,"authStore",ct)}async getAuthData(){return this.authStore.getAuthData()}async getAuthError(){return this.authStore.authError}async getAuthErrorMessage(){return this.authStore.authErrorMessage}async getIsPremium(){return this.authStore.isPremium}async login(...t){return await this.authStore.login(...t)}async logout(...t){return await this.authStore.logout(...t)}async refreshPremium(...t){return await this.authStore.refreshPremium(...t)}async setPhoneNumber(...t){const[n]=t,r=await this.authStore.getAuthData(),a=de.flags["usage-limit"];await this.authStore.setPhoneNumber(n),await this.login({key:r.key,keyId:r.keyId,managerId:r.managerId,ownerId:r.ownerId,shouldGetUsage:a})}async setWppVersion(...t){await this.authStore.setWppVersion(...t)}async setUserProfilePic(...t){await this.authStore.setUserProfilePic(...t)}}const fx=v.createContext({openModalState:!1,handleCloseModal:()=>null,handleOpenModal:()=>null,checkPermission:async()=>({checked:{create_flow:!1,label:!1},authError:null}),triedFunctionality:void 0,setTriedFunctionality:()=>null}),BD=({children:e})=>{const[t,n]=v.useState(!1),[r,a]=v.useState(),o=v.useCallback(()=>{n(!0)},[]);function i(){n(!1)}const l=v.useCallback(async(c,d=!0)=>{const{permissions:u,authError:m}=await ct.getAuthData(),f={};for(const p of c)f[p]=void 0;if(m){const p=by(new Wi),g=de.flags["usage-limit"],x=await p(g),y=x.authError;if(!!x.authError){if(!d)return{checked:f,authError:y};const w=x.key;return y==="inactiveKey"?le({action:s.jsx(Ks,{}),style:{width:"600px",left:"-250px"},title:"Sua chave está inativa, por isso você não pode fazer isso "}):y==="unathorizedNumber"?le({style:{width:"600px",left:"-300px"},title:"Sua chave está atrelada a outro número de telefone, por isso você não pode fazer isso"}):y==="restrictedKey"?le({action:s.jsx(So,{secretKey:w??""}),style:{width:"600px",left:"-250px"},title:"Sua chave está bloqueada, por isso você não pode fazer isso "}):y==="expiredKey"?le({action:s.jsx(So,{secretKey:w??""}),style:{width:"600px",left:"-250px"},title:"Sua chave está expirada, por isso você não pode fazer isso "}):le({action:s.jsx(wy,{}),style:{width:"600px",left:"-250px"},title:"Sua chave está com algum problema, por isso você não pode fazer isso "}),{checked:f,authError:y}}for(const w of c)f[w]=x.permissions.includes(w);return c.length===0&&!f[c[0]]&&o(),{checked:f,authError:y}}for(const p of c)f[p]=u.includes(p);return{checked:f,authError:m}},[o]);return s.jsx(fx.Provider,{value:{openModalState:t,handleCloseModal:i,handleOpenModal:o,checkPermission:l,setTriedFunctionality:a,triedFunctionality:r},children:e})};function px(){return v.useContext(fx)}var zD=[" ","Enter","ArrowUp","ArrowDown"],ZD=[" ","Enter"],Ua="Select",[Ui,Gi,qD]=jy(Ua),[ks,WU]=Ny(Ua,[qD,f1]),Ki=f1(),[WD,xr]=ks(Ua),[UD,GD]=ks(Ua),hx=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:p,form:g}=e,x=Ki(t),[y,b]=v.useState(null),[w,j]=v.useState(null),[N,I]=v.useState(!1),S=Py(d),[E=!1,A]=zu({prop:r,defaultProp:a,onChange:o}),[O,M]=zu({prop:i,defaultProp:l,onChange:c}),T=v.useRef(null),$=y?g||!!y.closest("form"):!0,[P,C]=v.useState(new Set),D=Array.from(P).map(k=>k.props.value).join(";");return s.jsx($y,{...x,children:s.jsxs(WD,{required:p,scope:t,trigger:y,onTriggerChange:b,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:I,contentId:td(),value:O,onValueChange:M,open:E,onOpenChange:A,dir:S,triggerPointerDownPosRef:T,disabled:f,children:[s.jsx(Ui.Provider,{scope:t,children:s.jsx(UD,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(k=>{C(L=>new Set(L).add(k))},[]),onNativeOptionRemove:v.useCallback(k=>{C(L=>{const F=new Set(L);return F.delete(k),F})},[]),children:n})}),$?s.jsxs(Vx,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:O,onChange:k=>M(k.target.value),disabled:f,form:g,children:[O===void 0?s.jsx("option",{value:""}):null,Array.from(P)]},D):null]})})};hx.displayName=Ua;var gx="SelectTrigger",xx=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,o=Ki(n),i=xr(gx,n),l=i.disabled||r,c=gn(t,i.onTriggerChange),d=Gi(n),u=v.useRef("touch"),[m,f,p]=Hx(x=>{const y=d().filter(j=>!j.disabled),b=y.find(j=>j.value===i.value),w=Bx(y,x,b);w!==void 0&&i.onValueChange(w.value)}),g=x=>{l||(i.onOpenChange(!0),p()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(Sy,{asChild:!0,...o,children:s.jsx(Gt.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Rx(i.value)?"":void 0,...a,ref:c,onClick:et(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:et(a.onPointerDown,x=>{u.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:et(a.onKeyDown,x=>{const y=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(y&&x.key===" ")&&zD.includes(x.key)&&(g(),x.preventDefault())})})})});xx.displayName=gx;var vx="SelectValue",yx=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:i="",...l}=e,c=xr(vx,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=gn(t,c.onValueNodeChange);return sr(()=>{d(u)},[d,u]),s.jsx(Gt.span,{...l,ref:m,style:{pointerEvents:"none"},children:Rx(c.value)?s.jsx(s.Fragment,{children:i}):o})});yx.displayName=vx;var KD="SelectIcon",bx=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(Gt.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});bx.displayName=KD;var YD="SelectPortal",wx=e=>s.jsx(Ly,{asChild:!0,...e});wx.displayName=YD;var Vr="SelectContent",jx=v.forwardRef((e,t)=>{const n=xr(Vr,e.__scopeSelect),[r,a]=v.useState();if(sr(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?Dt.createPortal(s.jsx(Nx,{scope:e.__scopeSelect,children:s.jsx(Ui.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(Sx,{...e,ref:t})});jx.displayName=Vr;var Jt=10,[Nx,vr]=ks(Vr),XD="SelectContentImpl",Sx=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:y,...b}=e,w=xr(Vr,n),[j,N]=v.useState(null),[I,S]=v.useState(null),E=gn(t,Z=>N(Z)),[A,O]=v.useState(null),[M,T]=v.useState(null),$=Gi(n),[P,C]=v.useState(!1),D=v.useRef(!1);v.useEffect(()=>{if(j)return Ey(j)},[j]),Cy();const k=v.useCallback(Z=>{const[U,...ee]=$().map(G=>G.ref.current),[X]=ee.slice(-1),te=document.activeElement;for(const G of Z)if(G===te||(G==null||G.scrollIntoView({block:"nearest"}),G===U&&I&&(I.scrollTop=0),G===X&&I&&(I.scrollTop=I.scrollHeight),G==null||G.focus(),document.activeElement!==te))return},[$,I]),L=v.useCallback(()=>k([A,j]),[k,A,j]);v.useEffect(()=>{P&&L()},[P,L]);const{onOpenChange:F,triggerPointerDownPosRef:_}=w;v.useEffect(()=>{if(j){let Z={x:0,y:0};const U=X=>{var te,G;Z={x:Math.abs(Math.round(X.pageX)-(((te=_.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(X.pageY)-(((G=_.current)==null?void 0:G.y)??0))}},ee=X=>{Z.x<=10&&Z.y<=10?X.preventDefault():j.contains(X.target)||F(!1),document.removeEventListener("pointermove",U),_.current=null};return _.current!==null&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",ee,{capture:!0})}}},[j,F,_]),v.useEffect(()=>{const Z=()=>F(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[F]);const[H,q]=Hx(Z=>{const U=$().filter(te=>!te.disabled),ee=U.find(te=>te.ref.current===document.activeElement),X=Bx(U,Z,ee);X&&setTimeout(()=>X.ref.current.focus())}),z=v.useCallback((Z,U,ee)=>{const X=!D.current&&!ee;(w.value!==void 0&&w.value===U||X)&&(O(Z),X&&(D.current=!0))},[w.value]),V=v.useCallback(()=>j==null?void 0:j.focus(),[j]),R=v.useCallback((Z,U,ee)=>{const X=!D.current&&!ee;(w.value!==void 0&&w.value===U||X)&&T(Z)},[w.value]),B=r==="popper"?Sc:Ex,W=B===Sc?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:y}:{};return s.jsx(Nx,{scope:n,content:j,viewport:I,onViewportChange:S,itemRefCallback:z,selectedItem:A,onItemLeave:V,itemTextRefCallback:R,focusSelectedItem:L,selectedItemText:M,position:r,isPositioned:P,searchRef:H,children:s.jsx(Iy,{as:q6,allowPinchZoom:!0,children:s.jsx(Ay,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:et(a,Z=>{var U;(U=w.trigger)==null||U.focus({preventScroll:!0}),Z.preventDefault()}),children:s.jsx(My,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:s.jsx(B,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),...b,...W,onPlaced:()=>C(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:et(b.onKeyDown,Z=>{const U=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!U&&Z.key.length===1&&q(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let X=$().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const te=Z.target,G=X.indexOf(te);X=X.slice(G+1)}setTimeout(()=>k(X)),Z.preventDefault()}})})})})})})});Sx.displayName=XD;var JD="SelectItemAlignedPosition",Ex=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,o=xr(Vr,n),i=vr(Vr,n),[l,c]=v.useState(null),[d,u]=v.useState(null),m=gn(t,E=>u(E)),f=Gi(n),p=v.useRef(!1),g=v.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:b,focusSelectedItem:w}=i,j=v.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&x&&y&&b){const E=o.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),M=b.getBoundingClientRect();if(o.dir!=="rtl"){const te=M.left-A.left,G=O.left-te,ne=E.left-G,ge=E.width+ne,Ve=Math.max(ge,A.width),He=window.innerWidth-Jt,ot=Bu(G,[Jt,Math.max(Jt,He-Ve)]);l.style.minWidth=ge+"px",l.style.left=ot+"px"}else{const te=A.right-M.right,G=window.innerWidth-O.right-te,ne=window.innerWidth-E.right-G,ge=E.width+ne,Ve=Math.max(ge,A.width),He=window.innerWidth-Jt,ot=Bu(G,[Jt,Math.max(Jt,He-Ve)]);l.style.minWidth=ge+"px",l.style.right=ot+"px"}const T=f(),$=window.innerHeight-Jt*2,P=x.scrollHeight,C=window.getComputedStyle(d),D=parseInt(C.borderTopWidth,10),k=parseInt(C.paddingTop,10),L=parseInt(C.borderBottomWidth,10),F=parseInt(C.paddingBottom,10),_=D+k+P+F+L,H=Math.min(y.offsetHeight*5,_),q=window.getComputedStyle(x),z=parseInt(q.paddingTop,10),V=parseInt(q.paddingBottom,10),R=E.top+E.height/2-Jt,B=$-R,W=y.offsetHeight/2,Z=y.offsetTop+W,U=D+k+Z,ee=_-U;if(U<=R){const te=T.length>0&&y===T[T.length-1].ref.current;l.style.bottom="0px";const G=d.clientHeight-x.offsetTop-x.offsetHeight,ne=Math.max(B,W+(te?V:0)+G+L),ge=U+ne;l.style.height=ge+"px"}else{const te=T.length>0&&y===T[0].ref.current;l.style.top="0px";const ne=Math.max(R,D+x.offsetTop+(te?z:0)+W)+ee;l.style.height=ne+"px",x.scrollTop=U-R+x.offsetTop}l.style.margin=`${Jt}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,o.trigger,o.valueNode,l,d,x,y,b,o.dir,r]);sr(()=>j(),[j]);const[N,I]=v.useState();sr(()=>{d&&I(window.getComputedStyle(d).zIndex)},[d]);const S=v.useCallback(E=>{E&&g.current===!0&&(j(),w==null||w(),g.current=!1)},[j,w]);return s.jsx(ek,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Gt.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ex.displayName=JD;var QD="SelectPopperPosition",Sc=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Jt,...o}=e,i=Ki(n);return s.jsx(Dy,{...i,...o,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sc.displayName=QD;var[ek,eu]=ks(Vr,{}),Ec="SelectViewport",Cx=v.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,o=vr(Ec,n),i=eu(Ec,n),l=gn(t,o.onViewportChange),c=v.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ui.Slot,{scope:n,children:s.jsx(Gt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:et(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&m){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-Jt*2,x=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),b=Math.max(x,y);if(b<g){const w=b+p,j=Math.min(g,w),N=w-j;m.style.height=j+"px",m.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Cx.displayName=Ec;var Ix="SelectGroup",[tk,nk]=ks(Ix),rk=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=td();return s.jsx(tk,{scope:n,id:a,children:s.jsx(Gt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});rk.displayName=Ix;var Ax="SelectLabel",Mx=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=nk(Ax,n);return s.jsx(Gt.div,{id:a.id,...r,ref:t})});Mx.displayName=Ax;var $o="SelectItem",[sk,Dx]=ks($o),kx=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...i}=e,l=xr($o,n),c=vr($o,n),d=l.value===r,[u,m]=v.useState(o??""),[f,p]=v.useState(!1),g=gn(t,w=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,w,r,a)}),x=td(),y=v.useRef("touch"),b=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(sk,{scope:n,value:r,disabled:a,textId:x,isSelected:d,onItemTextChange:v.useCallback(w=>{m(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:s.jsx(Ui.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:s.jsx(Gt.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:g,onFocus:et(i.onFocus,()=>p(!0)),onBlur:et(i.onBlur,()=>p(!1)),onClick:et(i.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:et(i.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:et(i.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:et(i.onPointerMove,w=>{var j;y.current=w.pointerType,a?(j=c.onItemLeave)==null||j.call(c):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:et(i.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:et(i.onKeyDown,w=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(ZD.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});kx.displayName=$o;var Ys="SelectItemText",Ox=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...o}=e,i=xr(Ys,n),l=vr(Ys,n),c=Dx(Ys,n),d=GD(Ys,n),[u,m]=v.useState(null),f=gn(t,b=>m(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=v.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=d;return sr(()=>(x(g),()=>y(g)),[x,y,g]),s.jsxs(s.Fragment,{children:[s.jsx(Gt.span,{id:c.textId,...o,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Dt.createPortal(o.children,i.valueNode):null]})});Ox.displayName=Ys;var Tx="SelectItemIndicator",Fx=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Dx(Tx,n).isSelected?s.jsx(Gt.span,{"aria-hidden":!0,...r,ref:t}):null});Fx.displayName=Tx;var Cc="SelectScrollUpButton",Lx=v.forwardRef((e,t)=>{const n=vr(Cc,e.__scopeSelect),r=eu(Cc,e.__scopeSelect),[a,o]=v.useState(!1),i=gn(t,r.onScrollButtonChange);return sr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx($x,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Lx.displayName=Cc;var Ic="SelectScrollDownButton",Px=v.forwardRef((e,t)=>{const n=vr(Ic,e.__scopeSelect),r=eu(Ic,e.__scopeSelect),[a,o]=v.useState(!1),i=gn(t,r.onScrollButtonChange);return sr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx($x,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Px.displayName=Ic;var $x=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,o=vr("SelectScrollButton",n),i=v.useRef(null),l=Gi(n),c=v.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),sr(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Gt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:et(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:et(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:et(a.onPointerLeave,()=>{c()})})}),ak="SelectSeparator",_x=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Gt.div,{"aria-hidden":!0,...r,ref:t})});_x.displayName=ak;var Ac="SelectArrow",ok=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ki(n),o=xr(Ac,n),i=vr(Ac,n);return o.open&&i.position==="popper"?s.jsx(ky,{...a,...r,ref:t}):null});ok.displayName=Ac;function Rx(e){return e===""||e===void 0}var Vx=v.forwardRef((e,t)=>{const{value:n,...r}=e,a=v.useRef(null),o=gn(t,a),i=Oy(n);return v.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&u){const m=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(m)}},[i,n]),s.jsx(Ty,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:n})})});Vx.displayName="BubbleSelect";function Hx(e){const t=Fy(e),n=v.useRef(""),r=v.useRef(0),a=v.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function Bx(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=ik(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function ik(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var lk=hx,zx=xx,ck=yx,dk=bx,uk=wx,Zx=jx,mk=Cx,qx=Mx,Wx=kx,fk=Ox,pk=Fx,Ux=Lx,Gx=Px,Kx=_x;const St=lk,Zt=ck,ht=v.forwardRef(({className:e,children:t,icon:n=s.jsx(Es,{className:"h-4 w-4 shrink-0 opacity-50"}),...r},a)=>s.jsxs(zx,{ref:a,className:Y("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(dk,{asChild:!0,children:n})]}));ht.displayName=zx.displayName;const Yx=v.forwardRef(({className:e,...t},n)=>s.jsx(Ux,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(_y,{})}));Yx.displayName=Ux.displayName;const Xx=v.forwardRef(({className:e,...t},n)=>s.jsx(Gx,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ry,{})}));Xx.displayName=Gx.displayName;const gt=v.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(uk,{children:s.jsxs(Zx,{ref:a,className:Y("zv_scope relative !z-[10006] max-h-fit min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(Yx,{}),s.jsx(mk,{className:Y("p-1 pr-[0.375rem]",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Xx,{})]})}));gt.displayName=Zx.displayName;const hk=v.forwardRef(({className:e,...t},n)=>s.jsx(qx,{ref:n,className:Y("px-2 py-1.5 text-sm font-semibold",e),...t}));hk.displayName=qx.displayName;const Me=v.forwardRef(({children:e,className:t,icon:n=s.jsx(Cs,{className:"h-4 w-4"}),previewData:r,...a},o)=>s.jsxs(Wx,{ref:o,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(pk,{children:n})}),r&&s.jsxs(Jo,{closeDelay:200,openDelay:200,children:[s.jsx(Qo,{className:"absolute right-8",children:s.jsx(nd,{size:20})}),s.jsx(ei,{className:"max-h-[50dvh] w-auto max-w-[80dvw] overflow-hidden",children:r})]}),s.jsx(fk,{children:e})]}));Me.displayName=Wx.displayName;const gk=v.forwardRef(({className:e,...t},n)=>s.jsx(Kx,{ref:n,className:Y("-mx-1 my-1 h-px bg-muted",e),...t}));gk.displayName=Kx.displayName;class xk{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}const De={days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"};function gs(e,t){switch(e){case"seconds":return Math.floor(t/1e3);case"minutes":return Math.floor(t/1e3/60);case"hours":return Math.floor(t/1e3/60/60);case"days":return Math.floor(t/1e3/60/60/24)}}function pa(e,t){let n;switch(e){case"seconds":n=Math.floor(t*1e3);break;case"minutes":n=Math.floor(t*1e3*60);break;case"hours":n=Math.floor(t*1e3*60*60);break;case"days":n=Math.floor(t*1e3*60*60*24);break}return n}function vk({delayInMs:e,flowId:t,timeUnitType:n,nodeId:r}){const a=new Se,[o,i]=v.useState(n),[l,c]=v.useState(()=>gs(n,e)),d={value:String(l),onValueChange:({valueAsNumber:u})=>{isNaN(u)&&(u=1),c(u)}};return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{await new xk(a).execute({flowId:t,data:{id:r,props:{delayInMs:pa(o,l),timeUnitType:o}}})},action:"Salvar",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[s.jsx(ie,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Esperar antes de continuar o fluxo"}),s.jsx(dt,{inputClasses:"w-14",max:999,min:1,...d}),s.jsxs(St,{value:o,onValueChange:u=>{i(u)},children:[s.jsx(ht,{className:"h-full w-56 p-3.5",children:s.jsx(Zt,{placeholder:De.seconds})}),s.jsxs(gt,{className:"z-[9999]",children:[s.jsx(Me,{value:"seconds",children:De.seconds}),s.jsx(Me,{value:"minutes",children:De.minutes}),s.jsx(Me,{value:"hours",children:De.hours}),s.jsx(Me,{value:"days",children:De.days})]})]})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}const tu=Q6((e,t)=>({action:null,delayTimeUnit:1,flowId:"",fromHandle:null,fromNodeId:null,isOpen:!1,itemId:"",itemTypeSelected:null,position:{x:0,y:0},ready:!1,selectedDelayTimeUnitType:"seconds",simulationMin:0,simulationSec:0,step:0,isLimitedFlowState:!1,setAction:n=>e({action:n}),setDelayTimeUnit:n=>e({delayTimeUnit:n}),setFlowId:n=>e({flowId:n}),setFromHandle:n=>e({fromHandle:n}),setFromNodeId:n=>e({fromNodeId:n}),setIsOpen:n=>e({isOpen:n}),setItemId:n=>e({itemId:n}),setItemTypeSelected:n=>e({itemTypeSelected:n}),setPosition:n=>e({position:n}),setReady:n=>e({ready:n}),setSelectedDelayTimeUnitType:n=>e({selectedDelayTimeUnitType:n}),setSimulationMin:n=>e({simulationMin:n}),setSimulationSec:n=>e({simulationSec:n}),setStep:n=>e({step:n}),setIsLimitedFlowState:n=>e({isLimitedFlowState:n}),clearAllState:({isClosing:n=!0}={})=>{e({action:null,delayTimeUnit:1,itemId:"",itemTypeSelected:null,ready:!1,selectedDelayTimeUnitType:"seconds",simulationMin:0,simulationSec:0}),n&&e({flowId:"",fromHandle:null,fromNodeId:null,isOpen:!1,position:{x:0,y:0},step:0})},handleModalAction:async()=>{const{step:n,action:r,flowId:a,fromHandle:o,fromNodeId:i,position:l,itemId:c,simulationMin:d,simulationSec:u,selectedDelayTimeUnitType:m,delayTimeUnit:f}=t();n===0?e({step:1}):r&&(r.type==="text"&&await r.execute({delayMinutes:d,delaySeconds:u,flowId:a,fromHandle:o,fromNodeId:i??"",itemIdState:c,position:l}),r.type==="delay"&&await r.execute({delayInMs:pa(m,f),timeUnitType:m,flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l}),r.type==="document"&&await r.execute({flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l,itemIdState:c}),r.type==="audio"&&await r.execute({delayMinutes:d,delaySeconds:u,flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l,itemIdState:c}),r.type==="media"&&await r.execute({flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l,itemIdState:c}),r.type==="contact"&&await r.execute({flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l,itemIdState:c}),r.type==="user-input"&&await r.execute({delayInMs:pa(m,f),timeUnitType:m,flowId:a??"",fromHandle:o,fromNodeId:i??"",position:l}))},handleModalCancel:()=>{const{step:n}=t();t().clearAllState({isClosing:!1}),e(n===1?{step:0}:{isOpen:!1})},handleOpenChange:n=>{n&&e({step:0}),e({isOpen:n})},selectFlowNodeType:n=>{n&&e({itemTypeSelected:n,step:1})},onSelectItem:n=>{e({itemId:n})}})),yk=()=>{const e=tu(),t={value:String(e.delayTimeUnit),onValueChange:({valueAsNumber:o})=>{Number.isNaN(o)&&(o=1),e.setDelayTimeUnit(o)}},n={value:e.selectedDelayTimeUnitType,onValueChange:o=>{e.setSelectedDelayTimeUnitType(o)}},r={value:String(e.simulationMin),onValueChange:({valueAsNumber:o})=>{Number.isNaN(o)&&(o=0),e.setSimulationMin(o)}},a={value:String(e.simulationSec),onValueChange:({valueAsNumber:o})=>{Number.isNaN(o)&&(o=0),e.setSimulationSec(o)}};return{delayTimeUnitHandler:t,selectedDelayTimeUnitTypeHandler:n,simulationMinutesHandler:r,simulationSecondsHandler:a}},at=()=>{const e=tu(),t=yk(),{checkPermission:n}=px(),r=async()=>{const{checked:o}=await n(["create_flow"],!1),i=o.create_flow;return e.setIsLimitedFlowState(!i),!i};v.useEffect(()=>{r()},[]);const a=e.step===1;return{clearAllState:e.clearAllState,closeOnAction:a,closeOnCancel:!a,delayTimeUnitHandler:t.delayTimeUnitHandler,handleModalAction:e.handleModalAction,handleModalCancel:e.handleModalCancel,handleOpenChange:e.handleOpenChange,isLastStep:a,isLimitedFlowState:e.isLimitedFlowState,isOpen:e.isOpen,itemId:e.itemId,itemTypeSelected:e.itemTypeSelected,notReady:a&&!e.ready,selectFlowNodeType:e.selectFlowNodeType,selectedDelayTimeUnitTypeHandler:t.selectedDelayTimeUnitTypeHandler,setAction:e.setAction,setFlowId:e.setFlowId,setFromHandle:e.setFromHandle,setFromNodeId:e.setFromNodeId,setIsLimitedFlowState:e.setIsLimitedFlowState,setIsOpen:e.setIsOpen,onSelectItem:e.onSelectItem,setPosition:e.setPosition,setReady:e.setReady,simulationMinutesHandler:t.simulationMinutesHandler,simulationSecondsHandler:t.simulationSecondsHandler,step:e.step,title:`Adicionar item ${e.step+1}/2`}},bk={contactName:"",countries:[],country:Mt(["","","","",0,[""]]),createContactNode:async()=>{},handlePhoneValueChange:()=>"",inputRef:v.createRef(),inputValue:"",phone:"",setContactName:()=>null,setCountry:()=>null},Jx=v.createContext(bk),wk=({children:e})=>{const[t,n]=v.useState(""),{country:r,handlePhoneValueChange:a,inputRef:o,inputValue:i,phone:l,setCountry:c}=qi({defaultCountry:"br",value:""}),{clearAllState:d,itemTypeSelected:u,setAction:m,setReady:f}=at(),p=v.useCallback(async({flowId:g,fromHandle:x,fromNodeId:y,position:b})=>{const w=new Se;if(t.trim()===""){he({title:"Atenção",description:"Informe o nome do contato"});return}if(l.trim()===""){he({title:"Atenção",description:"Informe o telefone do contato"});return}if(!g){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const j=rd.create({flowId:g,contactName:t,contactPhone:l,itemId:"",nextNodeIds:null,type:"contact",position:b}).metadata,N=j.id,I=await w.findById(g);if(!I){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(x){const S=I==null?void 0:I.draft.nodes.findIndex(A=>A.id===y),E=(I==null?void 0:I.draftStartNode.id)===y?I.draftStartNode:null;if(S===-1&&!E){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(S!==-1){if(x==="expiration-source-handle")I.draft.nodes[S].nextNodeIdOnExpiration=N;else if(x==="source-handle")I.draft.nodes[S].nextNodeIds=[N];else if(x.includes("source-handle-")){const A=I.draft.nodes[S];if(A.type==="user-input"&&"expectedMessages"in A){const O=A.expectedMessages,M=x.split("source-handle-")[1],T=O.findIndex(P=>P===M),$=A.nextNodeIds??Array(O.length).fill(null);T!==-1&&($[T]=N,I.draft.nodes[S].nextNodeIds=$)}else I.draft.nodes[S].nextNodeIds=[N]}}else I.draftStartNode.nextNodeIds=[N]}I.draft.nodes.push(j),I.draft.updatedAt=new Date,await w.updateFlow(I),ae({title:"Sucesso",description:"Nó de contato criado com sucesso"}),n(""),d()},[d,t,l]);return v.useEffect(()=>{u==="contact"&&t.trim()!==""&&(m({execute:p,type:"contact"}),f(!0))},[t,p,u,m,f]),s.jsx(Jx.Provider,{value:{contactName:t,countries:gr.map(g=>Mt(g)),country:r,createContactNode:p,handlePhoneValueChange:a,inputRef:o,inputValue:i,phone:l,setContactName:n,setCountry:c},children:e})},jk=()=>v.useContext(Jx),Nk={createDelayNode:async()=>{}},Sk=v.createContext(Nk),Ek=({children:e})=>{const{clearAllState:t,itemTypeSelected:n,setAction:r,setReady:a}=at(),o=v.useCallback(async({delayInMs:i,timeUnitType:l,flowId:c,fromHandle:d,fromNodeId:u,position:m})=>{const f=new Se;if(!c){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=sa.create({flowId:c,delayInMs:i,nextNodeIds:null,expirationTimeoutInMs:void 0,position:m,timeUnitType:l,type:"delay"}).metadata,g=p.id,x=await f.findById(c);if(!x){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(d){const y=x==null?void 0:x.draft.nodes.findIndex(w=>w.id===u),b=(x==null?void 0:x.draftStartNode.id)===u?x.draftStartNode:null;if(y===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(y!==-1){if(d==="expiration-source-handle")x.draft.nodes[y].nextNodeIdOnExpiration=g;else if(d==="source-handle")x.draft.nodes[y].nextNodeIds=[g];else if(d.includes("source-handle-")){const w=x.draft.nodes[y];if(w.type==="user-input"&&"expectedMessages"in w){const j=w.expectedMessages,N=d.split("source-handle-")[1],I=j.findIndex(E=>E===N),S=w.nextNodeIds??Array(j.length).fill(null);I!==-1&&(S[I]=g,x.draft.nodes[y].nextNodeIds=S)}else x.draft.nodes[y].nextNodeIds=[g]}}else x.draftStartNode.nextNodeIds=[g]}x.draft.nodes.push(p),x.draft.updatedAt=new Date,await f.updateFlow(x),ae({title:"Sucesso",description:"Nó de espera criado com sucesso"}),t()},[t]);return v.useEffect(()=>{n==="delay"&&(r({execute:o,type:"delay"}),a(!0))},[o,n,r,a]),s.jsx(Sk.Provider,{value:{createDelayNode:o},children:e})},Ck={createAudioNode:async()=>{}},Ik=v.createContext(Ck),Ak=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:a,setReady:o}=at(),i=v.useCallback(async({delayMinutes:l,delaySeconds:c,flowId:d,fromHandle:u,fromNodeId:m,position:f,itemIdState:p})=>{var j;const g=new Se;if(!p){he({title:"Atenção",description:"Selecione um áudio para continuar"});return}if(!d){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const x=l*60*1e3+c*1e3,y=ti.create({flowId:d.toString(),itemId:p,nextNodeIds:null,simulationDelay:x,type:"audio",position:f}).metadata,b=y.id,w=await g.findById(d);if(!w){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(u){const N=w.draft.nodes.findIndex(S=>S.id===m),I=w.draftStartNode.id===m?w.draftStartNode:null;if(N===-1&&!I){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(N!==-1){if(u==="expiration-source-handle")w.draft.nodes[N].nextNodeIdOnExpiration=b;else if(u==="source-handle")w.draft.nodes[N].nextNodeIds=[b];else if(u.includes("source-handle-")){const S=w.draft.nodes[N];if(S.type==="user-input"&&"expectedMessages"in S){const E=S.expectedMessages,A=u.split("source-handle-")[1],O=E.findIndex(T=>T===A),M=S.nextNodeIds??Array(E.length).fill(null);O!==-1&&(M[O]=b,w.draft.nodes[N].nextNodeIds=M)}else w.draft.nodes[N].nextNodeIds=[b]}}else w.draftStartNode.nextNodeIds=[b]}(j=w.draft)==null||j.nodes.push(y),w.draft.updatedAt=new Date,await g.updateFlow(w),ae({title:"Sucesso",description:"Nó de áudio criado com sucesso"}),t()},[t]);return v.useEffect(()=>{r==="audio"&&n.trim()!==""&&(a({execute:i,type:"audio"}),o(!0))},[i,n,r,a,o]),s.jsx(Ik.Provider,{value:{createAudioNode:i},children:e})},Mk={createDocumentNode:async()=>{}},Dk=v.createContext(Mk),kk=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:a,setReady:o}=at(),i=v.useCallback(async({flowId:l,fromHandle:c,fromNodeId:d,position:u,itemIdState:m})=>{const f=new Se;if(!m){he({title:"Atenção",description:"Selecione um documento para continuar"});return}if(!l){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=ni.create({flowId:l.toString(),itemId:m,nextNodeIds:null,type:"document",position:u}).metadata,g=p.id,x=await f.findById(l);if(!x){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(c){const y=x==null?void 0:x.draft.nodes.findIndex(w=>w.id===d),b=(x==null?void 0:x.draftStartNode.id)===d?x.draftStartNode:null;if(y===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(y!==-1){if(c==="expiration-source-handle")x.draft.nodes[y].nextNodeIdOnExpiration=g;else if(c==="source-handle")x.draft.nodes[y].nextNodeIds=[g];else if(c.includes("source-handle-")){const w=x.draft.nodes[y];if(w.type==="user-input"&&"expectedMessages"in w){const j=w.expectedMessages,N=c.split("source-handle-")[1],I=j.findIndex(E=>E===N),S=w.nextNodeIds??Array(j.length).fill(null);I!==-1&&(S[I]=g,x.draft.nodes[y].nextNodeIds=S)}else x.draft.nodes[y].nextNodeIds=[g]}}else x.draftStartNode.nextNodeIds=[g]}x.draft.nodes.push(p),x.draft.updatedAt=new Date,await f.updateFlow(x),ae({title:"Sucesso",description:"Nó de documento criado com sucesso"}),t()},[t]);return v.useEffect(()=>{r==="document"&&n.trim()!==""&&(a({execute:i,type:"document"}),o(!0))},[i,n,r,a,o]),s.jsx(Dk.Provider,{value:{createDocumentNode:i},children:e})},Ok={createMediaNode:async()=>{}},Tk=v.createContext(Ok),Fk=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:a,setReady:o}=at(),i=v.useCallback(async({flowId:l,fromHandle:c,fromNodeId:d,position:u,itemIdState:m})=>{const f=new Se;if(!m){he({title:"Atenção",description:"Selecione uma mídia para continuar"});return}if(!l){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=ri.create({flowId:l.toString(),itemId:m,nextNodeIds:null,type:"media",position:u}).metadata,g=p.id,x=await f.findById(l);if(!x){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(c){const y=x==null?void 0:x.draft.nodes.findIndex(w=>w.id===d),b=(x==null?void 0:x.draftStartNode.id)===d?x.draftStartNode:null;if(y===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(y!==-1){if(c==="expiration-source-handle")x.draft.nodes[y].nextNodeIdOnExpiration=g;else if(c==="source-handle")x.draft.nodes[y].nextNodeIds=[g];else if(c.includes("source-handle-")){const w=x.draft.nodes[y];if(w.type==="user-input"&&"expectedMessages"in w){const j=w.expectedMessages,N=c.split("source-handle-")[1],I=j.findIndex(E=>E===N),S=w.nextNodeIds??Array(j.length).fill(null);I!==-1&&(S[I]=g,x.draft.nodes[y].nextNodeIds=S)}else x.draft.nodes[y].nextNodeIds=[g]}}else x.draftStartNode.nextNodeIds=[g]}x.draft.nodes.push(p),x.draft.updatedAt=new Date,await f.updateFlow(x),ae({title:"Sucesso",description:"Nó de mídia criado com sucesso"}),t()},[t]);return v.useEffect(()=>{r==="media"&&n.trim()!==""&&(a({execute:i,type:"media"}),o(!0))},[i,n,r,a,o]),s.jsx(Tk.Provider,{value:{createMediaNode:i},children:e})},Lk={createTextNode:async()=>{}},Pk=v.createContext(Lk),$k=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:a,setReady:o}=at(),i=v.useCallback(async({delayMinutes:l,delaySeconds:c,flowId:d,fromHandle:u,fromNodeId:m,itemIdState:f,position:p})=>{const g=new Se;if(!d){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(!f){he({title:"Atenção",description:"Selecione um item de texto"});return}const x=l*60*1e3+c*1e3,y=si.create({flowId:d,itemId:f,nextNodeIds:null,simulationDelay:x,type:"text",position:p}).metadata,b=y.id,w=await g.findById(d);if(!w){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(u){const j=w==null?void 0:w.draft.nodes.findIndex(I=>I.id===m),N=(w==null?void 0:w.draftStartNode.id)===m?w.draftStartNode:null;if(j===-1&&!N){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(j!==-1){if(u==="expiration-source-handle")w.draft.nodes[j].nextNodeIdOnExpiration=b;else if(u==="source-handle")w.draft.nodes[j].nextNodeIds=[b];else if(u.includes("source-handle-")){const I=w.draft.nodes[j];if(I.type==="user-input"&&"expectedMessages"in I){const S=I.expectedMessages,E=u.split("source-handle-")[1],A=S.findIndex(M=>M===E),O=I.nextNodeIds??Array(S.length).fill(null);A!==-1&&(O[A]=b,w.draft.nodes[j].nextNodeIds=O)}else w.draft.nodes[j].nextNodeIds=[b]}}else w.draftStartNode.nextNodeIds=[b]}w.draft.nodes.push(y),w.draft.updatedAt=new Date,await g.updateFlow(w),ae({title:"Sucesso",description:"Nó de texto criado com sucesso"}),t()},[t]);return v.useEffect(()=>{r==="text"&&n.trim()!==""&&(a({execute:i,type:"text"}),o(!0))},[i,n,r,a,o]),s.jsx(Pk.Provider,{value:{createTextNode:i},children:e})},_k={canExpire:!1,createUserInputNode:async()=>{},expectedMessages:[],followUpTimeoutDayHandler:{value:"1",onValueChange:()=>{}},followUpTimeoutDayReferenceHandler:{value:"lastItem",onValueChange:()=>{}},followUpTimeoutHourHandler:{value:"1",onValueChange:()=>{}},followUpTimeoutTypeHandler:{value:"dynamic",onValueChange:()=>{}},selectedOption:"anything",setCanExpire:()=>{},setExpectedMessages:()=>{},setSelectedOption:()=>{}},Qx=v.createContext(_k),Rk=({children:e})=>{const[t,n]=v.useState(!1),[r,a]=v.useState([]),[o,i]=v.useState("anything"),[l,c]=v.useState("dynamic"),[d,u]=v.useState(8),[m,f]=v.useState("1"),[p,g]=v.useState("lastItem"),{clearAllState:x,itemTypeSelected:y,setAction:b,setReady:w}=at(),j={value:m,onValueChange:A=>{f(A)}},N={value:String(d),onValueChange:A=>{u(Number(A))}},I={value:l,onValueChange:A=>{c(A)}},S={value:p,onValueChange:A=>{g(A)}},E=v.useCallback(async({delayInMs:A,timeUnitType:O,flowId:M,fromHandle:T,fromNodeId:$,position:P})=>{const C=new Se;if(r.length===0&&o!=="anyTextMessage"&&o!=="anything"){he({title:"Atenção",description:"Digite o texto do item"});return}if(t&&A<1e3){he({title:"Atenção",description:"O tempo de espera deve ser ao menos 1 seg."});return}if(!M){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const D=l==="dynamic"?{timeoutType:"dynamic",timeUnit:gs(O,A),timeUnitType:O}:{timeoutType:"fixed",day:Number(m),hour:d,reference:p},k=sd.create({flowId:M,canFollowUp:t,compareRule:o,expectedMessages:r,nextNodeIds:null,nextNodeIdOnExpiration:null,expirationTimeoutInMs:t?A:null,followUpData:D,timeUnitType:O,type:"user-input",position:P}).metadata,L=k.id,F=await C.findById(M);if(!F){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(T){const _=F==null?void 0:F.draft.nodes.findIndex(q=>q.id===$),H=(F==null?void 0:F.draftStartNode.id)===$?F.draftStartNode:null;if(_===-1&&!H){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(_!==-1){if(T==="expiration-source-handle")F.draft.nodes[_].nextNodeIdOnExpiration=L;else if(T==="source-handle")F.draft.nodes[_].nextNodeIds=[L];else if(T.includes("source-handle-")){const q=F.draft.nodes[_];if(q.type==="user-input"&&"expectedMessages"in q){const z=q.expectedMessages,V=T.split("source-handle-")[1],R=z.findIndex(W=>W===V),B=q.nextNodeIds??Array(z.length).fill(null);R!==-1&&(B[R]=L,F.draft.nodes[_].nextNodeIds=B)}else F.draft.nodes[_].nextNodeIds=[L]}}else F.draftStartNode.nextNodeIds=[L]}k.nextNodeIds=Array(r.length).fill(null),F.draft.nodes.push(k),F.draft.updatedAt=new Date,await C.updateFlow(F),ae({title:"Sucesso",description:"Nó criado com sucesso"}),x(),n(!1),a([]),i("anything")},[t,x,r,m,p,d,l,o]);return v.useEffect(()=>{y==="user-input"&&(b({execute:E,type:"user-input"}),w(!0))},[E,y,b,w]),s.jsx(Qx.Provider,{value:{canExpire:t,createUserInputNode:E,expectedMessages:r,followUpTimeoutDayHandler:j,followUpTimeoutDayReferenceHandler:S,followUpTimeoutHourHandler:N,followUpTimeoutTypeHandler:I,selectedOption:o,setCanExpire:n,setExpectedMessages:a,setSelectedOption:i},children:e})},Vk=()=>v.useContext(Qx);class Hk{constructor(t){this.repository=t}async execute({id:t,name:n}){if(!n.trim())throw new Error("CreateFlow: Cannot create an flow with empty name");const a=new je(t),o=new Date,i={enabled:!0,name:n,nodes:[],updatedAt:o},l={...cd.create({flowId:a.toString(),schedule:{days:[],maxTime:"00:00",minTime:"00:00"},enabledSchedule:!1,enabledTrigger:!1,trigger:{isCaseSensitive:!1,keywordRules:[],sendToContacts:!0,sendToGroups:!1},nextNodeIds:null,position:{x:250,y:250},type:"start"},new je).metadata,updatedAt:o},c=li.create({draft:i,draftStartNode:l,isFavorite:!1,published:i,publishedStartNode:l},a);return await this.repository.addFlow(c),{flow:c}}}function Bk(e){const t=new Hk(e);return t.execute.bind(t)}function zk({onAction:e,trigger:t}){const[n,r]=v.useState(""),a=new Te,o=Bk(new Se),i=xn(a),l=async()=>{const{flow:m}=await o({name:n});await i({optionKey:"flows",optionToAdd:{id:m.id,name:m.published.name,size:await Ne(m)}}),e(m.id),c()},c=()=>{r("")},d={value:n,onChange:m=>r(m.target.value)},u=n.trim()==="";return s.jsx(ve,{onCancel:c,onAction:l,action:"Salvar",actionProps:{disabled:u,icon:s.jsx(Ct,{})},description:s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:$n,...d,errorMessage:!d.value.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:"Criar novo fluxo",trigger:t,cancel:"Cancelar"})}function Zk(){return s.jsx(zk,{onAction:e=>Ue.selectFlow(e),trigger:s.jsx(K,{size:"action",icon:s.jsx(_t,{size:16,weight:"bold"}),children:"Adicionar novo"})})}class qk{constructor(t,n){this.flowRepository=t,this.funnelRepository=n}async execute({id:t,funnels:n,flowName:r}){var b,w;if(n.length===0)throw new Error("CreateFlowFromFunnels: Cannot create an flow without select at least a funnel");if(!r.trim())throw new Error("CreateFlowFromFunnels: Cannot create an flow with empty name");if(n.some(j=>j.id.trim()===""))throw new Error("CreateFlowFromFunnels: Cannot create an flow with empty funnelId");const i=this.funnelRepository.getAll(),l=[],c=n.map(j=>{const N=i.find(I=>I.id===j.id);return N||l.push(j.id),N}).filter(j=>j!==void 0);if(c.length<n.length)throw new Error(`CreateFlow: Funnel not found with ids: ${l.join(",")}`);const d=new je(t),u=[],m=c.reduce((j,N)=>{const I=N.itemsSequence.map(()=>new je);return j.push(I),j},[]),f={x:0,y:0};for(let j=0;j<c.length;j++)for(let N=0;N<c[j].itemsSequence.length;N++){const{delayBeforeSend:I,itemId:S,type:E}=c[j].itemsSequence[N],A=E==="message"?"text":E,M={x:(((b=u.at(-1))==null?void 0:b.position.x)??f.x)+450,y:0};let T=N<c[j].itemsSequence.length?((w=m[j].at(N+1))==null?void 0:w.toString())??null:null;if(T===null&&j<c.length-1&&(T=m[j+1][0].toString()??null),A==="audio"){const $=ti.create({flowId:d.toString(),type:A,itemId:S,nextNodeIds:T?[T]:null,position:M,simulationDelay:I},m[j][N]).metadata;u.push($)}if(A==="document"){const $=I>0?new je:m[j][N],P=I>0?{x:M.x+450,y:0}:M;if(I>0){const D=Math.floor(I/1e3)*1e3,k=D>=60*60*1e3?"hours":D>=60*1e3?"minutes":"seconds",L=sa.create({delayInMs:D,flowId:d.toString(),nextNodeIds:[$.toString()],position:M,timeUnitType:k,type:"delay"},m[j][N]).metadata;u.push(L)}const C=ni.create({flowId:d.toString(),type:A,itemId:S,nextNodeIds:T?[T]:null,position:P},$).metadata;u.push(C)}if(A==="media"){const $=I>0?new je:m[j][N],P=I>0?{x:M.x+450,y:0}:M;if(I>0){const D=Math.floor(I/1e3)*1e3,k=D>=60*60*1e3?"hours":D>=60*1e3?"minutes":"seconds",L=sa.create({delayInMs:D,flowId:d.toString(),nextNodeIds:[$.toString()],position:M,timeUnitType:k,type:"delay"},m[j][N]).metadata;u.push(L)}const C=ri.create({flowId:d.toString(),type:A,itemId:S,nextNodeIds:T?[T]:null,position:P},$).metadata;u.push(C)}if(A==="text"){const $=si.create({flowId:d.toString(),type:A,itemId:S,nextNodeIds:T?[T]:null,position:M,simulationDelay:I},m[j][N]).metadata;u.push($)}}const p=new Date,g={enabled:!0,name:r,nodes:u,updatedAt:p},x=cd.create({flowId:d.toString(),schedule:{days:[],maxTime:"00:00",minTime:"00:00"},enabledSchedule:!1,enabledTrigger:!1,trigger:{isCaseSensitive:!1,keywordRules:[],sendToContacts:!0,sendToGroups:!1},nextNodeIds:[m[0][0].toString()],position:f,type:"start"},new je).metadata,y=li.create({draft:g,isFavorite:!1,published:g,draftStartNode:{...x,updatedAt:p},publishedStartNode:{...x,updatedAt:p}},d);return await this.flowRepository.addFlow(y),{flow:y}}}function Wk(e,t){const n=new qk(e,t);return n.execute.bind(n)}function Uk(){const e=new vt,[t,n]=v.useState([]),[r,a]=v.useState(""),o=Wk(new Se,e),i=xn(new Te),l={value:r,onChange:p=>a(p.target.value)},c=()=>{a(""),n([])};async function d(){const{flow:p}=await o({funnels:t.map(g=>({name:g.label,id:g.value})),flowName:r});await i({optionKey:"flows",optionToAdd:{id:p.id,name:p.draft.name,size:await Ne(p)}}),c(),Ue.selectFlow(p.id)}const u=r.trim()===""||t.length===0,f=st.useGetFunnelList().map(p=>({label:p.name,value:p.id}));return s.jsx(ve,{actionProps:{childrenVariant:"no-dark",disabled:u,variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onCancel:c,action:"Criar fluxo",description:s.jsxs("div",{className:"flex !gap-4",children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{className:"max-sm:hidden",children:"Selecione um ou mais funis"}),s.jsx(u1,{className:"bg-background",onSelectedChange:async p=>{p.length===1?a(`Fluxo ${p[0].label}`):p.length>1?a(`Fluxo baseado em ${p.length} funis`):a(""),n(p)},placeholder:"Funis",createIfNotFound:!1,findByLabel:!0,updateListFunction:async()=>f}),s.jsxs(ue,{delayDuration:1e3,children:[s.jsx(me,{asChild:!0,children:s.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(pr,{size:20}),"Atenção: a ordem em que os funis selecionados aparecem acima será a ordem que o fluxo seguirá"]})}),s.jsx(fe,{side:"top",className:"max-w-[400px]",children:s.jsxs("p",{children:["Exemplo:",s.jsx("br",{})," Se na seleção estiver primeiro o Funil 1 e depois o Funil 2, então o Fluxo enviará primeiro os itens do Funil 1 e depois os itens do Funil 2"]})})]})]}),s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,disabled:t.length===0,className:"bg-background text-base",id:"title",placeholder:t.length===0?"Selecione um funil primeiro":"Digite o nome do fluxo",...l,errorMessage:!l.value.trim()&&"Campo não pode ser vazio."})]})]}),onAction:()=>{d()},title:"Criar fluxo a partir de um ou mais funis",trigger:s.jsx(K,{childrenVariant:"no-dark",className:"min-w-20 p-0",icon:s.jsxs("div",{children:[s.jsx(Aa,{size:20}),s.jsx(H1,{size:15}),s.jsx(ad,{size:20})]}),iconClasses:"flex gap-1 shrink-0 items-center",size:"icon",variant:"default",title:"Criar fluxo a partir de um ou mais funis existentes"}),cancel:"Cancelar"})}class Gk{constructor(t){this.repository=t}async execute({id:t}){if(!t||t.trim()==="")throw new Error("DeleteFlow: Cannot delete an flow without id");await this.repository.deleteFlow(t)}}function Kk(e){const t=new Gk(e);return t.execute.bind(t)}const e2=new Vy(new ci,{shouldRepair:!0});function Yk({flow:e}){const t=Kk(new Se),n=Ur(new Te),a=e2.useGetRunningFlowsList().filter(i=>i.flowId===e.id),o=a==null?void 0:a.filter(i=>i.status==="running");return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{if(o){const i=o.map(u=>u.flowName),l=o.map(u=>u.id),c=o.map(u=>u.targetUserName),d=o.map(u=>u.targetChatId);wb.util.sendRemoveRunningFlowRequest({flowNames:i,runningFlowIds:l,userNames:c,targetChatIds:d})}t({id:e.id}).then(()=>{n({optionKey:"flows",optionIdToRemove:e.id})}).then(()=>{ae({title:"Sucesso",description:`Fluxo "${e==null?void 0:e.published.name}" excluído com sucesso.`})},i=>{i instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o fluxo "${e==null?void 0:e.published.name}":`,s.jsx("p",{children:" "}),i.message.split(`
`).map((l,c)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:l},c))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[o.length>0&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("p",{children:["Esse fluxo está sendo enviado para"," ",o.length," contato(s):"," "]}),s.jsxs("ul",{className:`relative my-2 flex h-12 max-h-40 w-[${o.length*40}px] items-center rounded-md`,style:{width:o.length*32},children:[o.slice(0,10).map((i,l)=>{const c=l>0?l*40-10*l:0;return s.jsx("li",{className:"absolute flex h-full cursor-pointer items-center transition-all hover:z-10 hover:scale-105",style:{left:`${c}px`},children:s.jsxs(ue,{children:[s.jsx(me,{children:s.jsxs(p1,{className:"border max-md:hidden",children:[s.jsx(h1,{src:i.targetUserImageData}),s.jsx(g1,{className:"bg-main-background font-bold",children:i.targetUserName.split(" ").splice(0,2).map(d=>d[0]).join("")})]})}),s.jsx(fe,{children:i.targetUserName})]})},i.targetChatId)}),o.length>10&&s.jsx("li",{className:"absolute flex h-full items-center font-bold",style:{left:"315px"},children:s.jsxs(ue,{children:[s.jsxs(me,{children:["... +",o.length-10]}),s.jsxs(fe,{className:"w-24",children:["O fluxo está sendo enviado para mais"," ",o.length-10," contatos"]})]})})]})]}),s.jsxs("span",{children:["Tem certeza que deseja excluir o fluxo"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.published.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsxs("span",{children:[o.length>0&&s.jsxs(s.Fragment,{children:["Os fluxos sendo enviados serão interrompidos. ",s.jsx("br",{})]}),"Essa ação é irreversível."]})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir fluxo"})]}),trigger:s.jsx(K,{childrenVariant:"no-dark",className:"p-0",icon:s.jsx(yt,{size:24}),iconClasses:"shrink-0",size:"icon",variant:"actionDestructive"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}const Kn=(e,t,n)=>{throw new Error(`Invalid node type "${e}", for node id: ${t}. Expected "${n}"`)},Xk=({firstNodeIdEntity:e,flowId:t,nodes:n,oldFirstNodeId:r})=>{const a=new Map;return n.map(o=>{var f;const{id:i,nextNodeIds:l,nextNodeIdOnExpiration:c}=o;if(o.id===r?a.set(i,e):a.get(i)||a.set(i,new je),l&&l.length>0)for(const p of l)p&&a.set(p,new je);c&&!a.get(c)&&a.set(c,new je);let d=null;l&&l.length>0&&(d=l.map(p=>{if(!p)return null;const g=a.get(p);return(g==null?void 0:g.toString())??null}).filter(p=>p!==null),d=d.length>0?d:null);const u={...o,flowId:t,nextNodeIds:d,nextNodeIdOnExpiration:c?(f=a.get(c))==null?void 0:f.toString():null},m=a.get(o.id);switch(u.type){case"delay":return tt.isDelayNode(u)?sa.create(u,m).metadata:Kn(o.type,o.id,"delay");case"user-input":return tt.isUserInputNode(u)?sd.create(u,m).metadata:Kn(o.type,o.id,"user-input");case"audio":return tt.isAudioNode(u)?ti.create(u,m).metadata:Kn(o.type,o.id,"audio");case"contact":return tt.isContactNode(u)?rd.create(u,m).metadata:Kn(o.type,o.id,"contact");case"document":return tt.isDocumentNode(u)?ni.create(u,m).metadata:Kn(o.type,o.id,"document");case"media":return tt.isMediaNode(u)?ri.create(u,m).metadata:Kn(o.type,o.id,"media");case"text":return tt.isTextNode(u)?si.create(u,m).metadata:Kn(o.type,o.id,"text");default:return Kn(o.type,o.id,"delay | user-input | audio | contact | document | media | text")}})};class Jk{constructor(t){this.repository=t}async execute({id:t,newName:n}){var a;if(!t||t.trim()==="")throw new Error("DuplicateFlow: Cannot duplicate an flow without id");const r=await this.repository.findById(t);if(!r)throw new Error("DuplicateFlow: Flow not found");try{const o=new je,i=new je,l=new Date,c={enabled:!0,nodes:Xk({firstNodeIdEntity:o,flowId:i.toString(),nodes:r.published.nodes,oldFirstNodeId:((a=r.publishedStartNode.nextNodeIds)==null?void 0:a[0])??null}),name:n??`${r==null?void 0:r.published.name}(cópia)`,updatedAt:l},d={...cd.create({...r.publishedStartNode,flowId:i.toString(),nextNodeIds:[o.toString()]}).metadata,updatedAt:l},u=li.create({draft:c,draftStartNode:d,isFavorite:!1,published:c,publishedStartNode:d},i);return await this.repository.addFlow(u),{flow:u}}catch(o){throw console.log(o),o}}}function Qk(e){const t=new Jk(e);return t.execute.bind(t)}function t2({size:e=24}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"m226 40v120a12 12 90 01-12 12h-31.5a6 6 90 010-12h31.5v-120h-120v34.5a6 6 90 01-12 0v-34.5a12 12 90 0112-12h120a12 12 90 0112 12m-69 48h-120a12 12 90 00-12 12v120a12 12 90 0012 12h120a12 12 90 0012-12v-120a12 12 90 00-12-12zm0 132h-120v-120h120v120zm-24-60a6 6 90 01-6 6h-24v24a6 6 90 01-12 0v-24h-24a6 6 90 010-12h24v-24a6 6 90 0112 0v24h24a6 6 90 016 6z"})})}function eO({flow:e}){const[t,n]=v.useState(`${e.published.name} (cópia)`),r=xn(new Te),a=Qk(new Se);return s.jsx(ve,{className:"md:w-fit",actionProps:{childrenVariant:"no-dark",variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onAction:()=>{a({id:e.id,newName:t}).then(async({flow:o})=>{await r({optionKey:"flows",optionToAdd:{id:o.id,name:o.published.name,size:await Ne(o)}})}).then(()=>{ae({title:"Sucesso",description:`Fluxo "${e.published.name}" duplicado com sucesso.`})},o=>{o instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível duplicar o fluxo "${e.published.name}":`,s.jsx("p",{children:" "}),o.message.split(`
`).map((i,l)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:i},l))]}),duration:5e3})})},action:"Duplicar",cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:$n,value:t,onChange:o=>n(o.target.value),errorMessage:!t.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Duplicar fluxo"})]}),trigger:s.jsx(K,{childrenVariant:"no-dark",className:"p-0",icon:s.jsx(t2,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Duplicar fluxo"})})}class tO{constructor(t){this.repository=t}async execute({id:t}){if(!t||t.trim()==="")throw new Error("ExportFlow: Cannot export a flow without id");const n=await this.repository.findById(t);if(!n)throw new Error("ExportFlow: Flow not found");const r=[...n.draft.nodes.filter(tt.isItemNode).map(({itemId:a})=>({id:a})),...n.published.nodes.filter(tt.isItemNode).map(({itemId:a})=>({id:a})),{id:n.id}];return await wc({exportAll:!1,selectedBackupOptions:r})}}function nO(e){const t=new tO(e);return t.execute.bind(t)}function rO({flow:e}){const t=nO(new Se),[n,r]=v.useState(""),[a,o]=v.useState(!1),{setIsBusy:i}=Is();return s.jsx(ve,{className:"md:w-fit",cancelProps:{childrenVariant:"no-dark",variant:"link"},action:null,cancel:"Fechar",description:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(K,{className:"w-64 rounded-sm py-7",size:"lg",disabled:a,onClick:()=>{o(!0),i(!0);const l=We.loading("Preparando backup para o download... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});t({id:e.id}).then(({downloadLink:c})=>{r(c),ae({title:"Sucesso",description:`Backup do fluxo "${e==null?void 0:e.published.name}" gerado com sucesso. Clique em "Fazer download"`})},c=>{c instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível exportar o fluxo "${e==null?void 0:e.published.name}":`,s.jsx("p",{children:" "}),c.message.split(`
`).map((d,u)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:d},u))]}),duration:5e3})}).finally(()=>{setTimeout(()=>We.dismiss(l),4e3),o(!1),i(!1)})},icon:s.jsx(pd,{size:24}),children:a?`Gerando backup do fluxo ${e.published.name}...`:`Gerar backup do fluxo ${e.published.name}`}),!a&&n&&s.jsx("a",{href:n,download:`ZV_${Pt(e.published.name,{toLowerCase:!1}).replace(/\s/gm,"_")}_backup_${d1.format(new Date)}.json`,className:"rounded-sm bg-black",children:s.jsx(K,{className:"w-64 rounded-sm bg-status-success py-7 hover:bg-status-success/90 zv-dark:bg-status-success-foreground zv-dark:hover:bg-status-success-foreground/90",size:"lg",disabled:a,icon:s.jsx(Wr,{size:24}),children:"Fazer download"})})]}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Exportar fluxo"})]}),trigger:s.jsx(K,{childrenVariant:"no-dark",className:"p-0",icon:s.jsx(fd,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Exportar fluxo"})})}class sO{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleFlowIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleFlowIsFavorite: Flow not found");const r=li.create({...n,isFavorite:!n.isFavorite},new je(n.id)).metadata;await this.repository.updateFlow(r)}}function aO(e){const t=new sO(e);return t.execute.bind(t)}function oO({flow:e}){const t=aO(new Se);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Funil "${e==null?void 0:e.draft.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},childrenVariant:"no-dark",icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}class iO{async execute({flowBackup:t}){if(!t)throw new Error("ImportFlowUseCase: No flow backup was provided");return await zi(t,"merge",{})}}function lO(){const e=new iO;return e.execute.bind(e)}function cO(){const[e,t]=v.useState(),[n,r]=v.useState(!1),a=lO(),{setIsBusy:o}=Is(),i=Yg(new Te),{fileName:l,hasBackup:c,handleUploadedBackup:d,handleRemoveUploadedBackup:u,file:m,setFile:f,setFileName:p}=Xd();return s.jsxs(s.Fragment,{children:[s.jsx(ve,{onCancel:()=>{f(void 0),p(void 0)},className:"md:w-fit",cancelProps:{childrenVariant:"no-dark",variant:"link"},action:"Importar backup do fluxo",cancel:"Cancelar",onAction:async()=>{const g=We.loading("Importando backup do fluxo... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});return o(!0),new Promise((x,y)=>{const b=new FileReader;b.onload=w=>{var N;const j=(N=w==null?void 0:w.target)!=null&&N.result&&String(w.target.result).length>0?JSON.parse(String(w.target.result)):[];Xg(j)?a({flowBackup:j}).then(()=>{x(ae({title:"Sucesso",description:"Backup do fluxo importado com sucesso",duration:4e3}))}).catch(I=>{let S="";if(I instanceof Yd){const E=JSON.parse(I.message);S=E.message,t({flowsWithProblem:E.flowsWithProblem,funnelsWithProblem:E.funnelsWithProblem,triggersWithProblem:E.triggersWithProblem,audiosWithProblem:E.audiosWithProblem,mediasWithProblem:E.mediasWithProblem,messagesWithProblem:E.messagesWithProblem,docsWithProblem:E.docsWithProblem}),he({id:g,title:"Backup corrigido automaticamente",duration:Number.POSITIVE_INFINITY,classNames:{cancelButton:"!bg-status-info-foreground/40 !text-status-info"},cancel:{label:"Ver problemas",onClick:()=>{r(!0),We.dismiss(g)}},description:s.jsxs("div",{children:["Identificamos algumas"," ",s.jsx("strong",{children:"inconsistências"})," no backup, e tomamos a liberdade de corrigir para você o que conseguimos.",s.jsx("br",{}),s.jsx("span",{className:"underline",children:"Por favor, verifique se está tudo certo."}),s.jsx("br",{}),s.jsx("br",{}),"Clique em ",s.jsx("strong",{children:"Ver problemas"})," para mais detalhes"]}),className:"flex flex-wrap"}),f(void 0),p(void 0),o(!1);return}I instanceof Error?S=I.message:S=JSON.stringify(I),y(le({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:["Não foi possível importar o fluxo:",s.jsx("p",{children:" "}),S.split(`
`).map((E,A)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:E},A))]}),duration:5e3}))}):y(new Error("Backup em formato inválido"))},b.onerror=w=>{y(w)},b.readAsText(m)}).catch(x=>{x instanceof Error?le({title:x.message}):le({title:JSON.stringify(x)})}).finally(async()=>{await i(),setTimeout(()=>We.dismiss(g),4e3),f(void 0),p(void 0),o(!1)})},description:s.jsx(nx,{className:"w-full",actionName:"inserir",fileName:l,hasBackup:c,onRemoveUploaded:u,onSelectBackup:d,isFile:!!m}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de importação"]}),trigger:s.jsx(K,{childrenVariant:"no-dark",className:"p-0",icon:s.jsx(mi,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Importar fluxo"})}),s.jsx(ds,{open:n,className:"overflow-y-hidden md:w-fit",action:"Entendi",description:s.jsxs("div",{className:"max-h-[50vh] gap-3 overflow-y-auto",children:[e&&Object.keys(e.messagesWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Mensagens de texto com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.messagesWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.audiosWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Áudios com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.audiosWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.mediasWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Mídias com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.mediasWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.docsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Documentos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.docsWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.funnelsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold ",children:"Funis com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.funnelsWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.triggersWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Gatilhos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.triggersWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]}),e&&Object.keys(e.flowsWithProblem).length>0&&s.jsxs("article",{children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Fluxos com problemas:"}),s.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.flowsWithProblem).map(([g,x],y)=>s.jsxs("li",{className:"ms-4 text-sm font-light",children:[s.jsxs("div",{children:[g,":"]}),s.jsx("ul",{className:"ml-4 list-disc divide-y",children:x.map((b,w)=>s.jsx("li",{children:b},`${w}-${b}`))})]},`${y}-${g}`))})]})]}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-info"}),"Problemas identificados no arquivo de backup"]}),onCancel:()=>{r(!1)},onAction:()=>{r(!1)}})]})}class dO{constructor(t){this.flowRepository=t}async execute({flowId:t}){if(!t.trim())throw new Error("DiscardFlowChanges: Cannot discard changes of a flow with empty flowId");const r=await this.flowRepository.findById(t);if(!r)throw new Error("DiscardFlowChanges: Flow not found");const a=r.published,o=r.publishedStartNode;await this.flowRepository.updateFlow({...r,draftStartNode:o,draft:a})}}function uO(e){const t=new dO(e);return t.execute.bind(t)}class mO extends S1{constructor(t,n){super(t,n)}}class Mc extends mO{constructor(t){super(t,"PUBLISH_FAILED")}}class fO{constructor(t,n){this.flowRepository=t,this.runningFlowRepository=n}async execute({flowId:t}){if(!t.trim())throw new Error("PublishFlow: Cannot publish a flow with empty flowId");const r=await this.flowRepository.findById(t);if(!r)throw new Error("PublishFlow: Flow not found");const a=r.draft,o=r.draftStartNode,i=r.published,l=r.publishedStartNode,c=o.updatedAt>l.updatedAt,d=a.updatedAt>i.updatedAt,u=this.runningFlowRepository.findByFlowId(t),m=u==null?void 0:u.find(f=>f.status==="running");if(m&&!c)throw new Mc(`Não é possível publicar um fluxo enquanto ele estiver sendo enviado para o contato: ${m.targetUserName}`);if(c&&!d)return await this.flowRepository.updateFlow({...r,publishedStartNode:o});if(m)throw await this.flowRepository.updateFlow({...r,publishedStartNode:o}),new Mc(`As alterações no nó inicial foram publicadas. Porém, não é possível publicar alterações nos itens de um fluxo enquanto ele estiver sendo enviado para o contato: ${m.targetUserName}`);await this.flowRepository.updateFlow({...r,published:a,publishedStartNode:o})}}function pO(e,t){const n=new fO(e,t);return n.execute.bind(n)}class hO{constructor(){pe(this,"runningFlowStore",e2)}addBlockerToFlow(...t){return this.runningFlowStore.addBlockerToFlow(...t)}changeCurrentBlockers(...t){return this.runningFlowStore.changeCurrentBlockers(...t)}findByFlowId(...t){return this.runningFlowStore.findByFlowId(...t)}changeCurrentStepNodeId(...t){return this.runningFlowStore.changeCurrentStepNodeId(...t)}changeStatus(...t){return this.runningFlowStore.changeStatus(...t)}dispatchFlow(...t){return this.runningFlowStore.dispatchFlow(...t)}removeRunningFlow(...t){return this.runningFlowStore.removeRunningFlow(...t)}updateCurrentStep(...t){return this.runningFlowStore.updateCurrentStep(...t)}}class Kr{constructor(){pe(this,"triggerStore",sn)}async add(...t){await this.triggerStore.add(...t)}async checkNewMessage(...t){return await this.triggerStore.checkNewMessage(...t)}async delete(...t){await this.triggerStore.delete(...t)}async findById(...t){return await this.triggerStore.findById(...t)}async findMany(...t){return this.triggerStore.findMany(...t)}async reorderList(...t){return this.triggerStore.reorderList(...t)}async save(...t){await this.triggerStore.save(...t)}async select(...t){await this.triggerStore.select(...t)}async setFilter(...t){await this.triggerStore.setFilter(...t)}}function gO({selectedFlowId:e}){const t=Ue.useGetIsDraftFlow(e),n=new Se,r=new Kr,[a,o]=v.useState(!1),[i,l]=v.useState(""),[c,d]=v.useState([]),[u,m]=v.useState([]),f=pO(n,new hO),p=uO(n);async function g(){try{await p({flowId:e}),ae({title:"Sucesso",description:"Fluxo restaurado com sucesso"})}catch(b){b instanceof Error&&(console.error(b),le({title:"Erro",description:"Um erro inexperado ocorreu, atualize a página ou tente novamente em alguns instantes"}))}}async function x(b=!0){const w=await n.findAll(),j=await n.findById(e);if(j!=null&&j.draftStartNode.enabledTrigger&&b){let N="";const I=w.filter(A=>A.publishedStartNode.enabledTrigger&&A.id!==j.id&&A.publishedStartNode.trigger.keywordRules.find(M=>j.draftStartNode.trigger.keywordRules.find(T=>{let $=!1;for(const P of T.keywords)if($=oc(M,!0,P),$)return N=P,!0;return $}))&&A.published.nodes.length>0?A:null),E=(await r.findMany()).filter(A=>A.isEnabled&&A.keywordRules.length>0&&A.keywordRules.find(M=>j.draftStartNode.trigger.keywordRules.find(T=>{if(T.type==="notContains")return!1;let $=!1;for(const P of T.keywords)if($=oc(M,!0,P),$)return N=P,!0;return $}))?A:null);if(I.length>0||E.length>0){d(I),m(E),l(N),o(!0);return}o(!1)}try{await f({flowId:e}),ae({title:"Sucesso",description:"Fluxo publicado com sucesso"})}catch(N){N instanceof Mc?he({title:"Aviso",description:N.message}):N instanceof Error&&(console.error(N),le({title:"Erro",description:"Um erro inexperado ocorreu, atualize a página ou tente novamente em alguns instantes"}))}}function y(){return t?"show warning":null}return v.useEffect(()=>{window.onbeforeunload=y},[t]),s.jsxs(s.Fragment,{children:[s.jsx(ve,{onCancel:()=>{o(!1)},onAction:()=>{o(!1),x(!1)},action:"Estou ciente, continuar",actionProps:{icon:s.jsx(ar,{}),className:"flex-row-reverse"},description:s.jsxs("div",{className:"divide-y-2",children:[s.jsxs("p",{className:"text-base",children:["O fluxo configurado para disparar quando a palavra chave: '",s.jsxs("b",{children:[" ",i," "]}),"' for encontrada, pode causar o acionamento de outros fluxos ou gatilhos."]}),c.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"mt-2 text-base",children:"Fluxos que podem ser acionados:"}),s.jsx("ul",{className:"mt-2 max-h-14 list-disc divide-y-2 overflow-auto",children:c.map(b=>s.jsx("li",{className:"ml-4 text-base",children:b.published.name},b.id))})]}),u.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"mt-2 text-base",children:"Gatilhos que podem ser acionados:"}),s.jsx("ul",{className:"mt-2 max-h-14 list-disc divide-y-2 overflow-auto",children:u.map(b=>s.jsx("li",{className:"ml-4 text-base",children:b.name},b.id))})]})]}),onOpenChange:()=>{console.log("modal open change")},title:"Atenção",cancel:"Cancelar",open:a}),t&&s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{className:"absolute bottom-3.5 right-0 z-50 mr-48",children:s.jsx(K,{onClick:g,icon:s.jsx(ai,{size:20}),variant:"destructive",childrenVariant:"no-dark",size:"action",disabled:!t,children:"Descartar alterações"})})}),s.jsx(fe,{side:"bottom",className:"max-w-40 bg-destructive text-destructive-foreground",children:"Clique aqui para descartar todas as alterações não publicadas. Essa ação é irreversível!"})]}),s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{className:"absolute bottom-3.5 right-0 z-50 mr-3.5",children:s.jsx(K,{onClick:()=>x(),icon:t?s.jsx(ah,{size:24}):s.jsx(U1,{size:24}),variant:"ghost",childrenVariant:"no-dark",size:"action",disabled:!t,className:Y("flex items-center !bg-transparent text-status-success opacity-100",t&&"!bg-item-funnel/80 text-black hover:text-black"),children:t?"Publicar alterações":"Publicado"})})}),s.jsx(fe,{side:"bottom",className:Y("max-w-40",t&&" bg-item-funnel text-black"),children:t?"Percebemos que você fez algumas alterações no fluxo, clique aqui para publicar suas atualizações antes de enviar para um contato":"O fluxo está atualizado e pronto para o uso"})]})]})}class xO{constructor(t){this.repository=t}async execute({id:t,newName:n}){if(!t||t.trim()==="")throw new Error("RenameFlow: Cannot rename a flow without id");if(!n||n.trim()==="")throw new Error("RenameFlow: Cannot rename a flow without a new name");const r=await this.repository.findById(t);if(!r)throw new Error("RenameFlow: Flow not found");const a={...r.draft,name:n},o={...r.published,name:n};await this.repository.updateFlow({...r,draft:a,published:o})}}function vO(e){const t=new xO(e);return t.execute.bind(t)}function yO({flow:e}){const[t,n]=v.useState(e.published.name),r=vO(new Se),a=vn(new Te);return s.jsx(ve,{className:"md:w-fit",actionProps:{childrenVariant:"no-dark",variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onAction:()=>{r({id:e.id,newName:t}).then(async()=>{await a({optionKey:"flows",optionToUpdate:{id:e.id,name:t,size:await Ne(e)}})}).then(()=>{ae({title:"Sucesso",description:`Fluxo "${e.published.name}" renomeado com sucesso para "${t}".`})},o=>{o instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível renomear o fluxo "${e.published.name}":`,s.jsx("p",{children:" "}),o.message.split(`
`).map((i,l)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:i},l))]}),duration:5e3})})},action:"Renomear",cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"title",className:"max-sm:hidden",children:"Novo nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:$n,value:t,onChange:o=>n(o.target.value),errorMessage:!t.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Renomear fluxo"})]}),trigger:s.jsx(K,{childrenVariant:"no-dark",className:"p-0",icon:s.jsx(Kt,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Editar fluxo"})})}function Re(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Re(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var bO={value:()=>{}};function Yi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bo(n)}function bo(e){this._=e}function wO(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bo.prototype=Yi.prototype={constructor:bo,on:function(e,t){var n=this._,r=wO(e+"",n),a,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((a=(e=r[o]).type)&&(a=jO(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(a=(e=r[o]).type)n[a]=Nf(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Nf(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bo(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,o;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};function jO(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function Nf(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=bO,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Dc="http://www.w3.org/1999/xhtml";const Sf={svg:"http://www.w3.org/2000/svg",xhtml:Dc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Sf.hasOwnProperty(t)?{space:Sf[t],local:e}:e}function NO(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Dc&&t.documentElement.namespaceURI===Dc?t.createElement(e):t.createElementNS(n,e)}}function SO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function n2(e){var t=Xi(e);return(t.local?SO:NO)(t)}function EO(){}function nu(e){return e==null?EO:function(){return this.querySelector(e)}}function CO(e){typeof e!="function"&&(e=nu(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=new Array(i),c,d,u=0;u<i;++u)(c=o[u])&&(d=e.call(c,c.__data__,u,o))&&("__data__"in c&&(d.__data__=c.__data__),l[u]=d);return new $t(r,this._parents)}function IO(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function AO(){return[]}function r2(e){return e==null?AO:function(){return this.querySelectorAll(e)}}function MO(e){return function(){return IO(e.apply(this,arguments))}}function DO(e){typeof e=="function"?e=MO(e):e=r2(e);for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i=t[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&(r.push(e.call(c,c.__data__,d,i)),a.push(c));return new $t(r,a)}function s2(e){return function(){return this.matches(e)}}function a2(e){return function(t){return t.matches(e)}}var kO=Array.prototype.find;function OO(e){return function(){return kO.call(this.children,e)}}function TO(){return this.firstElementChild}function FO(e){return this.select(e==null?TO:OO(typeof e=="function"?e:a2(e)))}var LO=Array.prototype.filter;function PO(){return Array.from(this.children)}function $O(e){return function(){return LO.call(this.children,e)}}function _O(e){return this.selectAll(e==null?PO:$O(typeof e=="function"?e:a2(e)))}function RO(e){typeof e!="function"&&(e=s2(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=[],c,d=0;d<i;++d)(c=o[d])&&e.call(c,c.__data__,d,o)&&l.push(c);return new $t(r,this._parents)}function o2(e){return new Array(e.length)}function VO(){return new $t(this._enter||this._groups.map(o2),this._parents)}function _o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_o.prototype={constructor:_o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function HO(e){return function(){return e}}function BO(e,t,n,r,a,o){for(var i=0,l,c=t.length,d=o.length;i<d;++i)(l=t[i])?(l.__data__=o[i],r[i]=l):n[i]=new _o(e,o[i]);for(;i<c;++i)(l=t[i])&&(a[i]=l)}function zO(e,t,n,r,a,o,i){var l,c,d=new Map,u=t.length,m=o.length,f=new Array(u),p;for(l=0;l<u;++l)(c=t[l])&&(f[l]=p=i.call(c,c.__data__,l,t)+"",d.has(p)?a[l]=c:d.set(p,c));for(l=0;l<m;++l)p=i.call(e,o[l],l,o)+"",(c=d.get(p))?(r[l]=c,c.__data__=o[l],d.delete(p)):n[l]=new _o(e,o[l]);for(l=0;l<u;++l)(c=t[l])&&d.get(f[l])===c&&(a[l]=c)}function ZO(e){return e.__data__}function qO(e,t){if(!arguments.length)return Array.from(this,ZO);var n=t?zO:BO,r=this._parents,a=this._groups;typeof e!="function"&&(e=HO(e));for(var o=a.length,i=new Array(o),l=new Array(o),c=new Array(o),d=0;d<o;++d){var u=r[d],m=a[d],f=m.length,p=WO(e.call(u,u&&u.__data__,d,r)),g=p.length,x=l[d]=new Array(g),y=i[d]=new Array(g),b=c[d]=new Array(f);n(u,m,x,y,b,p,t);for(var w=0,j=0,N,I;w<g;++w)if(N=x[w]){for(w>=j&&(j=w+1);!(I=y[j])&&++j<g;);N._next=I||null}}return i=new $t(i,r),i._enter=l,i._exit=c,i}function WO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UO(){return new $t(this._exit||this._groups.map(o2),this._parents)}function GO(e,t,n){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?o.remove():n(o),r&&a?r.merge(a).order():a}function KO(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),l=new Array(a),c=0;c<i;++c)for(var d=n[c],u=r[c],m=d.length,f=l[c]=new Array(m),p,g=0;g<m;++g)(p=d[g]||u[g])&&(f[g]=p);for(;c<a;++c)l[c]=n[c];return new $t(l,this._parents)}function YO(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;--a>=0;)(i=r[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function XO(e){e||(e=JO);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i=n[o],l=i.length,c=a[o]=new Array(l),d,u=0;u<l;++u)(d=i[u])&&(c[u]=d);c.sort(t)}return new $t(a,this._parents).order()}function JO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function QO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function eT(){return Array.from(this)}function tT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null}function nT(){let e=0;for(const t of this)++e;return e}function rT(){return!this.node()}function sT(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],o=0,i=a.length,l;o<i;++o)(l=a[o])&&e.call(l,l.__data__,o,a);return this}function aT(e){return function(){this.removeAttribute(e)}}function oT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iT(e,t){return function(){this.setAttribute(e,t)}}function lT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function dT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function uT(e,t){var n=Xi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?oT:aT:typeof t=="function"?n.local?dT:cT:n.local?lT:iT)(n,t))}function i2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mT(e){return function(){this.style.removeProperty(e)}}function fT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pT(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function hT(e,t,n){return arguments.length>1?this.each((t==null?mT:typeof t=="function"?pT:fT)(e,t,n??"")):xs(this.node(),e)}function xs(e,t){return e.style.getPropertyValue(t)||i2(e).getComputedStyle(e,null).getPropertyValue(t)}function gT(e){return function(){delete this[e]}}function xT(e,t){return function(){this[e]=t}}function vT(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yT(e,t){return arguments.length>1?this.each((t==null?gT:typeof t=="function"?vT:xT)(e,t)):this.node()[e]}function l2(e){return e.trim().split(/^|\s+/)}function ru(e){return e.classList||new c2(e)}function c2(e){this._node=e,this._names=l2(e.getAttribute("class")||"")}c2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function d2(e,t){for(var n=ru(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function u2(e,t){for(var n=ru(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function bT(e){return function(){d2(this,e)}}function wT(e){return function(){u2(this,e)}}function jT(e,t){return function(){(t.apply(this,arguments)?d2:u2)(this,e)}}function NT(e,t){var n=l2(e+"");if(arguments.length<2){for(var r=ru(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?jT:t?bT:wT)(n,t))}function ST(){this.textContent=""}function ET(e){return function(){this.textContent=e}}function CT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function IT(e){return arguments.length?this.each(e==null?ST:(typeof e=="function"?CT:ET)(e)):this.node().textContent}function AT(){this.innerHTML=""}function MT(e){return function(){this.innerHTML=e}}function DT(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kT(e){return arguments.length?this.each(e==null?AT:(typeof e=="function"?DT:MT)(e)):this.node().innerHTML}function OT(){this.nextSibling&&this.parentNode.appendChild(this)}function TT(){return this.each(OT)}function FT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LT(){return this.each(FT)}function PT(e){var t=typeof e=="function"?e:n2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $T(){return null}function _T(e,t){var n=typeof e=="function"?e:n2(e),r=t==null?$T:typeof t=="function"?t:nu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function RT(){var e=this.parentNode;e&&e.removeChild(this)}function VT(){return this.each(RT)}function HT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zT(e){return this.select(e?BT:HT)}function ZT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qT(e){return function(t){e.call(this,t,this.__data__)}}function WT(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function UT(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,o;n<a;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function GT(e,t,n){return function(){var r=this.__on,a,o=qT(t);if(r){for(var i=0,l=r.length;i<l;++i)if((a=r[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=n),a.value=t;return}}this.addEventListener(e.type,o,n),a={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(a):this.__on=[a]}}function KT(e,t,n){var r=WT(e+""),a,o=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,u;c<d;++c)for(a=0,u=l[c];a<o;++a)if((i=r[a]).type===u.type&&i.name===u.name)return u.value}return}for(l=t?GT:UT,a=0;a<o;++a)this.each(l(r[a],t,n));return this}function m2(e,t,n){var r=i2(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function YT(e,t){return function(){return m2(this,e,t)}}function XT(e,t){return function(){return m2(this,e,t.apply(this,arguments))}}function JT(e,t){return this.each((typeof t=="function"?XT:YT)(e,t))}function*QT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length,i;a<o;++a)(i=r[a])&&(yield i)}var f2=[null];function $t(e,t){this._groups=e,this._parents=t}function Ga(){return new $t([[document.documentElement]],f2)}function eF(){return this}$t.prototype=Ga.prototype={constructor:$t,select:CO,selectAll:DO,selectChild:FO,selectChildren:_O,filter:RO,data:qO,enter:VO,exit:UO,join:GO,merge:KO,selection:eF,order:YO,sort:XO,call:QO,nodes:eT,node:tT,size:nT,empty:rT,each:sT,attr:uT,style:hT,property:yT,classed:NT,text:IT,html:kT,raise:TT,lower:LT,append:PT,insert:_T,remove:VT,clone:zT,datum:ZT,on:KT,dispatch:JT,[Symbol.iterator]:QT};function kt(e){return typeof e=="string"?new $t([[document.querySelector(e)]],[document.documentElement]):new $t([[e]],f2)}function tF(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qt(e,t){if(e=tF(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const nF={passive:!1},ha={capture:!0,passive:!1};function $l(e){e.stopImmediatePropagation()}function is(e){e.preventDefault(),e.stopImmediatePropagation()}function p2(e){var t=e.document.documentElement,n=kt(e).on("dragstart.drag",is,ha);"onselectstart"in t?n.on("selectstart.drag",is,ha):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function h2(e,t){var n=e.document.documentElement,r=kt(e).on("dragstart.drag",null);t&&(r.on("click.drag",is,ha),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ao=e=>()=>e;function kc(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:l,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}kc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function rF(e){return!e.ctrlKey&&!e.button}function sF(){return this.parentNode}function aF(e,t){return t??{x:e.x,y:e.y}}function oF(){return navigator.maxTouchPoints||"ontouchstart"in this}function g2(){var e=rF,t=sF,n=aF,r=oF,a={},o=Yi("start","drag","end"),i=0,l,c,d,u,m=0;function f(N){N.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",b,nF).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(N,I){if(!(u||!e.call(this,N,I))){var S=j(this,t.call(this,N,I),N,I,"mouse");S&&(kt(N.view).on("mousemove.drag",g,ha).on("mouseup.drag",x,ha),p2(N.view),$l(N),d=!1,l=N.clientX,c=N.clientY,S("start",N))}}function g(N){if(is(N),!d){var I=N.clientX-l,S=N.clientY-c;d=I*I+S*S>m}a.mouse("drag",N)}function x(N){kt(N.view).on("mousemove.drag mouseup.drag",null),h2(N.view,d),is(N),a.mouse("end",N)}function y(N,I){if(e.call(this,N,I)){var S=N.changedTouches,E=t.call(this,N,I),A=S.length,O,M;for(O=0;O<A;++O)(M=j(this,E,N,I,S[O].identifier,S[O]))&&($l(N),M("start",N,S[O]))}}function b(N){var I=N.changedTouches,S=I.length,E,A;for(E=0;E<S;++E)(A=a[I[E].identifier])&&(is(N),A("drag",N,I[E]))}function w(N){var I=N.changedTouches,S=I.length,E,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<S;++E)(A=a[I[E].identifier])&&($l(N),A("end",N,I[E]))}function j(N,I,S,E,A,O){var M=o.copy(),T=Qt(O||S,I),$,P,C;if((C=n.call(N,new kc("beforestart",{sourceEvent:S,target:f,identifier:A,active:i,x:T[0],y:T[1],dx:0,dy:0,dispatch:M}),E))!=null)return $=C.x-T[0]||0,P=C.y-T[1]||0,function D(k,L,F){var _=T,H;switch(k){case"start":a[A]=D,H=i++;break;case"end":delete a[A],--i;case"drag":T=Qt(F||L,I),H=i;break}M.call(k,N,new kc(k,{sourceEvent:L,subject:C,target:f,identifier:A,active:H,x:T[0]+$,y:T[1]+P,dx:T[0]-_[0],dy:T[1]-_[1],dispatch:M}),E)}}return f.filter=function(N){return arguments.length?(e=typeof N=="function"?N:ao(!!N),f):e},f.container=function(N){return arguments.length?(t=typeof N=="function"?N:ao(N),f):t},f.subject=function(N){return arguments.length?(n=typeof N=="function"?N:ao(N),f):n},f.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:ao(!!N),f):r},f.on=function(){var N=o.on.apply(o,arguments);return N===o?f:N},f.clickDistance=function(N){return arguments.length?(m=(N=+N)*N,f):Math.sqrt(m)},f}function su(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function x2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ka(){}var ga=.7,Ro=1/ga,ls="\\s*([+-]?\\d+)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iF=/^#([0-9a-f]{3,8})$/,lF=new RegExp(`^rgb\\(${ls},${ls},${ls}\\)$`),cF=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),dF=new RegExp(`^rgba\\(${ls},${ls},${ls},${xa}\\)$`),uF=new RegExp(`^rgba\\(${fn},${fn},${fn},${xa}\\)$`),mF=new RegExp(`^hsl\\(${xa},${fn},${fn}\\)$`),fF=new RegExp(`^hsla\\(${xa},${fn},${fn},${xa}\\)$`),Ef={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};su(Ka,va,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Cf,formatHex:Cf,formatHex8:pF,formatHsl:hF,formatRgb:If,toString:If});function Cf(){return this.rgb().formatHex()}function pF(){return this.rgb().formatHex8()}function hF(){return v2(this).formatHsl()}function If(){return this.rgb().formatRgb()}function va(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iF.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Af(t):n===3?new Et(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lF.exec(e))?new Et(t[1],t[2],t[3],1):(t=cF.exec(e))?new Et(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dF.exec(e))?oo(t[1],t[2],t[3],t[4]):(t=uF.exec(e))?oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mF.exec(e))?kf(t[1],t[2]/100,t[3]/100,1):(t=fF.exec(e))?kf(t[1],t[2]/100,t[3]/100,t[4]):Ef.hasOwnProperty(e)?Af(Ef[e]):e==="transparent"?new Et(NaN,NaN,NaN,0):null}function Af(e){return new Et(e>>16&255,e>>8&255,e&255,1)}function oo(e,t,n,r){return r<=0&&(e=t=n=NaN),new Et(e,t,n,r)}function gF(e){return e instanceof Ka||(e=va(e)),e?(e=e.rgb(),new Et(e.r,e.g,e.b,e.opacity)):new Et}function Oc(e,t,n,r){return arguments.length===1?gF(e):new Et(e,t,n,r??1)}function Et(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}su(Et,Oc,x2(Ka,{brighter(e){return e=e==null?Ro:Math.pow(Ro,e),new Et(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ga:Math.pow(ga,e),new Et(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Et($r(this.r),$r(this.g),$r(this.b),Vo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mf,formatHex:Mf,formatHex8:xF,formatRgb:Df,toString:Df}));function Mf(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}`}function xF(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}${Or((isNaN(this.opacity)?1:this.opacity)*255)}`}function Df(){const e=Vo(this.opacity);return`${e===1?"rgb(":"rgba("}${$r(this.r)}, ${$r(this.g)}, ${$r(this.b)}${e===1?")":`, ${e})`}`}function Vo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $r(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Or(e){return e=$r(e),(e<16?"0":"")+e.toString(16)}function kf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tn(e,t,n,r)}function v2(e){if(e instanceof tn)return new tn(e.h,e.s,e.l,e.opacity);if(e instanceof Ka||(e=va(e)),!e)return new tn;if(e instanceof tn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-a,c=(o+a)/2;return l?(t===o?i=(n-r)/l+(n<r)*6:n===o?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?o+a:2-o-a,i*=60):l=c>0&&c<1?0:i,new tn(i,l,c,e.opacity)}function vF(e,t,n,r){return arguments.length===1?v2(e):new tn(e,t,n,r??1)}function tn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}su(tn,vF,x2(Ka,{brighter(e){return e=e==null?Ro:Math.pow(Ro,e),new tn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ga:Math.pow(ga,e),new tn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Et(_l(e>=240?e-240:e+120,a,r),_l(e,a,r),_l(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new tn(Of(this.h),io(this.s),io(this.l),Vo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vo(this.opacity);return`${e===1?"hsl(":"hsla("}${Of(this.h)}, ${io(this.s)*100}%, ${io(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Of(e){return e=(e||0)%360,e<0?e+360:e}function io(e){return Math.max(0,Math.min(1,e||0))}function _l(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const y2=e=>()=>e;function yF(e,t){return function(n){return e+n*t}}function bF(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wF(e){return(e=+e)==1?b2:function(t,n){return n-t?bF(t,n,e):y2(isNaN(t)?n:t)}}function b2(e,t){var n=t-e;return n?yF(e,n):y2(isNaN(e)?t:e)}const Tf=function e(t){var n=wF(t);function r(a,o){var i=n((a=Oc(a)).r,(o=Oc(o)).r),l=n(a.g,o.g),c=n(a.b,o.b),d=b2(a.opacity,o.opacity);return function(u){return a.r=i(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return r.gamma=e,r}(1);function Jn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Tc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rl=new RegExp(Tc.source,"g");function jF(e){return function(){return e}}function NF(e){return function(t){return e(t)+""}}function SF(e,t){var n=Tc.lastIndex=Rl.lastIndex=0,r,a,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Tc.exec(e))&&(a=Rl.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),l[i]?l[i]+=o:l[++i]=o),(r=r[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Jn(r,a)})),n=Rl.lastIndex;return n<t.length&&(o=t.slice(n),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?NF(c[0].x):jF(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}var Ff=180/Math.PI,Fc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function w2(e,t,n,r,a,o){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*Ff,skewX:Math.atan(c)*Ff,scaleX:i,scaleY:l}}var lo;function EF(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fc:w2(t.a,t.b,t.c,t.d,t.e,t.f)}function CF(e){return e==null||(lo||(lo=document.createElementNS("http://www.w3.org/2000/svg","g")),lo.setAttribute("transform",e),!(e=lo.transform.baseVal.consolidate()))?Fc:(e=e.matrix,w2(e.a,e.b,e.c,e.d,e.e,e.f))}function j2(e,t,n,r){function a(d){return d.length?d.pop()+" ":""}function o(d,u,m,f,p,g){if(d!==m||u!==f){var x=p.push("translate(",null,t,null,n);g.push({i:x-4,x:Jn(d,m)},{i:x-2,x:Jn(u,f)})}else(m||f)&&p.push("translate("+m+t+f+n)}function i(d,u,m,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:m.push(a(m)+"rotate(",null,r)-2,x:Jn(d,u)})):u&&m.push(a(m)+"rotate("+u+r)}function l(d,u,m,f){d!==u?f.push({i:m.push(a(m)+"skewX(",null,r)-2,x:Jn(d,u)}):u&&m.push(a(m)+"skewX("+u+r)}function c(d,u,m,f,p,g){if(d!==m||u!==f){var x=p.push(a(p)+"scale(",null,",",null,")");g.push({i:x-4,x:Jn(d,m)},{i:x-2,x:Jn(u,f)})}else(m!==1||f!==1)&&p.push(a(p)+"scale("+m+","+f+")")}return function(d,u){var m=[],f=[];return d=e(d),u=e(u),o(d.translateX,d.translateY,u.translateX,u.translateY,m,f),i(d.rotate,u.rotate,m,f),l(d.skewX,u.skewX,m,f),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,m,f),d=u=null,function(p){for(var g=-1,x=f.length,y;++g<x;)m[(y=f[g]).i]=y.x(p);return m.join("")}}}var IF=j2(EF,"px, ","px)","deg)"),AF=j2(CF,", ",")",")"),MF=1e-12;function Lf(e){return((e=Math.exp(e))+1/e)/2}function DF(e){return((e=Math.exp(e))-1/e)/2}function kF(e){return((e=Math.exp(2*e))-1)/(e+1)}const OF=function e(t,n,r){function a(o,i){var l=o[0],c=o[1],d=o[2],u=i[0],m=i[1],f=i[2],p=u-l,g=m-c,x=p*p+g*g,y,b;if(x<MF)b=Math.log(f/d)/t,y=function(E){return[l+E*p,c+E*g,d*Math.exp(t*E*b)]};else{var w=Math.sqrt(x),j=(f*f-d*d+r*x)/(2*d*n*w),N=(f*f-d*d-r*x)/(2*f*n*w),I=Math.log(Math.sqrt(j*j+1)-j),S=Math.log(Math.sqrt(N*N+1)-N);b=(S-I)/t,y=function(E){var A=E*b,O=Lf(I),M=d/(n*w)*(O*kF(t*A+I)-DF(I));return[l+M*p,c+M*g,d*O/Lf(t*A+I)]}}return y.duration=b*1e3*t/Math.SQRT2,y}return a.rho=function(o){var i=Math.max(.001,+o),l=i*i,c=l*l;return e(i,l,c)},a}(Math.SQRT2,2,4);var vs=0,Xs=0,Ws=0,N2=1e3,Ho,Js,Bo=0,Hr=0,Ji=0,ya=typeof performance=="object"&&performance.now?performance:Date,S2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function au(){return Hr||(S2(TF),Hr=ya.now()+Ji)}function TF(){Hr=0}function zo(){this._call=this._time=this._next=null}zo.prototype=E2.prototype={constructor:zo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?au():+n)+(t==null?0:+t),!this._next&&Js!==this&&(Js?Js._next=this:Ho=this,Js=this),this._call=e,this._time=n,Lc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lc())}};function E2(e,t,n){var r=new zo;return r.restart(e,t,n),r}function FF(){au(),++vs;for(var e=Ho,t;e;)(t=Hr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vs}function Pf(){Hr=(Bo=ya.now())+Ji,vs=Xs=0;try{FF()}finally{vs=0,PF(),Hr=0}}function LF(){var e=ya.now(),t=e-Bo;t>N2&&(Ji-=t,Bo=e)}function PF(){for(var e,t=Ho,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ho=n);Js=e,Lc(r)}function Lc(e){if(!vs){Xs&&(Xs=clearTimeout(Xs));var t=e-Hr;t>24?(e<1/0&&(Xs=setTimeout(Pf,e-ya.now()-Ji)),Ws&&(Ws=clearInterval(Ws))):(Ws||(Bo=ya.now(),Ws=setInterval(LF,N2)),vs=1,S2(Pf))}}function $f(e,t,n){var r=new zo;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var $F=Yi("start","end","cancel","interrupt"),_F=[],C2=0,_f=1,Pc=2,wo=3,Rf=4,$c=5,jo=6;function Qi(e,t,n,r,a,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;RF(e,n,{name:t,index:r,group:a,on:$F,tween:_F,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:C2})}function ou(e,t){var n=ln(e,t);if(n.state>C2)throw new Error("too late; already scheduled");return n}function wn(e,t){var n=ln(e,t);if(n.state>wo)throw new Error("too late; already running");return n}function ln(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function RF(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=E2(o,0,n.time);function o(d){n.state=_f,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var u,m,f,p;if(n.state!==_f)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===wo)return $f(i);p.state===Rf?(p.state=jo,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=jo,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if($f(function(){n.state===wo&&(n.state=Rf,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Pc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pc){for(n.state=wo,a=new Array(f=n.tween.length),u=0,m=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(a[++m]=p);a.length=m+1}}function l(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=$c,1),m=-1,f=a.length;++m<f;)a[m].call(e,u);n.state===$c&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=jo,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function No(e,t){var n=e.__transition,r,a,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}a=r.state>Pc&&r.state<$c,r.state=jo,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function VF(e){return this.each(function(){No(this,e)})}function HF(e,t){var n,r;return function(){var a=wn(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function BF(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var o=wn(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var l={name:t,value:n},c=0,d=a.length;c<d;++c)if(a[c].name===t){a[c]=l;break}c===d&&a.push(l)}o.tween=a}}function zF(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ln(this.node(),n).tween,a=0,o=r.length,i;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((t==null?HF:BF)(n,e,t))}function iu(e,t,n){var r=e._id;return e.each(function(){var a=wn(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return ln(a,r).value[t]}}function I2(e,t){var n;return(typeof t=="number"?Jn:t instanceof va?Tf:(n=va(t))?(t=n,Tf):SF)(e,t)}function ZF(e){return function(){this.removeAttribute(e)}}function qF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WF(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function UF(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function GF(e,t,n){var r,a,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l)))}}function KF(e,t,n){var r,a,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l)))}}function YF(e,t){var n=Xi(e),r=n==="transform"?AF:I2;return this.attrTween(e,typeof t=="function"?(n.local?KF:GF)(n,r,iu(this,"attr."+e,t)):t==null?(n.local?qF:ZF)(n):(n.local?UF:WF)(n,r,t))}function XF(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function JF(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function QF(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&JF(e,o)),n}return a._value=t,a}function eL(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&XF(e,o)),n}return a._value=t,a}function tL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xi(e);return this.tween(n,(r.local?QF:eL)(r,t))}function nL(e,t){return function(){ou(this,e).delay=+t.apply(this,arguments)}}function rL(e,t){return t=+t,function(){ou(this,e).delay=t}}function sL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nL:rL)(t,e)):ln(this.node(),t).delay}function aL(e,t){return function(){wn(this,e).duration=+t.apply(this,arguments)}}function oL(e,t){return t=+t,function(){wn(this,e).duration=t}}function iL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aL:oL)(t,e)):ln(this.node(),t).duration}function lL(e,t){if(typeof t!="function")throw new Error;return function(){wn(this,e).ease=t}}function cL(e){var t=this._id;return arguments.length?this.each(lL(t,e)):ln(this.node(),t).ease}function dL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wn(this,e).ease=n}}function uL(e){if(typeof e!="function")throw new Error;return this.each(dL(this._id,e))}function mL(e){typeof e!="function"&&(e=s2(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=[],c,d=0;d<i;++d)(c=o[d])&&e.call(c,c.__data__,d,o)&&l.push(c);return new Pn(r,this._parents,this._name,this._id)}function fL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),l=0;l<o;++l)for(var c=t[l],d=n[l],u=c.length,m=i[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||d[p])&&(m[p]=f);for(;l<r;++l)i[l]=t[l];return new Pn(i,this._parents,this._name,this._id)}function pL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hL(e,t,n){var r,a,o=pL(t)?ou:wn;return function(){var i=o(this,e),l=i.on;l!==r&&(a=(r=l).copy()).on(t,n),i.on=a}}function gL(e,t){var n=this._id;return arguments.length<2?ln(this.node(),n).on.on(e):this.each(hL(n,e,t))}function xL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vL(){return this.on("end.remove",xL(this._id))}function yL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nu(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var l=r[i],c=l.length,d=o[i]=new Array(c),u,m,f=0;f<c;++f)(u=l[f])&&(m=e.call(u,u.__data__,f,l))&&("__data__"in u&&(m.__data__=u.__data__),d[f]=m,Qi(d[f],t,n,f,d,ln(u,n)));return new Pn(o,this._parents,t,n)}function bL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=r2(e));for(var r=this._groups,a=r.length,o=[],i=[],l=0;l<a;++l)for(var c=r[l],d=c.length,u,m=0;m<d;++m)if(u=c[m]){for(var f=e.call(u,u.__data__,m,c),p,g=ln(u,n),x=0,y=f.length;x<y;++x)(p=f[x])&&Qi(p,t,n,x,f,g);o.push(f),i.push(u)}return new Pn(o,i,t,n)}var wL=Ga.prototype.constructor;function jL(){return new wL(this._groups,this._parents)}function NL(e,t){var n,r,a;return function(){var o=xs(this,e),i=(this.style.removeProperty(e),xs(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}function A2(e){return function(){this.style.removeProperty(e)}}function SL(e,t,n){var r,a=n+"",o;return function(){var i=xs(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}function EL(e,t,n){var r,a,o;return function(){var i=xs(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),xs(this,e))),i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l))}}function CL(e,t){var n,r,a,o="style."+t,i="end."+o,l;return function(){var c=wn(this,e),d=c.on,u=c.value[o]==null?l||(l=A2(t)):void 0;(d!==n||a!==u)&&(r=(n=d).copy()).on(i,a=u),c.on=r}}function IL(e,t,n){var r=(e+="")=="transform"?IF:I2;return t==null?this.styleTween(e,NL(e,r)).on("end.style."+e,A2(e)):typeof t=="function"?this.styleTween(e,EL(e,r,iu(this,"style."+e,t))).each(CL(this._id,e)):this.styleTween(e,SL(e,r,t),n).on("end.style."+e,null)}function AL(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ML(e,t,n){var r,a;function o(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&AL(e,i,n)),r}return o._value=t,o}function DL(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ML(e,t,n??""))}function kL(e){return function(){this.textContent=e}}function OL(e){return function(){var t=e(this);this.textContent=t??""}}function TL(e){return this.tween("text",typeof e=="function"?OL(iu(this,"text",e)):kL(e==null?"":e+""))}function FL(e){return function(t){this.textContent=e.call(this,t)}}function LL(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&FL(a)),t}return r._value=e,r}function PL(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,LL(e))}function $L(){for(var e=this._name,t=this._id,n=M2(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],l=i.length,c,d=0;d<l;++d)if(c=i[d]){var u=ln(c,t);Qi(c,e,n,d,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Pn(r,this._parents,e,n)}function _L(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var l={value:i},c={value:function(){--a===0&&o()}};n.each(function(){var d=wn(this,r),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),d.on=t}),a===0&&o()})}var RL=0;function Pn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function M2(){return++RL}var En=Ga.prototype;Pn.prototype={constructor:Pn,select:yL,selectAll:bL,selectChild:En.selectChild,selectChildren:En.selectChildren,filter:mL,merge:fL,selection:jL,transition:$L,call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:gL,attr:YF,attrTween:tL,style:IL,styleTween:DL,text:TL,textTween:PL,remove:vL,tween:zF,delay:sL,duration:iL,ease:cL,easeVarying:uL,end:_L,[Symbol.iterator]:En[Symbol.iterator]};function VL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HL={time:null,delay:0,duration:250,ease:VL};function BL(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zL(e){var t,n;e instanceof Pn?(t=e._id,e=e._name):(t=M2(),(n=HL).time=au(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&Qi(c,e,t,d,i,n||BL(c,t));return new Pn(r,this._parents,e,t)}Ga.prototype.interrupt=VF;Ga.prototype.transition=zL;const co=e=>()=>e;function ZL(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function kn(e,t,n){this.k=e,this.x=t,this.y=n}kn.prototype={constructor:kn,scale:function(e){return e===1?this:new kn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var el=new kn(1,0,0);D2.prototype=kn.prototype;function D2(e){for(;!e.__zoom;)if(!(e=e.parentNode))return el;return e.__zoom}function Vl(e){e.stopImmediatePropagation()}function Us(e){e.preventDefault(),e.stopImmediatePropagation()}function qL(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function WL(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vf(){return this.__zoom||el}function UL(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function GL(){return navigator.maxTouchPoints||"ontouchstart"in this}function KL(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function k2(){var e=qL,t=WL,n=KL,r=UL,a=GL,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=OF,d=Yi("start","zoom","end"),u,m,f,p=500,g=150,x=0,y=10;function b(C){C.property("__zoom",Vf).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,D,k,L){var F=C.selection?C.selection():C;F.property("__zoom",Vf),C!==F?I(C,D,k,L):F.interrupt().each(function(){S(this,arguments).event(L).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(C,D,k,L){b.scaleTo(C,function(){var F=this.__zoom.k,_=typeof D=="function"?D.apply(this,arguments):D;return F*_},k,L)},b.scaleTo=function(C,D,k,L){b.transform(C,function(){var F=t.apply(this,arguments),_=this.__zoom,H=k==null?N(F):typeof k=="function"?k.apply(this,arguments):k,q=_.invert(H),z=typeof D=="function"?D.apply(this,arguments):D;return n(j(w(_,z),H,q),F,i)},k,L)},b.translateBy=function(C,D,k,L){b.transform(C,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),i)},null,L)},b.translateTo=function(C,D,k,L,F){b.transform(C,function(){var _=t.apply(this,arguments),H=this.__zoom,q=L==null?N(_):typeof L=="function"?L.apply(this,arguments):L;return n(el.translate(q[0],q[1]).scale(H.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof k=="function"?-k.apply(this,arguments):-k),_,i)},L,F)};function w(C,D){return D=Math.max(o[0],Math.min(o[1],D)),D===C.k?C:new kn(D,C.x,C.y)}function j(C,D,k){var L=D[0]-k[0]*C.k,F=D[1]-k[1]*C.k;return L===C.x&&F===C.y?C:new kn(C.k,L,F)}function N(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function I(C,D,k,L){C.on("start.zoom",function(){S(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(L).end()}).tween("zoom",function(){var F=this,_=arguments,H=S(F,_).event(L),q=t.apply(F,_),z=k==null?N(q):typeof k=="function"?k.apply(F,_):k,V=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),R=F.__zoom,B=typeof D=="function"?D.apply(F,_):D,W=c(R.invert(z).concat(V/R.k),B.invert(z).concat(V/B.k));return function(Z){if(Z===1)Z=B;else{var U=W(Z),ee=V/U[2];Z=new kn(ee,z[0]-U[0]*ee,z[1]-U[1]*ee)}H.zoom(null,Z)}})}function S(C,D,k){return!k&&C.__zooming||new E(C,D)}function E(C,D){this.that=C,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,D),this.taps=0}E.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,D){return this.mouse&&C!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var D=kt(this.that).datum();d.call(C,this.that,new ZL(C,{sourceEvent:this.sourceEvent,target:b,type:C,transform:this.that.__zoom,dispatch:d}),D)}};function A(C,...D){if(!e.apply(this,arguments))return;var k=S(this,D).event(C),L=this.__zoom,F=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),_=Qt(C);if(k.wheel)(k.mouse[0][0]!==_[0]||k.mouse[0][1]!==_[1])&&(k.mouse[1]=L.invert(k.mouse[0]=_)),clearTimeout(k.wheel);else{if(L.k===F)return;k.mouse=[_,L.invert(_)],No(this),k.start()}Us(C),k.wheel=setTimeout(H,g),k.zoom("mouse",n(j(w(L,F),k.mouse[0],k.mouse[1]),k.extent,i));function H(){k.wheel=null,k.end()}}function O(C,...D){if(f||!e.apply(this,arguments))return;var k=C.currentTarget,L=S(this,D,!0).event(C),F=kt(C.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",V,!0),_=Qt(C,k),H=C.clientX,q=C.clientY;p2(C.view),Vl(C),L.mouse=[_,this.__zoom.invert(_)],No(this),L.start();function z(R){if(Us(R),!L.moved){var B=R.clientX-H,W=R.clientY-q;L.moved=B*B+W*W>x}L.event(R).zoom("mouse",n(j(L.that.__zoom,L.mouse[0]=Qt(R,k),L.mouse[1]),L.extent,i))}function V(R){F.on("mousemove.zoom mouseup.zoom",null),h2(R.view,L.moved),Us(R),L.event(R).end()}}function M(C,...D){if(e.apply(this,arguments)){var k=this.__zoom,L=Qt(C.changedTouches?C.changedTouches[0]:C,this),F=k.invert(L),_=k.k*(C.shiftKey?.5:2),H=n(j(w(k,_),L,F),t.apply(this,D),i);Us(C),l>0?kt(this).transition().duration(l).call(I,H,L,C):kt(this).call(b.transform,H,L,C)}}function T(C,...D){if(e.apply(this,arguments)){var k=C.touches,L=k.length,F=S(this,D,C.changedTouches.length===L).event(C),_,H,q,z;for(Vl(C),H=0;H<L;++H)q=k[H],z=Qt(q,this),z=[z,this.__zoom.invert(z),q.identifier],F.touch0?!F.touch1&&F.touch0[2]!==z[2]&&(F.touch1=z,F.taps=0):(F.touch0=z,_=!0,F.taps=1+!!u);u&&(u=clearTimeout(u)),_&&(F.taps<2&&(m=z[0],u=setTimeout(function(){u=null},p)),No(this),F.start())}}function $(C,...D){if(this.__zooming){var k=S(this,D).event(C),L=C.changedTouches,F=L.length,_,H,q,z;for(Us(C),_=0;_<F;++_)H=L[_],q=Qt(H,this),k.touch0&&k.touch0[2]===H.identifier?k.touch0[0]=q:k.touch1&&k.touch1[2]===H.identifier&&(k.touch1[0]=q);if(H=k.that.__zoom,k.touch1){var V=k.touch0[0],R=k.touch0[1],B=k.touch1[0],W=k.touch1[1],Z=(Z=B[0]-V[0])*Z+(Z=B[1]-V[1])*Z,U=(U=W[0]-R[0])*U+(U=W[1]-R[1])*U;H=w(H,Math.sqrt(Z/U)),q=[(V[0]+B[0])/2,(V[1]+B[1])/2],z=[(R[0]+W[0])/2,(R[1]+W[1])/2]}else if(k.touch0)q=k.touch0[0],z=k.touch0[1];else return;k.zoom("touch",n(j(H,q,z),k.extent,i))}}function P(C,...D){if(this.__zooming){var k=S(this,D).event(C),L=C.changedTouches,F=L.length,_,H;for(Vl(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),_=0;_<F;++_)H=L[_],k.touch0&&k.touch0[2]===H.identifier?delete k.touch0:k.touch1&&k.touch1[2]===H.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(H=Qt(H,this),Math.hypot(m[0]-H[0],m[1]-H[1])<y)){var q=kt(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:co(+C),b):r},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:co(!!C),b):e},b.touchable=function(C){return arguments.length?(a=typeof C=="function"?C:co(!!C),b):a},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:co([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(o[0]=+C[0],o[1]=+C[1],b):[o[0],o[1]]},b.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(l=+C,b):l},b.interpolate=function(C){return arguments.length?(c=C,b):c},b.on=function(){var C=d.on.apply(d,arguments);return C===d?b:C},b.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,b):Math.sqrt(x)},b.tapDistance=function(C){return arguments.length?(y=+C,b):y},b}const Hn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},ba=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],O2=["Enter"," ","Escape"];var ys;(function(e){e.Strict="strict",e.Loose="loose"})(ys||(ys={}));var _r;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_r||(_r={}));var wa;(function(e){e.Partial="partial",e.Full="full"})(wa||(wa={}));const T2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Qn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Qn||(Qn={}));var pn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pn||(pn={}));var re;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(re||(re={}));const Hf={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top};function F2(e){return e===null?null:e?"valid":"invalid"}const L2=e=>"id"in e&&"source"in e&&"target"in e,YL=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),lu=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),XL=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(a=>{a.source===e.id&&r.add(a.target)}),t.filter(a=>r.has(a.id))},JL=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(a=>{a.target===e.id&&r.add(a.source)}),t.filter(a=>r.has(a.id))},Ya=(e,t=[0,0])=>{const{width:n,height:r}=Bn(e),a=e.origin??t,o=n*a[0],i=r*a[1];return{x:e.position.x-o,y:e.position.y-i}},QL=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const o=typeof a=="string";let i=!t.nodeLookup&&!o?a:void 0;t.nodeLookup&&(i=o?t.nodeLookup.get(a):lu(a)?a:t.nodeLookup.get(a.id));const l=i?Zo(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return tl(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nl(n)},Os=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const a=Zo(r);n=tl(n,a)}}),nl(n)},P2=(e,t,[n,r,a]=[0,0,1],o=!1,i=!1)=>{const l={...Xa(t,[n,r,a]),width:t.width/a,height:t.height/a},c=[];for(const d of e.values()){const{measured:u,selectable:m=!0,hidden:f=!1}=d;if(i&&!m||f)continue;const p=u.width??d.width??d.initialWidth??null,g=u.height??d.height??d.initialHeight??null,x=ja(l,ws(d)),y=(p??0)*(g??0),b=o&&x>0;(!d.internals.handleBounds||b||x>=y||d.dragging)&&c.push(d)}return c},$2=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function _c(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!r||r.has(a.id))&&n.set(a.id,a)}),n}async function Rc({nodes:e,width:t,height:n,panZoom:r,minZoom:a,maxZoom:o},i){if(e.size===0)return Promise.resolve(!1);const l=Os(e),c=cu(l,t,n,(i==null?void 0:i.minZoom)??a,(i==null?void 0:i.maxZoom)??o,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function _2({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:a,onError:o}){const i=n.get(e),l=i.parentId?n.get(i.parentId):void 0,{x:c,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let m=a;if(i.extent==="parent"&&!i.expandParent)if(!l)o==null||o("005",Hn.error005());else{const p=l.measured.width,g=l.measured.height;p&&g&&(m=[[c,d],[c+p,d+g]])}else l&&js(i.extent)&&(m=[[i.extent[0][0]+c,i.extent[0][1]+d],[i.extent[1][0]+c,i.extent[1][1]+d]]);const f=js(m)?Br(t,m,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-d+i.measured.height*u[1]},positionAbsolute:f}}async function eP({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:a}){const o=new Set(e.map(f=>f.id)),i=[];for(const f of n){if(f.deletable===!1)continue;const p=o.has(f.id),g=!p&&f.parentId&&i.find(x=>x.id===f.parentId);(p||g)&&i.push(f)}const l=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),u=$2(i,c);for(const f of c)l.has(f.id)&&!u.find(g=>g.id===f.id)&&u.push(f);if(!a)return{edges:u,nodes:i};const m=await a({nodes:i,edges:u});return typeof m=="boolean"?m?{edges:u,nodes:i}:{edges:[],nodes:[]}:m}const bs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Br=(e={x:0,y:0},t,n)=>({x:bs(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:bs(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function R2(e,t,n){const{width:r,height:a}=Bn(n),{x:o,y:i}=n.internals.positionAbsolute;return Br(e,[[o,i],[o+r,i+a]],t)}const Bf=(e,t,n)=>e<t?bs(Math.abs(e-t),1,t)/t:e>n?-bs(Math.abs(e-n),1,t)/t:0,V2=(e,t,n=15,r=40)=>{const a=Bf(e.x,r,t.width-r)*n,o=Bf(e.y,r,t.height-r)*n;return[a,o]},tl=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Vc=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),nl=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ws=(e,t=[0,0])=>{var a,o;const{x:n,y:r}=lu(e)?e.internals.positionAbsolute:Ya(e,t);return{x:n,y:r,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Zo=(e,t=[0,0])=>{var a,o;const{x:n,y:r}=lu(e)?e.internals.positionAbsolute:Ya(e,t);return{x:n,y:r,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},H2=(e,t)=>nl(tl(Vc(e),Vc(t))),ja=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},zf=e=>rn(e.width)&&rn(e.height)&&rn(e.x)&&rn(e.y),rn=e=>!isNaN(e)&&isFinite(e),tP=(e,t)=>{},rl=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Xa=({x:e,y:t},[n,r,a],o=!1,i=[1,1])=>{const l={x:(e-n)/a,y:(t-r)/a};return o?rl(l,i):l},B2=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),cu=(e,t,n,r,a,o)=>{const i=t/(e.width*(1+o)),l=n/(e.height*(1+o)),c=Math.min(i,l),d=bs(c,r,a),u=e.x+e.width/2,m=e.y+e.height/2,f=t/2-u*d,p=n/2-m*d;return{x:f,y:p,zoom:d}},qo=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function js(e){return e!==void 0&&e!=="parent"}function Bn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function z2(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Z2(e,t={width:0,height:0},n,r,a){let o=n;const i={...e};for(;o;){const l=r.get(o);if(o=l==null?void 0:l.parentId,l){const c=l.origin||a;i.x+=l.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=l.internals.positionAbsolute.y-(t.height??0)*c[1]}}return i}function na(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){const{x:a,y:o}=On(e),i=Xa({x:a,y:o},r),{x:l,y:c}=n?rl(i,t):i;return{xSnapped:l,ySnapped:c,...i}}const sl=e=>({width:e.offsetWidth,height:e.offsetHeight}),q2=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},nP=["INPUT","SELECT","TEXTAREA"];function Hc(e){var r,a;const t=((a=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:a[0])||e.target;return nP.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const W2=e=>"clientX"in e,On=(e,t)=>{var o,i;const n=W2(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,a=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Zf=(e,t,n,r,a)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:a,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...sl(i)}})};function U2({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:o,targetControlX:i,targetControlY:l}){const c=e*.125+a*.375+i*.375+n*.125,d=t*.125+o*.375+l*.375+r*.125,u=Math.abs(c-e),m=Math.abs(d-t);return[c,d,u,m]}function uo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qf({pos:e,x1:t,y1:n,x2:r,y2:a,c:o}){switch(e){case re.Left:return[t-uo(t-r,o),n];case re.Right:return[t+uo(r-t,o),n];case re.Top:return[t,n-uo(n-a,o)];case re.Bottom:return[t,n+uo(a-n,o)]}}function Ja({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:a,targetPosition:o=re.Top,curvature:i=.25}){const[l,c]=qf({pos:n,x1:e,y1:t,x2:r,y2:a,c:i}),[d,u]=qf({pos:o,x1:r,y1:a,x2:e,y2:t,c:i}),[m,f,p,g]=U2({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${c} ${d},${u} ${r},${a}`,m,f,p,g]}function G2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,o=n<e?n+a:n-a,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[o,l,a,i]}function rP({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:a=!1}){if(!a)return r;const o=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?i:0)}function sP({sourceNode:e,targetNode:t,width:n,height:r,transform:a}){const o=tl(Zo(e),Zo(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const i={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:r/a[2]};return ja(i,nl(o))>0}const aP=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,oP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),K2=(e,t)=>{if(!e.source||!e.target)return t;let n;return L2(e)?n={...e}:n={...e,id:aP(e)},oP(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Y2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,o,i,l]=G2({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,o,i,l]}const Wf={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},iP=({source:e,sourcePosition:t=re.Bottom,target:n})=>t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Uf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lP({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:r=re.Top,center:a,offset:o}){const i=Wf[t],l=Wf[r],c={x:e.x+i.x*o,y:e.y+i.y*o},d={x:n.x+l.x*o,y:n.y+l.y*o},u=iP({source:c,sourcePosition:t,target:d}),m=u.x!==0?"x":"y",f=u[m];let p=[],g,x;const y={x:0,y:0},b={x:0,y:0},[w,j,N,I]=G2({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[m]*l[m]===-1){g=a.x??w,x=a.y??j;const E=[{x:g,y:c.y},{x:g,y:d.y}],A=[{x:c.x,y:x},{x:d.x,y:x}];i[m]===f?p=m==="x"?E:A:p=m==="x"?A:E}else{const E=[{x:c.x,y:d.y}],A=[{x:d.x,y:c.y}];if(m==="x"?p=i.x===f?A:E:p=i.y===f?E:A,t===r){const P=Math.abs(e[m]-n[m]);if(P<=o){const C=Math.min(o-1,o-P);i[m]===f?y[m]=(c[m]>e[m]?-1:1)*C:b[m]=(d[m]>n[m]?-1:1)*C}}if(t!==r){const P=m==="x"?"y":"x",C=i[m]===l[P],D=c[P]>d[P],k=c[P]<d[P];(i[m]===1&&(!C&&D||C&&k)||i[m]!==1&&(!C&&k||C&&D))&&(p=m==="x"?E:A)}const O={x:c.x+y.x,y:c.y+y.y},M={x:d.x+b.x,y:d.y+b.y},T=Math.max(Math.abs(O.x-p[0].x),Math.abs(M.x-p[0].x)),$=Math.max(Math.abs(O.y-p[0].y),Math.abs(M.y-p[0].y));T>=$?(g=(O.x+M.x)/2,x=p[0].y):(g=p[0].x,x=(O.y+M.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...p,{x:d.x+b.x,y:d.y+b.y},n],g,x,N,I]}function cP(e,t,n,r){const a=Math.min(Uf(e,t)/2,Uf(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+a*d},${i}Q ${o},${i} ${o},${i+a*u}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${i+a*c}Q ${o},${i} ${o+a*l},${i}`}function Bc({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:a,targetPosition:o=re.Top,borderRadius:i=5,centerX:l,centerY:c,offset:d=20}){const[u,m,f,p,g]=lP({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:o,center:{x:l,y:c},offset:d});return[u.reduce((y,b,w)=>{let j="";return w>0&&w<u.length-1?j=cP(u[w-1],b,u[w+1],i):j=`${w===0?"M":"L"}${b.x} ${b.y}`,y+=j,y},""),m,f,p,g]}function Gf(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function dP(e){var m;const{sourceNode:t,targetNode:n}=e;if(!Gf(t)||!Gf(n))return null;const r=t.internals.handleBounds||Kf(t.handles),a=n.internals.handleBounds||Kf(n.handles),o=Yf((r==null?void 0:r.source)??[],e.sourceHandle),i=Yf(e.connectionMode===ys.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!o||!i)return(m=e.onError)==null||m.call(e,"008",Hn.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(o==null?void 0:o.position)||re.Bottom,c=(i==null?void 0:i.position)||re.Top,d=Na(t,o,l),u=Na(n,i,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:l,targetPosition:c}}function Kf(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Na(e,t,n=re.Left,r=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:l}=t??Bn(e);if(r)return{x:a+i/2,y:o+l/2};switch((t==null?void 0:t.position)??n){case re.Top:return{x:a+i/2,y:o};case re.Right:return{x:a+i,y:o+l/2};case re.Bottom:return{x:a+i/2,y:o+l};case re.Left:return{x:a,y:o+l/2}}}function Yf(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function zc(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function uP(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:a}){const o=new Set;return e.reduce((i,l)=>([l.markerStart||r,l.markerEnd||a].forEach(c=>{if(c&&typeof c=="object"){const d=zc(c,t);o.has(d)||(i.push({id:d,color:c.color||n,...c}),o.add(d))}}),i),[]).sort((i,l)=>i.id.localeCompare(l.id))}function mP(e,t,n,r,a){let o=.5;a==="start"?o=0:a==="end"&&(o=1);let i=[(e.x+e.width*o)*t.zoom+t.x,e.y*t.zoom+t.y-r],l=[-100*o,-100];switch(n){case re.Right:i=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*o)*t.zoom+t.y],l=[0,-100*o];break;case re.Bottom:i[1]=(e.y+e.height)*t.zoom+t.y+r,l[1]=0;break;case re.Left:i=[e.x*t.zoom+t.x-r,(e.y+e.height*o)*t.zoom+t.y],l=[-100,-100*o];break}return`translate(${i[0]}px, ${i[1]}px) translate(${l[0]}%, ${l[1]}%)`}const du={nodeOrigin:[0,0],nodeExtent:ba,elevateNodesOnSelect:!0,defaults:{}},fP={...du,checkEquality:!0};function uu(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function pP(e,t,n){const r=uu(du,n);for(const a of e.values())if(a.parentId)mu(a,e,t,r);else{const o=Ya(a,r.nodeOrigin),i=js(a.extent)?a.extent:r.nodeExtent,l=Br(o,i,Bn(a));a.internals.positionAbsolute=l}}function Zc(e,t,n,r){var l,c;const a=uu(fP,r),o=new Map(t),i=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let u=o.get(d.id);if(a.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const m=Ya(d,a.nodeOrigin),f=js(d.extent)?d.extent:a.nodeExtent,p=Br(m,f,Bn(d));u={...a.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:d.measured?u==null?void 0:u.internals.handleBounds:void 0,z:X2(d,i),userNode:d}},t.set(d.id,u)}d.parentId&&mu(u,t,n,r)}}function hP(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function mu(e,t,n,r){const{elevateNodesOnSelect:a,nodeOrigin:o,nodeExtent:i}=uu(du,r),l=e.parentId,c=t.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}hP(e,n);const d=a?1e3:0,{x:u,y:m,z:f}=gP(e,c,o,i,d),{positionAbsolute:p}=e.internals,g=u!==p.x||m!==p.y;(g||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:g?{x:u,y:m}:p,z:f})}function X2(e,t){return(rn(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function gP(e,t,n,r,a){const{x:o,y:i}=t.internals.positionAbsolute,l=Bn(e),c=Ya(e,n),d=js(e.extent)?Br(c,e.extent,l):c;let u=Br({x:o+d.x,y:i+d.y},r,l);e.extent==="parent"&&(u=R2(u,l,t));const m=X2(e,a),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>m?f:m}}function fu(e,t,n,r=[0,0]){var i;const a=[],o=new Map;for(const l of e){const c=t.get(l.parentId);if(!c)continue;const d=((i=o.get(l.parentId))==null?void 0:i.expandedRect)??ws(c),u=H2(d,l.rect);o.set(l.parentId,{expandedRect:u,parent:c})}return o.size>0&&o.forEach(({expandedRect:l,parent:c},d)=>{var j;const u=c.internals.positionAbsolute,m=Bn(c),f=c.origin??r,p=l.x<u.x?Math.round(Math.abs(u.x-l.x)):0,g=l.y<u.y?Math.round(Math.abs(u.y-l.y)):0,x=Math.max(m.width,Math.round(l.width)),y=Math.max(m.height,Math.round(l.height)),b=(x-m.width)*f[0],w=(y-m.height)*f[1];(p>0||g>0||b||w)&&(a.push({id:d,type:"position",position:{x:c.position.x-p+b,y:c.position.y-g+w}}),(j=n.get(d))==null||j.forEach(N=>{e.some(I=>I.id===N.id)||a.push({id:N.id,type:"position",position:{x:N.position.x+p,y:N.position.y+g}})})),(m.width<l.width||m.height<l.height||p||g)&&a.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:x+(p?f[0]*p-b:0),height:y+(g?f[1]*g-w:0)}})}),a}function xP(e,t,n,r,a,o){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!i)return{changes:[],updatedInternals:l};const c=[],d=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(d.transform),m=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},l=!0;else{const g=sl(f.nodeElement),x=p.measured.width!==g.width||p.measured.height!==g.height;if(!!(g.width&&g.height&&(x||!p.internals.handleBounds||f.force))){const b=f.nodeElement.getBoundingClientRect(),w=js(p.extent)?p.extent:o;let{positionAbsolute:j}=p.internals;p.parentId&&p.extent==="parent"?j=R2(j,g,t.get(p.parentId)):w&&(j=Br(j,w,g)),p.measured=g,p.internals={...p.internals,positionAbsolute:j,handleBounds:{source:Zf("source",f.nodeElement,b,u,p.id),target:Zf("target",f.nodeElement,b,u,p.id)}},p.parentId&&mu(p,t,n,{nodeOrigin:a}),l=!0,x&&(c.push({id:p.id,type:"dimensions",dimensions:g}),p.expandParent&&p.parentId&&m.push({id:p.id,parentId:p.parentId,rect:ws(p,a)}))}}}if(m.length>0){const f=fu(m,t,n,a);c.push(...f)}return{changes:c,updatedInternals:l}}async function vP({delta:e,panZoom:t,transform:n,translateExtent:r,width:a,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,o]],r),l=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(l)}function J2(e,t,n){e.clear(),t.clear();for(const r of n){const{source:a,target:o,sourceHandle:i=null,targetHandle:l=null}=r,c=`${a}-source-${i}`,d=`${o}-target-${l}`,u=e.get(c)||new Map,m=e.get(d)||new Map,f={edgeId:r.id,source:a,target:o,sourceHandle:i,targetHandle:l};t.set(r.id,r),e.set(c,u.set(`${o}-${l}`,f)),e.set(d,m.set(`${a}-${i}`,f))}}function Q2(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Q2(n,t):!1}function Xf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function yP(e,t,n,r){const a=new Map;for(const[o,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!Q2(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const l=e.get(o);l&&a.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function Hl({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,l;const a=[];for(const[c,d]of t){const u=(i=n.get(c))==null?void 0:i.internals.userNode;u&&a.push({...u,position:d.position,dragging:r})}if(!e)return[a[0],a];const o=n.get(e).internals.userNode;return[{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r},a]}function bP({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:a}){let o={x:null,y:null},i=0,l=new Map,c=!1,d={x:0,y:0},u=null,m=!1,f=null,p=!1;function g({noDragClassName:y,handleSelector:b,domNode:w,isSelectable:j,nodeId:N,nodeClickDistance:I=0}){f=kt(w);function S({x:M,y:T},$){const{nodeLookup:P,nodeExtent:C,snapGrid:D,snapToGrid:k,nodeOrigin:L,onNodeDrag:F,onSelectionDrag:_,onError:H,updateNodePositions:q}=t();o={x:M,y:T};let z=!1,V={x:0,y:0,x2:0,y2:0};if(l.size>1&&C){const R=Os(l);V=Vc(R)}for(const[R,B]of l){if(!P.has(R))continue;let W={x:M-B.distance.x,y:T-B.distance.y};k&&(W=rl(W,D));let Z=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(l.size>1&&C&&!B.extent){const{positionAbsolute:X}=B.internals,te=X.x-V.x+C[0][0],G=X.x+B.measured.width-V.x2+C[1][0],ne=X.y-V.y+C[0][1],ge=X.y+B.measured.height-V.y2+C[1][1];Z=[[te,ne],[G,ge]]}const{position:U,positionAbsolute:ee}=_2({nodeId:R,nextPosition:W,nodeLookup:P,nodeExtent:Z,nodeOrigin:L,onError:H});z=z||B.position.x!==U.x||B.position.y!==U.y,B.position=U,B.internals.positionAbsolute=ee}if(z&&(q(l,!0),$&&(r||F||!N&&_))){const[R,B]=Hl({nodeId:N,dragItems:l,nodeLookup:P});r==null||r($,l,R,B),F==null||F($,R,B),N||_==null||_($,B)}}async function E(){if(!u)return;const{transform:M,panBy:T,autoPanSpeed:$}=t(),[P,C]=V2(d,u,$);(P!==0||C!==0)&&(o.x=(o.x??0)-P/M[2],o.y=(o.y??0)-C/M[2],await T({x:P,y:C})&&S(o,null)),i=requestAnimationFrame(E)}function A(M){var z;const{nodeLookup:T,multiSelectionActive:$,nodesDraggable:P,transform:C,snapGrid:D,snapToGrid:k,selectNodesOnDrag:L,onNodeDragStart:F,onSelectionDragStart:_,unselectNodesAndEdges:H}=t();m=!0,(!L||!j)&&!$&&N&&((z=T.get(N))!=null&&z.selected||H()),j&&L&&N&&(e==null||e(N));const q=na(M.sourceEvent,{transform:C,snapGrid:D,snapToGrid:k});if(o=q,l=yP(T,P,q,N),l.size>0&&(n||F||!N&&_)){const[V,R]=Hl({nodeId:N,dragItems:l,nodeLookup:T});n==null||n(M.sourceEvent,l,V,R),F==null||F(M.sourceEvent,V,R),N||_==null||_(M.sourceEvent,R)}}const O=g2().clickDistance(I).on("start",M=>{const{domNode:T,nodeDragThreshold:$,transform:P,snapGrid:C,snapToGrid:D}=t();p=!1,$===0&&A(M),o=na(M.sourceEvent,{transform:P,snapGrid:C,snapToGrid:D}),u=(T==null?void 0:T.getBoundingClientRect())||null,d=On(M.sourceEvent,u)}).on("drag",M=>{const{autoPanOnNodeDrag:T,transform:$,snapGrid:P,snapToGrid:C,nodeDragThreshold:D,nodeLookup:k}=t(),L=na(M.sourceEvent,{transform:$,snapGrid:P,snapToGrid:C});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||N&&!k.has(N))&&(p=!0),!p){if(!c&&T&&m&&(c=!0,E()),!m){const F=L.xSnapped-(o.x??0),_=L.ySnapped-(o.y??0);Math.sqrt(F*F+_*_)>D&&A(M)}(o.x!==L.xSnapped||o.y!==L.ySnapped)&&l&&m&&(d=On(M.sourceEvent,u),S(L,M.sourceEvent))}}).on("end",M=>{if(!(!m||p)&&(c=!1,m=!1,cancelAnimationFrame(i),l.size>0)){const{nodeLookup:T,updateNodePositions:$,onNodeDragStop:P,onSelectionDragStop:C}=t();if($(l,!1),a||P||!N&&C){const[D,k]=Hl({nodeId:N,dragItems:l,nodeLookup:T,dragging:!1});a==null||a(M.sourceEvent,l,D,k),P==null||P(M.sourceEvent,D,k),N||C==null||C(M.sourceEvent,k)}}}).filter(M=>{const T=M.target;return!M.button&&(!y||!Xf(T,`.${y}`,w))&&(!b||Xf(T,b,w))});f.call(O)}function x(){f==null||f.on(".drag",null)}return{update:g,destroy:x}}function wP(e,t,n){const r=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())ja(a,ws(o))>0&&r.push(o);return r}const jP=250;function NP(e,t,n,r){var l,c;let a=[],o=1/0;const i=wP(e,n,t+jP);for(const d of i){const u=[...((l=d.internals.handleBounds)==null?void 0:l.source)??[],...((c=d.internals.handleBounds)==null?void 0:c.target)??[]];for(const m of u){if(r.nodeId===m.nodeId&&r.type===m.type&&r.id===m.id)continue;const{x:f,y:p}=Na(d,m,m.position,!0),g=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));g>t||(g<o?(a=[{...m,x:f,y:p}],o=g):g===o&&a.push({...m,x:f,y:p}))}}if(!a.length)return null;if(a.length>1){const d=r.type==="source"?"target":"source";return a.find(u=>u.type===d)??a[0]}return a[0]}function ev(e,t,n,r,a,o=!1){var d,u,m;const i=r.get(e);if(!i)return null;const l=a==="strict"?(d=i.internals.handleBounds)==null?void 0:d[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((m=i.internals.handleBounds)==null?void 0:m.target)??[]],c=(n?l==null?void 0:l.find(f=>f.id===n):l==null?void 0:l[0])??null;return c&&o?{...c,...Na(i,c,c.position,!0)}:c}function tv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function SP(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const nv=()=>!0;function EP(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:a,edgeUpdaterType:o,isTarget:i,domNode:l,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:m,panBy:f,cancelConnection:p,onConnectStart:g,onConnect:x,onConnectEnd:y,isValidConnection:b=nv,onReconnectEnd:w,updateConnection:j,getTransform:N,getFromHandle:I,autoPanSpeed:S}){const E=q2(e.target);let A=0,O;const{x:M,y:T}=On(e),$=E==null?void 0:E.elementFromPoint(M,T),P=tv(o,$),C=l==null?void 0:l.getBoundingClientRect();if(!C||!P)return;const D=ev(a,P,r,c,t);if(!D)return;let k=On(e,C),L=!1,F=null,_=!1,H=null;function q(){if(!u||!C)return;const[ee,X]=V2(k,C,S);f({x:ee,y:X}),A=requestAnimationFrame(q)}const z={...D,nodeId:a,type:P,position:D.position},V=c.get(a),B={inProgress:!0,isValid:null,from:Na(V,z,re.Left,!0),fromHandle:z,fromPosition:z.position,fromNode:V,to:k,toHandle:null,toPosition:Hf[z.position],toNode:null};j(B);let W=B;g==null||g(e,{nodeId:a,handleId:r,handleType:P});function Z(ee){if(!I()||!z){U(ee);return}const X=N();k=On(ee,C),O=NP(Xa(k,X,!1,[1,1]),n,c,z),L||(q(),L=!0);const te=rv(ee,{handle:O,connectionMode:t,fromNodeId:a,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:E,lib:d,flowId:m,nodeLookup:c});H=te.handleDomNode,F=te.connection,_=SP(!!O,te.isValid);const G={...W,isValid:_,to:O&&_?B2({x:O.x,y:O.y},X):k,toHandle:te.toHandle,toPosition:_&&te.toHandle?te.toHandle.position:Hf[z.position],toNode:te.toHandle?c.get(te.toHandle.nodeId):null};_&&O&&W.toHandle&&G.toHandle&&W.toHandle.type===G.toHandle.type&&W.toHandle.nodeId===G.toHandle.nodeId&&W.toHandle.id===G.toHandle.id&&W.to.x===G.to.x&&W.to.y===G.to.y||(j(G),W=G)}function U(ee){(O||H)&&F&&_&&(x==null||x(F));const{inProgress:X,...te}=W,G={...te,toPosition:W.toHandle?W.toPosition:null};y==null||y(ee,G),o&&(w==null||w(ee,G)),p(),cancelAnimationFrame(A),L=!1,_=!1,F=null,H=null,E.removeEventListener("mousemove",Z),E.removeEventListener("mouseup",U),E.removeEventListener("touchmove",Z),E.removeEventListener("touchend",U)}E.addEventListener("mousemove",Z),E.addEventListener("mouseup",U),E.addEventListener("touchmove",Z),E.addEventListener("touchend",U)}function rv(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:a,fromType:o,doc:i,lib:l,flowId:c,isValidConnection:d=nv,nodeLookup:u}){const m=o==="target",f=t?i.querySelector(`.${l}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y:g}=On(e),x=i.elementFromPoint(p,g),y=x!=null&&x.classList.contains(`${l}-flow__handle`)?x:f,b={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const w=tv(void 0,y),j=y.getAttribute("data-nodeid"),N=y.getAttribute("data-handleid"),I=y.classList.contains("connectable"),S=y.classList.contains("connectableend");if(!j||!w)return b;const E={source:m?j:r,sourceHandle:m?N:a,target:m?r:j,targetHandle:m?a:N};b.connection=E;const O=I&&S&&(n===ys.Strict?m&&w==="source"||!m&&w==="target":j!==r||N!==a);b.isValid=O&&d(E),b.toHandle=ev(j,w,N,u,n,!1)}return b}const qc={onPointerDown:EP,isValid:rv};function CP({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const a=kt(e);function o({translateExtent:l,width:c,height:d,zoomStep:u=10,pannable:m=!0,zoomable:f=!0,inversePan:p=!1}){const g=j=>{const N=n();if(j.sourceEvent.type!=="wheel"||!t)return;const I=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*u,S=N[2]*Math.pow(2,I);t.scaleTo(S)};let x=[0,0];const y=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(x=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},b=j=>{const N=n();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!t)return;const I=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],S=[I[0]-x[0],I[1]-x[1]];x=I;const E=r()*Math.max(N[2],Math.log(N[2]))*(p?-1:1),A={x:N[0]-S[0]*E,y:N[1]-S[1]*E},O=[[0,0],[c,d]];t.setViewportConstrained({x:A.x,y:A.y,zoom:N[2]},O,l)},w=k2().on("start",y).on("zoom",m?b:null).on("zoom.wheel",f?g:null);a.call(w,{})}function i(){a.on("zoom",null)}return{update:o,destroy:i,pointer:Qt}}const IP=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,al=e=>({x:e.x,y:e.y,zoom:e.k}),Bl=({x:e,y:t,zoom:n})=>el.translate(e,t).scale(n),rs=(e,t)=>e.target.closest(`.${t}`),sv=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),zl=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},av=e=>{const t=e.ctrlKey&&qo()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function AP({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:a,panOnScrollSpeed:o,zoomOnPinch:i,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(rs(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(u.ctrlKey&&i){const y=Qt(u),b=av(u),w=m*Math.pow(2,b);r.scaleTo(n,w,y,u);return}const f=u.deltaMode===1?20:1;let p=a===_r.Vertical?0:u.deltaX*f,g=a===_r.Horizontal?0:u.deltaY*f;!qo()&&u.shiftKey&&a!==_r.Vertical&&(p=u.deltaY*f,g=0),r.translateBy(n,-(p/m)*o,-(g/m)*o,{internal:!0});const x=al(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(u,x)),e.isPanScrolling&&(c==null||c(u,x),e.panScrollTimeout=setTimeout(()=>{d==null||d(u,x),e.isPanScrolling=!1},150))}}function MP({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,a){if(!t&&r.type==="wheel"&&!r.ctrlKey||rs(r,e))return null;r.preventDefault(),n.call(this,r,a)}}function DP({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,i,l;if((o=r.sourceEvent)!=null&&o.internal)return;const a=al(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((l=r.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,a))}}function kP({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:a}){return o=>{var i,l;e.usedRightMouseButton=!!(n&&sv(t,e.mouseButton??0)),(i=o.sourceEvent)!=null&&i.sync||r([o.transform.x,o.transform.y,o.transform.k]),a&&!((l=o.sourceEvent)!=null&&l.internal)&&(a==null||a(o.sourceEvent,al(o.transform)))}}function OP({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:a,onPaneContextMenu:o}){return i=>{var l;if(!((l=i.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,o&&sv(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&o(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),a&&IP(e.prevViewport,i.transform))){const c=al(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(i.sourceEvent,c)},n?150:0)}}}function TP({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:a,zoomOnDoubleClick:o,userSelectionActive:i,noWheelClassName:l,noPanClassName:c,lib:d}){return u=>{var g;const m=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(rs(u,`${d}-flow__node`)||rs(u,`${d}-flow__edge`)))return!0;if(!r&&!m&&!a&&!o&&!n||i||rs(u,l)&&u.type==="wheel"||rs(u,c)&&(u.type!=="wheel"||a&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((g=u.touches)==null?void 0:g.length)>1)return u.preventDefault(),!1;if(!m&&!a&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function FP({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:a,viewport:o,onPanZoom:i,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),f=k2().clickDistance(!rn(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(a),p=kt(e).call(f);j({x:o.x,y:o.y,zoom:bs(o.zoom,t,n)},[[0,0],[m.width,m.height]],a);const g=p.on("wheel.zoom"),x=p.on("dblclick.zoom");f.wheelDelta(av);function y($,P){return p?new Promise(C=>{f==null||f.transform(zl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function b({noWheelClassName:$,noPanClassName:P,onPaneContextMenu:C,userSelectionActive:D,panOnScroll:k,panOnDrag:L,panOnScrollMode:F,panOnScrollSpeed:_,preventScrolling:H,zoomOnPinch:q,zoomOnScroll:z,zoomOnDoubleClick:V,zoomActivationKeyPressed:R,lib:B,onTransformChange:W}){D&&!u.isZoomingOrPanning&&w();const U=k&&!R&&!D?AP({zoomPanValues:u,noWheelClassName:$,d3Selection:p,d3Zoom:f,panOnScrollMode:F,panOnScrollSpeed:_,zoomOnPinch:q,onPanZoomStart:l,onPanZoom:i,onPanZoomEnd:c}):MP({noWheelClassName:$,preventScrolling:H,d3ZoomHandler:g});if(p.on("wheel.zoom",U,{passive:!1}),!D){const X=DP({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:l});f.on("start",X);const te=kP({zoomPanValues:u,panOnDrag:L,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:W});f.on("zoom",te);const G=OP({zoomPanValues:u,panOnDrag:L,panOnScroll:k,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:d});f.on("end",G)}const ee=TP({zoomActivationKeyPressed:R,panOnDrag:L,zoomOnScroll:z,panOnScroll:k,zoomOnDoubleClick:V,zoomOnPinch:q,userSelectionActive:D,noPanClassName:P,noWheelClassName:$,lib:B});f.filter(ee),V?p.on("dblclick.zoom",x):p.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function j($,P,C){const D=Bl($),k=f==null?void 0:f.constrain()(D,P,C);return k&&await y(k),new Promise(L=>L(k))}async function N($,P){const C=Bl($);return await y(C,P),new Promise(D=>D(C))}function I($){if(p){const P=Bl($),C=p.property("__zoom");(C.k!==$.zoom||C.x!==$.x||C.y!==$.y)&&(f==null||f.transform(p,P,null,{sync:!0}))}}function S(){const $=p?D2(p.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function E($,P){return p?new Promise(C=>{f==null||f.scaleTo(zl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function A($,P){return p?new Promise(C=>{f==null||f.scaleBy(zl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function O($){f==null||f.scaleExtent($)}function M($){f==null||f.translateExtent($)}function T($){const P=!rn($)||$<0?0:$;f==null||f.clickDistance(P)}return{update:b,destroy:w,setViewport:N,setViewportConstrained:j,getViewport:S,scaleTo:E,scaleBy:A,setScaleExtent:O,setTranslateExtent:M,syncViewport:I,setClickDistance:T}}var ra;(function(e){e.Line="line",e.Handle="handle"})(ra||(ra={}));function LP({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:a,affectsY:o}){const i=e-t,l=n-r,c=[i>0?1:i<0?-1:0,l>0?1:l<0?-1:0];return i&&a&&(c[0]=c[0]*-1),l&&o&&(c[1]=c[1]*-1),c}function PP(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:a}}function Yn(e,t){return Math.max(0,t-e)}function Xn(e,t){return Math.max(0,e-t)}function mo(e,t,n){return Math.max(0,t-e,e-n)}function Jf(e,t){return e?!t:t}function $P(e,t,n,r,a,o,i,l){let{affectsX:c,affectsY:d}=t;const{isHorizontal:u,isVertical:m}=t,f=u&&m,{xSnapped:p,ySnapped:g}=n,{minWidth:x,maxWidth:y,minHeight:b,maxHeight:w}=r,{x:j,y:N,width:I,height:S,aspectRatio:E}=e;let A=Math.floor(u?p-e.pointerX:0),O=Math.floor(m?g-e.pointerY:0);const M=I+(c?-A:A),T=S+(d?-O:O),$=-o[0]*I,P=-o[1]*S;let C=mo(M,x,y),D=mo(T,b,w);if(i){let F=0,_=0;c&&A<0?F=Yn(j+A+$,i[0][0]):!c&&A>0&&(F=Xn(j+M+$,i[1][0])),d&&O<0?_=Yn(N+O+P,i[0][1]):!d&&O>0&&(_=Xn(N+T+P,i[1][1])),C=Math.max(C,F),D=Math.max(D,_)}if(l){let F=0,_=0;c&&A>0?F=Xn(j+A,l[0][0]):!c&&A<0&&(F=Yn(j+M,l[1][0])),d&&O>0?_=Xn(N+O,l[0][1]):!d&&O<0&&(_=Yn(N+T,l[1][1])),C=Math.max(C,F),D=Math.max(D,_)}if(a){if(u){const F=mo(M/E,b,w)*E;if(C=Math.max(C,F),i){let _=0;!c&&!d||c&&!d&&f?_=Xn(N+P+M/E,i[1][1])*E:_=Yn(N+P+(c?A:-A)/E,i[0][1])*E,C=Math.max(C,_)}if(l){let _=0;!c&&!d||c&&!d&&f?_=Yn(N+M/E,l[1][1])*E:_=Xn(N+(c?A:-A)/E,l[0][1])*E,C=Math.max(C,_)}}if(m){const F=mo(T*E,x,y)/E;if(D=Math.max(D,F),i){let _=0;!c&&!d||d&&!c&&f?_=Xn(j+T*E+$,i[1][0])/E:_=Yn(j+(d?O:-O)*E+$,i[0][0])/E,D=Math.max(D,_)}if(l){let _=0;!c&&!d||d&&!c&&f?_=Yn(j+T*E,l[1][0])/E:_=Xn(j+(d?O:-O)*E,l[0][0])/E,D=Math.max(D,_)}}}O=O+(O<0?D:-D),A=A+(A<0?C:-C),a&&(f?M>T*E?O=(Jf(c,d)?-A:A)/E:A=(Jf(c,d)?-O:O)*E:u?(O=A/E,d=c):(A=O*E,c=d));const k=c?j+A:j,L=d?N+O:N;return{width:I+(c?-A:A),height:S+(d?-O:O),x:o[0]*A*(c?-1:1)+k,y:o[1]*O*(d?-1:1)+L}}const ov={width:0,height:0,x:0,y:0},_P={...ov,pointerX:0,pointerY:0,aspectRatio:1};function RP(e){return[[0,0],[e.measured.width,e.measured.height]]}function VP(e,t,n){const r=t.position.x+e.position.x,a=t.position.y+e.position.y,o=e.measured.width??0,i=e.measured.height??0,l=n[0]*o,c=n[1]*i;return[[r-l,a-c],[r+o-l,a+i-c]]}function HP({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:a}){const o=kt(e);function i({controlPosition:c,boundaries:d,keepAspectRatio:u,onResizeStart:m,onResize:f,onResizeEnd:p,shouldResize:g}){let x={...ov},y={..._P};const b=PP(c);let w,j=[],N,I,S;const E=g2().on("start",A=>{const{nodeLookup:O,transform:M,snapGrid:T,snapToGrid:$,nodeOrigin:P}=n();if(w=O.get(t),!w)return;const{xSnapped:C,ySnapped:D}=na(A.sourceEvent,{transform:M,snapGrid:T,snapToGrid:$});x={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},y={...x,pointerX:C,pointerY:D,aspectRatio:x.width/x.height},N=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(N=O.get(w.parentId),I=N&&w.extent==="parent"?RP(N):void 0),j=[],S=void 0;for(const[k,L]of O)if(L.parentId===t&&(j.push({id:k,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const F=VP(L,w,L.origin??P);S?S=[[Math.min(F[0][0],S[0][0]),Math.min(F[0][1],S[0][1])],[Math.max(F[1][0],S[1][0]),Math.max(F[1][1],S[1][1])]]:S=F}m==null||m(A,{...x})}).on("drag",A=>{const{transform:O,snapGrid:M,snapToGrid:T,nodeOrigin:$}=n(),P=na(A.sourceEvent,{transform:O,snapGrid:M,snapToGrid:T}),C=[];if(!w)return;const{x:D,y:k,width:L,height:F}=x,_={},H=w.origin??$,{width:q,height:z,x:V,y:R}=$P(y,b,P,d,u,H,I,S),B=q!==L,W=z!==F,Z=V!==D&&B,U=R!==k&&W;if(!Z&&!U&&!B&&!W)return;if((Z||U||H[0]===1||H[1]===1)&&(_.x=Z?V:x.x,_.y=U?R:x.y,x.x=_.x,x.y=_.y,j.length>0)){const G=V-D,ne=R-k;for(const ge of j)ge.position={x:ge.position.x-G+H[0]*(q-L),y:ge.position.y-ne+H[1]*(z-F)},C.push(ge)}if((B||W)&&(_.width=B?q:x.width,_.height=W?z:x.height,x.width=_.width,x.height=_.height),N&&w.expandParent){const G=H[0]*(_.width??0);_.x&&_.x<G&&(x.x=G,y.x=y.x-(_.x-G));const ne=H[1]*(_.height??0);_.y&&_.y<ne&&(x.y=ne,y.y=y.y-(_.y-ne))}const ee=LP({width:x.width,prevWidth:L,height:x.height,prevHeight:F,affectsX:b.affectsX,affectsY:b.affectsY}),X={...x,direction:ee};(g==null?void 0:g(A,X))!==!1&&(f==null||f(A,X),r(_,C))}).on("end",A=>{p==null||p(A,{...x}),a==null||a()});o.call(E)}function l(){o.on(".drag",null)}return{update:i,destroy:l}}const{useDebugValue:BP}=h,{useSyncExternalStoreWithSelector:zP}=ey,ZP=e=>e;function iv(e,t=ZP,n){const r=zP(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return BP(r),r}const Qf=(e,t)=>{const n=c1(e),r=(a,o=t)=>iv(n,a,o);return Object.assign(r,n),r},qP=(e,t)=>e?Qf(e,t):Qf;function Fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const ol=v.createContext(null),WP=ol.Provider,lv=Hn.error001();function xe(e,t){const n=v.useContext(ol);if(n===null)throw new Error(lv);return iv(n,e,t)}function ke(){const e=v.useContext(ol);if(e===null)throw new Error(lv);return v.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ep={display:"none"},UP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},cv="react-flow__node-desc",dv="react-flow__edge-desc",GP="react-flow__aria-live",KP=e=>e.ariaLiveMessage;function YP({rfId:e}){const t=xe(KP);return s.jsx("div",{id:`${GP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:UP,children:t})}function XP({rfId:e,disableKeyboardA11y:t}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{id:`${cv}-${e}`,style:ep,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),s.jsx("div",{id:`${dv}-${e}`,style:ep,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&s.jsx(YP,{rfId:e})]})}const JP=e=>e.userSelectionActive?"none":"all";function pu({position:e="top-left",children:t,className:n,style:r,...a}){const o=xe(JP),i=`${e}`.split("-");return s.jsx("div",{className:Re(["react-flow__panel",n,...i]),style:{...r,pointerEvents:o},...a,children:t})}function QP({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:s.jsx(pu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const e$=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},fo=e=>e.id;function t$(e,t){return Fe(e.selectedNodes.map(fo),t.selectedNodes.map(fo))&&Fe(e.selectedEdges.map(fo),t.selectedEdges.map(fo))}function n$({onSelectionChange:e}){const t=ke(),{selectedNodes:n,selectedEdges:r}=xe(e$,t$);return v.useEffect(()=>{const a={nodes:n,edges:r};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(o=>o(a))},[n,r,e]),null}const r$=e=>!!e.onSelectionChangeHandlers;function s$({onSelectionChange:e}){const t=xe(r$);return e||t?s.jsx(n$,{onSelectionChange:e}):null}const uv=[0,0],a$={x:0,y:0,zoom:1},o$=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],tp=[...o$,"rfId"],i$=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),np={translateExtent:ba,nodeOrigin:uv,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function l$(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:a,setTranslateExtent:o,setNodeExtent:i,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=xe(i$,Fe),u=ke();v.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{m.current=np,l()}),[]);const m=v.useRef(np);return v.useEffect(()=>{for(const f of tp){const p=e[f],g=m.current[f];p!==g&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?a(p):f==="translateExtent"?o(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?d(p):f==="fitView"?u.setState({fitViewOnInit:p}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[f]:p})))}m.current=e},tp.map(f=>e[f])),null}function rp(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function c$(e){var r;const[t,n]=v.useState(e==="system"?null:e);return v.useEffect(()=>{if(e!=="system"){n(e);return}const a=rp(),o=()=>n(a!=null&&a.matches?"dark":"light");return o(),a==null||a.addEventListener("change",o),()=>{a==null||a.removeEventListener("change",o)}},[e]),t!==null?t:(r=rp())!=null&&r.matches?"dark":"light"}const sp=typeof document<"u"?document:null;function Sa(e=null,t={target:sp,actInsideInputWithModifier:!0}){const[n,r]=v.useState(!1),a=v.useRef(!1),o=v.useRef(new Set([])),[i,l]=v.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.split("+")),u=d.reduce((m,f)=>m.concat(...f),[]);return[d,u]}return[[],[]]},[e]);return v.useEffect(()=>{const c=(t==null?void 0:t.target)||sp;if(e!==null){const d=f=>{if(a.current=f.ctrlKey||f.metaKey||f.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Hc(f))return!1;const g=op(f.code,l);o.current.add(f[g]),ap(i,o.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Hc(f))return!1;const g=op(f.code,l);ap(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(f[g]),f.key==="Meta"&&o.current.clear(),a.current=!1},m=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[e,r]),n}function ap(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function op(e,t){return t.includes(e)?"code":"key"}const d$=()=>{const e=ke();return v.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,a,o],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??a,zoom:t.zoom??o},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:a,panZoom:o,domNode:i}=e.getState();if(!o||!i)return Promise.resolve(!1);const l=_c(n,t),{width:c,height:d}=sl(i);return Rc({nodes:l,width:c,height:d,minZoom:r,maxZoom:a,panZoom:o},t)},setCenter:async(t,n,r)=>{const{width:a,height:o,maxZoom:i,panZoom:l}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,d=a/2-t*c,u=o/2-n*c;return l?(await l.setViewport({x:d,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:a,minZoom:o,maxZoom:i,panZoom:l}=e.getState(),c=cu(t,r,a,o,i,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:a,domNode:o}=e.getState();if(!o)return t;const{x:i,y:l}=o.getBoundingClientRect(),c={x:t.x-i,y:t.y-l};return Xa(c,r,n.snapToGrid,a)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:a,y:o}=r.getBoundingClientRect(),i=B2(t,n);return{x:i.x+a,y:i.y+o}}}),[])};function mv(e,t){const n=[],r=new Map,a=[];for(const o of e)if(o.type==="add"){a.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const i=r.get(o.id);i?i.push(o):r.set(o.id,[o])}for(const o of t){const i=r.get(o.id);if(!i){n.push(o);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const l={...o};for(const c of i)u$(c,l);n.push(l)}return a.length&&a.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function u$(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function fv(e,t){return mv(e,t)}function pv(e,t){return mv(e,t)}function Mr(e,t){return{id:e,type:"select",selected:t}}function ss(e,t=new Set,n=!1){const r=[];for(const[a,o]of e){const i=t.has(a);!(o.selected===void 0&&!i)&&o.selected!==i&&(n&&(o.selected=i),r.push(Mr(o.id,i)))}return r}function ip({items:e=[],lookup:t}){var a;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,i]of e.entries()){const l=t.get(i.id),c=((a=l==null?void 0:l.internals)==null?void 0:a.userNode)??l;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function lp(e){return{id:e.id,type:"remove"}}const cp=e=>YL(e),m$=e=>L2(e);function hv(e){return v.forwardRef(e)}const f$=typeof window<"u"?v.useLayoutEffect:v.useEffect;function dp(e){const[t,n]=v.useState(!1),[r]=v.useState(()=>p$(()=>n(!0)));return f$(()=>{if(!t){r.reset();return}const a=r.get();a.length&&(e(a),r.reset()),n(!1)},[t]),r}function p$(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const gv=v.createContext(null);function h$({children:e}){const t=ke(),n=v.useCallback(l=>{const{nodes:c=[],setNodes:d,hasDefaultNodes:u,onNodesChange:m,nodeLookup:f}=t.getState();let p=c;for(const g of l)p=typeof g=="function"?g(p):g;u?d(p):m&&m(ip({items:p,lookup:f}))},[]),r=dp(n),a=v.useCallback(l=>{const{edges:c=[],setEdges:d,hasDefaultEdges:u,onEdgesChange:m,edgeLookup:f}=t.getState();let p=c;for(const g of l)p=typeof g=="function"?g(p):g;u?d(p):m&&m(ip({items:p,lookup:f}))},[]),o=dp(a),i=v.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return s.jsx(gv.Provider,{value:i,children:e})}function g$(){const e=v.useContext(gv);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const x$=e=>!!e.panZoom;function yr(){const e=d$(),t=ke(),n=g$(),r=xe(x$),a=v.useMemo(()=>{const o=m=>t.getState().nodeLookup.get(m),i=m=>{n.nodeQueue.push(m)},l=m=>{n.edgeQueue.push(m)},c=m=>{var b,w;const{nodeLookup:f,nodeOrigin:p}=t.getState(),g=cp(m)?m:f.get(m.id),x=g.parentId?Z2(g.position,g.measured,g.parentId,f,p):g.position,y={id:g.id,position:x,width:((b=g.measured)==null?void 0:b.width)??g.width,height:((w=g.measured)==null?void 0:w.height)??g.height,data:g.data};return ws(y)},d=(m,f,p={replace:!1})=>{i(g=>g.map(x=>{if(x.id===m){const y=typeof f=="function"?f(x):f;return p.replace&&cp(y)?y:{...x,...y}}return x}))},u=(m,f,p={replace:!1})=>{l(g=>g.map(x=>{if(x.id===m){const y=typeof f=="function"?f(x):f;return p.replace&&m$(y)?y:{...x,...y}}return x}))};return{getNodes:()=>t.getState().nodes.map(m=>({...m})),getNode:m=>{var f;return(f=o(m))==null?void 0:f.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:m=[]}=t.getState();return m.map(f=>({...f}))},getEdge:m=>t.getState().edgeLookup.get(m),setNodes:i,setEdges:l,addNodes:m=>{const f=Array.isArray(m)?m:[m];n.nodeQueue.push(p=>[...p,...f])},addEdges:m=>{const f=Array.isArray(m)?m:[m];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:m=[],edges:f=[],transform:p}=t.getState(),[g,x,y]=p;return{nodes:m.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:g,y:x,zoom:y}}},deleteElements:async({nodes:m=[],edges:f=[]})=>{const{nodes:p,edges:g,onNodesDelete:x,onEdgesDelete:y,triggerNodeChanges:b,triggerEdgeChanges:w,onDelete:j,onBeforeDelete:N}=t.getState(),{nodes:I,edges:S}=await eP({nodesToRemove:m,edgesToRemove:f,nodes:p,edges:g,onBeforeDelete:N}),E=S.length>0,A=I.length>0;if(E){const O=S.map(lp);y==null||y(S),w(O)}if(A){const O=I.map(lp);x==null||x(I),b(O)}return(A||E)&&(j==null||j({nodes:I,edges:S})),{deletedNodes:I,deletedEdges:S}},getIntersectingNodes:(m,f=!0,p)=>{const g=zf(m),x=g?m:c(m),y=p!==void 0;return x?(p||t.getState().nodes).filter(b=>{const w=t.getState().nodeLookup.get(b.id);if(w&&!g&&(b.id===m.id||!w.internals.positionAbsolute))return!1;const j=ws(y?b:w),N=ja(j,x);return f&&N>0||N>=x.width*x.height}):[]},isNodeIntersecting:(m,f,p=!0)=>{const x=zf(m)?m:c(m);if(!x)return!1;const y=ja(x,f);return p&&y>0||y>=x.width*x.height},updateNode:d,updateNodeData:(m,f,p={replace:!1})=>{d(m,g=>{const x=typeof f=="function"?f(g):f;return p.replace?{...g,data:x}:{...g,data:{...g.data,...x}}},p)},updateEdge:u,updateEdgeData:(m,f,p={replace:!1})=>{u(m,g=>{const x=typeof f=="function"?f(g):f;return p.replace?{...g,data:x}:{...g,data:{...g.data,...x}}},p)},getNodesBounds:m=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return QL(m,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:m,id:f,nodeId:p})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${p}-${m}-${f??null}`))==null?void 0:g.values())??[])}}},[]);return v.useMemo(()=>({...a,...e,viewportInitialized:r}),[r])}const up=e=>e.selected,v$={actInsideInputWithModifier:!1},y$=typeof window<"u"?window:void 0;function b$({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ke(),{deleteElements:r}=yr(),a=Sa(e,v$),o=Sa(t,{target:y$});v.useEffect(()=>{if(a){const{edges:i,nodes:l}=n.getState();r({nodes:l.filter(up),edges:i.filter(up)}),n.setState({nodesSelectionActive:!1})}},[a]),v.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function w$(e){const t=ke();v.useEffect(()=>{const n=()=>{var a,o;if(!e.current)return!1;const r=sl(e.current);(r.height===0||r.width===0)&&((o=(a=t.getState()).onError)==null||o.call(a,"004",Hn.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const il={position:"absolute",width:"100%",height:"100%",top:0,left:0},j$=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function N$({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:o=_r.Free,zoomOnDoubleClick:i=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:d,minZoom:u,maxZoom:m,zoomActivationKeyCode:f,preventScrolling:p=!0,children:g,noWheelClassName:x,noPanClassName:y,onViewportChange:b,isControlledViewport:w,paneClickDistance:j}){const N=ke(),I=v.useRef(null),{userSelectionActive:S,lib:E}=xe(j$,Fe),A=Sa(f),O=v.useRef();w$(I);const M=v.useCallback(T=>{b==null||b({x:T[0],y:T[1],zoom:T[2]}),w||N.setState({transform:T})},[b,w]);return v.useEffect(()=>{if(I.current){O.current=FP({domNode:I.current,minZoom:u,maxZoom:m,translateExtent:d,viewport:c,paneClickDistance:j,onDraggingChange:C=>N.setState({paneDragging:C}),onPanZoomStart:(C,D)=>{const{onViewportChangeStart:k,onMoveStart:L}=N.getState();L==null||L(C,D),k==null||k(D)},onPanZoom:(C,D)=>{const{onViewportChange:k,onMove:L}=N.getState();L==null||L(C,D),k==null||k(D)},onPanZoomEnd:(C,D)=>{const{onViewportChangeEnd:k,onMoveEnd:L}=N.getState();L==null||L(C,D),k==null||k(D)}});const{x:T,y:$,zoom:P}=O.current.getViewport();return N.setState({panZoom:O.current,transform:[T,$,P],domNode:I.current.closest(".react-flow")}),()=>{var C;(C=O.current)==null||C.destroy()}}},[]),v.useEffect(()=>{var T;(T=O.current)==null||T.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:o,zoomOnDoubleClick:i,panOnDrag:l,zoomActivationKeyPressed:A,preventScrolling:p,noPanClassName:y,userSelectionActive:S,noWheelClassName:x,lib:E,onTransformChange:M})},[e,t,n,r,a,o,i,l,A,p,y,S,x,E,M]),s.jsx("div",{className:"react-flow__renderer",ref:I,style:il,children:g})}const S$=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function E$(){const{userSelectionActive:e,userSelectionRect:t}=xe(S$,Fe);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Zl=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},C$=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function I$({isSelecting:e,selectionKeyPressed:t,selectionMode:n=wa.Full,panOnDrag:r,selectionOnDrag:a,onSelectionStart:o,onSelectionEnd:i,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:m,onPaneMouseLeave:f,children:p}){const g=v.useRef(null),x=ke(),y=v.useRef(0),b=v.useRef(0),w=v.useRef(),j=v.useRef(new Map),{userSelectionActive:N,elementsSelectable:I,dragging:S}=xe(C$,Fe),E=I&&(e||N),A=v.useRef(!1),O=v.useRef(!1),M=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,b.current=0},T=F=>{if(A.current){A.current=!1;return}l==null||l(F),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},$=F=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){F.preventDefault();return}c==null||c(F)},P=d?F=>d(F):void 0,C=F=>{var R,B,W,Z;const{resetSelectedElements:_,domNode:H,edgeLookup:q}=x.getState();if(w.current=H==null?void 0:H.getBoundingClientRect(),!I||!e||F.button!==0||F.target!==g.current||!w.current)return;(B=(R=F.target)==null?void 0:R.setPointerCapture)==null||B.call(R,F.pointerId),O.current=!0,A.current=!1,j.current=new Map;for(const[U,ee]of q)j.current.set(ee.source,((W=j.current.get(ee.source))==null?void 0:W.add(U))||new Set([U])),j.current.set(ee.target,((Z=j.current.get(ee.target))==null?void 0:Z.add(U))||new Set([U]));const{x:z,y:V}=On(F.nativeEvent,w.current);_(),x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:V,x:z,y:V}}),o==null||o(F)},D=F=>{const{userSelectionRect:_,edgeLookup:H,transform:q,nodeLookup:z,triggerNodeChanges:V,triggerEdgeChanges:R}=x.getState();if(!w.current||!_)return;A.current=!0;const{x:B,y:W}=On(F.nativeEvent,w.current),{startX:Z,startY:U}=_,ee={startX:Z,startY:U,x:B<Z?B:Z,y:W<U?W:U,width:Math.abs(B-Z),height:Math.abs(W-U)},X=P2(z,ee,q,n===wa.Partial,!0),te=new Set,G=new Set;for(const ne of X){G.add(ne.id);const ge=j.current.get(ne.id);if(ge)for(const Ve of ge)te.add(Ve)}if(y.current!==G.size){y.current=G.size;const ne=ss(z,G,!0);V(ne)}if(b.current!==te.size){b.current=te.size;const ne=ss(H,te);R(ne)}x.setState({userSelectionRect:ee,userSelectionActive:!0,nodesSelectionActive:!1})},k=F=>{var H,q;if(F.button!==0||!O.current)return;(q=(H=F.target)==null?void 0:H.releasePointerCapture)==null||q.call(H,F.pointerId);const{userSelectionRect:_}=x.getState();!N&&_&&F.target===g.current&&(T==null||T(F)),y.current>0&&x.setState({nodesSelectionActive:!0}),M(),i==null||i(F),(t||a)&&(A.current=!1),O.current=!1},L=r===!0||Array.isArray(r)&&r.includes(0);return s.jsxs("div",{className:Re(["react-flow__pane",{draggable:L,dragging:S,selection:e}]),onClick:E?void 0:Zl(T,g),onContextMenu:Zl($,g),onWheel:Zl(P,g),onPointerEnter:E?void 0:u,onPointerDown:E?C:m,onPointerMove:E?D:m,onPointerUp:E?k:void 0,onPointerLeave:f,ref:g,style:il,children:[p,s.jsx(E$,{})]})}function Wc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:o,multiSelectionActive:i,nodeLookup:l,onError:c}=t.getState(),d=l.get(e);if(!d){c==null||c("012",Hn.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&i)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):a([e])}function xv({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:o,nodeClickDistance:i}){const l=ke(),[c,d]=v.useState(!1),u=v.useRef();return v.useEffect(()=>{u.current=bP({getStoreItems:()=>l.getState(),onNodeMouseDown:m=>{Wc({id:m,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),v.useEffect(()=>{var m,f;if(t)(m=u.current)==null||m.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:a,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,o,e,a]),c}const A$=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function vv(){const e=ke();return v.useCallback(n=>{const{nodeExtent:r,snapToGrid:a,snapGrid:o,nodesDraggable:i,onError:l,updateNodePositions:c,nodeLookup:d,nodeOrigin:u}=e.getState(),m=new Map,f=A$(i),p=a?o[0]:5,g=a?o[1]:5,x=n.direction.x*p*n.factor,y=n.direction.y*g*n.factor;for(const[,b]of d){if(!f(b))continue;let w={x:b.internals.positionAbsolute.x+x,y:b.internals.positionAbsolute.y+y};a&&(w=rl(w,o));const{position:j,positionAbsolute:N}=_2({nodeId:b.id,nextPosition:w,nodeLookup:d,nodeExtent:r,nodeOrigin:u,onError:l});b.position=j,b.internals.positionAbsolute=N,m.set(b.id,b)}c(m)},[])}const hu=v.createContext(null),M$=hu.Provider;hu.Consumer;const gu=()=>v.useContext(hu),D$=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),k$=(e,t,n)=>r=>{const{connectionClickStartHandle:a,connectionMode:o,connection:i}=r,{fromHandle:l,toHandle:c,isValid:d}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:u,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:o===ys.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,valid:u&&d}};function O$({type:e="source",position:t=re.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:o=!0,id:i,onConnect:l,children:c,className:d,onMouseDown:u,onTouchStart:m,...f},p){var C,D;const g=i||null,x=e==="target",y=ke(),b=gu(),{connectOnClick:w,noPanClassName:j,rfId:N}=xe(D$,Fe),{connectingFrom:I,connectingTo:S,clickConnecting:E,isPossibleEndHandle:A,connectionInProcess:O,valid:M}=xe(k$(b,g,e),Fe);b||(D=(C=y.getState()).onError)==null||D.call(C,"010",Hn.error010());const T=k=>{const{defaultEdgeOptions:L,onConnect:F,hasDefaultEdges:_}=y.getState(),H={...L,...k};if(_){const{edges:q,setEdges:z}=y.getState();z(K2(H,q))}F==null||F(H),l==null||l(H)},$=k=>{if(!b)return;const L=W2(k.nativeEvent);if(a&&(L&&k.button===0||!L)){const F=y.getState();qc.onPointerDown(k.nativeEvent,{autoPanOnConnect:F.autoPanOnConnect,connectionMode:F.connectionMode,connectionRadius:F.connectionRadius,domNode:F.domNode,nodeLookup:F.nodeLookup,lib:F.lib,isTarget:x,handleId:g,nodeId:b,flowId:F.rfId,panBy:F.panBy,cancelConnection:F.cancelConnection,onConnectStart:F.onConnectStart,onConnectEnd:F.onConnectEnd,updateConnection:F.updateConnection,onConnect:T,isValidConnection:n||F.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:F.autoPanSpeed})}L?u==null||u(k):m==null||m(k)},P=k=>{const{onClickConnectStart:L,onClickConnectEnd:F,connectionClickStartHandle:_,connectionMode:H,isValidConnection:q,lib:z,rfId:V,nodeLookup:R,connection:B}=y.getState();if(!b||!_&&!a)return;if(!_){L==null||L(k.nativeEvent,{nodeId:b,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:b,type:e,id:g}});return}const W=q2(k.target),Z=n||q,{connection:U,isValid:ee}=qc.isValid(k.nativeEvent,{handle:{nodeId:b,id:g,type:e},connectionMode:H,fromNodeId:_.nodeId,fromHandleId:_.id||null,fromType:_.type,isValidConnection:Z,flowId:V,doc:W,lib:z,nodeLookup:R});ee&&U&&T(U);const X=structuredClone(B);delete X.inProgress,X.toPosition=X.toHandle?X.toHandle.position:null,F==null||F(k,X),y.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":t,"data-id":`${N}-${b}-${g}-${e}`,className:Re(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,d,{source:!x,target:x,connectable:r,connectablestart:a,connectableend:o,clickconnecting:E,connectingfrom:I,connectingto:S,valid:M,connectionindicator:r&&(!O||A)&&(O?o:a)}]),onMouseDown:$,onTouchStart:$,onClick:w?P:void 0,ref:p,...f,children:c})}const Ea=v.memo(hv(O$));function T$({data:e,isConnectable:t,sourcePosition:n=re.Bottom}){return s.jsxs(s.Fragment,{children:[e==null?void 0:e.label,s.jsx(Ea,{type:"source",position:n,isConnectable:t})]})}function F$({data:e,isConnectable:t,targetPosition:n=re.Top,sourcePosition:r=re.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(Ea,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,s.jsx(Ea,{type:"source",position:r,isConnectable:t})]})}function L$(){return null}function P$({data:e,isConnectable:t,targetPosition:n=re.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(Ea,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Wo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},mp={input:T$,default:F$,output:P$,group:L$};function $$(e){var t,n,r,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const _$=e=>{const{width:t,height:n,x:r,y:a}=Os(e.nodeLookup,{filter:o=>!!o.selected});return{width:rn(t)?t:null,height:rn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${a}px)`}};function R$({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ke(),{width:a,height:o,transformString:i,userSelectionActive:l}=xe(_$,Fe),c=vv(),d=v.useRef(null);if(v.useEffect(()=>{var f;n||(f=d.current)==null||f.focus({preventScroll:!0})},[n]),xv({nodeRef:d}),l||!a||!o)return null;const u=e?f=>{const p=r.getState().nodes.filter(g=>g.selected);e(f,p)}:void 0,m=f=>{Object.prototype.hasOwnProperty.call(Wo,f.key)&&c({direction:Wo[f.key],factor:f.shiftKey?4:1})};return s.jsx("div",{className:Re(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:s.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:a,height:o}})})}const fp=typeof window<"u"?window:void 0,V$=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function yv({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:d,selectionOnDrag:u,selectionMode:m,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:j,panOnScroll:N,panOnScrollSpeed:I,panOnScrollMode:S,zoomOnDoubleClick:E,panOnDrag:A,defaultViewport:O,translateExtent:M,minZoom:T,maxZoom:$,preventScrolling:P,onSelectionContextMenu:C,noWheelClassName:D,noPanClassName:k,disableKeyboardA11y:L,onViewportChange:F,isControlledViewport:_}){const{nodesSelectionActive:H,userSelectionActive:q}=xe(V$),z=Sa(d,{target:fp}),V=Sa(x,{target:fp}),R=V||A,B=V||N,W=u&&R!==!0,Z=z||q||W;return b$({deleteKeyCode:c,multiSelectionKeyCode:g}),s.jsx(N$,{onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:j,panOnScroll:B,panOnScrollSpeed:I,panOnScrollMode:S,zoomOnDoubleClick:E,panOnDrag:!z&&R,defaultViewport:O,translateExtent:M,minZoom:T,maxZoom:$,zoomActivationKeyCode:y,preventScrolling:P,noWheelClassName:D,noPanClassName:k,onViewportChange:F,isControlledViewport:_,paneClickDistance:l,children:s.jsxs(I$,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:R,isSelecting:!!Z,selectionMode:m,selectionKeyPressed:z,selectionOnDrag:W,children:[e,H&&s.jsx(R$,{onSelectionContextMenu:C,noPanClassName:k,disableKeyboardA11y:L})]})})}yv.displayName="FlowRenderer";const H$=v.memo(yv),B$=e=>t=>e?P2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function z$(e){return xe(v.useCallback(B$(e),[e]),Fe)}const Z$=e=>e.updateNodeInternals;function q$(){const e=xe(Z$),[t]=v.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(a=>{const o=a.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:a.target,force:!0})}),e(r)}));return v.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function W$({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const a=ke(),o=v.useRef(null),i=v.useRef(null),l=v.useRef(e.sourcePosition),c=v.useRef(e.targetPosition),d=v.useRef(t),u=n&&!!e.internals.handleBounds;return v.useEffect(()=>{o.current&&!e.hidden&&(!u||i.current!==o.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(o.current),i.current=o.current)},[u,e.hidden]),v.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),v.useEffect(()=>{if(o.current){const m=d.current!==t,f=l.current!==e.sourcePosition,p=c.current!==e.targetPosition;(m||f||p)&&(d.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function U$({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:a,onContextMenu:o,onDoubleClick:i,nodesDraggable:l,elementsSelectable:c,nodesConnectable:d,nodesFocusable:u,resizeObserver:m,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:g,rfId:x,nodeTypes:y,nodeExtent:b,nodeClickDistance:w,onError:j}){const{node:N,internals:I,isParent:S}=xe(U=>{const ee=U.nodeLookup.get(e),X=U.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:X}},Fe);let E=N.type||"default",A=(y==null?void 0:y[E])||mp[E];A===void 0&&(j==null||j("003",Hn.error003(E)),E="default",A=mp.default);const O=!!(N.draggable||l&&typeof N.draggable>"u"),M=!!(N.selectable||c&&typeof N.selectable>"u"),T=!!(N.connectable||d&&typeof N.connectable>"u"),$=!!(N.focusable||u&&typeof N.focusable>"u"),P=ke(),C=z2(N),D=W$({node:N,nodeType:E,hasDimensions:C,resizeObserver:m}),k=xv({nodeRef:D,disabled:N.hidden||!O,noDragClassName:f,handleSelector:N.dragHandle,nodeId:e,isSelectable:M,nodeClickDistance:w}),L=vv();if(N.hidden)return null;const F=Bn(N),_=$$(N),H=M||O||t||n||r||a,q=n?U=>n(U,{...I.userNode}):void 0,z=r?U=>r(U,{...I.userNode}):void 0,V=a?U=>a(U,{...I.userNode}):void 0,R=o?U=>o(U,{...I.userNode}):void 0,B=i?U=>i(U,{...I.userNode}):void 0,W=U=>{const{selectNodesOnDrag:ee,nodeDragThreshold:X}=P.getState();M&&(!ee||!O||X>0)&&Wc({id:e,store:P,nodeRef:D}),t&&t(U,{...I.userNode})},Z=U=>{if(!(Hc(U.nativeEvent)||g))if(O2.includes(U.key)&&M){const ee=U.key==="Escape";Wc({id:e,store:P,unselect:ee,nodeRef:D})}else O&&N.selected&&Object.prototype.hasOwnProperty.call(Wo,U.key)&&(P.setState({ariaLiveMessage:`Moved selected node ${U.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~I.positionAbsolute.x}, y: ${~~I.positionAbsolute.y}`}),L({direction:Wo[U.key],factor:U.shiftKey?4:1}))};return s.jsx("div",{className:Re(["react-flow__node",`react-flow__node-${E}`,{[p]:O},N.className,{selected:N.selected,selectable:M,parent:S,draggable:O,dragging:k}]),ref:D,style:{zIndex:I.z,transform:`translate(${I.positionAbsolute.x}px,${I.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:C?"visible":"hidden",...N.style,..._},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:q,onMouseMove:z,onMouseLeave:V,onContextMenu:R,onClick:W,onDoubleClick:B,onKeyDown:$?Z:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":g?void 0:`${cv}-${x}`,"aria-label":N.ariaLabel,children:s.jsx(M$,{value:e,children:s.jsx(A,{id:e,data:N.data,type:E,positionAbsoluteX:I.positionAbsolute.x,positionAbsoluteY:I.positionAbsolute.y,selected:N.selected,selectable:M,draggable:O,deletable:N.deletable??!0,isConnectable:T,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:k,dragHandle:N.dragHandle,zIndex:I.z,parentId:N.parentId,...F})})})}const G$=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function bv(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,onError:o}=xe(G$,Fe),i=z$(e.onlyRenderVisibleElements),l=q$();return s.jsx("div",{className:"react-flow__nodes",style:il,children:i.map(c=>s.jsx(U$,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:o},c))})}bv.displayName="NodeRenderer";const K$=v.memo(bv);function Y$(e){return xe(v.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const r=[];if(n.width&&n.height)for(const a of n.edges){const o=n.nodeLookup.get(a.source),i=n.nodeLookup.get(a.target);o&&i&&sP({sourceNode:o,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(a.id)}return r},[e]),Fe)}const X$=({color:e="none",strokeWidth:t=1})=>s.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),J$=({color:e="none",strokeWidth:t=1})=>s.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),pp={[pn.Arrow]:X$,[pn.ArrowClosed]:J$};function Q$(e){const t=ke();return v.useMemo(()=>{var a,o;return Object.prototype.hasOwnProperty.call(pp,e)?pp[e]:((o=(a=t.getState()).onError)==null||o.call(a,"009",Hn.error009(e)),null)},[e])}const e_=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=Q$(t);return c?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0",children:s.jsx(c,{color:n,strokeWidth:i})}):null},wv=({defaultColor:e,rfId:t})=>{const n=xe(o=>o.edges),r=xe(o=>o.defaultEdgeOptions),a=v.useMemo(()=>uP(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return a.length?s.jsx("svg",{className:"react-flow__marker",children:s.jsx("defs",{children:a.map(o=>s.jsx(e_,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};wv.displayName="MarkerDefinitions";var t_=v.memo(wv);function jv({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...u}){const[m,f]=v.useState({x:1,y:0,width:0,height:0}),p=Re(["react-flow__edge-textwrapper",d]),g=v.useRef(null);return v.useEffect(()=>{if(g.current){const x=g.current.getBBox();f({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:s.jsxs("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:p,visibility:m.width?"visible":"hidden",...u,children:[a&&s.jsx("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),s.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:r,children:n}),c]})}jv.displayName="EdgeText";const n_=v.memo(jv);function Ts({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:m,markerStart:f,className:p,interactionWidth:g=20}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:e,style:u,d:t,fill:"none",className:Re(["react-flow__edge-path",p]),markerEnd:m,markerStart:f}),g&&s.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&rn(n)&&rn(r)?s.jsx(n_,{x:n,y:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function hp({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===re.Left||e===re.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function Nv({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:a,targetPosition:o=re.Top}){const[i,l]=hp({pos:n,x1:e,y1:t,x2:r,y2:a}),[c,d]=hp({pos:o,x1:r,y1:a,x2:e,y2:t}),[u,m,f,p]=U2({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${i},${l} ${c},${d} ${r},${a}`,u,m,f,p]}function Sv(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,sourcePosition:i=re.Bottom,targetPosition:l=re.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:y,interactionWidth:b})=>{const[w,j,N]=Nv({sourceX:n,sourceY:r,sourcePosition:i,targetX:a,targetY:o,targetPosition:l}),I=e.isInternal?void 0:t;return s.jsx(Ts,{id:I,path:w,labelX:j,labelY:N,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:y,interactionWidth:b})})}const r_=Sv({isInternal:!1}),Ev=Sv({isInternal:!0});r_.displayName="SimpleBezierEdge";Ev.displayName="SimpleBezierEdgeInternal";function Cv(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:f,sourcePosition:p=re.Bottom,targetPosition:g=re.Top,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:w})=>{const[j,N,I]=Bc({sourceX:n,sourceY:r,sourcePosition:p,targetX:a,targetY:o,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),S=e.isInternal?void 0:t;return s.jsx(Ts,{id:S,path:j,labelX:N,labelY:I,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:f,markerEnd:x,markerStart:y,interactionWidth:w})})}const Iv=Cv({isInternal:!1}),Av=Cv({isInternal:!0});Iv.displayName="SmoothStepEdge";Av.displayName="SmoothStepEdgeInternal";function Mv(e){return v.memo(({id:t,...n})=>{var a;const r=e.isInternal?void 0:t;return s.jsx(Iv,{...n,id:r,pathOptions:v.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const s_=Mv({isInternal:!1}),Dv=Mv({isInternal:!0});s_.displayName="StepEdge";Dv.displayName="StepEdgeInternal";function kv(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:f,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[y,b,w]=Y2({sourceX:n,sourceY:r,targetX:a,targetY:o}),j=e.isInternal?void 0:t;return s.jsx(Ts,{id:j,path:y,labelX:b,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:f,markerEnd:p,markerStart:g,interactionWidth:x})})}const a_=kv({isInternal:!1}),Ov=kv({isInternal:!0});a_.displayName="StraightEdge";Ov.displayName="StraightEdgeInternal";function Tv(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,sourcePosition:i=re.Bottom,targetPosition:l=re.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:w})=>{const[j,N,I]=Ja({sourceX:n,sourceY:r,sourcePosition:i,targetX:a,targetY:o,targetPosition:l,curvature:b==null?void 0:b.curvature}),S=e.isInternal?void 0:t;return s.jsx(Ts,{id:S,path:j,labelX:N,labelY:I,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:y,interactionWidth:w})})}const o_=Tv({isInternal:!1}),Fv=Tv({isInternal:!0});o_.displayName="BezierEdge";Fv.displayName="BezierEdgeInternal";const gp={default:Fv,straight:Ov,step:Dv,smoothstep:Av,simplebezier:Ev},xp={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},i_=(e,t,n)=>n===re.Left?e-t:n===re.Right?e+t:e,l_=(e,t,n)=>n===re.Top?e-t:n===re.Bottom?e+t:e,vp="react-flow__edgeupdater";function yp({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:o,onMouseOut:i,type:l}){return s.jsx("circle",{onMouseDown:a,onMouseEnter:o,onMouseOut:i,className:Re([vp,`${vp}-${l}`]),cx:i_(t,r,e),cy:l_(n,r,e),r,stroke:"transparent",fill:"transparent"})}function c_({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:a,targetX:o,targetY:i,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:m,setReconnecting:f,setUpdateHover:p}){const g=ke(),x=(N,I)=>{if(N.button!==0)return;const{autoPanOnConnect:S,domNode:E,isValidConnection:A,connectionMode:O,connectionRadius:M,lib:T,onConnectStart:$,onConnectEnd:P,cancelConnection:C,nodeLookup:D,rfId:k,panBy:L,updateConnection:F}=g.getState(),_=I.type==="target";f(!0),u==null||u(N,n,I.type);const H=(z,V)=>{f(!1),m==null||m(z,n,I.type,V)},q=z=>d==null?void 0:d(n,z);qc.onPointerDown(N.nativeEvent,{autoPanOnConnect:S,connectionMode:O,connectionRadius:M,domNode:E,handleId:I.id,nodeId:I.nodeId,nodeLookup:D,isTarget:_,edgeUpdaterType:I.type,lib:T,flowId:k,cancelConnection:C,panBy:L,isValidConnection:A,onConnect:q,onConnectStart:$,onConnectEnd:P,onReconnectEnd:H,updateConnection:F,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},y=N=>x(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=N=>x(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>p(!0),j=()=>p(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(yp,{position:l,centerX:r,centerY:a,radius:t,onMouseDown:y,onMouseEnter:w,onMouseOut:j,type:"source"}),(e===!0||e==="target")&&s.jsx(yp,{position:c,centerX:o,centerY:i,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:j,type:"target"})]})}function d_({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:a,onDoubleClick:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,reconnectRadius:u,onReconnect:m,onReconnectStart:f,onReconnectEnd:p,rfId:g,edgeTypes:x,noPanClassName:y,onError:b,disableKeyboardA11y:w}){let j=xe(G=>G.edgeLookup.get(e));const N=xe(G=>G.defaultEdgeOptions);j=N?{...N,...j}:j;let I=j.type||"default",S=(x==null?void 0:x[I])||gp[I];S===void 0&&(b==null||b("011",Hn.error011(I)),I="default",S=gp.default);const E=!!(j.focusable||t&&typeof j.focusable>"u"),A=typeof m<"u"&&(j.reconnectable||n&&typeof j.reconnectable>"u"),O=!!(j.selectable||r&&typeof j.selectable>"u"),M=v.useRef(null),[T,$]=v.useState(!1),[P,C]=v.useState(!1),D=ke(),{zIndex:k,sourceX:L,sourceY:F,targetX:_,targetY:H,sourcePosition:q,targetPosition:z}=xe(v.useCallback(G=>{const ne=G.nodeLookup.get(j.source),ge=G.nodeLookup.get(j.target);if(!ne||!ge)return{zIndex:j.zIndex,...xp};const Ve=dP({id:e,sourceNode:ne,targetNode:ge,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:G.connectionMode,onError:b});return{zIndex:rP({selected:j.selected,zIndex:j.zIndex,sourceNode:ne,targetNode:ge,elevateOnSelect:G.elevateEdgesOnSelect}),...Ve||xp}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Fe),V=v.useMemo(()=>j.markerStart?`url('#${zc(j.markerStart,g)}')`:void 0,[j.markerStart,g]),R=v.useMemo(()=>j.markerEnd?`url('#${zc(j.markerEnd,g)}')`:void 0,[j.markerEnd,g]);if(j.hidden||L===null||F===null||_===null||H===null)return null;const B=G=>{var He;const{addSelectedEdges:ne,unselectNodesAndEdges:ge,multiSelectionActive:Ve}=D.getState();O&&(D.setState({nodesSelectionActive:!1}),j.selected&&Ve?(ge({nodes:[],edges:[j]}),(He=M.current)==null||He.blur()):ne([e])),a&&a(G,j)},W=o?G=>{o(G,{...j})}:void 0,Z=i?G=>{i(G,{...j})}:void 0,U=l?G=>{l(G,{...j})}:void 0,ee=c?G=>{c(G,{...j})}:void 0,X=d?G=>{d(G,{...j})}:void 0,te=G=>{var ne;if(!w&&O2.includes(G.key)&&O){const{unselectNodesAndEdges:ge,addSelectedEdges:Ve}=D.getState();G.key==="Escape"?((ne=M.current)==null||ne.blur(),ge({edges:[j]})):Ve([e])}};return s.jsx("svg",{style:{zIndex:k},children:s.jsxs("g",{className:Re(["react-flow__edge",`react-flow__edge-${I}`,j.className,y,{selected:j.selected,animated:j.animated,inactive:!O&&!a,updating:T,selectable:O}]),onClick:B,onDoubleClick:W,onContextMenu:Z,onMouseEnter:U,onMouseMove:ee,onMouseLeave:X,onKeyDown:E?te:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":E?`${dv}-${g}`:void 0,ref:M,children:[!P&&s.jsx(S,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:O,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:L,sourceY:F,targetX:_,targetY:H,sourcePosition:q,targetPosition:z,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:V,markerEnd:R,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),A&&s.jsx(c_,{edge:j,isReconnectable:A,reconnectRadius:u,onReconnect:m,onReconnectStart:f,onReconnectEnd:p,sourceX:L,sourceY:F,targetX:_,targetY:H,sourcePosition:q,targetPosition:z,setUpdateHover:$,setReconnecting:C})]})})}const u_=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Lv({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:a,onReconnect:o,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:u,reconnectRadius:m,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:g,disableKeyboardA11y:x}){const{edgesFocusable:y,edgesReconnectable:b,elementsSelectable:w,onError:j}=xe(u_,Fe),N=Y$(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(t_,{defaultColor:e,rfId:n}),N.map(I=>s.jsx(d_,{id:I,edgesFocusable:y,edgesReconnectable:b,elementsSelectable:w,noPanClassName:a,onReconnect:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:u,reconnectRadius:m,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:g,rfId:n,onError:j,edgeTypes:r,disableKeyboardA11y:x},I))]})}Lv.displayName="EdgeRenderer";const m_=v.memo(Lv),f_=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function p_({children:e}){const t=xe(f_);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function h_(e){const t=yr(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const g_=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function x_(e){const t=xe(g_),n=ke();return v.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function v_(e){return e.connection.inProgress?{...e.connection,to:Xa(e.connection.to,e.transform)}:{...e.connection}}function y_(e){return v_}function Pv(e){const t=y_();return xe(t,Fe)}const b_=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function w_({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:a,width:o,height:i,isValid:l,inProgress:c}=xe(b_,Fe);return!(o&&a&&c)?null:s.jsx("svg",{style:e,width:o,height:i,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:Re(["react-flow__connection",F2(l)]),children:s.jsx($v,{style:t,type:n,CustomComponent:r,isValid:l})})})}const $v=({style:e,type:t=Qn.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:a,from:o,fromNode:i,fromHandle:l,fromPosition:c,to:d,toNode:u,toHandle:m,toPosition:f}=Pv();if(!a)return;if(n)return s.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:l,fromX:o.x,fromY:o.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:f,connectionStatus:F2(r),toNode:u,toHandle:m});let p="";const g={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:f};switch(t){case Qn.Bezier:[p]=Ja(g);break;case Qn.SimpleBezier:[p]=Nv(g);break;case Qn.Step:[p]=Bc({...g,borderRadius:0});break;case Qn.SmoothStep:[p]=Bc(g);break;default:[p]=Y2(g)}return s.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};$v.displayName="ConnectionLine";const j_={};function bp(e=j_){v.useRef(e),ke(),v.useEffect(()=>{},[e])}function N_(){ke(),v.useRef(!1),v.useEffect(()=>{},[])}function _v({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:o,onEdgeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,onSelectionContextMenu:m,onSelectionStart:f,onSelectionEnd:p,connectionLineType:g,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,multiSelectionKeyCode:I,panActivationKeyCode:S,zoomActivationKeyCode:E,deleteKeyCode:A,onlyRenderVisibleElements:O,elementsSelectable:M,defaultViewport:T,translateExtent:$,minZoom:P,maxZoom:C,preventScrolling:D,defaultMarkerColor:k,zoomOnScroll:L,zoomOnPinch:F,panOnScroll:_,panOnScrollSpeed:H,panOnScrollMode:q,zoomOnDoubleClick:z,panOnDrag:V,onPaneClick:R,onPaneMouseEnter:B,onPaneMouseMove:W,onPaneMouseLeave:Z,onPaneScroll:U,onPaneContextMenu:ee,paneClickDistance:X,nodeClickDistance:te,onEdgeContextMenu:G,onEdgeMouseEnter:ne,onEdgeMouseMove:ge,onEdgeMouseLeave:Ve,reconnectRadius:He,onReconnect:ot,onReconnectStart:qn,onReconnectEnd:Sn,noDragClassName:ce,noWheelClassName:At,noPanClassName:Wn,disableKeyboardA11y:dn,nodeExtent:J,rfId:oe,viewport:Ie,onViewportChange:Oe}){return bp(e),bp(t),N_(),h_(n),x_(Ie),s.jsx(H$,{onPaneClick:R,onPaneMouseEnter:B,onPaneMouseMove:W,onPaneMouseLeave:Z,onPaneContextMenu:ee,onPaneScroll:U,paneClickDistance:X,deleteKeyCode:A,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:I,panActivationKeyCode:S,zoomActivationKeyCode:E,elementsSelectable:M,zoomOnScroll:L,zoomOnPinch:F,zoomOnDoubleClick:z,panOnScroll:_,panOnScrollSpeed:H,panOnScrollMode:q,panOnDrag:V,defaultViewport:T,translateExtent:$,minZoom:P,maxZoom:C,onSelectionContextMenu:m,preventScrolling:D,noDragClassName:ce,noWheelClassName:At,noPanClassName:Wn,disableKeyboardA11y:dn,onViewportChange:Oe,isControlledViewport:!!Ie,children:s.jsxs(p_,{children:[s.jsx(m_,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:i,onReconnect:ot,onReconnectStart:qn,onReconnectEnd:Sn,onlyRenderVisibleElements:O,onEdgeContextMenu:G,onEdgeMouseEnter:ne,onEdgeMouseMove:ge,onEdgeMouseLeave:Ve,reconnectRadius:He,defaultMarkerColor:k,noPanClassName:Wn,disableKeyboardA11y:dn,rfId:oe}),s.jsx(w_,{style:x,type:g,component:y,containerStyle:b}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(K$,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,nodeClickDistance:te,onlyRenderVisibleElements:O,noPanClassName:Wn,noDragClassName:ce,disableKeyboardA11y:dn,nodeExtent:J,rfId:oe}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}_v.displayName="GraphView";const S_=v.memo(_v),wp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:i,nodeOrigin:l,nodeExtent:c}={})=>{const d=new Map,u=new Map,m=new Map,f=new Map,p=r??t??[],g=n??e??[],x=l??[0,0],y=c??ba;J2(m,f,p),Zc(g,d,u,{nodeOrigin:x,nodeExtent:y,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&a&&o){const w=Os(d,{filter:S=>!!((S.width||S.initialWidth)&&(S.height||S.initialHeight))}),{x:j,y:N,zoom:I}=cu(w,a,o,.5,2,.1);b=[j,N,I]}return{rfId:"1",width:0,height:0,transform:b,nodes:g,nodeLookup:d,parentLookup:u,edges:p,edgeLookup:f,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:ba,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ys.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...T2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:tP,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},E_=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:i,nodeOrigin:l,nodeExtent:c})=>qP((d,u)=>({...wp({nodes:e,edges:t,width:a,height:o,fitView:i,nodeOrigin:l,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:m=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:g,elevateNodesOnSelect:x}=u();Zc(m,f,p,{nodeOrigin:g,nodeExtent:c,elevateNodesOnSelect:x,checkEquality:!0}),d({nodes:m})},setEdges:m=>{const{connectionLookup:f,edgeLookup:p}=u();J2(f,p,m),d({edges:m})},setDefaultNodesAndEdges:(m,f)=>{if(m){const{setNodes:p}=u();p(m),d({hasDefaultNodes:!0})}if(f){const{setEdges:p}=u();p(f),d({hasDefaultEdges:!0})}},updateNodeInternals:(m,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:g,parentLookup:x,fitViewOnInit:y,fitViewDone:b,fitViewOnInitOptions:w,domNode:j,nodeOrigin:N,nodeExtent:I,debug:S,fitViewSync:E}=u(),{changes:A,updatedInternals:O}=xP(m,g,x,j,N,I);if(O){if(pP(g,x,{nodeOrigin:N,nodeExtent:I}),f.triggerFitView){let M=b;!b&&y&&(M=E({...w,nodes:w==null?void 0:w.nodes})),d({fitViewDone:M})}else d({});(A==null?void 0:A.length)>0&&(S&&console.log("React Flow: trigger node changes",A),p==null||p(A))}},updateNodePositions:(m,f=!1)=>{const p=[],g=[];for(const[x,y]of m){const b={id:x,type:"position",position:y.position,dragging:f};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&b.position&&(p.push({id:x,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),g.push(b)}if(p.length>0){const{nodeLookup:x,parentLookup:y,nodeOrigin:b}=u(),w=fu(p,x,y,b);g.push(...w)}u().triggerNodeChanges(g)},triggerNodeChanges:m=>{const{onNodesChange:f,setNodes:p,nodes:g,hasDefaultNodes:x,debug:y}=u();if(m!=null&&m.length){if(x){const b=fv(m,g);p(b)}y&&console.log("React Flow: trigger node changes",m),f==null||f(m)}},triggerEdgeChanges:m=>{const{onEdgesChange:f,setEdges:p,edges:g,hasDefaultEdges:x,debug:y}=u();if(m!=null&&m.length){if(x){const b=pv(m,g);p(b)}y&&console.log("React Flow: trigger edge changes",m),f==null||f(m)}},addSelectedNodes:m=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:g,triggerNodeChanges:x,triggerEdgeChanges:y}=u();if(f){const b=m.map(w=>Mr(w,!0));x(b);return}x(ss(g,new Set([...m]),!0)),y(ss(p))},addSelectedEdges:m=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:g,triggerNodeChanges:x,triggerEdgeChanges:y}=u();if(f){const b=m.map(w=>Mr(w,!0));y(b);return}y(ss(p,new Set([...m]))),x(ss(g,new Set,!0))},unselectNodesAndEdges:({nodes:m,edges:f}={})=>{const{edges:p,nodes:g,nodeLookup:x,triggerNodeChanges:y,triggerEdgeChanges:b}=u(),w=m||g,j=f||p,N=w.map(S=>{const E=x.get(S.id);return E&&(E.selected=!1),Mr(S.id,!1)}),I=j.map(S=>Mr(S.id,!1));y(N),b(I)},setMinZoom:m=>{const{panZoom:f,maxZoom:p}=u();f==null||f.setScaleExtent([m,p]),d({minZoom:m})},setMaxZoom:m=>{const{panZoom:f,minZoom:p}=u();f==null||f.setScaleExtent([p,m]),d({maxZoom:m})},setTranslateExtent:m=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(m),d({translateExtent:m})},setPaneClickDistance:m=>{var f;(f=u().panZoom)==null||f.setClickDistance(m)},resetSelectedElements:()=>{const{edges:m,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:g}=u(),x=f.reduce((b,w)=>w.selected?[...b,Mr(w.id,!1)]:b,[]),y=m.reduce((b,w)=>w.selected?[...b,Mr(w.id,!1)]:b,[]);p(x),g(y)},setNodeExtent:m=>{const{nodes:f,nodeLookup:p,parentLookup:g,nodeOrigin:x,elevateNodesOnSelect:y,nodeExtent:b}=u();m[0][0]===b[0][0]&&m[0][1]===b[0][1]&&m[1][0]===b[1][0]&&m[1][1]===b[1][1]||(Zc(f,p,g,{nodeOrigin:x,nodeExtent:m,elevateNodesOnSelect:y,checkEquality:!1}),d({nodeExtent:m}))},panBy:m=>{const{transform:f,width:p,height:g,panZoom:x,translateExtent:y}=u();return vP({delta:m,panZoom:x,transform:f,translateExtent:y,width:p,height:g})},fitView:m=>{const{panZoom:f,width:p,height:g,minZoom:x,maxZoom:y,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const w=_c(b,m);return Rc({nodes:w,width:p,height:g,panZoom:f,minZoom:x,maxZoom:y},m)},fitViewSync:m=>{const{panZoom:f,width:p,height:g,minZoom:x,maxZoom:y,nodeLookup:b}=u();if(!f)return!1;const w=_c(b,m);return Rc({nodes:w,width:p,height:g,panZoom:f,minZoom:x,maxZoom:y},m),w.size>0},cancelConnection:()=>{d({connection:{...T2}})},updateConnection:m=>{d({connection:m})},reset:()=>d({...wp()})}),Object.is);function Rv({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:a,initialHeight:o,fitView:i,nodeOrigin:l,nodeExtent:c,children:d}){const[u]=v.useState(()=>E_({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:i,nodeOrigin:l,nodeExtent:c}));return s.jsx(WP,{value:u,children:s.jsx(h$,{children:d})})}function C_({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:i,fitView:l,nodeOrigin:c,nodeExtent:d}){return v.useContext(ol)?s.jsx(s.Fragment,{children:e}):s.jsx(Rv,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:a,initialWidth:o,initialHeight:i,fitView:l,nodeOrigin:c,nodeExtent:d,children:e})}const I_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function A_({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:o,edgeTypes:i,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:u,onMoveStart:m,onMoveEnd:f,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:b,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:I,onNodeDoubleClick:S,onNodeDragStart:E,onNodeDrag:A,onNodeDragStop:O,onNodesDelete:M,onEdgesDelete:T,onDelete:$,onSelectionChange:P,onSelectionDragStart:C,onSelectionDrag:D,onSelectionDragStop:k,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:_,onBeforeDelete:H,connectionMode:q,connectionLineType:z=Qn.Bezier,connectionLineStyle:V,connectionLineComponent:R,connectionLineContainerStyle:B,deleteKeyCode:W="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:U=!1,selectionMode:ee=wa.Full,panActivationKeyCode:X="Space",multiSelectionKeyCode:te=qo()?"Meta":"Control",zoomActivationKeyCode:G=qo()?"Meta":"Control",snapToGrid:ne,snapGrid:ge,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:He,nodesDraggable:ot,nodesConnectable:qn,nodesFocusable:Sn,nodeOrigin:ce=uv,edgesFocusable:At,edgesReconnectable:Wn,elementsSelectable:dn=!0,defaultViewport:J=a$,minZoom:oe=.5,maxZoom:Ie=2,translateExtent:Oe=ba,preventScrolling:qe=!0,nodeExtent:Vt,defaultMarkerColor:Un="#b1b1b7",zoomOnScroll:Ls=!0,zoomOnPinch:Ps=!0,panOnScroll:$s=!1,panOnScrollSpeed:Qr=.5,panOnScrollMode:_s=_r.Free,zoomOnDoubleClick:Rs=!0,panOnDrag:Vs=!0,onPaneClick:Hs,onPaneMouseEnter:bl,onPaneMouseMove:e6,onPaneMouseLeave:t6,onPaneScroll:n6,onPaneContextMenu:r6,paneClickDistance:Tu=0,nodeClickDistance:s6=0,children:a6,onReconnect:o6,onReconnectStart:i6,onReconnectEnd:l6,onEdgeContextMenu:c6,onEdgeDoubleClick:d6,onEdgeMouseEnter:u6,onEdgeMouseMove:m6,onEdgeMouseLeave:f6,reconnectRadius:p6=10,onNodesChange:h6,onEdgesChange:g6,noDragClassName:x6="nodrag",noWheelClassName:v6="nowheel",noPanClassName:Fu="nopan",fitView:Lu,fitViewOptions:y6,connectOnClick:b6,attributionPosition:w6,proOptions:j6,defaultEdgeOptions:N6,elevateNodesOnSelect:S6,elevateEdgesOnSelect:E6,disableKeyboardA11y:Pu=!1,autoPanOnConnect:C6,autoPanOnNodeDrag:I6,autoPanSpeed:A6,connectionRadius:M6,isValidConnection:D6,onError:k6,style:O6,id:$u,nodeDragThreshold:T6,viewport:F6,onViewportChange:L6,width:P6,height:$6,colorMode:_6="light",debug:R6,...V6},H6){const wl=$u||"1",B6=c$(_6);return s.jsx("div",{...V6,style:{...O6,...I_},ref:H6,className:Re(["react-flow",a,B6]),"data-testid":"rf__wrapper",id:$u,children:s.jsxs(C_,{nodes:e,edges:t,width:P6,height:$6,fitView:Lu,nodeOrigin:ce,nodeExtent:Vt,children:[s.jsx(S_,{onInit:d,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:I,onNodeDoubleClick:S,nodeTypes:o,edgeTypes:i,connectionLineType:z,connectionLineStyle:V,connectionLineComponent:R,connectionLineContainerStyle:B,selectionKeyCode:Z,selectionOnDrag:U,selectionMode:ee,deleteKeyCode:W,multiSelectionKeyCode:te,panActivationKeyCode:X,zoomActivationKeyCode:G,onlyRenderVisibleElements:Ve,defaultViewport:J,translateExtent:Oe,minZoom:oe,maxZoom:Ie,preventScrolling:qe,zoomOnScroll:Ls,zoomOnPinch:Ps,zoomOnDoubleClick:Rs,panOnScroll:$s,panOnScrollSpeed:Qr,panOnScrollMode:_s,panOnDrag:Vs,onPaneClick:Hs,onPaneMouseEnter:bl,onPaneMouseMove:e6,onPaneMouseLeave:t6,onPaneScroll:n6,onPaneContextMenu:r6,paneClickDistance:Tu,nodeClickDistance:s6,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:_,onReconnect:o6,onReconnectStart:i6,onReconnectEnd:l6,onEdgeContextMenu:c6,onEdgeDoubleClick:d6,onEdgeMouseEnter:u6,onEdgeMouseMove:m6,onEdgeMouseLeave:f6,reconnectRadius:p6,defaultMarkerColor:Un,noDragClassName:x6,noWheelClassName:v6,noPanClassName:Fu,rfId:wl,disableKeyboardA11y:Pu,nodeExtent:Vt,viewport:F6,onViewportChange:L6}),s.jsx(l$,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:b,nodesDraggable:ot,nodesConnectable:qn,nodesFocusable:Sn,edgesFocusable:At,edgesReconnectable:Wn,elementsSelectable:dn,elevateNodesOnSelect:S6,elevateEdgesOnSelect:E6,minZoom:oe,maxZoom:Ie,nodeExtent:Vt,onNodesChange:h6,onEdgesChange:g6,snapToGrid:ne,snapGrid:ge,connectionMode:q,translateExtent:Oe,connectOnClick:b6,defaultEdgeOptions:N6,fitView:Lu,fitViewOptions:y6,onNodesDelete:M,onEdgesDelete:T,onDelete:$,onNodeDragStart:E,onNodeDrag:A,onNodeDragStop:O,onSelectionDrag:D,onSelectionDragStart:C,onSelectionDragStop:k,onMove:u,onMoveStart:m,onMoveEnd:f,noPanClassName:Fu,nodeOrigin:ce,rfId:wl,autoPanOnConnect:C6,autoPanOnNodeDrag:I6,autoPanSpeed:A6,onError:k6,connectionRadius:M6,isValidConnection:D6,selectNodesOnDrag:He,nodeDragThreshold:T6,onBeforeDelete:H,paneClickDistance:Tu,debug:R6}),s.jsx(s$,{onSelectionChange:P}),a6,s.jsx(QP,{proOptions:j6,position:w6}),s.jsx(XP,{rfId:wl,disableKeyboardA11y:Pu})]})})}var M_=hv(A_);const D_=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Vv({children:e}){const t=xe(D_);return t?Dt.createPortal(e,t):null}const k_=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function ll(){return xe(k_,Fe)}function O_({onStart:e,onChange:t,onEnd:n}){const r=ke();v.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),v.useEffect(()=>{r.setState({onViewportChange:t})},[t]),v.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function T_({dimensions:e,lineWidth:t,variant:n,className:r}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Re(["react-flow__background-pattern",n,r])})}function F_({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:Re(["react-flow__background-pattern","dots",t])})}var rr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rr||(rr={}));const L_={[rr.Dots]:1,[rr.Lines]:1,[rr.Cross]:6},P_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Hv({id:e,variant:t=rr.Dots,gap:n=20,size:r,lineWidth:a=1,offset:o=0,color:i,bgColor:l,style:c,className:d,patternClassName:u}){const m=v.useRef(null),{transform:f,patternId:p}=xe(P_,Fe),g=r||L_[t],x=t===rr.Dots,y=t===rr.Cross,b=Array.isArray(n)?n:[n,n],w=[b[0]*f[2]||1,b[1]*f[2]||1],j=g*f[2],N=Array.isArray(o)?o:[o,o],I=y?[j,j]:w,S=[N[0]*f[2]||1+I[0]/2,N[1]*f[2]||1+I[1]/2],E=`${p}${e||""}`;return s.jsxs("svg",{className:Re(["react-flow__background",d]),style:{...c,...il,"--xy-background-color-props":l,"--xy-background-pattern-color-props":i},ref:m,"data-testid":"rf__background",children:[s.jsx("pattern",{id:E,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:x?s.jsx(F_,{radius:j/2,className:u}):s.jsx(T_,{dimensions:I,lineWidth:a,variant:t,className:u})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Hv.displayName="Background";const $_=v.memo(Hv);function __(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function R_(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function V_(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function H_(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function B_(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Tr({children:e,className:t,...n}){return s.jsx("button",{type:"button",className:Re(["react-flow__controls-button",t]),...n,children:e})}const z_=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Bv({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:d,children:u,position:m="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const g=ke(),{isInteractive:x,minZoomReached:y,maxZoomReached:b}=xe(z_,Fe),{zoomIn:w,zoomOut:j,fitView:N}=yr(),I=()=>{w(),o==null||o()},S=()=>{j(),i==null||i()},E=()=>{N(a),l==null||l()},A=()=>{g.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)},O=f==="horizontal"?"horizontal":"vertical";return s.jsxs(pu,{className:Re(["react-flow__controls",O,d]),position:m,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(Tr,{onClick:I,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:s.jsx(__,{})}),s.jsx(Tr,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:s.jsx(R_,{})})]}),n&&s.jsx(Tr,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:s.jsx(V_,{})}),r&&s.jsx(Tr,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity",children:x?s.jsx(B_,{}):s.jsx(H_,{})}),u]})}Bv.displayName="Controls";const Z_=v.memo(Bv);function q_({id:e,x:t,y:n,width:r,height:a,style:o,color:i,strokeColor:l,strokeWidth:c,className:d,borderRadius:u,shapeRendering:m,selected:f,onClick:p}){const{background:g,backgroundColor:x}=o||{},y=i||g||x;return s.jsx("rect",{className:Re(["react-flow__minimap-node",{selected:f},d]),x:t,y:n,rx:u,ry:u,width:r,height:a,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:m,onClick:p?b=>p(b,e):void 0})}const W_=v.memo(q_),U_=e=>e.nodes.map(t=>t.id),ql=e=>e instanceof Function?e:()=>e;function G_({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a,nodeComponent:o=W_,onClick:i}){const l=xe(U_,Fe),c=ql(t),d=ql(e),u=ql(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:l.map(f=>s.jsx(Y_,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:a,NodeComponent:o,onClick:i,shapeRendering:m},f))})}function K_({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:a,nodeStrokeWidth:o,shapeRendering:i,NodeComponent:l,onClick:c}){const{node:d,x:u,y:m,width:f,height:p}=xe(g=>{const x=g.nodeLookup.get(e),{x:y,y:b}=x.internals.positionAbsolute,{width:w,height:j}=Bn(x);return{node:x,x:y,y:b,width:w,height:j}},Fe);return!d||d.hidden||!z2(d)?null:s.jsx(l,{x:u,y:m,width:f,height:p,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:a,strokeColor:n(d),strokeWidth:o,shapeRendering:i,onClick:c,id:d.id})}const Y_=v.memo(K_);var X_=v.memo(G_);const J_=200,Q_=150,eR=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?H2(Os(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},tR="react-flow__minimap-desc";function zv({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:a="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:l,bgColor:c,maskColor:d,maskStrokeColor:u,maskStrokeWidth:m,position:f="bottom-right",onClick:p,onNodeClick:g,pannable:x=!1,zoomable:y=!1,ariaLabel:b="React Flow mini map",inversePan:w,zoomStep:j=10,offsetScale:N=5}){const I=ke(),S=v.useRef(null),{boundingRect:E,viewBB:A,rfId:O,panZoom:M,translateExtent:T,flowWidth:$,flowHeight:P}=xe(eR,Fe),C=(e==null?void 0:e.width)??J_,D=(e==null?void 0:e.height)??Q_,k=E.width/C,L=E.height/D,F=Math.max(k,L),_=F*C,H=F*D,q=N*F,z=E.x-(_-E.width)/2-q,V=E.y-(H-E.height)/2-q,R=_+q*2,B=H+q*2,W=`${tR}-${O}`,Z=v.useRef(0),U=v.useRef();Z.current=F,v.useEffect(()=>{if(S.current&&M)return U.current=CP({domNode:S.current,panZoom:M,getTransform:()=>I.getState().transform,getViewScale:()=>Z.current}),()=>{var te;(te=U.current)==null||te.destroy()}},[M]),v.useEffect(()=>{var te;(te=U.current)==null||te.update({translateExtent:T,width:$,height:P,inversePan:w,pannable:x,zoomStep:j,zoomable:y})},[x,y,w,j,T,$,P]);const ee=p?te=>{var ge;const[G,ne]=((ge=U.current)==null?void 0:ge.pointer(te))||[0,0];p(te,{x:G,y:ne})}:void 0,X=g?v.useCallback((te,G)=>{const ne=I.getState().nodeLookup.get(G);g(te,ne)},[]):void 0;return s.jsx(pu,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*F:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:Re(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:C,height:D,viewBox:`${z} ${V} ${R} ${B}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:S,onClick:ee,children:[b&&s.jsx("title",{id:W,children:b}),s.jsx(X_,{onClick:X,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:a,nodeStrokeWidth:i,nodeComponent:l}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${z-q},${V-q}h${R+q*2}v${B+q*2}h${-R-q*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zv.displayName="MiniMap";v.memo(zv);function nR({nodeId:e,position:t,variant:n=ra.Handle,className:r,style:a={},children:o,color:i,minWidth:l=10,minHeight:c=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:f,onResizeStart:p,onResize:g,onResizeEnd:x}){const y=gu(),b=typeof e=="string"?e:y,w=ke(),j=v.useRef(null),N=n===ra.Line?"right":"bottom-right",I=t??N,S=v.useRef(null);v.useEffect(()=>{if(!(!j.current||!b))return S.current||(S.current=HP({domNode:j.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:M,transform:T,snapGrid:$,snapToGrid:P,nodeOrigin:C}=w.getState();return{nodeLookup:M,transform:T,snapGrid:$,snapToGrid:P,nodeOrigin:C}},onChange:(M,T)=>{const{triggerNodeChanges:$,nodeLookup:P,parentLookup:C,nodeOrigin:D}=w.getState(),k=[],L={x:M.x,y:M.y},F=P.get(b);if(F&&F.expandParent&&F.parentId){const _=F.origin??D,H=M.width??F.measured.width,q=M.height??F.measured.height,z={id:F.id,parentId:F.parentId,rect:{width:H,height:q,...Z2({x:M.x??F.position.x,y:M.y??F.position.y},{width:H,height:q},F.parentId,P,_)}},V=fu([z],P,C,D);k.push(...V),L.x=M.x?Math.max(_[0]*H,M.x):void 0,L.y=M.y?Math.max(_[1]*q,M.y):void 0}if(L.x!==void 0&&L.y!==void 0){const _={id:b,type:"position",position:{...L}};k.push(_)}if(M.width!==void 0&&M.height!==void 0){const _={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:M.width,height:M.height}};k.push(_)}for(const _ of T){const H={..._,type:"position"};k.push(H)}$(k)},onEnd:()=>{const M={id:b,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([M])}})),S.current.update({controlPosition:I,boundaries:{minWidth:l,minHeight:c,maxWidth:d,maxHeight:u},keepAspectRatio:m,onResizeStart:p,onResize:g,onResizeEnd:x,shouldResize:f}),()=>{var M;(M=S.current)==null||M.destroy()}},[I,l,c,d,u,m,p,g,x,f]);const E=I.split("-"),A=n===ra.Line?"borderColor":"backgroundColor",O=i?{...a,[A]:i}:a;return s.jsx("div",{className:Re(["react-flow__resize-control","nodrag",...E,n,r]),ref:j,style:O,children:o})}v.memo(nR);const rR=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__renderer")};function sR({children:e}){const t=xe(rR);return t?Dt.createPortal(e,t):null}const aR=(e,t)=>(e==null?void 0:e.internals.positionAbsolute.x)!==(t==null?void 0:t.internals.positionAbsolute.x)||(e==null?void 0:e.internals.positionAbsolute.y)!==(t==null?void 0:t.internals.positionAbsolute.y)||(e==null?void 0:e.measured.width)!==(t==null?void 0:t.measured.width)||(e==null?void 0:e.measured.height)!==(t==null?void 0:t.measured.height)||(e==null?void 0:e.selected)!==(t==null?void 0:t.selected)||(e==null?void 0:e.internals.z)!==(t==null?void 0:t.internals.z),oR=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e)if(aR(r,t.get(n)))return!1;return!0},iR=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(t=>t.selected).length});function lR({nodeId:e,children:t,className:n,style:r,isVisible:a,position:o=re.Top,offset:i=10,align:l="center",...c}){const d=gu(),u=v.useCallback(I=>(Array.isArray(e)?e:[e||d||""]).reduce((A,O)=>{const M=I.nodeLookup.get(O);return M&&A.set(M.id,M),A},new Map),[e,d]),m=xe(u,oR),{x:f,y:p,zoom:g,selectedNodesCount:x}=xe(iR,Fe);if(!(typeof a=="boolean"?a:m.size===1&&m.values().next().value.selected&&x===1)||!m.size)return null;const b=Os(m),w=Array.from(m.values()),j=Math.max(...w.map(I=>I.internals.z+1)),N={position:"absolute",transform:mP(b,{x:f,y:p,zoom:g},o,i,l),zIndex:j,...r};return s.jsx(sR,{children:s.jsx("div",{style:N,className:Re(["react-flow__node-toolbar",n]),...c,"data-id":w.reduce((I,S)=>`${I}${S.id} `,"").trim(),children:t})})}function cR({id:e,sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:o,targetPosition:i,style:l={},markerEnd:c,data:d}){const{getEdge:u}=yr(),[m,f,p]=Ja({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:a,targetPosition:i}),g=async()=>{var y;const x=u(e);if(x&&d){const b=x.source??"";if(x.sourceHandle==="source-handle")await Ue.updateNode({flowId:d.flowId,data:{id:b,props:{nextNodeIds:null}}}),await Ue.updateStartNode({flowId:d.flowId,data:{id:b,props:{nextNodeIds:null}}});else if((y=x.sourceHandle)!=null&&y.includes("source-handle-")){const w=x.source??"",j=x.sourceHandle.split("source-handle-")[1],N=await Ue.findById(d.flowId);if(N){const I=N.draft.nodes.find(S=>S.id===w);if(I&&"expectedMessages"in I){const S=I.expectedMessages,E=S.findIndex(O=>O===j);if(E===-1){console.warn(`Expected message index not found for node ${w}`);return}const A=I.nextNodeIds===null?Array(S.length):I.nextNodeIds;A[E]=null,await Ue.updateNode({flowId:d.flowId,data:{id:w,props:{nextNodeIds:A}}})}}}else x.sourceHandle==="expiration-source-handle"&&await Ue.updateNode({flowId:d.flowId,data:{id:b,props:{nextNodeIdOnExpiration:null}}})}};return s.jsxs(s.Fragment,{children:[s.jsx(Ts,{path:m,markerEnd:c,style:l}),s.jsx(Vv,{children:s.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px,${p}px)`,pointerEvents:"all"},children:s.jsx(K,{className:"h-7 w-7 p-0 transition-all hover:h-8 hover:w-8",size:"icon",variant:"actionDestructive",childrenVariant:"no-dark",icon:s.jsx(sh,{size:16,weight:"bold"}),onClick:g})})})]})}function dR({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a,targetPosition:o,style:i={},markerEnd:l}){const[c,d,u]=Ja({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:o}),{zoom:m}=ll();return s.jsxs(s.Fragment,{children:[s.jsx(Ts,{path:c,markerEnd:l,style:i}),s.jsx(Vv,{children:s.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${d}px,${u}px)`,pointerEvents:"all"},children:s.jsx(pi,{size:20/m,weight:"bold"})})})]})}class Zv{constructor(t){this.flowRepo=t}async execute({flowId:t,nodeId:n}){if(!t)throw new Error("RemoveNodeFromFlow: flowId must be provided");if(!n)throw new Error("RemoveNodeFromFlow: nodeId must be provided");await this.flowRepo.removeNodeFromFlow(t,n)}}const qv=v.createContext(void 0);function uR({children:e}){const[t,n]=v.useState(null);return s.jsx(qv.Provider,{value:{showToolbarId:t,setShowToolbarId:n},children:e})}function mR(){const e=v.useContext(qv);if(!e)throw new Error("useToolbar deve ser usado dentro de um ToolbarProvider");return e}const xu="hover:!scale-150 hover:!-translate-y-1/2 hover:translate-x-1/2 !min-w-4 !min-h-4",Wv={position:re.Left,type:"target",id:"target-handle",className:"!bg-primary !top-6 !pointer-events-none !opacity-0"},vu={position:re.Right,type:"source",id:"source-handle",className:Y("hover:!bg-item-media hover:!text-background !bg-item-media",xu)},fR={position:re.Right,type:"source",id:"expiration-source-handle",className:Y("hover:!bg-item-trigger hover:!text-background !bg-item-trigger",xu)},pR=[Wv,vu,fR],Uv=[Wv,vu],hR=[vu],gR={"expiration-source-handle":{audio:"Se expirar",contact:"Se expirar",delay:"Se expirar",document:"Se expirar",media:"Se expirar",text:"Se expirar","user-input":"Se o usuário NÃO responder (FOLLOW-UP)",start:""},"source-handle":{audio:"Próximo passo",contact:"Próximo passo",delay:"Próximo passo",document:"Próximo passo",media:"Próximo passo",text:"Próximo passo","user-input":"Se o usuário responder",start:"Primeiro passo"}},xR={"user-input":"bg-item-trigger/20",audio:"bg-item-audio/20",contact:"bg-neutral-60/20",delay:"bg-item-trigger/20",document:"bg-item-document/20",media:"bg-item-media/20",start:"bg-neutral-60/20",text:"bg-item-message/20"};function zn({data:{configNode:e,deletable:t=!0,description:n,flowId:r,handles:a=Uv,icon:o,id:i,isOrphan:l,label:c,nextNodeIds:d,nextNodeIdOnExpiration:u,nodeType:m,simulationDelay:f},children:p}){const g=Pv(),{zoom:x}=ll(),{showToolbarId:y,setShowToolbarId:b}=mR(),[w,j]=v.useState({height:"1rem",width:"1rem"}),{minutes:N,seconds:I}=on.fromMillisecondsToMinutes(f??0);v.useEffect(()=>{j({height:`calc(1rem / ${x})`,width:`calc(1rem / ${x})`})},[x]);const S=g.inProgress&&g.fromNode.id!==i,E=new Zv(new Se);return s.jsxs("div",{className:Y("rounded-lg ring-4 ring-transparent",S&&"group/zv-custom-node transition-shadow hover:ring-item-media",l&&m!=="start"&&"ring-[1rem] ring-destructive zv-dark:ring-destructive-foreground"),children:[s.jsx(lR,{nodeId:i,isVisible:y===i,className:"rounded-xl bg-white zv-dark:bg-black",children:s.jsxs("div",{className:"relative flex items-center gap-5 rounded-xl bg-primary/40 p-2",children:[s.jsx("div",{onClick:()=>b(null),onKeyUp:A=>(A.key==="Enter"||A.key===" ")&&b(null),className:"absolute -right-3 -top-3 cursor-pointer rounded-full border border-solid border-destructive bg-background p-1 text-destructive zv-dark:text-destructive",children:s.jsx(ai,{size:16})}),e,t&&s.jsx(K,{variant:"actionDestructive",icon:s.jsx(yt,{size:24}),childrenVariant:"no-dark",onClick:async()=>await E.execute({flowId:r,nodeId:i}),children:"Remover"})]})}),s.jsxs("main",{onClick:()=>e&&b(i),onKeyUp:A=>(A.key==="Enter"||A.key===" ")&&b(i),className:"flex w-full flex-col gap-2 border-b border-solid text-start text-base",children:[s.jsxs("div",{className:Y("flex w-full items-center gap-2 self-start rounded-t-md p-2.5",xR[m]),children:[s.jsx("div",{children:o}),c&&s.jsx("h1",{className:"text-start text-lg font-bold leading-3",children:c})]}),s.jsx("div",{className:"flex flex-col gap-2 p-2.5",children:m==="media"||m==="audio"||m==="text"?s.jsx(dr,{type:"single",collapsible:!0,children:s.jsxs(ur,{value:"item-1",className:"border-none",children:[s.jsx(mr,{onClick:A=>{A.stopPropagation()},className:"p-0 hover:no-underline",triggerIconClasses:"inline-flex items-center w-10 h-10 p-2 justify-center rounded-full bg-action text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:s.jsx("div",{children:n?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"m-0 w-[320px] break-all text-start font-bold",children:n}),f!==void 0&&s.jsx("p",{className:"m-0 truncate text-start text-sm text-muted-foreground",children:f===0?`Enviar sem simular ${m==="audio"?'"gravando áudio..."':'"digitando..."'}`:`Simular ${m==="audio"?'"gravando áudio..."':'"digitando..."'} por ${N} min e ${I}s`})]}):s.jsx("div",{className:"flex items-center gap-2 text-lg font-bold",children:"Clique para ver o preview"})})}),s.jsx(fr,{children:p})]})}):s.jsxs(s.Fragment,{children:[n&&s.jsx("p",{children:n}),p]})})]}),a.map(A=>{var T,$;const O=(!d||d.length===0)&&A.type==="source"&&(A.id==="source-handle"||((T=A.id)==null?void 0:T.includes("source-handle-")))||!u&&A.type==="source"&&A.id==="expiration-source-handle";let M=A.id?(($=gR[A.id])==null?void 0:$[m])??"Próximo passo":"Próximo passo";return m==="user-input"&&A.id&&A.id.includes("source-handle-")&&(M=A.id.split("source-handle-")[1]),s.jsxs("div",{className:Y("flex items-center justify-end",A.type!=="target"&&"relative py-3 pr-3"),children:[A.type!=="target"&&s.jsx("span",{children:M}),s.jsx(Ea,{position:A.position,type:A.type,id:A.id,className:Y(A.className,O&&"!top-1/2 !flex !items-center !justify-center !border-none !bg-background !p-0 hover:!animate-none",!O&&A.type!=="target"&&"!max-h-20 !max-w-20",A.id==="expiration-source-handle"?"!text-item-trigger":"!text-item-media",S&&A.type==="target"&&"group-hover/zv-custom-node:!pointer-events-auto group-hover/zv-custom-node:!absolute group-hover/zv-custom-node:!left-0 group-hover/zv-custom-node:!top-0 group-hover/zv-custom-node:!z-10 group-hover/zv-custom-node:!h-full group-hover/zv-custom-node:!w-full group-hover/zv-custom-node:!transform-none group-hover/zv-custom-node:!rounded-none group-hover/zv-custom-node:!border-none"),style:A.type!=="target"?w:void 0,children:O&&s.jsx(oh,{className:"!pointer-events-none !m-0 !min-h-4 !min-w-4",size:20/x})})]},A.id)})]})}function vR({id:e,data:t,...n}){const r=gs(t.timeUnitType,t.delayInMs??0),a=r!==1?De[t.timeUnitType]:De[t.timeUnitType].replace(/s$/,"");return s.jsx(zn,{id:e,data:t,...n,children:s.jsx("div",{className:"flex w-full flex-col justify-between gap-2",children:s.jsx("p",{children:t.delayInMs===0?"Não esperar (delay não configurado)":`Esperar ${r} ${a} antes de continuar`})})})}function cl({autoplay:e=!0,itemId:t}){const[n,r]=v.useState(null),a=Va(new an);return v.useEffect(()=>{(async()=>{const i=await a(t);r(i)})()},[t]),n&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-base",children:n.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),s.jsx(Yo,{autoplay:e,data:n.data})]})}function yR({id:e,data:t,...n}){const a=rt.useGetAudioList().find(o=>o.id===t.itemId);return s.jsx(zn,{id:e,data:{...t,description:a==null?void 0:a.name},...n,children:a&&s.jsx("div",{className:"flex w-full flex-col justify-between gap-2",children:s.jsx(cl,{autoplay:!1,itemId:t.itemId})})})}function bR({id:e,data:t,...n}){const{inputValue:r}=qi({defaultCountry:"br",value:t.contactPhone});return s.jsx(zn,{id:e,data:t,...n,children:s.jsxs("div",{className:"flex w-full flex-col justify-between gap-2 rounded-md bg-black/15 p-2 zv-dark:bg-black/50",children:[s.jsx("p",{children:t.contactName}),s.jsx("p",{children:r})]})})}function dl({itemId:e}){const[t,n]=v.useState(null),r=Za(new bn);return v.useEffect(()=>{(async()=>{const o=await r(e);n(o)})()},[e]),t&&s.jsx("div",{className:"h-full space-y-1 p-2 text-base",children:s.jsxs(s.Fragment,{children:[s.jsx(_e,{variant:"outline",children:"Nome do arquivo: "}),s.jsx("p",{children:t.fileName})]})})}function wR({id:e,data:t,...n}){const a=Ke.useGetDocumentList().find(o=>o.id===t.itemId);return s.jsx(zn,{id:e,data:t,...n,children:a&&s.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[s.jsx("p",{className:"document-base m-0 truncate whitespace-pre-wrap break-all font-bold",children:a.name}),s.jsx(dl,{itemId:t.itemId})]})})}class jn{constructor(){pe(this,"mediaStore",Ye)}async addMedia(...t){await this.mediaStore.addMedia(...t)}async deleteMedia(...t){await this.mediaStore.deleteMedia(...t)}async findById(...t){return await this.mediaStore.findById(...t)}async getMediaDataById(...t){return await this.mediaStore.getMediaDataById(...t)}async getMediaList(){return this.mediaStore.mediaList}async reorderMediaList(...t){await this.mediaStore.reorderMediaList(...t)}async saveMedia(...t){await this.mediaStore.saveMedia(...t)}async selectMedia(...t){return await this.mediaStore.selectMedia(...t)}async setMediaFilter(...t){return await this.mediaStore.setMediaFilter(...t)}async toggleMediaIsFavorite(...t){await this.mediaStore.toggleMediaIsFavorite(...t)}}function ul({itemId:e,className:t,previewClassName:n="max-h-[50dvh] max-w-[10dvw]"}){const[r,a]=v.useState(null),o=qa(new jn);return v.useEffect(()=>{(async()=>{const l=await o(e);a(l)})()},[e]),r&&s.jsxs("div",{className:Y("flex flex-row",t),children:[s.jsxs("div",{className:"h-full min-w-fit space-y-1 p-2 text-muted-foreground",children:[s.jsx(_e,{variant:"outline",children:"Texto da legenda: "}),r.caption.split(`
`).map((i,l)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:i},l))]}),s.jsx(Ia,{className:n,data:r.data})]})}function jR({id:e,data:t,...n}){const a=Ye.useGetMediaList().find(o=>o.id===t.itemId);return s.jsx(zn,{id:e,data:{...t,description:a==null?void 0:a.name},...n,children:a&&s.jsx("div",{className:"flex w-full flex-col justify-between gap-2",children:s.jsx(ul,{itemId:t.itemId,className:"flex flex-col",previewClassName:"self-center"})})})}class Nn{constructor(){pe(this,"textMessageStore",$e)}async addTextMessage(...t){await this.textMessageStore.addTextMessage(...t)}async deleteTextMessage(...t){await this.textMessageStore.deleteTextMessage(...t)}async findById(...t){return await this.textMessageStore.findById(...t)}async getTextMessageDataById(...t){return await this.textMessageStore.getTextMessageDataById(...t)}async getTextMessageList(){return this.textMessageStore.textMessageList}async reorderTextMessageList(...t){await this.textMessageStore.reorderTextMessageList(...t)}async saveTextMessage(...t){await this.textMessageStore.saveTextMessage(...t)}async selectTextMessage(...t){await this.textMessageStore.selectTextMessage(...t)}async setTextMessageFilter(...t){await this.textMessageStore.setTextMessageFilter(...t)}async toggleTextMessageIsFavorite(...t){await this.textMessageStore.toggleTextMessageIsFavorite(...t)}}function ml({itemId:e}){const[t,n]=v.useState(null),r=Wa(new Nn);return v.useEffect(()=>{(async()=>{const o=await r(e);n(o)})()},[e]),t==null?void 0:t.data.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:a},o))}function NR({id:e,data:t,...n}){const a=$e.useGetTextMessageList().find(o=>o.id===t.itemId);return s.jsx(zn,{id:e,data:{...t,description:a==null?void 0:a.name},...n,children:a&&s.jsx("div",{className:"flex w-full flex-col justify-between gap-2",children:s.jsx("div",{className:"mt-2 rounded-md bg-black/15 p-2 zv-dark:bg-black/50",children:s.jsx(ml,{itemId:t.itemId})})})})}function SR({canFollowUp:e,followUpData:t,legacyExpirationData:n}){if(!e&&(!n.expirationTimeoutInMs||n.expirationTimeoutInMs<=0))return s.jsx("p",{children:"Aguardar resposta por tempo indefinido"});if(!t){const r=gs(n.timeUnitType,n.expirationTimeoutInMs??0),a=r!==1?De[n.timeUnitType]:De[n.timeUnitType].replace(/s$/,"");return s.jsx("p",{children:n.expirationTimeoutInMs&&n.expirationTimeoutInMs>0?`Aguardar resposta por ${r} ${a}`:"Aguardar resposta por tempo indefinido"})}if(t.timeoutType==="dynamic"){const r=t.timeUnitType,a=pa(t.timeUnitType,t.timeUnit),o=gs(r,a??0),i=o!==1?De[r]:De[r].replace(/s$/,"");return s.jsx("p",{children:a&&a>0?`Aguardar resposta por ${o} ${i}`:"Aguardar resposta por tempo indefinido"})}if(t.timeoutType==="fixed")return s.jsx("p",{children:`Aguardar resposta até ${t.hour}h ${Lr[t.day]} em relação ${Pr[t.reference]}`})}function ER({id:e,data:t,...n}){var i;const r=Fr[t.compareRule].toLocaleLowerCase();function a(){var c;const l=t.expirationTimeoutInMs?structuredClone(pR):structuredClone(Uv);if(t.expectedMessages&&t.expectedMessages.length>0){l.splice(1,1);for(let d=0;d<((c=t.expectedMessages)==null?void 0:c.length);d++){const u=t.expectedMessages[d],m={position:re.Right,type:"source",id:`source-handle-${u}`,className:Y("hover:!bg-item-media hover:!text-background !bg-item-media",xu)};l.splice(1+d,0,m)}}return l}const o=a();return s.jsx(zn,{id:e,data:{...t,handles:o},...n,children:s.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[t.compareRule==="anything"?s.jsx("div",{className:"my-4 flex flex-wrap items-center gap-x-1.5",children:s.jsxs("div",{className:"rounded-md bg-black/15 p-2 text-base zv-dark:bg-black/50",children:["Esperar o usuário enviar ",r]})}):s.jsxs("div",{className:"my-4 flex flex-wrap items-center gap-1.5",children:[s.jsxs("div",{className:"rounded-md bg-black/15 p-2 text-base zv-dark:bg-black/50",children:["Esperar o usuário digitar ",r]}),(i=t.expectedMessages)==null?void 0:i.map((l,c,d)=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_e,{variant:"trigger",className:"text-base",children:l})," ",c<d.length-1&&s.jsx("p",{className:"text-muted-foreground",children:"ou"})]},`expected-message-${c}`))]}),s.jsx(SR,{canFollowUp:t.canFollowUp,followUpData:t.followUpData,legacyExpirationData:{timeUnitType:t.timeUnitType,expirationTimeoutInMs:t.expirationTimeoutInMs}})]})})}const Nr=({dayHandler:e,dayNumber:t,...n})=>s.jsx(K,{variant:e.value.includes(t)?"action":"outline",className:Y("h-10 w-10 border",e.value.includes(t)&&"border-transparent"),childrenVariant:"no-dark",onClick:async()=>await e.onChange(t),...n,children:Hy[t]});class CR{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateStartNode({data:t,flowId:n})}}const Gv=({data:e})=>{const t=new Se,n=new CR(t),r=e.schedule.days,a=async S=>{const E=r.includes(S)?r.filter(A=>A!==S):[...r,S];await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,days:E}}}})},o=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,maxTime:S}}}})},i=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,minTime:S}}}})},l=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,keywordRules:S}}}})},c=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{enabledSchedule:S}}})},d=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{enabledTrigger:S}}})},u=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,sendToContacts:S}}}})},m=async S=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,sendToGroups:S}}}})},f={value:e.schedule.days,onChange:async S=>await a(S)},p={value:e.schedule.minTime,onChange:async S=>await i(S.target.value)},g={value:e.schedule.maxTime,onChange:async S=>await o(S.target.value)},x={value:e.trigger.keywordRules,onChange:l},y={checked:e.trigger.sendToContacts,onCheckedChange:u},b={checked:e.trigger.sendToGroups,onCheckedChange:m},w={checked:e.enabledSchedule,onCheckedChange:c},j={checked:e.enabledTrigger,onCheckedChange:d},N=x.value.filter(S=>S.keywords.length>0).length;return{dayHandler:f,enabledScheduleHandler:w,enabledTriggerHandler:j,hasNoRules:N===0,keywordRulesHandler:x,maxTimeHandler:g,minTimeHandler:p,rulesCount:N,sendToContactsHandler:y,sendToGroupsHandler:b}},IR=({data:e})=>{const{dayHandler:t,enabledScheduleHandler:n,maxTimeHandler:r,minTimeHandler:a}=Gv({data:e});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pointer-events-auto mb-2 flex items-end space-x-1",children:[s.jsx(qt,{id:"toggle-enabled-schedule",...n}),s.jsx(ie,{htmlFor:"toggle-enabled-schedule",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Continuar fluxo em dias e horários específicos"})]}),s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[s.jsx("p",{className:Y("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar em:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Nr,{dayHandler:t,dayNumber:0,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:1,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:2,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:3,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:4,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:5,disabled:!n.checked}),s.jsx(Nr,{dayHandler:t,dayNumber:6,disabled:!n.checked})]})]}),s.jsxs("div",{className:"flex w-full gap-7",children:[s.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[s.jsx("p",{className:Y("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar após:"}),s.jsx(ze,{className:"w-18",disabled:!e.enabledSchedule,type:"time",...a})]}),s.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[s.jsx("p",{className:Y("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar até:"}),s.jsx(ze,{className:"w-18",disabled:!e.enabledSchedule,type:"time",...r})]})]})]})]})},AR=ir("relative flex items-center",{variants:{rootSpacing:{default:"py-4",sm:"py-2.5",lg:"py-5",xs:"py-1"}},defaultVariants:{rootSpacing:"default"}}),MR=ir("flex-grow",{variants:{borderVariant:{default:"border-neutral-60",destructive:"border-destructive-foreground",success:"border-status-success-foreground",warning:"border-status-caution-foreground"},borderSize:{default:"border-t",hidden:"border-t-0",thick:"border-t-4",extraThick:"border-t-8"}},defaultVariants:{borderVariant:"default",borderSize:"default"}}),DR=ir("flex-shrink",{variants:{labelVariant:{primary:"text-primary-foreground",neutral:"text-neutral-60",destructive:"text-destructive-foreground",success:"text-status-success-foreground",warning:"text-status-caution-foreground"},labelSpacing:{default:"mx-4",hidden:"hidden",loose:"mx-6",tight:"mx-1",no:"mx-0"},labelWeight:{normal:"font-normal",bold:"font-bold",light:"font-light"}},defaultVariants:{labelVariant:"neutral",labelSpacing:"default",labelWeight:"normal"}});function cs({borderSize:e,borderVariant:t,label:n,labelSpacing:r,labelVariant:a,rootSpacing:o,labelWeight:i}){const l=MR({borderSize:e,borderVariant:t}),c=DR({labelSpacing:r,labelVariant:a,labelWeight:i}),d=AR({rootSpacing:o});return s.jsxs("div",{className:d,children:[s.jsx("div",{className:l}),n&&s.jsx("span",{className:c,children:n}),s.jsx("div",{className:l})]})}function fl({addValue:e,badgeClasses:t,changeValue:n,className:r,disabled:a,dividerLabel:o,insertWhenClickOnKey:i=["Enter"],showDivider:l=!0,values:c,...d}){const u=v.useRef(null);function m(p){if(e){e(p),u.current&&(u.current.value="");return}const g=c.includes(p);u.current&&(u.current.value=""),!(g||p.trim()==="")&&n([...c,p])}function f(p){n(c.filter(g=>g!==p))}return v.useEffect(()=>{setTimeout(()=>{var p;(p=u==null?void 0:u.current)==null||p.focus()},500)},[]),s.jsxs("div",{className:Y("flex w-full flex-wrap gap-2 rounded-md","border border-input bg-background p-4 text-base shadow-sm","transition-colors placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",r,a&&"cursor-not-allowed opacity-50 grayscale"),children:[c.map((p,g)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_e,{variant:"default",size:"item",className:Y("max-w-fit select-none gap-1",t,!a&&"pr-1.5 hover:bg-primary"),children:[p,!a&&s.jsx("div",{className:"cursor-pointer rounded-full p-0.5 hover:bg-primary-foreground hover:text-primary",onClick:()=>{f(p)},children:s.jsx(ai,{size:16})})]}),l&&s.jsx(cs,{label:o??"ou",labelSpacing:"no",labelWeight:"light",rootSpacing:"xs"})]},`key-${p}${g}`)),s.jsx("input",{autoComplete:"off",className:Y("flex-1 border-none bg-transparent py-2 outline-none",a&&"cursor-not-allowed"),disabled:a,onBlur:()=>{var g;const p=((g=u.current)==null?void 0:g.value.trim())??"";p!==""&&m(p)},onKeyUp:({key:p})=>{var x;let g=((x=u.current)==null?void 0:x.value.trim())??"";if(p==="Backspace"&&g===""&&f(c[c.length-1]),i&&i.includes(p)&&g!==""){const y=new RegExp(p,"g");g=g.replace(y,""),m(g)}},placeholder:a?"Habilite para inserir mais palavras-chave":"Digite nova palavra-chave",ref:u,type:"text",...d})]})}function jp({disabled:e=!1,onKeywordsChange:t,onRemoveCondition:n,onTypeChange:r,ruleTypes:a,value:o}){return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{children:s.jsxs(St,{disabled:e,value:o.type,onValueChange:i=>r(i),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"whitespace-pre-wrap break-all bg-background px-3 py-4",value:"equals",children:s.jsx(Zt,{placeholder:"Selecione um item"})}),s.jsx(K,{childrenVariant:"no-dark",className:"h-auto p-1.5",iconClasses:Y(e&&"cursor-not-allowed"),childrenClassName:Y(e&&"cursor-not-allowed"),disabled:e,icon:s.jsx(yt,{size:20}),onClick:n,size:"icon",variant:"actionDestructive"})]}),s.jsx(gt,{children:s.jsx("div",{className:"divide-y",children:Array.from(a).map(([i,l])=>s.jsx(Me,{className:"whitespace-pre-wrap break-all",value:i,children:l},i))})})]})}),s.jsx(fl,{badgeClasses:"scale-[80%] -mx-2 h-8",changeValue:i=>t(i),className:"min-h-16 text-xs",disabled:e,values:o.keywords})]})}const Np=new Map([["equals","...a mensagem for igual a (alguma):"],["contains","...a mensagem contém (alguma):"],["startsWith","...a mensagem começa com (alguma):"],["notContains","...a mensagem não contém (nenhuma):"]]);function kR({disabled:e=!1,handler:t}){const n=t.value,r=n.length,a=r>0,o=r-1;return a?n.map((i,l)=>s.jsxs("div",{children:[s.jsx(jp,{disabled:e,onRemoveCondition:()=>{const c=n.filter(d=>d.id!==i.id);return t.onChange(c)},value:i,ruleTypes:new Map(Array.from(Np).filter(([c])=>!(r>1&&c==="equals"))),onKeywordsChange:c=>{const d=n.map(u=>u.id===i.id?{...u,keywords:c}:u);return t.onChange(d)},onTypeChange:c=>{const d=n.map(u=>u.id===i.id?{...u,type:c}:u);return t.onChange(d)}}),l<o&&s.jsx(cs,{label:"E",labelWeight:"bold",rootSpacing:"xs"})]},i.id)):s.jsx(jp,{disabled:e,ruleTypes:Np,value:{id:er(),keywords:[],type:"contains"},onKeywordsChange:i=>{t.onChange([{id:er(),keywords:i,type:"contains"}])},onTypeChange:i=>{t.onChange([{id:er(),keywords:[],type:i}])}})}function OR({disabled:e=!1,handler:t,withSwitch:n=!0}){const r=n?ie:"div";return s.jsxs("div",{className:"flex items-center",children:[n&&s.jsx(xt,{disabled:e,className:"scale-75",id:"send-to-contacts",...t}),s.jsx(r,{htmlFor:n?"send-to-contacts":void 0,children:s.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[s.jsx(Nt,{icon:s.jsx(Mn,{size:16}),iconColor:"text-item-trigger",slashed:!t.checked}),s.jsx("span",{children:"Contatos salvos"})]})})]})}function TR({disabled:e=!1,handler:t,withSwitch:n=!0}){const r=n?ie:"div";return s.jsxs("div",{className:"flex items-center",children:[n&&s.jsx(xt,{disabled:e,className:"scale-75",id:"send-to-groups",...t}),s.jsx(r,{htmlFor:n?"send-to-groups":void 0,children:s.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[s.jsx(Nt,{icon:s.jsx(od,{size:16}),iconColor:"text-secondary",slashed:!t.checked}),s.jsx("span",{children:"Grupos"})]})})]})}const FR=({data:e})=>{var c;const{enabledTriggerHandler:t,hasNoRules:n,keywordRulesHandler:r,rulesCount:a,sendToContactsHandler:o,sendToGroupsHandler:i}=Gv({data:e}),l=t.checked;return s.jsxs("div",{className:Y("pointer-events-auto",!l&&"pointer-events-none"),children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsxs("div",{className:"pointer-events-auto flex cursor-auto items-end gap-1",children:[s.jsx(qt,{id:"toggle-enabled-trigger",...t}),s.jsx(ie,{htmlFor:"toggle-enabled-trigger",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Iniciar fluxo quando..."})]}),s.jsxs("div",{className:Y("flex items-center gap-2",!l&&"opacity-50 grayscale"),children:[s.jsx(Nt,{icon:s.jsx(fi,{size:16}),iconColor:"text-item-trigger",slashed:n}),s.jsxs("p",{className:"text-xs",children:["Condições de disparo (",a,")"]})]})]}),s.jsxs("div",{className:Y("flex flex-col gap-2",!l&&"grayscale"),children:[s.jsx("div",{className:"flex flex-col items-start justify-between gap-0.5",children:s.jsxs("div",{className:"w-full",children:[s.jsx(_n,{className:"nowheel max-h-80 rounded-md bg-main-background p-2 ring-1 ring-primary-foreground",thumbSize:"sm",children:s.jsx(kR,{disabled:!l,handler:r})}),((c=r.value[0])==null?void 0:c.type)!=="equals"&&a<5&&s.jsx(K,{disabled:n,icon:s.jsx(_t,{}),className:"mx-auto mt-2 flex",size:"sm",onClick:()=>r.onChange([...r.value,{id:er(),keywords:[],type:"contains"}]),children:"Adicionar outra condição"})]})}),s.jsxs("div",{className:"flex flex-col items-center gap-1 rounded-md bg-background/80 p-2",children:[s.jsx("p",{className:Y("w-full rounded-md bg-neutral-60/20 py-0.5 text-center text-sm text-primary",!l&&"opacity-50"),children:"Permitir envio para:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(OR,{disabled:!l,handler:o}),s.jsx(TR,{disabled:!l,handler:i})]}),s.jsx("p",{className:"mt-2 text-center text-xs font-bold text-item-audio",children:'As palavras-chave não diferenciam entre maiúsculas e minúsculas, ou seja, as palavras "Olá ", "olá" e "OLÁ" são reconhecidas da mesma forma'})]})]})]})};function LR({id:e,data:t,...n}){return s.jsxs(zn,{id:e,data:{...t,deletable:!1,handles:hR},...n,children:[s.jsx(FR,{data:t}),s.jsx("hr",{className:"mx-5 my-2 border-dashed"}),s.jsx(IR,{data:t})]})}const PR=({itemId:e,captionValue:t,mediaName:n,viewOnce:r,isPtvValue:a,mode:o})=>{const[i,l]=v.useState(!1),[c,d]=v.useState(a??!1),[u,m]=v.useState(void 0),[f,p]=v.useState(t??""),[g,x]=v.useState(void 0),[y,b]=v.useState("image"),[w,j]=v.useState(n??""),N=new Te,I=new jn,S=xn(N),E=By(I),A=qa(I),O=aD(I),M=vn(N);v.useEffect(()=>{t!==f&&p(t??""),n!==w&&j(n??""),r!==i&&l(r??!1)},[t,n,r]);const T=()=>{o==="edit"?(j(n??""),p(t??"")):(m(""),j(""),p(""))},$=(H,q,z)=>{if(m(H),x(q),z!=="image"&&z!=="video"){b("image");return}b(z??"image")},P=async H=>{if(H&&o==="edit"&&e){const q=await A(e);if(q){const z=await zy(q.data);p(q.caption),m(q.data),(z==="image"||z==="video")&&b(z)}}},C=async()=>{if(o==="create"&&u){const{media:H}=await E({caption:f,name:w.trim(),base64:u,asViewOnce:i,isPtv:c});return await S({optionKey:"medias",optionToAdd:{id:H.id,name:H.name,size:await Ne(H,{itemData:H.data})}}),ae({title:`Mídia "${w.trim()}" adicionada com sucesso.`}),T(),H.id}else if(o==="edit"&&e){const{media:H}=await O({id:e,base64:u,name:w.trim(),caption:f,asViewOnce:i,isPtv:c});return await M({optionKey:"medias",optionToUpdate:{id:H.id,name:H.name,size:await Ne(H,{itemData:H.data})}}),ae({title:`Mídia "${w.trim()}" atualizada com sucesso.`}),H.id}},D=H=>(H.stopPropagation(),b("image"),d(!1),m(void 0)),k={value:w,onChange:H=>j(H.target.value)},L={value:f,onChange:H=>p(H.target.value)};return{base64:u,fileName:g,handleModalAction:C,handleOpenChange:P,mediaType:y,handleRemoveUploadedMedia:D,handleUploadedMedia:$,hasMedia:!!u&&!!g,nameHandler:k,viewOnceHandler:{checked:i,onCheckedChange:l},isPtvHandler:{checked:c,onCheckedChange:d},notReady:w.trim()===""||o==="create"&&!u,title:o==="create"?"Adicionar mídia":"Editar mídia",captionHandler:L,capton:f,clearAllState:T,isPtvValue:c}};function $R({fileName:e,onRemoveUploaded:t}){return s.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,s.jsx(K,{variant:"actionDestructive",icon:s.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function _R({actionName:e,base64:t,errorMessage:n,fileName:r,hasMedia:a,maxSize:o,onRemoveUploaded:i,onSelectMedia:l}){return s.jsxs("div",{children:[s.jsx(hi,{className:Y(e==="inserir"&&!a&&"border-destructive zv-dark:border-destructive-foreground"),maxSize:o,accept:{"image/*":[".png",".jpg"],"video/*":[".mp4"]},onSelect:l,dragHintText:s.jsx("p",{className:"text-base",children:"Solte a mídia aqui..."}),hintText:s.jsxs("div",{className:"flex h-full items-center gap-4",children:[t&&s.jsx(Ia,{data:t,className:"h-full",videoControls:!0}),s.jsxs("p",{className:"text-base leading-8",children:[a?s.jsx($R,{fileName:r,onRemoveUploaded:i}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:["Para ",e," uma mídia, clique aqui ou arraste o arquivo para esta área."]}),s.jsx("br",{})]}),s.jsxs("span",{children:["Formatos aceitos: ",s.jsx("span",{className:"text-primary",children:".png"}),","," ",s.jsx("span",{className:"text-primary",children:".jpg"}),","," ",s.jsx("span",{className:"text-primary",children:".mp4"})]})]})]})}),n?typeof n=="string"?s.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:n}):n:""]})}const RR=1e3,Sp=RR*1e3;function yu({itemId:e,mediaName:t,mode:n="create",trigger:r,viewOnce:a,isPtv:o,className:i,callBackFunction:l}){const{base64:c,fileName:d,handleModalAction:u,handleOpenChange:m,handleRemoveUploadedMedia:f,handleUploadedMedia:p,hasMedia:g,nameHandler:x,captionHandler:y,notReady:b,title:w,clearAllState:j,viewOnceHandler:N,isPtvHandler:I,mediaType:S,isPtvValue:E}=PR({itemId:e,mediaName:t,mode:n,viewOnce:a,isPtvValue:o}),[A]=ye("high-size-medias",de),[O]=ye("media-is-ptv",de),M=A?60*Sp:16*Sp;return s.jsx(ve,{className:i,onCancel:j,onAction:async()=>{const T=await u();l&&T&&l(T)},action:"Salvar",actionProps:{disabled:b,icon:s.jsx(Ct,{})},description:s.jsxs("div",{className:"!gap-5",children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"mediaName",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"mediaName",placeholder:"Nome da mídia",...x,errorMessage:!x.value.trim()&&"Campo obrigatório."})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[E&&O&&s.jsx(Ge,{weight:"bold",size:18,className:"text-status-caution "}),s.jsx(xt,{id:"as-view-once",...N,disabled:E&&O}),s.jsxs(ie,{htmlFor:"as-view-once",children:["Enviar mídia como"," ",s.jsx("span",{className:"text-primary",children:"visualização única"})]})]}),s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsxs(ie,{htmlFor:"mediaCaption",className:"flex items-center gap-2 max-sm:hidden",children:[E&&O&&s.jsx(Ge,{weight:"bold",size:18,className:"text-status-caution "})," ","Legenda da mídia"]}),s.jsx(Xc,{className:"bg-background text-base",id:"mediaCaption",placeholder:"Legenda da mídia",rows:7,disabled:E&&O,...y})]}),s.jsx(_R,{maxSize:M,actionName:n==="create"?"inserir":"alterar",fileName:d,hasMedia:g,onRemoveUploaded:f,onSelectMedia:p,base64:c,errorMessage:n==="create"&&!g&&"Campo obrigatório"}),S==="video"&&O&&s.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-base",children:[s.jsx(xt,{id:"is-ptv",...I}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs(ie,{htmlFor:"is-ptv",className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-primary",children:"Enviar mídia em forma de recado"}),s.jsx("span",{className:"flex items-center text-destructive",children:"* Videos de no máximo 60s"})]}),s.jsxs(ie,{htmlFor:"is-ptv-info",className:"flex items-center gap-1 text-xs",children:[s.jsx(Ge,{weight:"bold",size:16,className:"text-status-caution"}),s.jsxs("b",{children:["Ao ativar esta opção, a"," ",s.jsx("span",{className:"text-primary",children:"legenda"})," e a"," ",s.jsx("span",{className:"text-primary",children:"visualização única"})," da mídia não serão efetivadas no envio."]})]})]})]})]}),onOpenChange:m,title:w,trigger:r,cancel:"Cancelar"})}const VR=({itemId:e,textMessageName:t,mode:n})=>{const[r,a]=v.useState(t),[o,i]=v.useState(""),l=new Nn,c=new Te,d=Zy(l),u=xD(l),m=Wa(l),f=xn(c),p=vn(c);v.useEffect(()=>{t!==r&&a(t)},[t]);const g={value:o,onChange:j=>i(j.target.value)},x=()=>{n==="edit"?a(t):(a(""),i(""))};return{dataHandler:g,handleModalAction:async()=>{if(n==="create"&&o){const{textMessage:j}=await d({name:r.trim(),base64:o});return await f({optionKey:"messages",optionToAdd:{id:j.id,name:j.name,size:await Ne(j,{itemData:j.data})}}),ae({title:`Mensagem "${r.trim()}" adicionada com sucesso.`}),x(),j.id}else if(n==="edit"&&e){const{textMessage:j}=await u({id:e,base64:o,name:r.trim()});return await p({optionKey:"messages",optionToUpdate:{id:j.id,name:j.name,size:await Ne(j,{itemData:j.data})}}),ae({title:`Mensagem "${r.trim()}" atualizada com sucesso.`}),j.id}},handleOpenChange:async j=>{if(j&&n==="edit"&&e){const N=await m(e);N&&i(N.data)}},nameHandler:{value:r,onChange:j=>a(j.target.value)},notReady:r.trim()===""||!o||o.trim()==="",title:n==="create"?"Adicionar mensagem":"Editar mensagem",clearAllState:x}};function bu({itemId:e,textMessageName:t="",mode:n="create",trigger:r,className:a,callBackFunction:o}){const{dataHandler:i,handleModalAction:l,handleOpenChange:c,nameHandler:d,notReady:u,title:m,clearAllState:f}=VR({itemId:e,textMessageName:t,mode:n});return s.jsx(ve,{onCancel:f,onAction:async()=>{const p=await l();o&&p&&o(p)},action:"Salvar",actionProps:{disabled:u,icon:s.jsx(Ct,{})},description:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"textMessageName",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"textMessageName",placeholder:"Nome da mensagem",ref:$n,...d,errorMessage:!d.value.trim()&&"Campo obrigatório"})]}),s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"textMessageData",className:"max-sm:hidden",children:"Texto"}),s.jsx(Xc,{required:!0,className:"bg-background text-base",id:"textMessageData",placeholder:"Texto da mensagem",rows:7,...i,errorMessage:!i.value.trim()&&"Campo obrigatório"})]})]}),onOpenChange:c,title:m,trigger:r,cancel:"Cancelar",className:a})}function Zn({children:e,defaultSelectedItem:t,inputClasses:n,items:r,onSelectItem:a,popoverIsModal:o=!0,previewDataBuilder:i,selectedItem:l,selectedType:c,autoFocus:d=!1,addNewItem:u=!1}){var b;const[m,f]=v.useState(d),p=v.useRef(null),g={document:"documento",message:"mensagem",media:"mídia",audio:"áudio",delay:"atraso",funnel:"funil"};function x(w){if(!u)return null;switch(c){case"audio":return s.jsx(bd,{className:"!z-[10004]",trigger:w,callBackFunction:a});case"media":return s.jsx(yu,{className:"!z-[10004]",trigger:w,callBackFunction:a});case"document":return s.jsx(Jd,{className:"!z-[10004]",trigger:w,callBackFunction:a});case"message":return s.jsx(bu,{className:"!z-[10004]",trigger:w,callBackFunction:a});default:return null}}const y=v.useMemo(()=>x(s.jsx("button",{type:"button",ref:p,className:"hidden",onClick:()=>f(!0),children:"Adicionar"})),[c,u]);return s.jsxs("div",{className:"flex flex-col gap-3",children:[e&&s.jsx("div",{className:Y("flex flex-wrap overflow-hidden rounded-full border border-solid border-neutral-70",n),id:"zv-item-type-selector",children:e}),s.jsxs(Ma,{open:m,onOpenChange:f,modal:o,children:[s.jsx(Da,{asChild:!0,children:s.jsxs(K,{variant:"outline",role:"combobox","aria-expanded":m,childrenVariant:"no-dark",className:Y("flex h-9 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid",!l&&"border-red-400",l&&"border-transparent",n),children:[s.jsx("p",{className:"truncate",children:l?(b=r.find(w=>w.id===l))==null?void 0:b.name:"Selecione um item"}),s.jsx(Es,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ka,{className:"z-[10006] w-[var(--radix-popper-anchor-width)] p-0",children:s.jsxs(Oa,{defaultValue:t,filter:(w,j)=>{var E;const N=(E=r.find(A=>A.id===w))==null?void 0:E.name;if(!N)return 0;const I=Pt(N),S=Pt(j);return I.includes(S)?1:0},children:[s.jsx(Ta,{placeholder:c&&`Pesquisar ${g[c]}`,className:"h-9"}),s.jsxs(Fa,{children:[s.jsx(La,{className:"py-2",children:"Nenhum item encontrado."}),s.jsx(Pa,{children:s.jsxs("div",{className:"divide-y",children:[r.map(w=>s.jsxs($a,{value:w.id,onSelect:j=>{a(j),f(!1)},children:["asViewOnce"in w&&w.asViewOnce&&s.jsx(Xo,{weight:"light",className:"mr-1.5 h-4 w-4"}),"isPtt"in w&&!w.isPtt&&s.jsx(qy,{weight:"light",className:"mr-1.5 h-4 w-4"}),s.jsx("p",{children:w.name}),s.jsx(Cs,{className:Y("ml-auto h-4 w-4",l===w.id?"opacity-100":"opacity-0")}),i&&s.jsxs(Jo,{closeDelay:200,openDelay:200,children:[s.jsx(Qo,{className:"absolute right-8",children:s.jsx(nd,{size:20})}),s.jsx(ei,{className:"max-h-[50dvh] w-auto max-w-[80dvw] overflow-hidden",children:i(w.id)})]})]},w.id)),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx(K,{size:"sm",onClick:()=>{var w;(w=p.current)==null||w.click(),f(!1)},icon:s.jsx(_t,{weight:"bold"}),className:"mt-1 w-full rounded-sm",children:"Adicionar"})})]})})]})]})})]}),y&&s.jsx("div",{children:y}),s.jsx("span",{className:Y("-my-2.5 ml-2 text-start text-sm font-light",l?"text-transparent":"text-red-400"),children:"Campo obrigatório"})]})}class HR{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendAudioNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendAudioNode: Audio not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function BR({itemId:e,flowId:t,nodeId:n,simulationDelay:r}){const{minutes:a,seconds:o}=on.fromMillisecondsToMinutes(r),i=new Se,l=new an,c=rt.useGetAudioList(),[d,u]=v.useState(e),[m,f]=v.useState(a),[p,g]=v.useState(o),x={value:String(m),onValueChange:({valueAsNumber:b})=>{Number.isNaN(b)&&(b=0),f(b)}},y={value:String(p),onValueChange:({valueAsNumber:b})=>{Number.isNaN(b)&&(b=0),g(b)}};return s.jsx(ve,{actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const b=new HR(i,l),{id:w}=await b.execute({flowId:t,data:{id:n,props:{itemId:d,simulationDelay:(m*60+p)*1e3}}});u(w)},action:"Salvar",cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsx(Zn,{addNewItem:!0,autoFocus:!0,defaultSelectedItem:d??"",items:c,onSelectItem:async b=>u(b),popoverIsModal:!1,previewDataBuilder:b=>s.jsx(cl,{itemId:b}),selectedItem:d,selectedType:"audio",children:null}),s.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[s.jsxs(ie,{htmlFor:"delay-min",className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "gravando áudio..." por'," ",s.jsx("span",{className:"font-bold text-primary",children:`${x.value} min e ${y.value}s`})]}),s.jsx(dt,{...x,hint:"Minutos"}),s.jsx(dt,{...y,hint:"Segundos"})]})]}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class zR{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}function ZR({contactName:e,contactPhone:t,flowId:n,nodeId:r}){const a=new Se,{country:o,handlePhoneValueChange:i,inputRef:l,inputValue:c,phone:d,setCountry:u}=qi({defaultCountry:"br",value:t}),[m,f]=v.useState(e);return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{await new zR(a).execute({flowId:n,data:{id:r,props:{contactName:m,contactPhone:d}}})},action:"Salvar",cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsx(ze,{name:"SendContactNodeConfigNameInput",type:"text",value:m,onChange:p=>{f(p.target.value)}}),s.jsxs("div",{className:"flex gap-1.5",children:[s.jsxs(St,{value:o.iso2,onValueChange:p=>u(p),children:[s.jsx(ht,{className:"h-auto w-auto whitespace-pre-wrap break-all bg-background px-4",value:o.iso2,children:s.jsx(hs,{iso2:o.iso2,className:"h-9"})}),s.jsx(gt,{className:"z-[10006] max-h-[40dvh] w-[562px]",children:s.jsx("div",{className:"divide-y",children:gr.map(p=>{const g=Mt(p);return s.jsx(Me,{value:g.iso2,className:"gap-2 whitespace-pre-wrap break-all",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hs,{iso2:g.iso2,className:"h-9 shrink-0"}),s.jsx("p",{className:"shrink-0",children:g.name}),s.jsxs("p",{className:"shrink-0 text-primary/80",children:["+",g.dialCode]})]})},g.iso2)})})})]}),s.jsx(ze,{name:"SendContactNodeConfigPhoneInput",type:"tel",ref:l,value:c,onChange:i})]})]}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class qR{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendDocumentNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendDocumentNode: Document not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function WR({itemId:e,flowId:t,nodeId:n}){const r=new Se,a=new bn,o=Ke.useGetDocumentList(),[i,l]=v.useState(e);return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const c=new qR(r,a),{id:d}=await c.execute({flowId:t,data:{id:n,props:{itemId:i}}});l(d)},action:"Salvar",cancel:"Cancelar",description:s.jsx("div",{children:s.jsx(Zn,{addNewItem:!0,autoFocus:!0,defaultSelectedItem:i??"",items:o,onSelectItem:async c=>l(c),popoverIsModal:!1,previewDataBuilder:c=>s.jsx(dl,{itemId:c}),selectedItem:i,selectedType:"document",children:null})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class UR{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendMediaNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendMediaNode: Media not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function GR({itemId:e,flowId:t,nodeId:n}){const r=new Se,a=new jn,o=Ye.useGetMediaList(),[i,l]=v.useState(e);return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const c=new UR(r,a),{id:d}=await c.execute({flowId:t,data:{id:n,props:{itemId:i}}});l(d)},action:"Salvar",cancel:"Cancelar",description:s.jsx("div",{children:s.jsx(Zn,{autoFocus:!0,addNewItem:!0,defaultSelectedItem:i??"",items:o,onSelectItem:async c=>l(c),popoverIsModal:!1,previewDataBuilder:c=>s.jsx(ul,{itemId:c}),selectedItem:i,selectedType:"media",children:null})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class KR{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendTextNode: Id must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendTextNode: TextMessage not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function YR({itemId:e,flowId:t,nodeId:n,simulationDelay:r}){const{minutes:a,seconds:o}=on.fromMillisecondsToMinutes(r),i=new Se,l=new Nn,c=$e.useGetTextMessageList(),[d,u]=v.useState(e),[m,f]=v.useState(a),[p,g]=v.useState(o),x={value:String(m),onValueChange:({valueAsNumber:b})=>{Number.isNaN(b)&&(b=0),f(b)}},y={value:String(p),onValueChange:({valueAsNumber:b})=>{Number.isNaN(b)&&(b=0),g(b)}};return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const b=new KR(i,l),{id:w}=await b.execute({flowId:t,data:{id:n,props:{itemId:d,simulationDelay:(m*60+p)*1e3}}});u(w)},action:"Salvar",onCancel:()=>{u(e)},cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2 text-base",children:"Selecione um texto"}),s.jsx(Zn,{addNewItem:!0,autoFocus:!0,defaultSelectedItem:d??"",items:c,onSelectItem:async b=>u(b),popoverIsModal:!1,previewDataBuilder:b=>s.jsx(ml,{itemId:b}),selectedItem:d,selectedType:"message",children:null}),s.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[s.jsxs(ie,{htmlFor:"delay-min",className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "digitando..." por'," ",s.jsx("span",{className:"font-bold text-primary",children:`${x.value} min e ${y.value}s`})]}),s.jsx(dt,{...x,hint:"Minutos"}),s.jsx(dt,{...y,hint:"Segundos"})]})]}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class XR{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}function JR({compareRule:e,expectedMessages:t,expirationTimeoutInMs:n,initialFollowUpData:r,timeUnitType:a,nodeId:o,flowId:i}){const l=new Se,[c,d]=v.useState(t??[]),[u,m]=v.useState(!1),[f,p]=v.useState(e),[g,x]=v.useState((n??0)>0),[y,b]=v.useState((r==null?void 0:r.timeoutType)??"dynamic"),[w,j]=v.useState(()=>(r==null?void 0:r.timeoutType)==="fixed"&&(r!=null&&r.hour)?r.hour:8),[N,I]=v.useState(()=>(r==null?void 0:r.timeoutType)==="fixed"&&Number.isInteger(r==null?void 0:r.day)?`${r.day}`:"1"),[S,E]=v.useState(()=>(r==null?void 0:r.timeoutType)==="fixed"&&(r!=null&&r.reference)?`${r.reference}`:"lastItem"),[A,O]=v.useState(a),[M,T]=v.useState(()=>{const D=n??0;return gs(a,D<1e3?1e3:D)}),$={value:String(M),onValueChange:({valueAsNumber:D})=>{Number.isNaN(D)&&(D=1),T(D)}},P=D=>{b(D)},C=y==="dynamic"?{timeoutType:"dynamic",timeUnit:M,timeUnitType:A}:{timeoutType:"fixed",day:Number(N),hour:w,reference:S};return s.jsx(ve,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const D=new XR(l),k=t,L=c;console.log({oldExpectedMessages:k,newExpectedMessages:L});const F=[];k==null||k.forEach((V,R)=>{L.includes(V)||F.push(R)});const _=[];L.forEach((V,R)=>{k!=null&&k.includes(V)||_.push(R)});const H=await l.findById(i),q=H==null?void 0:H.draft.nodes.find(V=>V.id===o);let z=(q==null?void 0:q.nextNodeIds)??[];if(q){let V=q.nextNodeIds??[];F.length>0&&(V=V.filter((R,B)=>!F.includes(B)),z=V),_.length>0&&(_.forEach(R=>{V.splice(R,0,null)}),z=V)}await D.execute({flowId:i,data:{id:o,props:{nextNodeIds:z,canFollowUp:g,expectedMessages:c,compareRule:f,expirationTimeoutInMs:g?pa(A,M):0,followUpData:C,timeUnitType:A}}})},action:"Salvar",cancel:"Cancelar",description:s.jsxs("div",{children:[s.jsxs(Ma,{open:u,onOpenChange:m,modal:!0,children:[s.jsx(Da,{asChild:!0,children:s.jsxs(K,{variant:"outline",role:"combobox","aria-expanded":u,childrenVariant:"no-dark",className:Y("flex h-9 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[s.jsx("p",{className:"truncate",children:Fr[f]}),s.jsx(Es,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ka,{className:"z-[10006] w-[var(--radix-popper-anchor-width)] p-0",children:s.jsxs(Oa,{defaultValue:f,filter:(D,k)=>{const L=Fr[D];if(!L)return 0;const F=Pt(L),_=Pt(k);return F.includes(_)?1:0},children:[s.jsx(Ta,{placeholder:"Pesquisar opção",className:"h-9"}),s.jsxs(Fa,{children:[s.jsx(La,{className:"py-2",children:"Nenhum item encontrado."}),s.jsx(Pa,{children:s.jsx("div",{className:"divide-y",children:Object.entries(Fr).map(([D,k])=>s.jsxs($a,{value:D,onSelect:L=>{(L==="anything"||L==="anyTextMessage")&&d([]),p(L),m(!1)},children:[s.jsx("p",{children:k}),s.jsx(Cs,{className:Y("ml-auto h-4 w-4",f===D?"opacity-100":"opacity-0")})]},D))})})]})]})})]}),!f.startsWith("any")&&s.jsx(fl,{className:"max-h-36 overflow-y-auto",values:c,changeValue:D=>d(D)}),s.jsxs("div",{className:"pointer-events-auto flex items-center space-x-2",children:[s.jsx(qt,{id:"toggle-can-expire",className:"h-5 w-5 border border-solid border-primary",checked:g,onClick:()=>x(D=>!D)}),s.jsx(ie,{htmlFor:"toggle-can-expire",className:"grid cursor-pointer gap-1.5 text-sm font-bold leading-none text-muted-foreground",children:"Habilitar follow-up caso o usuário não responder"})]}),g&&s.jsx("div",{children:s.jsxs(x1,{className:"flex flex-col gap-5",defaultValue:y,onValueChange:P,children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(Eo,{value:"dynamic",id:"dynamic"}),s.jsx(ie,{htmlFor:"dynamic",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Aguardar a resposta do usuário por"})]}),s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(dt,{disabled:y==="fixed",inputClasses:"w-14 bg-transparent",controlClasses:Y(y==="fixed"&&"bg-background opacity-60"),max:999,min:1,...$}),s.jsxs(St,{value:A,onValueChange:D=>{O(D)},children:[s.jsx(ht,{disabled:y==="fixed",className:Y("h-full w-28 p-3.5",y==="fixed"&&"bg-background opacity-60"),children:s.jsx(Zt,{placeholder:De[A]})}),s.jsxs(gt,{className:"z-[9999]",children:[s.jsx(Me,{value:"seconds",children:De.seconds}),s.jsx(Me,{value:"minutes",children:De.minutes}),s.jsx(Me,{value:"hours",children:De.hours}),s.jsx(Me,{value:"days",children:De.days})]})]})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(Eo,{value:"fixed",id:"fixed"}),s.jsx(ie,{htmlFor:"fixed",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Aguardar a resposta do usuário até"})]}),s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsxs(St,{value:String(w),onValueChange:D=>{j(Number(D))},children:[s.jsx(ht,{className:Y("h-full w-20 p-3.5",y==="dynamic"&&"bg-background opacity-60"),disabled:y==="dynamic",children:s.jsx(Zt,{placeholder:"8h"})}),s.jsx(gt,{className:"z-[9999] max-h-[50dvh]",children:Array(24).fill(0).map((D,k)=>s.jsxs(Me,{value:String(k),children:[k,"h"]},k))})]}),s.jsxs(St,{value:String(N),onValueChange:D=>{I(D)},children:[s.jsx(ht,{className:Y("h-full w-40 p-3.5",y==="dynamic"&&"bg-background opacity-60"),disabled:y==="dynamic",children:s.jsx(Zt,{placeholder:Lr[N]})}),s.jsx(gt,{className:"z-[999]",children:Object.keys(Lr).map(D=>s.jsx(Me,{value:D,children:Lr[Number(D)]},D))})]}),s.jsx("span",{className:"min-w-max text-sm",children:"em relação"}),s.jsxs(St,{value:S,onValueChange:D=>{E(D)},children:[s.jsx(ht,{className:Y("h-full w-48 p-3.5",y==="dynamic"&&"bg-background opacity-60"),disabled:y==="dynamic",children:s.jsx(Zt,{placeholder:Pr.lastItem})}),s.jsx(gt,{className:"z-[9999]",children:Object.keys(Pr).map(D=>s.jsx(Me,{value:D,children:Pr[D]},D))})]})]})]})]})})]}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(mt,{size:32}),s.jsx("p",{children:"Configurações"})]}),trigger:s.jsx(K,{icon:s.jsx(mt,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}const it={audio:e=>({configNode:s.jsx(BR,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id,simulationDelay:e.simulationDelay}),itemId:e.itemId,simulationDelay:e.simulationDelay,flowId:e.flowId,icon:s.jsx(Tn,{size:28,className:"min-w-max shrink-0 text-item-audio"}),id:e.id,label:"Enviar áudio",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"audio"}),contact:e=>({configNode:s.jsx(ZR,{contactName:e.contactName,contactPhone:e.contactPhone,flowId:e.flowId,nodeId:e.id}),contactName:e.contactName,contactPhone:e.contactPhone,flowId:e.flowId,icon:s.jsx(Mn,{size:28,className:"min-w-max shrink-0 text-foreground"}),id:e.id,label:"Enviar contato",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"contact"}),delay:e=>({configNode:s.jsx(vk,{delayInMs:e.delayInMs,flowId:e.flowId,timeUnitType:e.timeUnitType,nodeId:e.id}),timeUnitType:e.timeUnitType,delayInMs:e.delayInMs,flowId:e.flowId,icon:s.jsx(sc,{size:28,className:"min-w-max shrink-0 text-item-trigger"}),id:e.id,label:"Esperar",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"delay"}),document:e=>({configNode:s.jsx(WR,{flowId:e.flowId,itemId:e.itemId,nodeId:e.id}),itemId:e.itemId,flowId:e.flowId,icon:s.jsx(hn,{size:28,className:"min-w-max shrink-0 text-item-document"}),id:e.id,label:"Enviar documento",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"document"}),media:e=>({configNode:s.jsx(GR,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id}),itemId:e.itemId,flowId:e.flowId,icon:s.jsx(aa,{size:28,className:"min-w-max shrink-0 text-item-media"}),id:e.id,label:"Enviar mídia",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"media"}),start:e=>({enabledSchedule:e.enabledSchedule,enabledTrigger:e.enabledTrigger,trigger:e.trigger,flowId:e.flowId,icon:s.jsx(v1,{size:28,className:"min-w-max shrink-0 text-item-media"}),id:e.id,label:"Iniciar",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:null,nodeType:"start",schedule:e.schedule}),text:e=>({configNode:s.jsx(YR,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id,simulationDelay:e.simulationDelay}),itemId:e.itemId,simulationDelay:e.simulationDelay,flowId:e.flowId,icon:s.jsx(Fn,{size:28,className:"min-w-max shrink-0 text-item-message"}),id:e.id,label:"Enviar texto",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeId:e.id,nodeType:"text"}),"user-input":e=>({configNode:s.jsx(JR,{flowId:e.flowId,compareRule:e.compareRule,expectedMessages:e.expectedMessages,initialFollowUpData:e.followUpData,nodeId:e.id,expirationTimeoutInMs:e.expirationTimeoutInMs,timeUnitType:e.timeUnitType}),timeUnitType:e.timeUnitType,canFollowUp:e.canFollowUp,compareRule:e.compareRule,expectedMessages:e.expectedMessages,expirationTimeoutInMs:e.expirationTimeoutInMs,followUpData:e.followUpData,flowId:e.flowId,icon:s.jsxs("div",{className:"relative",children:[s.jsx(Mn,{size:28,className:"min-w-max shrink-0 text-item-trigger"}),s.jsx(ac,{size:16,className:"absolute -right-2 -top-1.5 min-w-max shrink-0 text-item-trigger"})]}),id:e.id,label:"Aguardar o usuário responder",nextNodeIds:e.nextNodeIds,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"user-input"})},Ep=(e,t)=>{const n=e.map(a=>{let o;switch(a.type){case"delay":o=it.delay(a);break;case"user-input":o=it["user-input"](a);break;case"audio":o=it.audio(a);break;case"contact":o=it.contact(a);break;case"document":o=it.document(a);break;case"media":o=it.media(a);break;case"text":o=it.text(a);break;case"start":o=it.start(t);break}return{id:a.id,position:a.position,data:o,type:a.type in A8?a.type:"default",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"}}),r={id:t.id,position:t.position,data:it.start(t),type:"start",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"};return n.push(r),n},Cp=(e,t)=>{var i,l;const n=e.filter(c=>c.nextNodeIds&&c.nextNodeIds.length>0).map((c,d)=>{var f,p;const u=c.nextNodeIds??[];let m="source-handle";if(c.type==="user-input"&&"expectedMessages"in c&&"compareRule"in c){const g=c.compareRule;g!=="anyTextMessage"&&g!=="anything"&&(m=`source-handle-${c.expectedMessages.join(",")}`)}return{id:`${c.id}-${u.length>1?(f=c.nextNodeIds)==null?void 0:f.join(","):((p=c.nextNodeIds)==null?void 0:p[0])??""}-${d}`,source:c.id,sourceHandle:m,target:u.length>1?u.join(","):u[0]??"",animated:!1,data:{flowId:c.flowId},markerEnd:{type:pn.ArrowClosed,width:20,color:"#13C273"},style:{strokeWidth:2,stroke:"#13C273"}}});structuredClone(n).forEach(c=>{var u;const d=c.target.split(",").map(m=>m.trim().length===0?null:m);if(d.length>1){const f=(((u=c.sourceHandle)==null?void 0:u.split("source-handle-")[1])??"source-handle").split(",");d.forEach((g,x)=>{if(g){const y=`${c.source}-${g}-${x}`;n.push({...c,id:y,sourceHandle:`source-handle-${f[x]}`,target:g})}});const p=n.findIndex(g=>g.id===c.id);p>-1&&n.splice(p,1)}});const a=e.filter(c=>c.nextNodeIdOnExpiration).map(c=>({id:`${c.id}-${c.nextNodeIdOnExpiration}`,source:c.id,sourceHandle:"expiration-source-handle",target:c.nextNodeIdOnExpiration??"",animated:!0,data:{flowId:c.flowId},markerEnd:{type:pn.ArrowClosed,width:20,color:"#F08E17"},style:{strokeWidth:2,stroke:"#F08E17"}}));return[{id:`${t.id}-${(i=t.nextNodeIds)==null?void 0:i[0]}`,source:t.id,sourceHandle:"source-handle",target:((l=t.nextNodeIds)==null?void 0:l[0])??"",animated:!1,data:{flowId:t.flowId},markerEnd:{type:pn.ArrowClosed,width:20,color:"#13C273"},style:{strokeWidth:2,stroke:"#13C273"}},...n,...a]},Ip=(e,t)=>{if(t!=null&&t.skipEdges&&t.skipNodes)throw new Error("You can not skip everything");if(t!=null&&t.skipNodes)return{edges:Cp(e.draft.nodes,e.draftStartNode)};if(t!=null&&t.skipEdges)return{nodes:Ep(e.draft.nodes,e.draftStartNode)};const n=Cp(e.draft.nodes,e.draftStartNode),r=Ep(e.draft.nodes,e.draftStartNode);return{edges:n,nodes:r}},QR=()=>v.useCallback(async({edges:t,nodes:n})=>{const r=n.find(a=>a.type==="start");return{edges:t.filter(a=>a.source!==(r==null?void 0:r.id)),nodes:n.filter(a=>a.id!==(r==null?void 0:r.id))}},[]),eV=({flowRepository:e,handleUpdateEdges:t,selectedFlowId:n})=>v.useCallback(async a=>{var l;const o=a.source,i=a.target;if(a.sourceHandle==="expiration-source-handle")e.updateNode({flowId:n,data:{id:o,props:{nextNodeIdOnExpiration:i}}});else{if((l=a.sourceHandle)!=null&&l.includes("source-handle-")){const c=a.sourceHandle.split("source-handle-")[1],d=await e.findById(n),u=d==null?void 0:d.draft.nodes.find(m=>m.id===o);if(!u){console.warn("currentNode not found");return}if("expectedMessages"in u){const m=u.expectedMessages,f=m.findIndex(g=>g===c);if(f===-1){console.warn("expectedMessage not found");return}const p=u.nextNodeIds===null?Array(m.length).fill(null):u.nextNodeIds;f!==-1&&(p[f]=i),await e.updateNode({flowId:n,data:{id:o,props:{nextNodeIds:p}}})}}else await e.updateNode({flowId:n,data:{id:o,props:{nextNodeIds:[i]}}});e.updateStartNode({flowId:n,data:{id:o,props:{nextNodeIds:[i]}}})}return t(c=>K2({...a,animated:a.sourceHandle==="expiration-source-handle"},c))},[e,t,n]),tV=({selectedFlowId:e})=>{const{screenToFlowPosition:t}=yr(),{setFlowId:n,setFromHandle:r,setFromNodeId:a,setPosition:o,setIsOpen:i}=at();return v.useCallback((c,d)=>{var m;if(!d.isValid&&!d.toHandle){const f=e,p=((m=d.fromNode)==null?void 0:m.id)??null,g=d==null?void 0:d.fromHandle,x=g==null?void 0:g.id,y=t({x:(g==null?void 0:g.x)??0,y:(g==null?void 0:g.y)??0}),{clientX:b,clientY:w}="changedTouches"in c?c.changedTouches[0]:c,j={x:b+(b-y.x<100?100:0),y:w};(p&&f&&x&&(x==="source-handle"||x.includes("source-handle-"))||x==="expiration-source-handle")&&(n(f),r(x),a(p),o(t(j)),i(!0))}},[t,e,n,r,a,i,o])},nV=()=>v.useCallback(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},[]),rV=({flowId:e,position:t,type:n})=>{let r,a;switch(n){case"delay":r=sa.create({delayInMs:1,flowId:e,nextNodeIds:null,position:t,timeUnitType:"seconds",type:n}).metadata,a=it.delay(r);break;case"user-input":r=sd.create({canFollowUp:!1,compareRule:"anything",expectedMessages:[],flowId:e,followUpData:{timeoutType:"dynamic",timeUnit:1,timeUnitType:"seconds"},nextNodeIds:null,position:t,timeUnitType:"seconds",type:n}).metadata,a=it["user-input"](r);break;case"audio":r=ti.create({flowId:e,itemId:"",nextNodeIds:null,position:t,simulationDelay:0,type:n}).metadata,a=it.audio(r);break;case"contact":r=rd.create({contactName:"",contactPhone:"",flowId:e,itemId:"",nextNodeIds:null,position:t,type:n}).metadata,a=it.contact(r);break;case"document":r=ni.create({flowId:e,itemId:"",nextNodeIds:null,position:t,type:n}).metadata,a=it.document(r);break;case"media":r=ri.create({flowId:e,itemId:"",nextNodeIds:null,position:t,type:n}).metadata,a=it.media(r);break;case"text":r=si.create({flowId:e,itemId:"",nextNodeIds:null,position:t,simulationDelay:0,type:n}).metadata,a=it.text(r);break;case"start":case null:default:a=null}return!a||!r?null:{node:{id:r.id,position:r.position,data:a,type:n??"default",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"},nodeMetadata:r}},sV=({selectedFlowId:e,type:t})=>{const{screenToFlowPosition:n}=yr(),{selectFlowNodeType:r,setFlowId:a,setFromHandle:o,setFromNodeId:i,setIsOpen:l,setPosition:c}=at();return v.useCallback(u=>{if(u.preventDefault(),!t)return;const m=n({x:u.clientX,y:u.clientY});rV({flowId:e,position:m,type:t})&&(r(t),a(e),o(null),i(null),l(!0),c(m))},[n,r,e,a,o,i,l,c,t])},aV=({handleUpdateEdges:e})=>v.useCallback(n=>{e(r=>pv(n,r))},[e]);var oV="\0",Sr="\0",Ap="";let iV=class{constructor(t){pe(this,"_isDirected",!0);pe(this,"_isMultigraph",!1);pe(this,"_isCompound",!1);pe(this,"_label");pe(this,"_defaultNodeLabelFn",()=>{});pe(this,"_defaultEdgeLabelFn",()=>{});pe(this,"_nodes",{});pe(this,"_in",{});pe(this,"_preds",{});pe(this,"_out",{});pe(this,"_sucs",{});pe(this,"_edgeObjs",{});pe(this,"_edgeLabels",{});pe(this,"_nodeCount",0);pe(this,"_edgeCount",0);pe(this,"_parent");pe(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[Sr]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var r=arguments,a=this;return t.forEach(function(o){r.length>1?a.setNode(o,n):a.setNode(o)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Sr,this._children[t]={},this._children[Sr][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var r=a=>n.removeEdge(n._edgeObjs[a]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(a){n.setParent(a)}),delete this._children[t]),Object.keys(this._in[t]).forEach(r),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Sr;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==Sr)return n}}children(t=Sr){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===Sr)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const a=new Set(n);for(var r of this.successors(t))a.add(r);return Array.from(a.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([i,l]){t(i)&&n.setNode(i,l)}),Object.values(this._edgeObjs).forEach(function(i){n.hasNode(i.v)&&n.hasNode(i.w)&&n.setEdge(i,r.edge(i))});var a={};function o(i){var l=r.parent(i);return l===void 0||n.hasNode(l)?(a[i]=l,l):l in a?a[l]:o(l)}return this._isCompound&&n.nodes().forEach(i=>n.setParent(i,o(i))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var r=this,a=arguments;return t.reduce(function(o,i){return a.length>1?r.setEdge(o,i,n):r.setEdge(o,i),i}),this}setEdge(){var t,n,r,a,o=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(t=i.v,n=i.w,r=i.name,arguments.length===2&&(a=arguments[1],o=!0)):(t=i,n=arguments[1],r=arguments[3],arguments.length>2&&(a=arguments[2],o=!0)),t=""+t,n=""+n,r!==void 0&&(r=""+r);var l=Qs(this._isDirected,t,n,r);if(Object.hasOwn(this._edgeLabels,l))return o&&(this._edgeLabels[l]=a),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=o?a:this._defaultEdgeLabelFn(t,n,r);var c=lV(this._isDirected,t,n,r);return t=c.v,n=c.w,Object.freeze(c),this._edgeObjs[l]=c,Mp(this._preds[n],t),Mp(this._sucs[t],n),this._in[n][l]=c,this._out[t][l]=c,this._edgeCount++,this}edge(t,n,r){var a=arguments.length===1?Wl(this._isDirected,arguments[0]):Qs(this._isDirected,t,n,r);return this._edgeLabels[a]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,r){var a=arguments.length===1?Wl(this._isDirected,arguments[0]):Qs(this._isDirected,t,n,r);return Object.hasOwn(this._edgeLabels,a)}removeEdge(t,n,r){var a=arguments.length===1?Wl(this._isDirected,arguments[0]):Qs(this._isDirected,t,n,r),o=this._edgeObjs[a];return o&&(t=o.v,n=o.w,delete this._edgeLabels[a],delete this._edgeObjs[a],Dp(this._preds[n],t),Dp(this._sucs[t],n),delete this._in[n][a],delete this._out[t][a],this._edgeCount--),this}inEdges(t,n){var r=this._in[t];if(r){var a=Object.values(r);return n?a.filter(o=>o.v===n):a}}outEdges(t,n){var r=this._out[t];if(r){var a=Object.values(r);return n?a.filter(o=>o.w===n):a}}nodeEdges(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))}};function Mp(e,t){e[t]?e[t]++:e[t]=1}function Dp(e,t){--e[t]||delete e[t]}function Qs(e,t,n,r){var a=""+t,o=""+n;if(!e&&a>o){var i=a;a=o,o=i}return a+Ap+o+Ap+(r===void 0?oV:r)}function lV(e,t,n,r){var a=""+t,o=""+n;if(!e&&a>o){var i=a;a=o,o=i}var l={v:a,w:o};return r&&(l.name=r),l}function Wl(e,t){return Qs(e,t.v,t.w,t.name)}var wu=iV,cV="2.2.4",dV={Graph:wu,version:cV},uV=wu,mV={write:fV,read:gV};function fV(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:pV(e),edges:hV(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function pV(e){return e.nodes().map(function(t){var n=e.node(t),r=e.parent(t),a={v:t};return n!==void 0&&(a.value=n),r!==void 0&&(a.parent=r),a})}function hV(e){return e.edges().map(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return t.name!==void 0&&(r.name=t.name),n!==void 0&&(r.value=n),r})}function gV(e){var t=new uV(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var xV=vV;function vV(e){var t={},n=[],r;function a(o){Object.hasOwn(t,o)||(t[o]=!0,r.push(o),e.successors(o).forEach(a),e.predecessors(o).forEach(a))}return e.nodes().forEach(function(o){r=[],a(o),r.length&&n.push(r)}),n}let yV=class{constructor(){pe(this,"_arr",[]);pe(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var r=this._keyIndices;if(t=String(t),!Object.hasOwn(r,t)){var a=this._arr,o=a.length;return r[t]=o,a.push({key:t,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(t){var n=this._arr,r=2*t,a=r+1,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==t&&(this._swap(t,o),this._heapify(o)))}_decrease(t){for(var n=this._arr,r=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<r));)this._swap(t,a),t=a}_swap(t,n){var r=this._arr,a=this._keyIndices,o=r[t],i=r[n];r[t]=i,r[n]=o,a[i.key]=t,a[o.key]=n}};var Kv=yV,bV=Kv,Yv=jV,wV=()=>1;function jV(e,t,n,r){return NV(e,String(t),n||wV,r||function(a){return e.outEdges(a)})}function NV(e,t,n,r){var a={},o=new bV,i,l,c=function(d){var u=d.v!==i?d.v:d.w,m=a[u],f=n(d),p=l.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+f);p<m.distance&&(m.distance=p,m.predecessor=i,o.decrease(u,p))};for(e.nodes().forEach(function(d){var u=d===t?0:Number.POSITIVE_INFINITY;a[d]={distance:u},o.add(d,u)});o.size()>0&&(i=o.removeMin(),l=a[i],l.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return a}var SV=Yv,EV=CV;function CV(e,t,n){return e.nodes().reduce(function(r,a){return r[a]=SV(e,a,t,n),r},{})}var Xv=IV;function IV(e){var t=0,n=[],r={},a=[];function o(i){var l=r[i]={onStack:!0,lowlink:t,index:t++};if(n.push(i),e.successors(i).forEach(function(u){Object.hasOwn(r,u)?r[u].onStack&&(l.lowlink=Math.min(l.lowlink,r[u].index)):(o(u),l.lowlink=Math.min(l.lowlink,r[u].lowlink))}),l.lowlink===l.index){var c=[],d;do d=n.pop(),r[d].onStack=!1,c.push(d);while(i!==d);a.push(c)}}return e.nodes().forEach(function(i){Object.hasOwn(r,i)||o(i)}),a}var AV=Xv,MV=DV;function DV(e){return AV(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var kV=TV,OV=()=>1;function TV(e,t,n){return FV(e,t||OV,n||function(r){return e.outEdges(r)})}function FV(e,t,n){var r={},a=e.nodes();return a.forEach(function(o){r[o]={},r[o][o]={distance:0},a.forEach(function(i){o!==i&&(r[o][i]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(i){var l=i.v===o?i.w:i.v,c=t(i);r[o][l]={distance:c,predecessor:o}})}),a.forEach(function(o){var i=r[o];a.forEach(function(l){var c=r[l];a.forEach(function(d){var u=c[o],m=i[d],f=c[d],p=u.distance+m.distance;p<f.distance&&(f.distance=p,f.predecessor=m.predecessor)})})}),r}function Jv(e){var t={},n={},r=[];function a(o){if(Object.hasOwn(n,o))throw new Uc;Object.hasOwn(t,o)||(n[o]=!0,t[o]=!0,e.predecessors(o).forEach(a),delete n[o],r.push(o))}if(e.sinks().forEach(a),Object.keys(t).length!==e.nodeCount())throw new Uc;return r}class Uc extends Error{constructor(){super(...arguments)}}var Qv=Jv;Jv.CycleException=Uc;var kp=Qv,LV=PV;function PV(e){try{kp(e)}catch(t){if(t instanceof kp.CycleException)return!1;throw t}return!0}var e8=$V;function $V(e,t,n){Array.isArray(t)||(t=[t]);var r=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),a=n==="post"?_V:RV,o=[],i={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);a(l,r,i,o)}),o}function _V(e,t,n,r){for(var a=[[e,!1]];a.length>0;){var o=a.pop();o[1]?r.push(o[0]):Object.hasOwn(n,o[0])||(n[o[0]]=!0,a.push([o[0],!0]),t8(t(o[0]),i=>a.push([i,!1])))}}function RV(e,t,n,r){for(var a=[e];a.length>0;){var o=a.pop();Object.hasOwn(n,o)||(n[o]=!0,r.push(o),t8(t(o),i=>a.push(i)))}}function t8(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var VV=e8,HV=BV;function BV(e,t){return VV(e,t,"post")}var zV=e8,ZV=qV;function qV(e,t){return zV(e,t,"pre")}var WV=wu,UV=Kv,GV=KV;function KV(e,t){var n=new WV,r={},a=new UV,o;function i(c){var d=c.v===o?c.w:c.v,u=a.priority(d);if(u!==void 0){var m=t(c);m<u&&(r[d]=o,a.decrease(d,m))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(c){a.add(c,Number.POSITIVE_INFINITY),n.setNode(c)}),a.decrease(e.nodes()[0],0);for(var l=!1;a.size()>0;){if(o=a.removeMin(),Object.hasOwn(r,o))n.setEdge(o,r[o]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(o).forEach(i)}return n}var YV={components:xV,dijkstra:Yv,dijkstraAll:EV,findCycles:MV,floydWarshall:kV,isAcyclic:LV,postorder:HV,preorder:ZV,prim:GV,tarjan:Xv,topsort:Qv},Op=dV,cn={Graph:Op.Graph,json:mV,alg:YV,version:Op.version};let XV=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Tp(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Tp(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,r=n._prev;for(;r!==n;)t.push(JSON.stringify(r,JV)),r=r._prev;return"["+t.join(", ")+"]"}};function Tp(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function JV(e,t){if(e!=="_next"&&e!=="_prev")return t}var QV=XV;let eH=cn.Graph,tH=QV;var nH=sH;let rH=()=>1;function sH(e,t){if(e.nodeCount()<=1)return[];let n=oH(e,t||rH);return aH(n.graph,n.buckets,n.zeroIdx).flatMap(a=>e.outEdges(a.v,a.w))}function aH(e,t,n){let r=[],a=t[t.length-1],o=t[0],i;for(;e.nodeCount();){for(;i=o.dequeue();)Ul(e,t,n,i);for(;i=a.dequeue();)Ul(e,t,n,i);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(i=t[l].dequeue(),i){r=r.concat(Ul(e,t,n,i,!0));break}}}return r}function Ul(e,t,n,r,a){let o=a?[]:void 0;return e.inEdges(r.v).forEach(i=>{let l=e.edge(i),c=e.node(i.v);a&&o.push({v:i.v,w:i.w}),c.out-=l,Gc(t,n,c)}),e.outEdges(r.v).forEach(i=>{let l=e.edge(i),c=i.w,d=e.node(c);d.in-=l,Gc(t,n,d)}),e.removeNode(r.v),o}function oH(e,t){let n=new eH,r=0,a=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let c=n.edge(l.v,l.w)||0,d=t(l),u=c+d;n.setEdge(l.v,l.w,u),a=Math.max(a,n.node(l.v).out+=d),r=Math.max(r,n.node(l.w).in+=d)});let o=iH(a+r+3).map(()=>new tH),i=r+1;return n.nodes().forEach(l=>{Gc(o,i,n.node(l))}),{graph:n,buckets:o,zeroIdx:i}}function Gc(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function iH(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let n8=cn.Graph;var Ze={addBorderNode:gH,addDummyNode:r8,applyWithChunking:pl,asNonCompoundGraph:cH,buildLayerMatrix:fH,intersectRect:mH,mapValues:NH,maxRank:a8,normalizeRanks:pH,notime:bH,partition:vH,pick:jH,predecessorWeights:uH,range:i8,removeEmptyRanks:hH,simplify:lH,successorWeights:dH,time:yH,uniqueId:o8,zipObject:ju};function r8(e,t,n,r){let a;do a=o8(r);while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function lH(e){let t=new n8().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},a=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+a.weight,minlen:Math.max(r.minlen,a.minlen)})}),t}function cH(e){let t=new n8({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function dH(e){let t=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(a=>{r[a.w]=(r[a.w]||0)+e.edge(a).weight}),r});return ju(e.nodes(),t)}function uH(e){let t=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(a=>{r[a.v]=(r[a.v]||0)+e.edge(a).weight}),r});return ju(e.nodes(),t)}function mH(e,t){let n=e.x,r=e.y,a=t.x-n,o=t.y-r,i=e.width/2,l=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");let c,d;return Math.abs(o)*i>Math.abs(a)*l?(o<0&&(l=-l),c=l*a/o,d=l):(a<0&&(i=-i),c=i,d=i*o/a),{x:n+c,y:r+d}}function fH(e){let t=i8(a8(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),a=r.rank;a!==void 0&&(t[a][r.order]=n)}),t}function pH(e){let t=e.nodes().map(r=>{let a=e.node(r).rank;return a===void 0?Number.MAX_VALUE:a}),n=pl(Math.min,t);e.nodes().forEach(r=>{let a=e.node(r);Object.hasOwn(a,"rank")&&(a.rank-=n)})}function hH(e){let t=e.nodes().map(i=>e.node(i).rank),n=pl(Math.min,t),r=[];e.nodes().forEach(i=>{let l=e.node(i).rank-n;r[l]||(r[l]=[]),r[l].push(i)});let a=0,o=e.graph().nodeRankFactor;Array.from(r).forEach((i,l)=>{i===void 0&&l%o!==0?--a:i!==void 0&&a&&i.forEach(c=>e.node(c).rank+=a)})}function gH(e,t,n,r){let a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),r8(e,"border",a,t)}function xH(e,t=s8){const n=[];for(let r=0;r<e.length;r+=t){const a=e.slice(r,r+t);n.push(a)}return n}const s8=65535;function pl(e,t){if(t.length>s8){const n=xH(t);return e.apply(null,n.map(r=>e.apply(null,r)))}else return e.apply(null,t)}function a8(e){const n=e.nodes().map(r=>{let a=e.node(r).rank;return a===void 0?Number.MIN_VALUE:a});return pl(Math.max,n)}function vH(e,t){let n={lhs:[],rhs:[]};return e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function yH(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function bH(e,t){return t()}let wH=0;function o8(e){var t=++wH;return toString(e)+t}function i8(e,t,n=1){t==null&&(t=e,e=0);let r=o=>o<t;n<0&&(r=o=>t<o);const a=[];for(let o=e;r(o);o+=n)a.push(o);return a}function jH(e,t){const n={};for(const r of t)e[r]!==void 0&&(n[r]=e[r]);return n}function NH(e,t){let n=t;return typeof t=="string"&&(n=r=>r[t]),Object.entries(e).reduce((r,[a,o])=>(r[a]=n(o,a),r),{})}function ju(e,t){return e.reduce((n,r,a)=>(n[r]=t[a],n),{})}let SH=nH,EH=Ze.uniqueId;var CH={run:IH,undo:MH};function IH(e){(e.graph().acyclicer==="greedy"?SH(e,n(e)):AH(e)).forEach(r=>{let a=e.edge(r);e.removeEdge(r),a.forwardName=r.name,a.reversed=!0,e.setEdge(r.w,r.v,a,EH("rev"))});function n(r){return a=>r.edge(a).weight}}function AH(e){let t=[],n={},r={};function a(o){Object.hasOwn(r,o)||(r[o]=!0,n[o]=!0,e.outEdges(o).forEach(i=>{Object.hasOwn(n,i.w)?t.push(i):a(i.w)}),delete n[o])}return e.nodes().forEach(a),t}function MH(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}let DH=Ze;var kH={run:OH,undo:FH};function OH(e){e.graph().dummyChains=[],e.edges().forEach(t=>TH(e,t))}function TH(e,t){let n=t.v,r=e.node(n).rank,a=t.w,o=e.node(a).rank,i=t.name,l=e.edge(t),c=l.labelRank;if(o===r+1)return;e.removeEdge(t);let d,u,m;for(m=0,++r;r<o;++m,++r)l.points=[],u={width:0,height:0,edgeLabel:l,edgeObj:t,rank:r},d=DH.addDummyNode(e,"edge",u,"_d"),r===c&&(u.width=l.width,u.height=l.height,u.dummy="edge-label",u.labelpos=l.labelpos),e.setEdge(n,d,{weight:l.weight},i),m===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,a,{weight:l.weight},i)}function FH(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeLabel,a;for(e.setEdge(n.edgeObj,r);n.dummy;)a=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=a,n=e.node(t)})}const{applyWithChunking:LH}=Ze;var hl={longestPath:PH,slack:$H};function PH(e){var t={};function n(r){var a=e.node(r);if(Object.hasOwn(t,r))return a.rank;t[r]=!0;let o=e.outEdges(r).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var i=LH(Math.min,o);return i===Number.POSITIVE_INFINITY&&(i=0),a.rank=i}e.sources().forEach(n)}function $H(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var _H=cn.Graph,Uo=hl.slack,l8=RH;function RH(e){var t=new _H({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var a,o;VH(t,e)<r;)a=HH(t,e),o=t.hasNode(a.v)?Uo(e,a):-Uo(e,a),BH(t,e,o);return t}function VH(e,t){function n(r){t.nodeEdges(r).forEach(a=>{var o=a.v,i=r===o?a.w:o;!e.hasNode(i)&&!Uo(t,a)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return e.nodes().forEach(n),e.nodeCount()}function HH(e,t){return t.edges().reduce((r,a)=>{let o=Number.POSITIVE_INFINITY;return e.hasNode(a.v)!==e.hasNode(a.w)&&(o=Uo(t,a)),o<r[0]?[o,a]:r},[Number.POSITIVE_INFINITY,null])[1]}function BH(e,t,n){e.nodes().forEach(r=>t.node(r).rank+=n)}var zH=l8,Fp=hl.slack,ZH=hl.longestPath,qH=cn.alg.preorder,WH=cn.alg.postorder,UH=Ze.simplify,GH=Yr;Yr.initLowLimValues=Su;Yr.initCutValues=Nu;Yr.calcCutValue=c8;Yr.leaveEdge=u8;Yr.enterEdge=m8;Yr.exchangeEdges=f8;function Yr(e){e=UH(e),ZH(e);var t=zH(e);Su(t),Nu(t,e);for(var n,r;n=u8(t);)r=m8(t,e,n),f8(t,e,n,r)}function Nu(e,t){var n=WH(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(r=>KH(e,t,r))}function KH(e,t,n){var r=e.node(n),a=r.parent;e.edge(n,a).cutvalue=c8(e,t,n)}function c8(e,t,n){var r=e.node(n),a=r.parent,o=!0,i=t.edge(n,a),l=0;return i||(o=!1,i=t.edge(a,n)),l=i.weight,t.nodeEdges(n).forEach(c=>{var d=c.v===n,u=d?c.w:c.v;if(u!==a){var m=d===o,f=t.edge(c).weight;if(l+=m?f:-f,XH(e,n,u)){var p=e.edge(n,u).cutvalue;l+=m?-p:p}}}),l}function Su(e,t){arguments.length<2&&(t=e.nodes()[0]),d8(e,{},1,t)}function d8(e,t,n,r,a){var o=n,i=e.node(r);return t[r]=!0,e.neighbors(r).forEach(l=>{Object.hasOwn(t,l)||(n=d8(e,t,n,l,r))}),i.low=o,i.lim=n++,a?i.parent=a:delete i.parent,n}function u8(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function m8(e,t,n){var r=n.v,a=n.w;t.hasEdge(r,a)||(r=n.w,a=n.v);var o=e.node(r),i=e.node(a),l=o,c=!1;o.lim>i.lim&&(l=i,c=!0);var d=t.edges().filter(u=>c===Lp(e,e.node(u.v),l)&&c!==Lp(e,e.node(u.w),l));return d.reduce((u,m)=>Fp(t,m)<Fp(t,u)?m:u)}function f8(e,t,n,r){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(r.v,r.w,{}),Su(e),Nu(e,t),YH(e,t)}function YH(e,t){var n=e.nodes().find(a=>!t.node(a).parent),r=qH(e,n);r=r.slice(1),r.forEach(a=>{var o=e.node(a).parent,i=t.edge(a,o),l=!1;i||(i=t.edge(o,a),l=!0),t.node(a).rank=t.node(o).rank+(l?i.minlen:-i.minlen)})}function XH(e,t,n){return e.hasEdge(t,n)}function Lp(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var JH=hl,p8=JH.longestPath,QH=l8,eB=GH,tB=nB;function nB(e){switch(e.graph().ranker){case"network-simplex":Pp(e);break;case"tight-tree":sB(e);break;case"longest-path":rB(e);break;default:Pp(e)}}var rB=p8;function sB(e){p8(e),QH(e)}function Pp(e){eB(e)}var aB=oB;function oB(e){let t=lB(e);e.graph().dummyChains.forEach(n=>{let r=e.node(n),a=r.edgeObj,o=iB(e,t,a.v,a.w),i=o.path,l=o.lca,c=0,d=i[c],u=!0;for(;n!==a.w;){if(r=e.node(n),u){for(;(d=i[c])!==l&&e.node(d).maxRank<r.rank;)c++;d===l&&(u=!1)}if(!u){for(;c<i.length-1&&e.node(d=i[c+1]).minRank<=r.rank;)c++;d=i[c]}e.setParent(n,d),n=e.successors(n)[0]}})}function iB(e,t,n,r){let a=[],o=[],i=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim),c,d;c=n;do c=e.parent(c),a.push(c);while(c&&(t[c].low>i||l>t[c].lim));for(d=c,c=r;(c=e.parent(c))!==d;)o.push(c);return{path:a.concat(o.reverse()),lca:d}}function lB(e){let t={},n=0;function r(a){let o=n;e.children(a).forEach(r),t[a]={low:o,lim:n++}}return e.children().forEach(r),t}let Go=Ze;var cB={run:dB,cleanup:fB};function dB(e){let t=Go.addDummyNode(e,"root",{},"_root"),n=uB(e),r=Object.values(n),a=Go.applyWithChunking(Math.max,r)-1,o=2*a+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=o);let i=mB(e)+1;e.children().forEach(l=>h8(e,t,o,i,a,n,l)),e.graph().nodeRankFactor=o}function h8(e,t,n,r,a,o,i){let l=e.children(i);if(!l.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}let c=Go.addBorderNode(e,"_bt"),d=Go.addBorderNode(e,"_bb"),u=e.node(i);e.setParent(c,i),u.borderTop=c,e.setParent(d,i),u.borderBottom=d,l.forEach(m=>{h8(e,t,n,r,a,o,m);let f=e.node(m),p=f.borderTop?f.borderTop:m,g=f.borderBottom?f.borderBottom:m,x=f.borderTop?r:2*r,y=p!==g?1:a-o[i]+1;e.setEdge(c,p,{weight:x,minlen:y,nestingEdge:!0}),e.setEdge(g,d,{weight:x,minlen:y,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,c,{weight:0,minlen:a+o[i]})}function uB(e){var t={};function n(r,a){var o=e.children(r);o&&o.length&&o.forEach(i=>n(i,a+1)),t[r]=a}return e.children().forEach(r=>n(r,1)),t}function mB(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function fB(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}let pB=Ze;var hB=gB;function gB(e){function t(n){let r=e.children(n),a=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let o=a.minRank,i=a.maxRank+1;o<i;++o)$p(e,"borderLeft","_bl",n,a,o),$p(e,"borderRight","_br",n,a,o)}}e.children().forEach(t)}function $p(e,t,n,r,a,o){let i={width:0,height:0,rank:o,borderType:t},l=a[t][o-1],c=pB.addDummyNode(e,"border",i,n);a[t][o]=c,e.setParent(c,r),l&&e.setEdge(l,c,{weight:1})}var xB={adjust:vB,undo:yB};function vB(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&g8(e)}function yB(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&bB(e),(t==="lr"||t==="rl")&&(wB(e),g8(e))}function g8(e){e.nodes().forEach(t=>_p(e.node(t))),e.edges().forEach(t=>_p(e.edge(t)))}function _p(e){let t=e.width;e.width=e.height,e.height=t}function bB(e){e.nodes().forEach(t=>Gl(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Gl),Object.hasOwn(n,"y")&&Gl(n)})}function Gl(e){e.y=-e.y}function wB(e){e.nodes().forEach(t=>Kl(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Kl),Object.hasOwn(n,"x")&&Kl(n)})}function Kl(e){let t=e.x;e.x=e.y,e.y=t}let Rp=Ze;var jB=NB;function NB(e){let t={},n=e.nodes().filter(c=>!e.children(c).length),r=n.map(c=>e.node(c).rank),a=Rp.applyWithChunking(Math.max,r),o=Rp.range(a+1).map(()=>[]);function i(c){if(t[c])return;t[c]=!0;let d=e.node(c);o[d.rank].push(c),e.successors(c).forEach(i)}return n.sort((c,d)=>e.node(c).rank-e.node(d).rank).forEach(i),o}let SB=Ze.zipObject;var EB=CB;function CB(e,t){let n=0;for(let r=1;r<t.length;++r)n+=IB(e,t[r-1],t[r]);return n}function IB(e,t,n){let r=SB(n,n.map((d,u)=>u)),a=t.flatMap(d=>e.outEdges(d).map(u=>({pos:r[u.w],weight:e.edge(u).weight})).sort((u,m)=>u.pos-m.pos)),o=1;for(;o<n.length;)o<<=1;let i=2*o-1;o-=1;let l=new Array(i).fill(0),c=0;return a.forEach(d=>{let u=d.pos+o;l[u]+=d.weight;let m=0;for(;u>0;)u%2&&(m+=l[u+1]),u=u-1>>1,l[u]+=d.weight;c+=d.weight*m}),c}var AB=MB;function MB(e,t=[]){return t.map(n=>{let r=e.inEdges(n);if(r.length){let a=r.reduce((o,i)=>{let l=e.edge(i),c=e.node(i.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:n}})}let DB=Ze;var kB=OB;function OB(e,t){let n={};e.forEach((a,o)=>{let i=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};a.barycenter!==void 0&&(i.barycenter=a.barycenter,i.weight=a.weight)}),t.edges().forEach(a=>{let o=n[a.v],i=n[a.w];o!==void 0&&i!==void 0&&(i.indegree++,o.out.push(n[a.w]))});let r=Object.values(n).filter(a=>!a.indegree);return TB(r)}function TB(e){let t=[];function n(a){return o=>{o.merged||(o.barycenter===void 0||a.barycenter===void 0||o.barycenter>=a.barycenter)&&FB(a,o)}}function r(a){return o=>{o.in.push(a),--o.indegree===0&&e.push(o)}}for(;e.length;){let a=e.pop();t.push(a),a.in.reverse().forEach(n(a)),a.out.forEach(r(a))}return t.filter(a=>!a.merged).map(a=>DB.pick(a,["vs","i","barycenter","weight"]))}function FB(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}let LB=Ze;var PB=$B;function $B(e,t){let n=LB.partition(e,u=>Object.hasOwn(u,"barycenter")),r=n.lhs,a=n.rhs.sort((u,m)=>m.i-u.i),o=[],i=0,l=0,c=0;r.sort(_B(!!t)),c=Vp(o,a,c),r.forEach(u=>{c+=u.vs.length,o.push(u.vs),i+=u.barycenter*u.weight,l+=u.weight,c=Vp(o,a,c)});let d={vs:o.flat(!0)};return l&&(d.barycenter=i/l,d.weight=l),d}function Vp(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}function _B(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let RB=AB,VB=kB,HB=PB;var BB=x8;function x8(e,t,n,r){let a=e.children(t),o=e.node(t),i=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,c={};i&&(a=a.filter(f=>f!==i&&f!==l));let d=RB(e,a);d.forEach(f=>{if(e.children(f.v).length){let p=x8(e,f.v,n,r);c[f.v]=p,Object.hasOwn(p,"barycenter")&&ZB(f,p)}});let u=VB(d,n);zB(u,c);let m=HB(u,r);if(i&&(m.vs=[i,m.vs,l].flat(!0),e.predecessors(i).length)){let f=e.node(e.predecessors(i)[0]),p=e.node(e.predecessors(l)[0]);Object.hasOwn(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+f.order+p.order)/(m.weight+2),m.weight+=2}return m}function zB(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(r=>t[r]?t[r].vs:r)})}function ZB(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let qB=cn.Graph,WB=Ze;var UB=GB;function GB(e,t,n){let r=KB(e),a=new qB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(o=>e.node(o));return e.nodes().forEach(o=>{let i=e.node(o),l=e.parent(o);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(o),a.setParent(o,l||r),e[n](o).forEach(c=>{let d=c.v===o?c.w:c.v,u=a.edge(d,o),m=u!==void 0?u.weight:0;a.setEdge(d,o,{weight:e.edge(c).weight+m})}),Object.hasOwn(i,"minRank")&&a.setNode(o,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}function KB(e){for(var t;e.hasNode(t=WB.uniqueId("_root")););return t}var YB=XB;function XB(e,t,n){let r={},a;n.forEach(o=>{let i=e.parent(o),l,c;for(;i;){if(l=e.parent(i),l?(c=r[l],r[l]=i):(c=a,a=i),c&&c!==i){t.setEdge(c,i);return}i=l}})}let JB=jB,QB=EB,ez=BB,tz=UB,nz=YB,rz=cn.Graph,po=Ze;var sz=v8;function v8(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,v8);return}let n=po.maxRank(e),r=Hp(e,po.range(1,n+1),"inEdges"),a=Hp(e,po.range(n-1,-1,-1),"outEdges"),o=JB(e);if(Bp(e,o),t&&t.disableOptimalOrderHeuristic)return;let i=Number.POSITIVE_INFINITY,l;for(let c=0,d=0;d<4;++c,++d){az(c%2?r:a,c%4>=2),o=po.buildLayerMatrix(e);let u=QB(e,o);u<i&&(d=0,l=Object.assign({},o),i=u)}Bp(e,l)}function Hp(e,t,n){return t.map(function(r){return tz(e,r,n)})}function az(e,t){let n=new rz;e.forEach(function(r){let a=r.graph().root,o=ez(r,a,n,t);o.vs.forEach((i,l)=>r.node(i).order=l),nz(r,n,o.vs)})}function Bp(e,t){Object.values(t).forEach(n=>n.forEach((r,a)=>e.node(r).order=a))}let oz=cn.Graph,An=Ze;var iz={positionX:dz,findType1Conflicts:y8,findType2Conflicts:b8,addConflict:Eu,hasConflict:w8,verticalAlignment:j8,horizontalCompaction:N8,alignCoordinates:E8,findSmallestWidthAlignment:S8,balance:C8};function y8(e,t){let n={};function r(a,o){let i=0,l=0,c=a.length,d=o[o.length-1];return o.forEach((u,m)=>{let f=lz(e,u),p=f?e.node(f).order:c;(f||u===d)&&(o.slice(l,m+1).forEach(g=>{e.predecessors(g).forEach(x=>{let y=e.node(x),b=y.order;(b<i||p<b)&&!(y.dummy&&e.node(g).dummy)&&Eu(n,x,g)})}),l=m+1,i=p)}),o}return t.length&&t.reduce(r),n}function b8(e,t){let n={};function r(o,i,l,c,d){let u;An.range(i,l).forEach(m=>{u=o[m],e.node(u).dummy&&e.predecessors(u).forEach(f=>{let p=e.node(f);p.dummy&&(p.order<c||p.order>d)&&Eu(n,f,u)})})}function a(o,i){let l=-1,c,d=0;return i.forEach((u,m)=>{if(e.node(u).dummy==="border"){let f=e.predecessors(u);f.length&&(c=e.node(f[0]).order,r(i,d,m,l,c),d=m,l=c)}r(i,d,i.length,c,o.length)}),i}return t.length&&t.reduce(a),n}function lz(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Eu(e,t,n){if(t>n){let a=t;t=n,n=a}let r=e[t];r||(e[t]=r={}),r[n]=!0}function w8(e,t,n){if(t>n){let r=t;t=n,n=r}return!!e[t]&&Object.hasOwn(e[t],n)}function j8(e,t,n,r){let a={},o={},i={};return t.forEach(l=>{l.forEach((c,d)=>{a[c]=c,o[c]=c,i[c]=d})}),t.forEach(l=>{let c=-1;l.forEach(d=>{let u=r(d);if(u.length){u=u.sort((f,p)=>i[f]-i[p]);let m=(u.length-1)/2;for(let f=Math.floor(m),p=Math.ceil(m);f<=p;++f){let g=u[f];o[d]===d&&c<i[g]&&!w8(n,d,g)&&(o[g]=d,o[d]=a[d]=a[g],c=i[g])}}})}),{root:a,align:o}}function N8(e,t,n,r,a){let o={},i=cz(e,t,n,a),l=a?"borderLeft":"borderRight";function c(m,f){let p=i.nodes(),g=p.pop(),x={};for(;g;)x[g]?m(g):(x[g]=!0,p.push(g),p=p.concat(f(g))),g=p.pop()}function d(m){o[m]=i.inEdges(m).reduce((f,p)=>Math.max(f,o[p.v]+i.edge(p)),0)}function u(m){let f=i.outEdges(m).reduce((g,x)=>Math.min(g,o[x.w]-i.edge(x)),Number.POSITIVE_INFINITY),p=e.node(m);f!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(o[m]=Math.max(o[m],f))}return c(d,i.predecessors.bind(i)),c(u,i.successors.bind(i)),Object.keys(r).forEach(m=>o[m]=o[n[m]]),o}function cz(e,t,n,r){let a=new oz,o=e.graph(),i=uz(o.nodesep,o.edgesep,r);return t.forEach(l=>{let c;l.forEach(d=>{let u=n[d];if(a.setNode(u),c){var m=n[c],f=a.edge(m,u);a.setEdge(m,u,Math.max(i(e,d,c),f||0))}c=d})}),a}function S8(e,t){return Object.values(t).reduce((n,r)=>{let a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([l,c])=>{let d=mz(e,l)/2;a=Math.max(c+d,a),o=Math.min(c-d,o)});const i=a-o;return i<n[0]&&(n=[i,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function E8(e,t){let n=Object.values(t),r=An.applyWithChunking(Math.min,n),a=An.applyWithChunking(Math.max,n);["u","d"].forEach(o=>{["l","r"].forEach(i=>{let l=o+i,c=e[l];if(c===t)return;let d=Object.values(c),u=r-An.applyWithChunking(Math.min,d);i!=="l"&&(u=a-An.applyWithChunking(Math.max,d)),u&&(e[l]=An.mapValues(c,m=>m+u))})})}function C8(e,t){return An.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let a=Object.values(e).map(o=>o[r]).sort((o,i)=>o-i);return(a[1]+a[2])/2}})}function dz(e){let t=An.buildLayerMatrix(e),n=Object.assign(y8(e,t),b8(e,t)),r={},a;["u","d"].forEach(i=>{a=i==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(a=a.map(m=>Object.values(m).reverse()));let c=(i==="u"?e.predecessors:e.successors).bind(e),d=j8(e,a,n,c),u=N8(e,a,d.root,d.align,l==="r");l==="r"&&(u=An.mapValues(u,m=>-m)),r[i+l]=u})});let o=S8(e,r);return E8(r,o),C8(r,e.graph().align)}function uz(e,t,n){return(r,a,o)=>{let i=r.node(a),l=r.node(o),c=0,d;if(c+=i.width/2,Object.hasOwn(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(c+=n?d:-d),d=0,c+=(i.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":d=l.width/2;break;case"r":d=-l.width/2;break}return d&&(c+=n?d:-d),d=0,c}}function mz(e,t){return e.node(t).width}let I8=Ze,fz=iz.positionX;var pz=hz;function hz(e){e=I8.asNonCompoundGraph(e),gz(e),Object.entries(fz(e)).forEach(([t,n])=>e.node(t).x=n)}function gz(e){let t=I8.buildLayerMatrix(e),n=e.graph().ranksep,r=0;t.forEach(a=>{const o=a.reduce((i,l)=>{const c=e.node(l).height;return i>c?i:c},0);a.forEach(i=>e.node(i).y=r+o/2),r+=o+n})}let zp=CH,Zp=kH,xz=tB,vz=Ze.normalizeRanks,yz=aB,bz=Ze.removeEmptyRanks,qp=cB,wz=hB,Wp=xB,jz=sz,Nz=pz,Ut=Ze,Sz=cn.Graph;var Ez=Cz;function Cz(e,t){let n=t&&t.debugTiming?Ut.time:Ut.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>Pz(e));n("  runLayout",()=>Iz(r,n,t)),n("  updateInputGraph",()=>Az(e,r))})}function Iz(e,t,n){t("    makeSpaceForEdgeLabels",()=>$z(e)),t("    removeSelfEdges",()=>Wz(e)),t("    acyclic",()=>zp.run(e)),t("    nestingGraph.run",()=>qp.run(e)),t("    rank",()=>xz(Ut.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>_z(e)),t("    removeEmptyRanks",()=>bz(e)),t("    nestingGraph.cleanup",()=>qp.cleanup(e)),t("    normalizeRanks",()=>vz(e)),t("    assignRankMinMax",()=>Rz(e)),t("    removeEdgeLabelProxies",()=>Vz(e)),t("    normalize.run",()=>Zp.run(e)),t("    parentDummyChains",()=>yz(e)),t("    addBorderSegments",()=>wz(e)),t("    order",()=>jz(e,n)),t("    insertSelfEdges",()=>Uz(e)),t("    adjustCoordinateSystem",()=>Wp.adjust(e)),t("    position",()=>Nz(e)),t("    positionSelfEdges",()=>Gz(e)),t("    removeBorderNodes",()=>qz(e)),t("    normalize.undo",()=>Zp.undo(e)),t("    fixupEdgeLabelCoords",()=>zz(e)),t("    undoCoordinateSystem",()=>Wp.undo(e)),t("    translateGraph",()=>Hz(e)),t("    assignNodeIntersects",()=>Bz(e)),t("    reversePoints",()=>Zz(e)),t("    acyclic.undo",()=>zp.undo(e))}function Az(e,t){e.nodes().forEach(n=>{let r=e.node(n),a=t.node(n);r&&(r.x=a.x,r.y=a.y,r.rank=a.rank,t.children(n).length&&(r.width=a.width,r.height=a.height))}),e.edges().forEach(n=>{let r=e.edge(n),a=t.edge(n);r.points=a.points,Object.hasOwn(a,"x")&&(r.x=a.x,r.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let Mz=["nodesep","edgesep","ranksep","marginx","marginy"],Dz={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},kz=["acyclicer","ranker","rankdir","align"],Oz=["width","height"],Up={width:0,height:0},Tz=["minlen","weight","width","height","labeloffset"],Fz={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Lz=["labelpos"];function Pz(e){let t=new Sz({multigraph:!0,compound:!0}),n=Xl(e.graph());return t.setGraph(Object.assign({},Dz,Yl(n,Mz),Ut.pick(n,kz))),e.nodes().forEach(r=>{let a=Xl(e.node(r));const o=Yl(a,Oz);Object.keys(Up).forEach(i=>{o[i]===void 0&&(o[i]=Up[i])}),t.setNode(r,o),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let a=Xl(e.edge(r));t.setEdge(r,Object.assign({},Fz,Yl(a,Tz),Ut.pick(a,Lz)))}),t}function $z(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function _z(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};Ut.addDummyNode(e,"edge-proxy",o,"_ep")}})}function Rz(e){let t=0;e.nodes().forEach(n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))}),e.graph().maxRank=t}function Vz(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Hz(e){let t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),i=o.marginx||0,l=o.marginy||0;function c(d){let u=d.x,m=d.y,f=d.width,p=d.height;t=Math.min(t,u-f/2),n=Math.max(n,u+f/2),r=Math.min(r,m-p/2),a=Math.max(a,m+p/2)}e.nodes().forEach(d=>c(e.node(d))),e.edges().forEach(d=>{let u=e.edge(d);Object.hasOwn(u,"x")&&c(u)}),t-=i,r-=l,e.nodes().forEach(d=>{let u=e.node(d);u.x-=t,u.y-=r}),e.edges().forEach(d=>{let u=e.edge(d);u.points.forEach(m=>{m.x-=t,m.y-=r}),Object.hasOwn(u,"x")&&(u.x-=t),Object.hasOwn(u,"y")&&(u.y-=r)}),o.width=n-t+i,o.height=a-r+l}function Bz(e){e.edges().forEach(t=>{let n=e.edge(t),r=e.node(t.v),a=e.node(t.w),o,i;n.points?(o=n.points[0],i=n.points[n.points.length-1]):(n.points=[],o=a,i=r),n.points.unshift(Ut.intersectRect(r,o)),n.points.push(Ut.intersectRect(a,i))})}function zz(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Zz(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function qz(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),a=e.node(n.borderBottom),o=e.node(n.borderLeft[n.borderLeft.length-1]),i=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(i.x-o.x),n.height=Math.abs(a.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Wz(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Uz(e){var t=Ut.buildLayerMatrix(e);t.forEach(n=>{var r=0;n.forEach((a,o)=>{var i=e.node(a);i.order=o+r,(i.selfEdges||[]).forEach(l=>{Ut.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:i.rank,order:o+ ++r,e:l.e,label:l.label},"_se")}),delete i.selfEdges})})}function Gz(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),a=r.x+r.width/2,o=r.y,i=n.x-a,l=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:a+2*i/3,y:o-l},{x:a+5*i/6,y:o-l},{x:a+i,y:o},{x:a+5*i/6,y:o+l},{x:a+2*i/3,y:o+l}],n.label.x=n.x,n.label.y=n.y}})}function Yl(e,t){return Ut.mapValues(Ut.pick(e,t),Number)}function Xl(e){var t={};return e&&Object.entries(e).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=r}),t}let Kz=Ze,Yz=cn.Graph;var Xz={debugOrdering:Jz};function Jz(e){let t=Kz.buildLayerMatrix(e),n=new Yz({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),e.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),t.forEach((r,a)=>{let o="layer"+a;n.setNode(o,{rank:"same"}),r.reduce((i,l)=>(n.setEdge(i,l,{style:"invis"}),l))}),n}var Qz="1.1.4",eZ={graphlib:cn,layout:Ez,debug:Xz,util:{time:Ze.time,notime:Ze.notime},version:Qz};const Gp=Yc(eZ),tZ=(e,t,n)=>{const r=new Gp.graphlib.Graph().setDefaultEdgeLabel(()=>({}));return r.setGraph({align:"UL",nodesep:100,rankdir:n.direction,ranksep:100}),t.forEach(a=>r.setEdge(a.source,a.target)),e.forEach(a=>{var o,i;return r.setNode(a.id,{width:((o=a.measured)==null?void 0:o.width)??0,height:((i=a.measured)==null?void 0:i.height)??0})}),Gp.layout(r),{nodes:e.map(a=>{var c,d;const o=r.node(a.id),i=o.x-(((c=a.measured)==null?void 0:c.width)??0)/2,l=o.y-(((d=a.measured)==null?void 0:d.height)??0)/2;return{...a,position:{x:i,y:l}}}),edges:t}},nZ=({edges:e,flowRepository:t,handleUpdateEdges:n,handleUpdateNodes:r,nodes:a,selectedFlowId:o})=>{const{fitView:i}=yr();return v.useCallback(async c=>{const d=tZ(a,e,{direction:c});r([...d.nodes]),n([...d.edges]);const u=d.nodes.map(m=>({id:m.id,props:{position:m.position}}));await t.updateManyNodes({flowId:o,data:u}),window.requestAnimationFrame(()=>{i()})},[a,e,r,n,t,o,i])},rZ=384*1.5,sZ=()=>{const e=ke(),{getInternalNode:t}=yr(),{zoom:n}=ll();return v.useCallback(r=>{var j,N,I,S,E;const{nodeLookup:a}=e.getState(),o=t(r.id),i=o==null?void 0:o.internals.positionAbsolute,l=((j=o==null?void 0:o.internals.handleBounds)==null?void 0:j.source)??[],c=((N=o==null?void 0:o.internals.handleBounds)==null?void 0:N.target)??[],d=Array.from(a.values()).reduce((A,O)=>{var P,C;const M=O==null?void 0:O.internals.positionAbsolute,T=((P=O==null?void 0:O.internals.handleBounds)==null?void 0:P.source)??[],$=((C=O==null?void 0:O.internals.handleBounds)==null?void 0:C.target)??[];if(i&&O.id!==o.id){const D=M.x-i.x,k=M.y-i.y,L=Math.sqrt(D*D+k*k),F=T.reduce((V,R)=>{const B=M.x-i.x+R.x,W=M.y-i.y+R.y,Z=Math.sqrt(B*B+W*W);return Math.min(V,Z)},Number.MAX_VALUE),_=$.reduce((V,R)=>{const B=M.x-i.x+R.x,W=M.y-i.y+R.y,Z=Math.sqrt(B*B+W*W);return Math.min(V,Z)},Number.MAX_VALUE),H=l.reduce((V,R)=>{const B=i.x-M.x+R.x,W=i.y-M.y+R.y,Z=Math.sqrt(B*B+W*W);return Math.min(V,Z)},Number.MAX_VALUE),q=c.reduce((V,R)=>{const B=i.x-M.x+R.x,W=i.y-M.y+R.y,Z=Math.sqrt(B*B+W*W);return Math.min(V,Z)},Number.MAX_VALUE),z=Math.min(L,F,_,H,q);z<A.distance&&z<rZ&&(A.distance=z,A.node=O)}return A},{distance:Number.MAX_VALUE,node:null});if(!d.node)return null;const u=d==null?void 0:d.node.internals.positionAbsolute,m=((I=d==null?void 0:d.node.internals.handleBounds)==null?void 0:I.source)??[],f=((S=d==null?void 0:d.node.internals.handleBounds)==null?void 0:S.target)??[],p=i?u.x<i.x:!1,g=p?m:l,x=p?c:f,y=(E=g.find(A=>A.id==="expiration-source-handle"))==null?void 0:E.y,b=x[0].y,w=i&&y&&b?p?u.y+y<i.y+b:i.y+y<u.y+b:!1;return{id:p?`${d.node.id}-${r.id}`:`${r.id}-${d.node.id}`,source:p?d.node.id:r.id,sourceHandle:w?"expiration-source-handle":"source-handle",target:p?r.id:d.node.id,animated:!0,data:{flowId:r.data.flowId,isTemp:!0,sourceIsExpiration:w,sourceNodeIds:p?[d.node.id]:[r.id],targetNodeIds:p?[r.id]:[d.node.id]},markerEnd:{type:pn.ArrowClosed,width:20/n},style:{strokeWidth:3/n},type:"temp-edge"}},[t,e,n])},aZ=({handleUpdateEdges:e,proximityConnection:t})=>{const n=sZ();return v.useCallback((a,o)=>{if(!t)return;const i=n(o);e(l=>{const c=l.filter(d=>{var u;return!((u=d.data)!=null&&u.isTemp)});return i&&!c.find(d=>d.source===i.source&&d.target===i.target)&&c.push(i),c})},[n,e,t])},oZ=({edges:e,flowRepository:t,handleUpdateEdges:n,proximityConnection:r,selectedFlowId:a})=>v.useCallback(()=>{var l,c,d,u;if(!r)return;const i=e.find(m=>{var f;return(f=m.data)==null?void 0:f.isTemp});n(m=>{var p,g,x;const f=m.filter(y=>{var b;return!((b=y.data)!=null&&b.isTemp)});if(i&&!f.find(y=>y.source===i.source&&y.target===i.target)){const y={...i,animated:!!((p=i.data)!=null&&p.sourceIsExpiration),markerEnd:{type:pn.ArrowClosed,width:20,color:(g=i.data)!=null&&g.sourceIsExpiration?"#F08E17":"#13C273"},style:{strokeWidth:2,stroke:(x=i.data)!=null&&x.sourceIsExpiration?"#F08E17":"#13C273"}};f.push(y)}return f}),i!=null&&i.data&&(i.data.sourceIsExpiration?t.updateNode({flowId:a,data:{id:(l=i.data.sourceNodeIds)==null?void 0:l[0],props:{nextNodeIdOnExpiration:(c=i.data.targetNodeIds)==null?void 0:c[0]}}}):(t.updateNode({flowId:a,data:{id:(d=i.data.sourceNodeIds)==null?void 0:d[0],props:{nextNodeIds:i.data.targetNodeIds}}}),t.updateStartNode({flowId:a,data:{id:(u=i.data.sourceNodeIds)==null?void 0:u[0],props:{nextNodeIds:i.data.targetNodeIds}}})))},[e,t,n,r,a]),iZ=({nodes:e,edges:t})=>{const n=new Set(t.map(a=>a.target));return e.filter(a=>!n.has(a.id))},lZ=({nodes:e,edges:t})=>{const n=iZ({nodes:e,edges:t});return e.map(r=>n.find(a=>a.id===r.id)?{...r,data:{...r.data,isOrphan:!0}}:{...r,data:{...r.data,isOrphan:!1}})},cZ=({edges:e,flowRepository:t,handleUpdateNodes:n,selectedFlowId:r})=>v.useCallback(async o=>{for await(const i of o)i.type==="position"&&!i.dragging&&(t.updateNode({flowId:r,data:{id:i.id,props:{position:i.position}}}),t.updateStartNode({flowId:r,data:{id:i.id,props:{position:i.position}}}));return n(i=>fv(o,lZ({nodes:i,edges:e})))},[e,t,n,r]),dZ=({edges:e,flowRepository:t,handleUpdateEdges:n,nodes:r,selectedFlowId:a})=>{const o=v.useMemo(()=>new Zv(t),[t]);return v.useCallback(async l=>{n(l.reduce((c,d)=>{var y,b;const u=JL(d,r,e),m=XL(d,r,e),f=$2([d],e),p=c.filter(w=>!f.includes(w)),g=((b=(y=f.find(w=>w.target===d.id))==null?void 0:y.sourceHandle)==null?void 0:b.startsWith("expiration"))??!1,x=u.flatMap(({id:w})=>m.map(({id:j,data:N})=>{var I;return{id:`${w}->${g?N.nextNodeIdOnExpiration:(I=N.nextNodeIds)==null?void 0:I[0]}`,source:w,sourceHandle:g?"expiration-source-handle":"source-handle",target:j,animated:g,markerEnd:{type:pn.ArrowClosed,width:20,color:g?"#F08E17":"#13C273"},style:{strokeWidth:2,stroke:g?"#F08E17":"#13C273"}}}));return u.forEach(w=>{var j;g?t.updateNode({flowId:a,data:{id:w.id,props:{nextNodeIdOnExpiration:d.data.nextNodeIdOnExpiration??((j=d.data.nextNodeIds)==null?void 0:j[0])}}}):t.updateNode({flowId:a,data:{id:w.id,props:{nextNodeIds:d.data.nextNodeIds}}})}),[...p,...x]},e));for(const c of l)c.type!=="start"&&await o.execute({flowId:c.data.flowId,nodeId:c.id})},[e,t,n,r,o,a])},A8={audio:yR,contact:bR,default:zn,delay:vR,document:wR,media:jR,start:LR,text:NR,"user-input":ER},uZ=({selectedFlow:e})=>{const[t,n]=v.useState([]),[r,a]=v.useState([]),[o,i]=v.useState(!1),{type:l}=lx(),c=Le.useGetOption("theme"),d=v.useMemo(()=>new Se,[]),u=v.useMemo(()=>new Te,[]),m=vn(u);v.useEffect(()=>{r.length>=0&&Ne(e).then(T=>{m({optionKey:"flows",optionToUpdate:{id:e.id,name:e.published.name,size:T}})})},[r.length,e.id,m]);const f=n,p=a,g=()=>{i(T=>!T)},x={"removable-edge":cR,"temp-edge":dR},y=QR(),b=eV({flowRepository:d,handleUpdateEdges:f,selectedFlowId:e.id}),w=tV({selectedFlowId:e.id}),j=nV(),N=sV({selectedFlowId:e.id,type:l}),I=aV({handleUpdateEdges:f}),S=nZ({edges:t,flowRepository:d,handleUpdateEdges:f,handleUpdateNodes:p,nodes:r,selectedFlowId:e.id}),E=aZ({handleUpdateEdges:f,proximityConnection:o}),A=oZ({edges:t,flowRepository:d,handleUpdateEdges:f,proximityConnection:o,selectedFlowId:e.id}),O=cZ({edges:t,flowRepository:d,handleUpdateNodes:p,selectedFlowId:e.id}),M=dZ({edges:t,flowRepository:d,handleUpdateEdges:f,nodes:r,selectedFlowId:e.id});return O_({onEnd:()=>{try{const{nodes:T}=Ip(e,{skipEdges:!0});a(T)}catch(T){console.log(T),d.selectFlow("")}}}),v.useEffect(()=>{try{const{edges:T,nodes:$}=Ip(e);a($),n(T)}catch(T){console.log(T),d.selectFlow("")}},[d,e]),{currentTheme:c,edgeTypes:x,edges:t,handleToggleProximityConnection:g,nodeTypes:A8,nodes:r,onBeforeDelete:y,onConnect:b,onConnectEnd:w,onDragOver:j,onDrop:N,onEdgesChange:I,onLayout:S,onNodeDrag:E,onNodeDragStop:A,onNodesChange:O,onNodesDelete:M,proximityConnection:o}},mZ=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:512,viewBox:"0 0 512 256",...e,children:[s.jsx("path",{fill:"none",d:"M0 0h512v256H0z"}),s.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M464 48v160M48 48v160M364 128h100M48 128h100M420 96l-56 32 56 32M92 96l56 32-56 32"}),s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,children:[s.jsx("path",{strokeWidth:16,d:"m262.69 96.34 5.5-5.5a23.31 23.31 0 0 1 32.97 0h0a23.31 23.31 0 0 1 0 32.97L288.97 136l-5.17 5.17a23.315 23.315 0 0 1-33-.025h0a23.24 23.24 0 0 1-6.8-17.115"}),s.jsx("path",{strokeWidth:16,d:"m249.31 159.66-5.5 5.5a23.315 23.315 0 0 1-33-.025h0a23.315 23.315 0 0 1 .03-32.945l17.36-17.36a23.31 23.31 0 0 1 32.97 0h0a23.225 23.225 0 0 1 6.83 17.14"})]})]}),fZ=({handleToggleProximityConnection:e,onLayout:t,proximityConnection:n})=>s.jsxs(Z_,{orientation:"horizontal",className:"!gap-1 !rounded-md bg-primary/60 px-2 py-1.5 [&>*]:aspect-square [&>*]:!w-fit [&>*]:!rounded-md",children:[s.jsxs(Tr,{className:"!aspect-auto !gap-1",onClick:()=>t("TB"),title:"Arrumar fluxo de cima para baixo",children:[s.jsx(V1,{size:24,className:"ml-1.5 shrink-0"}),s.jsx("span",{className:"mr-2.5",children:"Vertical"})]}),s.jsxs(Tr,{className:"!aspect-auto !gap-1",onClick:()=>t("LR"),title:"Arrumar fluxo da esquerda para a direita",children:[s.jsx(ar,{size:24,className:"ml-1.5 shrink-0"}),s.jsx("span",{className:"mr-2.5",children:"Horizontal"})]}),s.jsx(Tr,{className:"!aspect-auto",onClick:e,title:"Conectar por proximidade",children:s.jsx(mZ,{className:Y("!max-h-5 !max-w-fit",!n&&"opacity-50",n&&"text-item-media drop-shadow-media")})})]}),pZ=e=>{var x;const{zoom:t}=ll(),{connectionStatus:n,fromHandle:r,fromX:a,fromY:o,toX:i,toY:l,fromPosition:c,toPosition:d}=e,u=n==="valid",m=r.type==="source"&&((x=r.id)==null?void 0:x.includes("expiration")),f=m?"stroke-item-trigger":"stroke-item-media",p=u?"fill-item-media/70":"fill-item-audio/70",[g]=Ja({sourceX:a,sourceY:o,targetX:i,targetY:l,sourcePosition:c,targetPosition:d});return s.jsxs("g",{className:f,children:[s.jsx("path",{fill:"none",strokeWidth:2,className:Y(m&&"animated"),d:g}),u?s.jsx("circle",{cx:i+1,cy:l+1,r:13/t,className:p,strokeWidth:2}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:i-14/t,y:l,width:30/t,height:6/t,stroke:"none",className:p}),s.jsx("rect",{x:i-2/t,y:l-12/t,width:6/t,height:30/t,stroke:"none",className:p})]})]})};function hZ({selectedFlow:e}){const{currentTheme:t,edgeTypes:n,edges:r,handleToggleProximityConnection:a,nodeTypes:o,nodes:i,onBeforeDelete:l,onConnect:c,onConnectEnd:d,onDragOver:u,onDrop:m,onEdgesChange:f,onLayout:p,onNodeDrag:g,onNodeDragStop:x,onNodesChange:y,onNodesDelete:b,proximityConnection:w}=uZ({selectedFlow:e});return s.jsx(uR,{children:s.jsxs(M_,{colorMode:t,connectionLineComponent:pZ,defaultEdgeOptions:{type:"removable-edge"},edgeTypes:n,edges:r,fitView:!0,fitViewOptions:{duration:250},minZoom:.1,nodeTypes:o,nodes:i,onBeforeDelete:l,onConnect:c,onConnectEnd:d,onDragOver:u,onDrop:m,onEdgesChange:f,onNodeDrag:g,onNodeDragStop:x,onNodesChange:y,onNodesDelete:b,panOnScroll:!0,proOptions:{hideAttribution:!0},snapToGrid:!0,children:[s.jsx($_,{}),s.jsx(fZ,{handleToggleProximityConnection:a,onLayout:p,proximityConnection:w})]})})}function gZ(){const[e]=ye("dashboard-trigger-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[s.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhum fluxo cadastrado aqui."}),s.jsx("p",{children:"Que tal adicionar o seu primeiro fluxo?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(dr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:s.jsxs(ur,{value:"important",children:[s.jsx(mr,{className:"px-4 py-3 ",children:s.jsxs("div",{className:"flex items-center gap-4 ",children:[s.jsx(pr,{size:24,weight:"thin"}),s.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um fluxo?"})]})}),s.jsx(fr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:s.jsxs("section",{className:"rounded-md p-4",children:[s.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),s.jsx("p",{className:"text-start text-sm font-light",children:"Os fluxos são uma forma muito mais visual e prática de criar automações para envio de mensagens de áudio 🎙️, documentos 📄, mídias 📸 e textos 💬."}),s.jsxs("p",{className:"mt-2 text-start text-sm font-light",children:["Pra simplificar: pensa neles como nossos"," ",s.jsx("b",{className:"underline",children:'"funis", só que 1000x melhores! 🚀'})," ","Com os fluxos, você pode criar conversas dinâmicas com seus contatos, esperando respostas e interagindo de um jeito muito mais natural. 🤝💡"]}),s.jsxs("p",{className:"mt-2 text-start text-sm font-light",children:["E tem mais! Com a nossa nova função de ",s.jsx("b",{children:"Delay"})," ⏳, você pode definir um intervalo entre as mensagens – de segundos a dias. Isso evita aquela resposta instantânea de robô 🤖⚡, que pode acabar desanimando seu cliente. Com o Delay, as respostas parecem mais humanas, tornando a interação muito mais fluida e realista. 😉✨"]})]})})]})})})]})}const xZ=ir("flex flex-col items-center justify-center text-center gap-2 shadow p-4 rounded-lg border border-transparent bg-background shadow-sm cursor-pointer transition-all ",{variants:{variant:{default:"text-foreground hover:border-foreground hover:shadow-foreground",audio:"text-item-audio hover:border-item-audio hover:shadow-item-audio",contact:"text-neutral-60 hover:border-neutral-60 hover:shadow-neutral-60",delay:"text-item-trigger hover:border-item-trigger hover:shadow-item-trigger",document:"text-item-document hover:border-item-document hover:shadow-item-document",media:"text-item-media hover:border-item-media hover:shadow-item-media",text:"text-item-message hover:border-item-message hover:shadow-item-message","user-input":"text-item-trigger hover:border-item-trigger hover:shadow-item-trigger",disabled:"text-neutral-60 hover:border-neutral-60 hover:shadow-neutral-60 cursor-not-allowed opacity-50"},size:{default:"w-32 h-32",sm:"w-24 h-24",lg:"w-40 h-40",icon:"w-fit h-fit p-2"}},defaultVariants:{variant:"default",size:"default"}});function jt({type:e,variant:t,size:n,className:r,...a}){const o={audio:{description:"Envia um áudio",icon:s.jsxs(s.Fragment,{children:[s.jsx(Tn,{size:32,className:"hidden shrink-0 text-item-audio group-hover/zv-type-node:block",weight:"fill"}),s.jsx(Tn,{size:32,className:"shrink-0 text-item-audio group-hover/zv-type-node:hidden"})]}),title:"Áudio"},contact:{description:"Envia um contato",icon:s.jsxs(s.Fragment,{children:[s.jsx(Mn,{size:32,className:"hidden shrink-0 text-neutral-60 group-hover/zv-type-node:block",weight:"fill"}),s.jsx(Mn,{size:32,className:"shrink-0 text-neutral-60 group-hover/zv-type-node:hidden"})]}),title:"Contato"},delay:{description:"Aguarda um tempo antes de continuar",icon:s.jsxs(s.Fragment,{children:[s.jsx(sc,{size:32,className:"hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),s.jsx(sc,{size:32,className:"shrink-0 text-item-trigger group-hover/zv-type-node:hidden"})]}),title:"Delay"},document:{description:"Envia um documento",icon:s.jsxs(s.Fragment,{children:[s.jsx(hn,{size:32,className:"hidden shrink-0 text-item-document group-hover/zv-type-node:block",weight:"fill"}),s.jsx(hn,{size:32,className:"shrink-0 text-item-document group-hover/zv-type-node:hidden"})]}),title:"Documento"},media:{description:"Envia uma mídia",icon:s.jsxs(s.Fragment,{children:[s.jsx(aa,{size:32,className:"hidden shrink-0 text-item-media group-hover/zv-type-node:block",weight:"fill"}),s.jsx(aa,{size:32,className:"shrink-0 text-item-media group-hover/zv-type-node:hidden"})]}),title:"Mídia"},text:{description:"Envia um texto",icon:s.jsxs(s.Fragment,{children:[s.jsx(Fn,{size:32,className:"hidden shrink-0 text-item-message group-hover/zv-type-node:block",weight:"fill"}),s.jsx(Fn,{size:32,className:"shrink-0 text-item-message group-hover/zv-type-node:hidden"})]}),title:"Texto"},"user-input":{description:"Aguarda uma resposta do usuário",icon:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Mn,{size:32,className:"hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),s.jsx(ac,{size:16,className:"absolute -right-2 -top-1.5 hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),s.jsx(Mn,{size:32,className:"shrink-0 text-item-trigger group-hover/zv-type-node:hidden"}),s.jsx(ac,{size:16,className:"absolute -right-2 -top-1.5 shrink-0 text-item-trigger group-hover/zv-type-node:hidden"})]})}),title:"Aguardar Resposta"}},{description:i,icon:l,title:c}=o[e];return s.jsxs("div",{className:Y(xZ({variant:t??e,size:n,className:r}),t!=="disabled"&&"group/zv-type-node"),...a,children:[l,n!=="icon"&&s.jsxs("div",{className:"text-sm",children:[s.jsx("b",{className:"text-foreground group-hover/zv-type-node:text-inherit",children:c}),n==="default"||n==="lg"&&s.jsx("p",{className:"font-thin text-foreground",children:i})]})]})}function vZ(){const{selectFlowNodeType:e}=at();async function t(n){e(n)}return s.jsxs("article",{children:[s.jsx("h1",{children:"Selecione o tipo de item que deseja adicionar"}),s.jsxs("main",{className:"flex flex-wrap justify-center gap-1",children:[s.jsx(jt,{type:"delay",onClick:()=>t("delay")}),s.jsx(jt,{type:"user-input",onClick:()=>t("user-input")}),s.jsx(jt,{type:"audio",onClick:()=>e("audio")}),s.jsx(jt,{type:"contact",onClick:()=>t("contact"),className:Y("")}),s.jsx(jt,{type:"document",onClick:()=>e("document")}),s.jsx(jt,{type:"media",onClick:()=>e("media")}),s.jsx(jt,{type:"text",onClick:()=>e("text")})]})]})}function yZ(){const{delayTimeUnitHandler:e,selectedDelayTimeUnitTypeHandler:t}=at();return s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[s.jsx(ie,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Esperar antes de continuar o fluxo"}),s.jsx(dt,{inputClasses:"w-14",max:999,min:1,...e}),s.jsxs(St,{...t,children:[s.jsx(ht,{className:"h-full w-56 p-3.5",children:s.jsx(Zt,{placeholder:De.seconds})}),s.jsxs(gt,{className:"z-[9999]",children:[s.jsx(Me,{value:"seconds",children:De.seconds}),s.jsx(Me,{value:"minutes",children:De.minutes}),s.jsx(Me,{value:"hours",children:De.hours}),s.jsx(Me,{value:"days",children:De.days})]})]})]})})}function bZ(){const e=rt.audioList,{itemId:t,onSelectItem:n,simulationMinutesHandler:r,simulationSecondsHandler:a}=at();return s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2 text-base",children:"Selecione um áudio"}),s.jsx(Zn,{autoFocus:!0,defaultSelectedItem:t,selectedType:"audio",addNewItem:!0,items:e,onSelectItem:o=>n(o),popoverIsModal:!1,previewDataBuilder:o=>s.jsx(cl,{itemId:o}),selectedItem:t,children:null}),s.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[s.jsxs("p",{className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "gravando áudio..." por'," ",s.jsx("span",{className:"font-bold text-primary",children:`${r.value} min e ${a.value}s`})]}),s.jsx(dt,{...r,hint:"Minutos"}),s.jsx(dt,{...a,hint:"Segundos"})]})]})}const wZ=({countries:e,country:t,setCountry:n})=>s.jsxs(St,{value:t.iso2,onValueChange:r=>n(r),children:[s.jsx(ht,{className:"h-auto w-auto whitespace-pre-wrap break-all bg-background px-4",value:t.iso2,children:s.jsx(hs,{iso2:t.iso2,className:"h-9"})}),s.jsx(gt,{className:"z-[10006] max-h-[40dvh] w-[562px]",children:s.jsx("div",{className:"divide-y",children:e.map(r=>s.jsx(Me,{value:r.iso2,className:"gap-2 whitespace-pre-wrap break-all",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hs,{iso2:r.iso2,className:"h-9 shrink-0"}),s.jsx("p",{className:"shrink-0",children:r.name}),s.jsxs("p",{className:"shrink-0 text-primary/80",children:["+",r.dialCode]})]})},r.iso2))})})]});function jZ(){const{contactName:e,countries:t,country:n,handlePhoneValueChange:r,inputRef:a,inputValue:o,setContactName:i,setCountry:l}=jk();return s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ze,{name:"SendContactNodeConfigNameInput",type:"text",placeholder:"Nome do contato",value:e,onChange:c=>{i(c.target.value)}}),s.jsxs("div",{className:"flex gap-1.5",children:[s.jsx(wZ,{countries:t,country:n,setCountry:l}),s.jsx(ze,{name:"SendContactNodeConfigPhoneInput",type:"tel",ref:a,value:o,onChange:r})]})]})}function NZ(){const e=Ke.documentList,{itemId:t,onSelectItem:n}=at();return s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2 text-base",children:"Selecione um documento"}),s.jsx(Zn,{addNewItem:!0,autoFocus:!0,defaultSelectedItem:t,items:e,onSelectItem:async r=>n(r),popoverIsModal:!1,previewDataBuilder:r=>s.jsx(dl,{itemId:r}),selectedItem:t,selectedType:"document",children:null})]})}function SZ(){const e=Ye.mediaList,{itemId:t,onSelectItem:n}=at();return s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2 text-base",children:"Selecione uma mídia"}),s.jsx(Zn,{autoFocus:!0,defaultSelectedItem:t,items:e,selectedType:"media",addNewItem:!0,onSelectItem:async r=>n(r),popoverIsModal:!1,previewDataBuilder:r=>s.jsx(ul,{itemId:r}),selectedItem:t,children:null})]})}function EZ(){const e=$e.useGetTextMessageList(),{itemId:t,onSelectItem:n,simulationMinutesHandler:r,simulationSecondsHandler:a}=at();return s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2 text-base",children:"Selecione um texto"}),s.jsx(Zn,{autoFocus:!0,defaultSelectedItem:t,items:e,selectedType:"message",onSelectItem:o=>n(o),popoverIsModal:!1,previewDataBuilder:o=>s.jsx(ml,{itemId:o}),selectedItem:t,addNewItem:!0,children:null}),s.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[s.jsxs("p",{className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "digitando..." por'," ",s.jsx("span",{className:"font-bold text-primary",children:`${r.value} min e ${a.value}s`})]}),s.jsx(dt,{...r,hint:"Minutos"}),s.jsx(dt,{...a,hint:"Segundos"})]})]})}function CZ(){const[e,t]=v.useState(!0),{canExpire:n,expectedMessages:r,followUpTimeoutDayHandler:a,followUpTimeoutDayReferenceHandler:o,followUpTimeoutHourHandler:i,followUpTimeoutTypeHandler:l,selectedOption:c,setCanExpire:d,setExpectedMessages:u,setSelectedOption:m}=Vk(),{delayTimeUnitHandler:f,selectedDelayTimeUnitTypeHandler:p}=at(),g=l.value==="dynamic";return s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs(Ma,{open:e,onOpenChange:t,modal:!0,children:[s.jsx(Da,{asChild:!0,children:s.jsxs(K,{variant:"outline",role:"combobox","aria-expanded":e,className:Y("flex h-9 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[s.jsx("p",{className:"truncate",children:Fr[c]}),s.jsx(Es,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ka,{className:"z-[10006] w-[var(--radix-popper-anchor-width)] p-0",children:s.jsxs(Oa,{defaultValue:c,filter:(x,y)=>{const b=Fr[x];if(!b)return 0;const w=Pt(b),j=Pt(y);return w.includes(j)?1:0},children:[s.jsx(Ta,{placeholder:"Pesquisar opção",className:"h-9"}),s.jsxs(Fa,{children:[s.jsx(La,{className:"py-2",children:"Nenhum item encontrado."}),s.jsx(Pa,{children:s.jsx("div",{className:"divide-y",children:Object.entries(Fr).map(([x,y])=>s.jsxs($a,{value:x,onSelect:b=>{b==="anything"&&u([]),m(b),t(!1)},children:[s.jsx("p",{children:y}),s.jsx(Cs,{className:Y("ml-auto h-4 w-4",c===x?"opacity-100":"opacity-0")})]},x))})})]})]})})]}),!c.startsWith("any")&&s.jsx(fl,{placeholder:"Digite aqui",values:r,changeValue:x=>u(x)}),s.jsxs("div",{className:"pointer-events-auto flex items-center space-x-2",children:[s.jsx(qt,{id:"toggle-can-expire",className:"h-5 w-5 border border-solid border-primary",checked:n,onClick:()=>{d(!n)}}),s.jsx(ie,{htmlFor:"toggle-can-expire",className:"grid cursor-pointer gap-1.5 text-sm font-bold leading-none text-muted-foreground",children:"Habilitar follow-up caso o usuário não responder"})]}),n&&s.jsx("div",{children:s.jsxs(x1,{className:"flex flex-col gap-5",...l,children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(Eo,{value:"dynamic",id:"dynamic"}),s.jsx(ie,{htmlFor:"dynamic",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Aguardar a resposta do usuário por"})]}),s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(dt,{disabled:!g,inputClasses:"w-14 bg-transparent",controlClasses:Y(!g&&"bg-background opacity-60"),max:999,min:1,...f}),s.jsxs(St,{...p,children:[s.jsx(ht,{disabled:!g,className:Y("!z-[10006] h-full w-28 p-3.5",!g&&"bg-background opacity-60"),children:s.jsx(Zt,{placeholder:De[p.value]})}),s.jsxs(gt,{children:[s.jsx(Me,{value:"seconds",children:De.seconds}),s.jsx(Me,{value:"minutes",children:De.minutes}),s.jsx(Me,{value:"hours",children:De.hours}),s.jsx(Me,{value:"days",children:De.days})]})]})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsx(Eo,{value:"fixed",id:"fixed"}),s.jsx(ie,{htmlFor:"fixed",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Aguardar a resposta do usuário até"})]}),s.jsxs("div",{className:"flex items-center justify-start gap-3 max-sm:items-center",children:[s.jsxs(St,{...i,children:[s.jsx(ht,{className:Y("h-full w-20 p-3.5",g&&"bg-background opacity-60"),disabled:g,children:s.jsx(Zt,{placeholder:"8h"})}),s.jsx(gt,{className:"z-[9999] max-h-[50dvh]",children:Array(24).fill(0).map((x,y)=>s.jsxs(Me,{value:String(y),children:[y,"h"]},y))})]}),s.jsxs(St,{...a,children:[s.jsx(ht,{className:Y("h-full w-40 p-3.5",g&&"bg-background opacity-60"),disabled:g,children:s.jsx(Zt,{placeholder:Lr[1]})}),s.jsx(gt,{className:"z-[9999]",children:Object.keys(Lr).map(x=>s.jsx(Me,{value:x,children:Lr[Number(x)]},x))})]}),s.jsx("span",{className:"min-w-max text-sm",children:"em relação"}),s.jsxs(St,{...o,children:[s.jsx(ht,{className:Y("h-full w-48 p-3.5",g&&"bg-background opacity-60"),disabled:g,children:s.jsx(Zt,{placeholder:Pr.lastItem})}),s.jsx(gt,{className:"z-[9999]",children:Object.keys(Pr).map(x=>s.jsx(Me,{value:x,children:Pr[x]},x))})]})]})]})]})})]})}const IZ=()=>{const e=tu(t=>t.itemTypeSelected);return s.jsxs(s.Fragment,{children:[e==="text"&&s.jsx(EZ,{}),e==="user-input"&&s.jsx(CZ,{}),e==="delay"&&s.jsx(yZ,{}),e==="contact"&&s.jsx(jZ,{}),e==="document"&&s.jsx(NZ,{}),e==="audio"&&s.jsx(bZ,{}),e==="media"&&s.jsx(SZ,{})]})},AZ=v.memo(IZ);function MZ(){const{closeOnAction:e,closeOnCancel:t,handleModalAction:n,handleModalCancel:r,handleOpenChange:a,isLastStep:o,isOpen:i,notReady:l,setIsOpen:c,step:d,title:u}=at();return s.jsx(ve,{open:i,closeOnAction:e,closeOnCancel:t,onAction:n,action:o&&"Salvar",actionProps:{disabled:l,icon:o?s.jsx(Ct,{}):s.jsx(ar,{})},description:d===0?s.jsx(vZ,{},"step-1"):s.jsx(AZ,{},"step-2"),onOpenChange:a,title:u,cancel:o?"Anterior":"Cancelar",onCancel:()=>{t?c(!1):r()}})}const DZ=()=>{const{setType:e}=lx(),t=(n,r)=>{e(r),n.dataTransfer.effectAllowed="move"};return s.jsxs("aside",{className:"flex min-w-fit flex-col items-center gap-4 overflow-y-auto border-r-2 border-solid px-4 pb-4 text-center",children:[s.jsxs("h2",{className:"sticky top-0 z-10 w-full bg-gradient-to-b from-main-background from-90% to-transparent to-100% pb-4 text-xl font-bold",children:[s.jsx("hr",{className:"mb-2 w-full border border-dashed"}),s.jsx("span",{className:"inline-block w-[25ch]",children:"Você pode arrastar para adicionar novos nós."})]}),s.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-md border border-card bg-gradient-to-b from-card/30 to-card to-[6rem] px-4 py-2",children:[s.jsx("h3",{className:"my-1 text-lg font-bold text-primary",children:"Controle"}),s.jsxs("div",{className:"grid grid-cols-2 justify-items-center gap-4",children:[s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"delay",onDragStart:n=>t(n,"delay"),draggable:!0}),s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"user-input",onDragStart:n=>t(n,"user-input"),draggable:!0})]})]}),s.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-md border border-card bg-gradient-to-b from-card/30 to-card to-[6rem] px-4 py-2",children:[s.jsx("h3",{className:"my-1 text-lg font-bold text-primary",children:"Envio de itens"}),s.jsxs("div",{className:"grid w-full grid-cols-2 gap-4",children:[s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"audio",onDragStart:n=>t(n,"audio"),draggable:!0}),s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"contact",onDragStart:n=>t(n,"contact"),draggable:!0}),s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"document",onDragStart:n=>t(n,"document"),draggable:!0}),s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"media",onDragStart:n=>t(n,"media"),draggable:!0}),s.jsx(jt,{className:"h-16 w-36 flex-row justify-start p-3",type:"text",onDragStart:n=>t(n,"text"),draggable:!0})]})]})]})};function Cn(e,t){return{Component:e,props:t}}function kZ(e){return({children:n})=>{const r=s.jsx(s.Fragment,{children:n});return e.reduceRight((a,{Component:o,props:i={}})=>s.jsx(o,{...i,children:a},i.id),r)}}const OZ=[Cn(Rv),Cn(zM),Cn(Ek),Cn(Rk),Cn(Ak),Cn(wk),Cn(kk),Cn(Fk),Cn($k)],TZ=kZ(OZ);function FZ(){const e=Ue.useGetHasFlows(),t=Ue.useGetFlowList(),[n,r]=v.useState(!1),a=Ue.store.getState().selectedFlowId,o=t.find(i=>i.id===a);return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),s.jsxs("div",{className:"flex items-center gap-5 p-3",children:[e&&s.jsxs(Ma,{open:n,onOpenChange:r,modal:!0,children:[s.jsx(Da,{asChild:!0,children:s.jsxs(K,{variant:"outline",role:"combobox",childrenVariant:"no-dark","aria-expanded":n,className:Y("flex w-60 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[s.jsx("p",{className:"grow truncate",children:(o==null?void 0:o.published.name)??"Selecione um fluxo"}),s.jsx(Es,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ka,{className:"z-[10006] w-[var(--radix-popper-anchor-width)] p-0",children:s.jsxs(Oa,{defaultValue:a,filter:(i,l)=>{var m;const c=(m=t.find(f=>f.id===i))==null?void 0:m.published.name;if(!c)return 0;const d=Pt(c),u=Pt(l);return d.includes(u)?1:0},children:[s.jsx(Ta,{placeholder:"Pesquisar fluxo",className:"h-9"}),s.jsxs(Fa,{children:[s.jsx(La,{className:"py-2",children:"Nenhum item encontrado."}),s.jsx(Pa,{children:s.jsx("div",{className:"divide-y",children:t.map(i=>s.jsxs($a,{value:i.id,onSelect:l=>{Ue.selectFlow(l),r(!1)},children:[s.jsx("p",{children:i.published.name}),s.jsx(Cs,{className:Y("ml-auto h-4 w-4",a===i.id?"opacity-100":"opacity-0")})]},i.id))})})]})]})})]}),s.jsx(Zk,{}),o&&s.jsx(oO,{flow:o}),o&&s.jsx(yO,{flow:o}),o&&s.jsx(eO,{flow:o}),o&&s.jsx(rO,{flow:o}),s.jsx(cO,{}),s.jsx(Uk,{}),o&&s.jsx(Yk,{flow:o}),o&&s.jsx(gO,{selectedFlowId:o.id})]}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1",children:s.jsx("div",{className:"relative flex h-full w-full max-md:flex-wrap",children:o?s.jsxs(TZ,{children:[s.jsx(MZ,{}),s.jsx(DZ,{}),s.jsx(hZ,{selectedFlow:o})]}):"Nenhum fluxo selecionado"})}):s.jsx(s.Fragment,{children:s.jsx(gZ,{})})]})}const M8=e=>e.reduce((t,n)=>(n.type==="audio"?t.audioCount+=1:n.type==="document"?t.documentCount+=1:n.type==="media"?t.mediaCount+=1:n.type==="message"&&(t.textMessageCount+=1),t),{audioCount:0,mediaCount:0,textMessageCount:0,documentCount:0}),LZ=({funnelId:e,itemId:t="",itemType:n,delayMinBeforeSend:r=0,delaySecsBeforeSend:a=0,mode:o,funnelItemId:i})=>{const l=new an,c=new bn,d=new vt,u=new jn,m=new Nn,[f,p]=v.useState(t),[g,x]=v.useState(a),[y,b]=v.useState(r),w=Va(l),j=Za(c),N=qa(u),I=Wa(m),S=Pb(d),E=n4(d),A=async k=>{const L=await w(k);return!L||!L.data?(p(""),b(0),x(0),le({title:"Este áudio está vazio"}),!1):!0},O=async k=>{const L=await j(k);return!L||!L.data?(p(""),b(0),x(0),le({title:"Este documento está vazio"}),!1):!0},M=async k=>{const L=await N(k);return!L||!L.data?(p(""),b(0),x(0),le({title:"Esta mídia está vazia"}),!1):!0},T=async k=>{const L=await I(k);return!L||!L.data?(p(""),b(0),x(0),le({title:"Esta mensagem está vazia"}),!1):!0};v.useEffect(()=>{n==="audio"&&f&&(async L=>{const F=await w(L);if(F){const _=await Wy(F.data),{minutes:H,seconds:q}=on.fromMillisecondsToMinutes(_*1e3);b(H),x(q)}})(f)},[f]),v.useEffect(()=>{t!==f&&p(t),r!==y&&b(r),a!==g&&x(a)},[t]);const $=()=>{o==="edit"?(p(t),b(r),x(a)):(p(""),b(0),x(0))},P=async k=>{let L="";const F=f??"",_=(y*60+g)*1e3,H=i?new je(i):void 0,z={id:o==="edit"?String(i):new je().toString(),itemId:F,delayBeforeSend:_,funnelId:e};let V=null;k==="audio"?await A(f)&&(L="áudio",V=I1.create(z,H).metadata):k==="document"?await O(f)&&(L="documento",V=C1.create(z,H).metadata):k==="media"?await M(f)&&(L="mídia",V=A1.create(z,H).metadata):k==="message"?await T(f)&&(L="mensagem",V=E1.create(z,H).metadata):console.log("error"),o==="create"&&V?(await S({funnelId:e,item:V}),ae({title:`Item de ${L} adicionado com sucesso.`}),$()):o==="edit"&&e&&V&&(await E(e,V),ae({title:`Item de ${L} atualizado com sucesso.`}))},C={value:String(y),onValueChange:({valueAsNumber:k})=>{isNaN(k)&&(k=0),b(k)}},D={value:String(g),onValueChange:({valueAsNumber:k})=>{isNaN(k)&&(k=0),x(k)}};return{handlerDelayMinBeforeSendState:C,handlerDelaySecsBeforeSendState:D,delaySecsBeforeSendState:g,delayMinBeforeSendState:y,setDelayMinBeforeSendState:b,setDelaySecsBeforeSendState:x,handleModalAction:P,setItemIdState:p,selectedItemId:f,notReady:!f||e.trim()==="",title:o==="create"?"Adicionar item":"Editar item",clearAllState:$}},PZ=({funnelId:e,funnelName:t,funnelMetadata:n,mode:r})=>{const[a,o]=v.useState(t),i=new Te,l=new vt,c=$b(l),d=e4(l),u=xn(i),m=vn(i);v.useEffect(()=>{t!==a&&o(t)},[t]);const f=()=>{o(r==="edit"?t:"")};return{name:a,handleModalAction:async()=>{if(r==="create"){const{funnel:x}=await c({name:a.trim()});await u({optionKey:"funnels",optionToAdd:{id:x.id,name:x.name,size:await Ne(x)}}),ae({title:`Funil "${a.trim()}" adicionado com sucesso.`}),f()}else if(r==="edit"&&e){const{funnel:x}=await d({id:e,name:a.trim()});await m({optionKey:"funnels",optionToUpdate:{id:x.id,name:x.name,size:await Ne(x)}}),ae({title:`Funil "${a.trim()}" atualizado com sucesso.`})}else if(r==="duplicate"&&n){const x=new je,y={...n,name:a.trim(),itemsSequence:n.itemsSequence.map(w=>({...w,id:new je().toString(),funnelId:x.toString()})),id:x.toString()},{funnel:b}=await c({...y});await u({optionKey:"funnels",optionToAdd:{id:b.id,name:b.name,size:await Ne(b)}})}},nameHandler:{value:a,onChange:x=>o(x.target.value)},notReady:a.trim()==="",title:r==="create"?"Adicionar funil":r==="edit"?"Editar funil":"Duplicar funil",clearAllState:f}};function Cu({funnelId:e,funnelName:t="",funnelMetadata:n,mode:r="create",trigger:a}){const{handleModalAction:o,nameHandler:i,notReady:l,title:c,clearAllState:d}=PZ({funnelId:e,funnelName:r==="duplicate"?`${t} cópia`:t,funnelMetadata:n,mode:r});return s.jsx(ve,{onCancel:d,onAction:o,action:"Salvar",actionProps:{disabled:l,icon:s.jsx(Ct,{})},description:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"title",className:"max-sm:hidden",children:"Título"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Título do funil",ref:$n,...i,errorMessage:!i.value.trim()&&"Campo não pode ser vazio."})]})}),title:c,trigger:a,cancel:"Cancelar"})}const $Z=function({funnel:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(Cu,{mode:"edit",funnelId:e.id,funnelName:e.name,trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),s.jsx(fe,{children:"Editar"})]})},D8=v.memo($Z,(e,t)=>e.funnel.id===t.funnel.id&&e.funnel.name===t.funnel.name);function k8({funnel:e}){const t=Jb(new vt);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Funil "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}const _Z=function({funnel:e,className:t,isSelected:n}){const r=Gb(new vt),{minutes:a,seconds:o}=on.fromMillisecondsToMinutes(e.itemsSequence.map(u=>u.delayBeforeSend).reduce((u,m)=>u+m,0)),{audioCount:i,documentCount:l,mediaCount:c,textMessageCount:d}=M8(e.itemsSequence);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-funnel/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-funnel",t),onClick:()=>{r(e.id)},actions:s.jsxs(s.Fragment,{children:[s.jsx(D8,{funnel:e}),s.jsx(k8,{funnel:e})]}),subtitle:s.jsxs("span",{className:"flex flex-wrap items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(id,{size:16}),s.jsxs("span",{children:[a," min e ",o,"s"]})," "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Tn,{size:16})," ",i]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(oi,{size:16})," ",c]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Fn,{size:16})," ",d]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hn,{size:16})," ",l]})]})]}),title:e.name})},RZ=v.memo(_Z,(e,t)=>e.funnel.id===t.funnel.id&&e.funnel.name===t.funnel.name&&e.funnel.itemsSequence.length===t.funnel.itemsSequence.length&&e.funnel.isFavorite===t.funnel.isFavorite&&e.funnel.itemsSequence.map(r=>r.delayBeforeSend).reduce((r,a)=>r+a,0)===t.funnel.itemsSequence.map(r=>r.delayBeforeSend).reduce((r,a)=>r+a,0)&&e.isSelected===t.isSelected);function Iu({size:e,id:t}){return s.jsx(Cu,{trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),id:t,children:"Adicionar"})})}function VZ(){const e=new vt,{authError:t,isPremium:n}=ct.useGetAuthData(),r=Yb(e),a=Wb(e),{filterTerm:o,filteredFunnelList:i,selectedFunnelId:l}=st.useDashboardFunnelList(),c=i.map(m=>(m.itemsSequence=m.itemsSequence.filter(f=>f),m)),{listRef:d}=Gr(c.length),u=!n||t;return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:async m=>{await r(m)},storeSearchTerm:o}),s.jsx(Iu,{id:"zv-add-funnel-button"})]}),c.length>0?s.jsx(_n,{className:Y(u?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:s.jsx(yn,{className:"pb-0",ref:d,onDragEnd:m=>{m.destination&&a({destinationIndex:m.destination.index,sourceIndex:m.source.index})},droppableId:"funnel-list",bgColor:"bg-item-funnel/5",children:c.map((m,f)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-funnel",draggableId:m.id,index:f,customHandle:!0,customHandleColor:"text-item-funnel",children:s.jsx(RZ,{funnel:m,className:"w-full",isSelected:l===m.id},m.id)},m.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhum funil encontrado",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-funnel/70"})]})}function O8({funnelId:e,mode:t="create",itemType:n,delayMinBeforeSend:r,delaySecsBeforeSend:a,itemId:o,trigger:i,funnelItemId:l}){const[c,d]=v.useState(n??"message"),{handleModalAction:u,notReady:m,setItemIdState:f,delayMinBeforeSendState:p,delaySecsBeforeSendState:g,handlerDelayMinBeforeSendState:x,handlerDelaySecsBeforeSendState:y,setDelayMinBeforeSendState:b,setDelaySecsBeforeSendState:w,title:j,selectedItemId:N,clearAllState:I}=LZ({mode:t,funnelId:e,itemId:o,itemType:c,delayMinBeforeSend:r,delaySecsBeforeSend:a,funnelItemId:l});function S(A){f(""),d(A),b(0),w(0)}let E=[];switch(c){case"audio":E=rt.useGetAudioList();break;case"document":E=Ke.useGetDocumentList();break;case"media":E=Ye.useGetMediaList();break;case"message":E=$e.useGetTextMessageList();break}return s.jsx(ve,{onCancel:I,className:"w-full max-w-[562px]",onAction:()=>{u(c)},action:"Salvar",actionProps:{disabled:m,icon:s.jsx(Ct,{})},description:s.jsxs(s.Fragment,{children:[s.jsxs(Zn,{defaultSelectedItem:t==="edit"?o:"",items:E,onSelectItem:f,previewDataBuilder:A=>{switch(c){case"audio":return s.jsx(cl,{itemId:A});case"document":return s.jsx(dl,{itemId:A});case"media":return s.jsx(ul,{itemId:A});case"message":return s.jsx(ml,{itemId:A})}},selectedItem:N,selectedType:c,children:[s.jsx(Uy,{isSelected:c==="message",onSelect:S}),s.jsx(Gy,{isSelected:c==="audio",onSelect:S}),s.jsx(Ky,{isSelected:c==="media",onSelect:S}),s.jsx(Yy,{isSelected:c==="document",onSelect:S})]}),s.jsxs("div",{className:"flex items-baseline justify-start gap-6",children:[s.jsxs("div",{className:"w-44 text-base ",children:["Enviando item após"," ",s.jsxs("span",{className:"font-bold text-primary",children:[p*60+g,"s"]})]}),s.jsx(dt,{...x,hint:"Minutos"}),s.jsx(dt,{...y,hint:"Segundos"})]})]}),title:j,trigger:i,cancel:"Cancelar"})}function HZ({size:e,variant:t,funnelId:n}){return s.jsx(O8,{mode:"create",funnelId:n,trigger:s.jsx(K,{className:"ml-4",size:e,icon:s.jsx(_t,{weight:"bold"}),variant:t,id:"zv-add-funnel-item-button",children:"Adicionar item"})})}function BZ({funnel:e}){const t=Rb(new vt),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e.id).then(()=>{n({optionKey:"funnels",optionIdToRemove:e.id})}).then(()=>{ae({title:`Funil "${e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o funil "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir o funil"," ",s.jsxs("span",{className:"font-bold",children:["“",e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir funil"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function zZ({funnel:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(Cu,{mode:"duplicate",funnelMetadata:e,funnelName:e.name,trigger:s.jsx(K,{icon:s.jsx(t2,{}),variant:"action",size:"action",onClick:t=>t.stopPropagation()})},`duplicate_${e.id}`)})}),s.jsx(fe,{children:"Duplicar"})]})}function ZZ({funnelId:e,itemId:t}){const n=Hb(new vt);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{n(e,t),ae({title:"Item de funil excluído com sucesso."})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir o item do funil"," ",s.jsx("span",{className:"font-bold"}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir item de funil"})]}),trigger:s.jsx("div",{className:"inline-flex items-center justify-center rounded-full bg-destructive-foreground p-2 text-sm font-medium text-destructive shadow-sm transition-colors hover:bg-destructive hover:text-destructive-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:s.jsx(yt,{size:24,className:"brightness-100 zv-dark:brightness-100"})})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function qZ({delayBeforeSend:e,itemId:t,type:n,funnelId:r,funnelItemId:a}){const{minutes:o,seconds:i}=on.fromMillisecondsToMinutes(e);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(O8,{delayMinBeforeSend:o,delaySecsBeforeSend:i,funnelItemId:a,itemId:t+"",itemType:n,funnelId:r,mode:"edit",trigger:s.jsx("div",{className:"inline-flex items-center justify-center rounded-full bg-action p-2 text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",onClick:l=>{l.stopPropagation()},children:s.jsx(Kt,{size:24})})})})}),s.jsx(fe,{children:"Editar"})]})}const Qa=v.forwardRef(({getItemData:e,open:t,icon:n,itemMetadata:r,itemFunnel:a},o)=>{const[i,l]=v.useState(),{minutes:c,seconds:d}=on.fromMillisecondsToMinutes(a.delayBeforeSend);return v.useEffect(()=>{t&&(async()=>{const m=await e(a.itemId);l(m)})()},[e,a.itemId,t]),s.jsx("div",{ref:o,className:"flex w-full items-center rounded-md bg-card px-6 py-3 shadow-lg ring-1 ring-primary-foreground transition-all hover:no-underline",children:s.jsxs(ur,{value:a.id,className:"w-full border-none",children:[s.jsx(mr,{className:"gap-2 py-0 hover:no-underline",triggerIconClasses:"inline-flex items-center w-10 h-10 p-2 justify-center rounded-full bg-action text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:s.jsxs("div",{className:"flex w-full flex-wrap-reverse justify-between",children:[s.jsxs("div",{className:"flex min-w-[100px] items-center gap-2 lg:max-w-[calc(100%_-_145px)]",children:[n,s.jsxs("div",{className:"text-start",children:[s.jsx("p",{className:"m-0 truncate whitespace-pre-wrap break-all text-base font-bold",children:r==null?void 0:r.name}),s.jsx("p",{className:"m-0 truncate text-sm text-muted-foreground",children:a.delayBeforeSend===0?"Enviando imediatamente":`Enviando após ${c} min e ${d}s`})]})]}),s.jsxs("div",{className:"flex items-center gap-2",id:"function-btns",children:[s.jsx(ZZ,{funnelId:String(a.funnelId),itemId:a.id}),s.jsx(qZ,{delayBeforeSend:a.delayBeforeSend,funnelId:String(a.funnelId),itemId:String(r==null?void 0:r.id),type:a.type,funnelItemId:a.id})]})]})}),s.jsx(fr,{className:"p-2",children:i&&"fileName"in i?s.jsx("div",{className:"h-full space-y-1 p-2 text-base",children:s.jsxs(s.Fragment,{children:[s.jsx(_e,{variant:"outline",children:"Nome do arquivo: "}),s.jsx("p",{children:i.fileName})]})}):i&&"caption"in i?s.jsxs(s.Fragment,{children:[r&&"asViewOnce"in r&&r.asViewOnce&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xo,{size:20,weight:"duotone",className:"text-primary"}),"Enviando mídia como visualização única"]}),s.jsxs("div",{className:"h-full space-y-1 p-2 text-muted-foreground",children:[s.jsx(_e,{variant:"outline",children:"Texto da legenda: "}),i.caption.split(`
`).map((u,m)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:u},m))]}),s.jsx(Ia,{data:i.data})]}):i&&a.type==="audio"&&r&&"isPtt"in r?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-base",children:r.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),s.jsx(Yo,{data:i.data})]}):i&&typeof i.data=="string"?i.data.split(`
`).map((u,m)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:u},m)):i==null?void 0:i.data.toString()})]})})});Qa.displayName="FunnelItemCardBase";const T8=v.forwardRef(({itemFunnel:e,open:t},n)=>{const r=rt.useGetAudioList(),a=Va(new an),o=r.find(i=>i.id===e.itemId);return s.jsx(Qa,{open:t,getItemData:a,ref:n,icon:s.jsx(Tn,{size:26,className:"min-w-[26px] text-item-audio",weight:"bold"}),itemFunnel:e,itemMetadata:o})});T8.displayName="FunnelAudioItemCard";const F8=v.forwardRef(({itemFunnel:e,open:t},n)=>{const r=Ke.useGetDocumentList(),a=Za(new bn),o=r.find(i=>i.id===e.itemId);return s.jsx(Qa,{open:t,getItemData:a,ref:n,icon:s.jsx(hn,{size:26,className:"min-w-[26px] text-item-document",weight:"bold"}),itemFunnel:e,itemMetadata:o})});F8.displayName="FunnelDocumentItemCard";const L8=v.forwardRef(({itemFunnel:e,open:t},n)=>{const r=Ye.useGetMediaList(),a=qa(new jn),o=r.find(i=>i.id===e.itemId);return s.jsx(Qa,{open:t,getItemData:a,ref:n,icon:s.jsx(oi,{size:26,className:"min-w-[26px] text-item-media",weight:"bold"}),itemFunnel:e,itemMetadata:o})});L8.displayName="FunnelMediaItemCard";const P8=v.forwardRef(({itemFunnel:e,open:t},n)=>{const r=$e.useGetTextMessageList(),a=Wa(new Nn),o=r.find(i=>i.id===e.itemId);return s.jsx(Qa,{open:t,getItemData:a,ref:n,icon:s.jsx(Fn,{size:26,className:"min-w-[26px] text-item-message",weight:"bold"}),itemFunnel:e,itemMetadata:o})});P8.displayName="FunnelTextMessageItemCard";const $8=v.forwardRef(({itemFunnel:e,open:t},n)=>{switch(e.type){case"audio":return s.jsx(T8,{ref:n,itemFunnel:e,open:t});case"message":return s.jsx(P8,{ref:n,itemFunnel:e,open:t});case"document":return s.jsx(F8,{ref:n,itemFunnel:e,open:t});case"media":return s.jsx(L8,{ref:n,itemFunnel:e,open:t});default:return null}});$8.displayName="FunnelItemCard";function WZ(){const[e]=ye("dashboard-funnel-help-video",de);return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[s.jsx("img",{src:"./funnel.svg",alt:"Imagem indicativa de que não há funis cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione um funil para visualizar ou clique em "}),s.jsx(Iu,{size:"sm"}),s.jsx("span",{children:" para criar um novo funil."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})})]})}function UZ(){const{selectedFunnelId:e}=st.useGetSelectedFunnel(),t=st.funnelList,n=qb(new vt),[r,a]=v.useState(),o=t.find(i=>i.id===e);return s.jsx("div",{className:Be("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),id:"funnel-details",children:e?s.jsx(qr,{actions:o&&s.jsxs(s.Fragment,{children:[s.jsx(BZ,{funnel:o}),s.jsx(zZ,{funnel:o}),s.jsx(D8,{funnel:o}),s.jsx(k8,{funnel:o}),s.jsx(HZ,{size:"action",funnelId:o.id})]}),body:o&&o.itemsSequence.length>0?s.jsx(dr,{type:"single",collapsible:!0,asChild:!0,value:r,onValueChange:i=>a(i),children:s.jsx(yn,{onDragEnd:i=>{i.destination&&n({funnelId:o.id,indexes:{destinationIndex:i.destination.index,sourceIndex:i.source.index}})},droppableId:"item-funnel-list",bgColor:"bg-item-funnel/5",children:o.itemsSequence.map((i,l)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-funnel",draggableId:i.id,index:l,customHandle:!0,customHandleColor:"text-item-funnel",children:s.jsx($8,{open:r===i.id,itemFunnel:{id:i.id,delayBeforeSend:i.delayBeforeSend,funnelId:i.funnelId,itemId:i.itemId,type:i.type}})},i.id))})}):s.jsx(cr,{description:s.jsx("p",{className:"text-center text-2xl",children:"Nenhum item adicionado"}),iconClasses:"text-item-funnel/70"}),title:s.jsx("span",{children:o==null?void 0:o.name})}):s.jsx(WZ,{})})}function GZ(){const[e]=ye("dashboard-funnel-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[s.jsx("img",{src:"./funnel.svg",alt:"Imagem indicativa de que não há funis cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhum funil cadastrado aqui."}),s.jsx("p",{children:"Que tal adicionar o seu primeiro funil?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(Iu,{id:"zv-add-funnel-button"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(dr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:s.jsxs(ur,{value:"important",children:[s.jsx(mr,{className:"px-4 py-3 ",children:s.jsxs("div",{className:"flex items-center gap-4 ",children:[s.jsx(pr,{size:24,weight:"thin"}),s.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um funil?"})]})}),s.jsx(fr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:s.jsxs("section",{className:"rounded-md p-4",children:[s.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),s.jsx("p",{className:"text-start text-sm font-light",children:'Funis são sequências de mensagens que podem ser enviadas manualmente através de clique ou de forma automática pelos gatilhos. Dentro dos funis é possível configurar um tempo de delay para que apareçam os status "digitando" e "gravando áudio" para o contato, como se as mensagens fossem gravadas na hora!'}),s.jsxs("p",{className:"mt-2 text-start text-sm font-light",children:["Um funil pode ser criado para enviar uma ou mais mensagens de uma vez só, sem precisar enviar uma de cada vez.",s.jsx("br",{}),"Por exemplo, você pode criar um funil para enviar mensagens de boas-vindas para um novo contato, este funil teria uma mensagem de texto, uma imagem e um vídeo que seriam enviados em sequência."]})]})})]})})})]})}function KZ(){const e=st.useGetHasFunnels();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(VZ,{}),s.jsx(UZ,{})]})}):s.jsx(GZ,{})]})}function _8(){const{isBusy:e,setIsBusy:t}=Is();return v.useEffect(()=>()=>t(!1),[]),e&&s.jsx("div",{className:"absolute z-[999999] h-screen w-screen bg-black/70"})}function YZ(){const e=new Wi,t=new Zr,n=v.useMemo(()=>new _a,[]),{setIsBusy:r}=Is(),a=v.useId(),o=v.useMemo(()=>ii(n,de,T1),[n]),i=qM(e,o),l=F1(t),[c,d]=v.useState(""),[u,m]=v.useState(()=>Le.acceptTerms),[f]=ye("free-login",de),[p]=ye("login-by-key",de),[g]=ye("social-login",de),[x]=ye("social-register",de),[y]=ye("usage-limit",de),b=Le.useGetOption("theme")==="dark",w=g||x,j=!p&&!f&&!w,N=w&&!f&&!p,I=O1();v.useEffect(()=>{const{removeListener:E}=Sb.auth.listenFinishExternalLoginRequest(A=>{We.dismiss(a),A.isLoggedIn?(A.userName&&ae({title:`Olá, ${A.userName}!`}),A.authError==="expiredKey"&&he({title:A.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),A.authError==="restrictedKey"&&he({title:A.authErrorMessage,description:"Desbloqueie no gerenciador de chaves ou entre em contato com nosso suporte."}),A.authError==="inactiveKey"&&he({title:A.authErrorMessage,description:"Ative sua chave no gerenciador de chaves ou entre em contato com nosso suporte."}),A.authError==="unknown"&&he({title:A.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),o.trackEvent("auth:login:end")):(A.authError==="userNotFound"&&he({title:A.authErrorMessage,description:"Verifique no gerenciador de chaves se a chave está ativa ou entre em contato com nosso suporte."}),A.authError==="managerNotFound"&&he({title:A.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),o.trackException("exception:auth:not_logged_in",{exc_auth_error:A.authError??"",exc_auth_error_message:A.authErrorMessage??"",fatal:!1}))});return()=>E()},[a,o]);function S(){const E=document.getElementById("accept-terms");E!==null&&(E.classList.add("animate-shakeX"),setTimeout(()=>{E.classList.remove("animate-shakeX")},600))}return s.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-background",children:[s.jsx(_8,{}),s.jsxs("div",{className:"flex items-center justify-between space-x-2 text-base",children:[s.jsx(ie,{className:"cursor-pointer text-sm",htmlFor:"hide-items-bar",children:b?"Modo escuro":"Modo claro"}),s.jsx(xt,{id:"hide-items-bar",checked:b,onCheckedChange:E=>{l(E)}})]}),s.jsxs("div",{className:"h-fit w-fit rounded-2xl border-status-neutral bg-card bg-opacity-60 bg-clip-padding px-[2dvw] py-[1dvh] text-center backdrop-blur-sm backdrop-filter md:max-w-[90dvw] md:border",children:[s.jsx("img",{src:"./Logo.svg",alt:"Logo ZapVoice",title:"Logo ZapVoice",className:"mb-1 h-[10dvh] w-full transition-all duration-300"}),s.jsxs(_e,{className:"mb-[3dvh]",variant:"default",size:"sm",children:["versão: ",I]}),s.jsx("h1",{className:"text-3xl text-foreground max-md:text-xl",children:"Seja bem vindo(a) ao ZapVoice"}),s.jsxs("div",{className:"flex flex-col items-center gap-[1.5dvh] px-[1dvw] py-[3dvh]",children:[!Le.acceptTerms&&s.jsxs("div",{className:"items-top mt-2 flex space-x-2 text-muted-foreground",id:"accept-terms",children:[s.jsx(qt,{id:"terms1",checked:u,onClick:()=>{m(!u)},className:Y(!Le.acceptTerms&&!u&&"border-destructive")}),s.jsx(ie,{htmlFor:"terms1",className:"grid gap-1.5 leading-none",children:s.jsxs("p",{className:Y("text-sm",!Le.acceptTerms&&!u&&"text-destructive"),children:["Li e concordo com os"," ",s.jsx("a",{href:"https://zapvoice.com.br/termos-de-uso/",target:"_blank",rel:"noreferrer",className:"font-bold text-primary underline",children:"termos"})," ","de uso e condições"]})})]}),g&&s.jsxs(s.Fragment,{children:[s.jsx(K,{onClick:async()=>{r(!0),We.loading("Realizando login...",{cancel:{label:"Cancelar",onClick:()=>{r(!1)}},closeButton:!1,description:"Após completar o processo de login na página externa, aguarde ser redirecionado à página inicial do painel de controle",duration:Number.POSITIVE_INFINITY,id:a}),o.trackEvent("auth:login:init",{zv_auth_method:"external"}),Le.changeAcceptTerms(u);const E=Zu(),A=new URL(`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/extension/auth/`);A.searchParams.append("action","login"),A.searchParams.append("callback",E),chrome.tabs.create({url:A.toString(),active:!0})},disabled:!Le.acceptTerms&&!u,childrenVariant:"no-dark",className:"w-full",children:N?"Entrar":"Entrar pelo gerenciador de chaves"}),(p||f||x)&&s.jsx("div",{className:"w-full text-lg",children:s.jsx(cs,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),x&&s.jsxs(s.Fragment,{children:[s.jsx(K,{onClick:async()=>{const E=ct.phoneNumber;o.trackEvent("auth:login:init",{zv_auth_method:"register"}),Le.changeAcceptTerms(u);const A=Zu(),O=new URL(`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/extension/auth/`);O.searchParams.append("action","register"),O.searchParams.append("callback",A),O.searchParams.append("utm_source","chrome_extension_dashboard_login"),O.searchParams.append("utm_medium","button"),O.searchParams.append("utm_campaign","extesion-free-register"),O.searchParams.append("utm_content","dash"),O.searchParams.append("utm_id",E??""),O.searchParams.append("utm_term",E??""),chrome.tabs.create({url:O.toString(),active:!0})},disabled:!Le.acceptTerms&&!u,childrenVariant:"no-dark",className:"w-full",children:N?"Cadastre-se gratuitamente":"Cadastre-se gratuitamente pelo gerenciador de chaves"}),(p||f)&&s.jsx("div",{className:"w-full text-lg",children:s.jsx(cs,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),(p||j)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"authKey",children:"Insira a sua chave de ativação recebida por email (verifique o spam)"}),s.jsx(ze,{beforeIcon:s.jsx(nh,{size:24,className:"text-status-caution zv-dark:text-status-caution-foreground"}),className:"text-base",id:"authKey",placeholder:"Insira sua chave aqui",onChange:E=>{d(E.target.value)},value:c}),s.jsx(K,{onClick:async()=>{let E="";if(c.trim().length===0&&(E="Por favor, insira a sua chave de ativação para realizar o login"),!Le.acceptTerms&&!u&&(E="Para entrar com sua chave de ativação é necessário aceitar os termos de uso",S()),E.trim().length>0){he({description:E,title:"Login autenticado"});return}o.trackEvent("auth:login:init",{zv_auth_method:"key"}),Le.changeAcceptTerms(u),i({key:c,keyId:null,managerId:null,ownerId:null,shouldGetUsage:y})},icon:s.jsx(Ct,{}),variant:"outline",childrenVariant:"no-dark",className:"mt-[0.5dvh]",children:"Entrar"})]}),f&&s.jsx("div",{className:"w-full text-lg",children:s.jsx(cs,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),f&&s.jsxs("div",{className:"grid justify-items-center gap-1.5 text-xs",children:[s.jsx(K,{onClick:async()=>{let E="";if(!Le.acceptTerms&&!u&&(E="Para entrar como usuário gratis é necessário aceitar os termos de uso",S()),E.trim().length>0){he({description:E,title:"Login gratuito"});return}o.trackEvent("auth:login:init",{zv_auth_method:"free"}),Le.changeAcceptTerms(u),i()},variant:"outline",childrenVariant:"no-dark",className:"text-xs",children:"Entrar como usuário grátis"}),s.jsxs("ul",{className:"rounded-lg bg-popover px-5 py-4 text-status-caution zv-dark:text-status-caution-foreground",children:[s.jsx("li",{children:"Os áudios são limitados a 60 segundos para usuários grátis"}),s.jsx("li",{children:"Os usuários grátis não podem enviar funis"}),s.jsx("li",{children:"Os usuários grátis não podem disparar gatilhos"})]})]})]})]}),s.jsxs("span",{className:"text-center",children:["Copyright © 2024 YVFL EMPREENDIMENTOS",s.jsx("span",{className:"max-md:hidden",children:" - "}),s.jsx("br",{className:"md:hidden"}),"Todos os direitos reservados"]})]})}const gl=v.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Y("rounded-xl border bg-card text-card-foreground shadow",e),...t}));gl.displayName="Card";const xl=v.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Y("flex flex-col space-y-1.5 p-6",e),...t}));xl.displayName="CardHeader";const vl=v.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Y("font-semibold leading-none tracking-tight",e),...t}));vl.displayName="CardTitle";const XZ=v.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Y("text-sm text-muted-foreground",e),...t}));XZ.displayName="CardDescription";const JZ=v.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Y("p-6 pt-0",e),...t}));JZ.displayName="CardContent";const QZ=v.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Y("flex items-center p-6 pt-0",e),...t}));QZ.displayName="CardFooter";const eq=ir("flex flex-row justify-between px-5 py-3",{variants:{variant:{default:"text-foreground",audio:"text-item-audio",document:"text-item-document",funnel:"text-item-funnel",label:"text-primary",media:"text-item-media",message:"text-item-message",trigger:"text-item-trigger"}},defaultVariants:{variant:"default"}});function br({className:e,help:t,icon:n,itemCount:r,title:a,variant:o,onClick:i}){return s.jsxs(gl,{className:"relative min-w-56 text-xl",onClick:i,children:[s.jsx(xl,{className:Y(eq({variant:o,className:e})),children:s.jsxs(vl,{className:"flex w-full items-center justify-center gap-1.5",children:[s.jsx("p",{className:"mb-0.5",children:n}),s.jsx("p",{className:"text-lg text-foreground",children:a}),s.jsx("p",{className:"ml-auto text-foreground",children:r})]})}),s.jsxs(Jo,{children:[s.jsx(Qo,{children:s.jsx(y1,{size:18,weight:"fill",className:"absolute -right-2 -top-1.5 text-foreground"})}),s.jsx(ei,{className:"w-fit",children:t})]})]})}const tq=async()=>{if(chrome.tabs){const e=await dd();e!=null&&e.id&&chrome.tabs.sendMessage(e.id,{type:Ko["Label:Request:FetchWhatsappLabels"]})}},nq={sendFetchWhatsappLabelsRequest:tq};async function rq(e){if(chrome.tabs){const t=await dd();t!=null&&t.id?(await chrome.tabs.update(t.id,{active:!0}),chrome.tabs.sendMessage(t.id,{type:Ko["Util:Request:OpenSupportChat"],data:e})):await chrome.tabs.create({url:"https://web.whatsapp.com/send/?phone=5561996037036",active:!0})}}const sq={sendOpenSupportChatRequest:rq},Au={label:nq,util:sq};function wr({content:e,supportMessage:t,videoUrl:n}){return s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-base font-bold",children:"Dúvidas?"}),e?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:e}),s.jsx("div",{children:"Precisa de ajuda?"})]}):s.jsx("div",{children:"Assista o tutorial abaixo ou fale com o suporte"})]}),s.jsxs("div",{className:"flex justify-between",children:[n&&s.jsx("a",{href:n,target:"_blank",rel:"noreferrer",children:s.jsx(K,{variant:"link",childrenVariant:"no-dark",icon:s.jsx(vd,{size:20}),children:"Ver vídeo"})}),s.jsx(K,{onClick:()=>{Au.util.sendOpenSupportChatRequest({message:t,trackParams:{zv_help_details:"homeHoverCard",zv_help_type:"chat",zv_scope:"dashboard"}})},variant:"link",childrenVariant:"no-dark",icon:s.jsx(y1,{size:20}),children:"Suporte"})]})]})}function aq(){const e=rt.useGetAudioCount(),[t]=ye("dashboard-audio-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(Tn,{size:20,weight:"bold"}),itemCount:e,className:"cursor-pointer",title:"Áudios",variant:"audio",onClick:()=>{ut.setRoute("/audios")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhum áudio.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar áudios, por favor.",videoUrl:r})})}function oq(){const e=Ke.useGetDocumentCount(),[t]=ye("dashboard-document-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(hn,{size:20,weight:"bold"}),itemCount:e,title:"Documentos",className:"cursor-pointer",variant:"document",onClick:()=>{ut.setRoute("/documents")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhum documento.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar documentos, por favor.",videoUrl:r})})}function iq(){const e=Ue.useGetFlowCount(),[t]=ye("dashboard-flow-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(ad,{size:20,weight:"bold"}),itemCount:e,title:"Fluxos",className:"cursor-pointer",variant:"trigger",onClick:()=>{ut.setRoute("/flows")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhum fluxo.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar fluxos, por favor.",videoUrl:r})})}function lq(){const e=st.useGetFunnelCount(),[t]=ye("dashboard-funnel-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(Aa,{size:20,weight:"bold"}),itemCount:e,title:"Funis",className:"cursor-pointer",variant:"funnel",onClick:()=>{ut.setRoute("/funnels")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhum funil.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar funis, por favor.",videoUrl:r})})}function Jl({className:e,cta:t,description:n,icon:r,title:a}){return s.jsxs("div",{className:Y("flex flex-col justify-between gap-2 rounded-lg bg-background p-5 zv-dark:*:drop-shadow",e),children:[s.jsx("div",{className:"-ml-1.5 mb-3",children:r}),s.jsx("div",{className:"text-xl font-bold",children:a}),s.jsx("div",{className:"mb-4  text-lg opacity-70",children:n}),s.jsx("div",{className:"mt-auto",children:t})]})}function cq(){const{isBasicPlan:e,key:t,keyId:n,ownerId:r,plan_id:a,userName:o}=ct.useGetAuthData(),i=ct.phoneNumber,[l]=ye("dashboard-home-help-video",de),[c]=ye("dashboard-home-benefit-for-pro-video",de),d=l==null?void 0:l.payload,u=d==null?void 0:d["video-url"],m=e===!1&&a!=="ZV_FREE",f=c.enabled&&c.payload["video-url"].trim().length>0,p=new URL(kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc"));return p.pathname="/plans/new",p.searchParams.set("key",t??""),p.searchParams.set("keyId",n??""),p.searchParams.set("name",o??""),p.searchParams.set("phone",i??""),p.searchParams.set("userId",r??""),p.searchParams.set("utm_campaign","extension_premium_upgrade"),p.searchParams.set("utm_content",t??i??""),p.searchParams.set("utm_medium","buy_plan_button_upgrade_pro_card"),p.searchParams.set("utm_source","chrome_extension"),s.jsx(gl,{className:"w-full rounded-lg border-none bg-card text-3xl",children:s.jsx(xl,{className:"flex-row justify-between gap-2 text-foreground",children:s.jsxs(vl,{className:"flex w-full flex-col justify-center gap-6 text-foreground",children:[s.jsxs("div",{className:"font-bold",children:["Bem-vindo à ZapVoice, ",o==null?void 0:o.split(" ")[0],"!"]}),s.jsxs("div",{className:Y("grid gap-5",m?f?"grid-cols-2":"grid-cols-1":f?"grid-cols-3":"grid-cols-2"),children:[s.jsx(Jl,{cta:s.jsx("a",{href:"https://t.me/pugn0_bot",target:"_blank",rel:"noreferrer",children:s.jsxs(K,{className:"text-base",childrenClassName:"flex gap-1.5 text-item-audio",variant:"link",childrenVariant:"no-dark",children:["Acessar grupo vip",s.jsx(ar,{className:"mt-0.5",size:20})]})}),description:"Eu me chamo Pugno sou um hacker bem conhecido na net e ensino pessoas a desenvolverem ferramentas com intuito de burlar aplicações e extrair informações",icon:s.jsx(v1,{className:"text-item-audio",size:48}),title:"Aprenda a hackear ferramentas e aplicativos"}),f&&s.jsx(Jl,{cta:m?s.jsx("a",{href:c.payload["video-url"],target:"_blank",rel:"noreferrer",children:s.jsxs(K,{className:"text-base",childrenClassName:"flex gap-1.5 text-item-media",variant:"link",childrenVariant:"no-dark",children:["Ver guia completo",s.jsx(ar,{className:"mt-0.5",size:20})]})}):s.jsxs(_e,{className:"h-min select-none gap-1 self-center rounded-full text-sm",variant:"duotoneSuccess",children:[s.jsx(Q1,{className:"-ml-0.5 shrink-0",size:20}),"Disponível como benefício apenas para usuários PRO"]}),description:"Aprenda as melhores práticas para atendimento e automação com a ZapVoice",icon:s.jsx(B1,{className:"text-item-media",size:48}),title:"Como atender seus clientes"}),!m&&s.jsx(Jl,{className:"bg-gradient-to-r from-violet-700 to-blue-600 text-white",cta:s.jsx("a",{href:p.toString(),target:"_blank",rel:"noreferrer",children:s.jsx(K,{className:"rounded-md border-border bg-white text-base font-bold text-primary hover:bg-white/80 zv-dark:border-input zv-dark:text-primary-foreground zv-dark:brightness-100",childrenVariant:"no-dark",children:"Conhecer planos"})}),description:"Desbloqueie recursos ilimitados e aumente sua produtividade",icon:s.jsx(ld,{className:"text-white",size:48}),title:"Upgrade para PRO"})]})]})})})}async function Xr({path:e,value:t=!0}){const n=new ud,r=await n.getParsedFromStorage("ZV:driver"),a=e??ut.currentRoute.path;if(r===null){const o=Object.keys(yl).reduce((l,c)=>(l[c]={alreadySeen:!1},l),{}),i={"ZV:driver":JSON.stringify({...o,[a]:{alreadySeen:t}})};await n.setOnStorage(i)}else{const o={"ZV:driver":JSON.stringify({...r,[a]:{alreadySeen:t}})};await n.setOnStorage(o)}}function Ca(e,t){let n=0;const r=setInterval(()=>{e.setAttribute("value",t.slice(0,n)),e.textContent=t.slice(0,n),n++,n>t.length&&clearInterval(r)},10)}function ho(){Xr({path:"/funnels"})}let Kp=!1;async function dq(e){if(await Tt({queryString:"#title",timeout:300})===null){console.warn('Element "#title" not found after 6 seconds'),e.destroy();return}e.moveNext()}let Yp=!1;async function uq(e){if(await Tt({queryString:"#zv-item-type-selector",timeout:300})===null){console.warn('Element "#zv-item-type-selector" not found after 6 seconds'),e.destroy();return}e.moveNext()}const In={id:"",name:"Funil de boas-vindas",itemsSequence:[],isFavorite:!0};let Xp=!1,Jp=!1,bt=0;const mq={showProgress:!0,nextBtnText:"Próximo",allowClose:!1,prevBtnText:"Voltar",doneBtnText:"Finalizar",progressText:"{{current}}/{{total}}",onCloseClick:(e,t,n)=>{var a,o;const r=(o=(a=n.config)==null?void 0:a.steps)==null?void 0:o.length;r&&n.driver.moveTo(r-1)},steps:[{popover:{title:"Tour pelos funís da ZapVoice",description:"Bem-vindo à página de funis! Antes de começarmos, vamos te dar uma visão geral sobre o que são e como funcionam.<br/>Em resumo: funis são sequências de mensagens que você pode disparar manualmente ou automaticamente, usando gatilhos (calma que já já a gente fala deles!).<br/><br/><i>🤖 Durante esse tour, vamos adicionar só uma mensagem de texto, mas você poderá incluir outros itens depois, sem problemas.</i>",side:"bottom",align:"center",showButtons:["close","next"],onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0;const n=e.wrapper.getAttribute("style");n&&e.wrapper.setAttribute("style",`${n} z-index: 10002 !important`),document.getElementsByTagName("body")[0].classList.remove("driver-active")}}},{element:"#zv-add-funnel-button",popover:{title:"Adicionar funil",description:"🤖 <i>Clique aqui para adicionar um novo funil</i>",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0,document.getElementsByTagName("body")[0].classList.add("driver-active");const r=document.querySelector("svg.driver-overlay");if(r){let o=r.getAttribute("style");o&&(o=o.replace("z-index: 10000;","z-index: 10005;"),r.setAttribute("style",o))}const a=t.state.activeElement;Kp||(a==null||a.addEventListener("click",()=>dq(t.driver)),Kp=!0)},onPrevClick:(e,t,n)=>{const r=document.querySelector("svg.driver-overlay");if(r){let a=r.getAttribute("style");a&&(a=a.replace("z-index: 10005;","z-index: 10000;"),r.setAttribute("style",a))}n.driver.movePrevious()},onNextClick:async e=>{const t=e;t&&t.click()}}},{element:"#title",popover:{title:"Títutlo do funil",description:"Aqui você pode informar o título do funil <br/><br/> 🤖 <i>Irei informar um aleatório para esse tour...</i>",side:"right",align:"center",showButtons:["close","previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer");r!=null&&r.children[0]&&r.children[0].click(),n.driver.movePrevious()},onPopoverRender(e,t){const n=t.state.activeElement;bt=t.state.activeIndex??0;const r=In.name;n&&(n.setAttribute("disabled","disabled"),Ca(n,r)),In.name=r}}},{element:"#zv-alert-dialog-footer",popover:{title:"Cancelar / Salvar",description:"Aqui você pode escolher se deseja <b>salvar</b> ou <b>cancelar</b> o cadastro do funil",side:"right",align:"center",showButtons:["previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&a.removeAttribute("disabled"),n.driver.movePrevious()},onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=n==null?void 0:n.children[0];r&&(r==null||r.removeAttribute("disabled")),a&&(a==null||a.setAttribute("disabled","disabled"))},onNextClick:async(e,t,n)=>{if(!Xp){const a=new vt,o=new _1(a),i=new je().toString(),l=await o.execute({name:In.name,id:i,isFavorite:!0,itemsSequence:[]});In.id=l.funnel.id,In.itemsSequence=l.funnel.itemsSequence,In.isFavorite=l.funnel.isFavorite,In.name=l.funnel.name;const c=new R1(a),d=st.funnelList.length;await c.execute({destinationIndex:0,sourceIndex:d-1}),Xp=!0}const r=e==null?void 0:e.children[0];if(r){if(r.removeAttribute("disabled"),r.click(),await Tt({queryString:"#funnel-details #details-card",timeout:300})===null){console.warn('Element "#funnel-details #details-card" not found after 6 seconds'),n.driver.destroy();return}const o=document.querySelector("body");o&&(o.classList.remove("driver-active"),o.setAttribute("style","pointer-events: all;")),n.driver.moveNext()}}}},{element:"#funnel-details #details-card",popover:{title:"Funções",description:"Após selecionar um funil, aqui você pode excluir, duplicar, editar, favoritar e adicionar um novo item ao funil<br/><br/> 🤖 <i>Para esse tour, iremos adicionar um novo item ao funil</i>",side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=r==null?void 0:r.querySelectorAll("button");a==null||a.forEach(o=>{o.setAttribute("disabled","disabled")})},onNextClick:(e,t,n)=>{const r=e==null?void 0:e.children[1],a=r==null?void 0:r.querySelectorAll("button");a==null||a.forEach(o=>{o.removeAttribute("disabled")}),n.driver.moveNext()},onPrevClick:async(e,t,n)=>{const r=document.querySelector("#zv-add-funnel-button");if(r){if(r.click(),await Tt({queryString:"#zv-alert-dialog-footer",timeout:300})===null){console.warn('Element "#zv-alert-dialog-footer" not found after 6 seconds'),n.driver.destroy();return}n.driver.moveTo(4)}}}},{element:"#zv-add-funnel-item-button",popover:{title:"Adicionar item ao funil",description:"Lembra que comentamos que um funil é uma sequência de mensagens como texto, mídia, documento ou áudio?<br/> Pois é! Ao clicar nesse botão, você pode adicionar um novo item que já foi cadastrado previamente no ZapVoice.<br/><br/> 🤖 <i>Clique aqui para adicionar um novo item ao funil.</i>",align:"center",side:"bottom",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{document.getElementsByTagName("body")[0].classList.add("driver-active"),bt=t.state.activeIndex??0;const r=document.querySelector("svg.driver-overlay");if(r){let o=r.getAttribute("style");o&&(o=o.replace("z-index: 10000;","z-index: 10005;"),r.setAttribute("style",o))}const a=t.state.activeElement;Yp||(a==null||a.addEventListener("click",()=>uq(t.driver)),Yp=!0)},onPrevClick:(e,t,n)=>{const r=document.querySelector("svg.driver-overlay");if(r){let a=r.getAttribute("style");a&&(a=a.replace("z-index: 10005;","z-index: 10000;"),r.setAttribute("style",a))}n.driver.movePrevious()},onNextClick:async e=>{const t=e;t&&t.click()}}},{element:"#zv-item-type-selector",popover:{title:"Selecione o tipo de item",description:'Aqui você pode selecionar o tipo de item que deseja adicionar ao funil<br/><br/> 🤖 <i>Para esse tour, iremos selecionar o tipo de item "Mensagem"</i>',side:"right",align:"center",onPopoverRender:(e,t)=>{var o;const n=t.state.activeElement;bt=t.state.activeIndex??0;const r=n==null?void 0:n.children;r&&Array.from(r).forEach(i=>{i.replaceWith(i.cloneNode(!0))});const a=(o=n==null?void 0:n.parentElement)==null?void 0:o.querySelector("button");a?a.setAttribute("id","zv-select-item"):(console.warn('Element "button" not found after 6 seconds'),t.driver.destroy())},onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer");r!=null&&r.children[0]&&r.children[0].click(),n.driver.movePrevious()}}},{element:"#zv-select-item",popover:{title:"Selecione o item",description:'Aqui você pode selecionar o item que deseja adicionar ao funil<br/><br/> 🤖 <i>Para esse tour, iremos selecionar o item "Mensagem de boas-vindas"</i>',side:"right",align:"center",onPopoverRender:async(e,t)=>{bt=t.state.activeIndex??0;const n=t.state.activeElement;$e.textMessageList.length>0?(n.click(),n.setAttribute("disabled","disabled"),e.description.innerHTML="Aqui você pode selecionar o item que deseja adicionar ao funil<br/><br/> 🤖 <i>Para esse tour, iremos selecionar o primeiro item da lista</i>"):e.description.innerHTML="Aqui você pode selecionar o item que deseja adicionar ao funil</i>"},onNextClick:async(e,t,n)=>{var i,l;const r=e,a=document.querySelector("div[data-radix-popper-content-wrapper]");a&&a.setAttribute("style","display: none;");const o=(l=(i=r.parentElement)==null?void 0:i.parentElement)==null?void 0:l.lastChild;o?(o.setAttribute("id","zv-delay"),n.driver.moveNext()):console.warn('Element "button" not found after 6 seconds')},onPrevClick:(e,t,n)=>{document.querySelector("div[data-radix-popper-content-wrapper]")&&(e==null||e.removeAttribute("disabled"),e.click()),n.driver.movePrevious()}}},{element:"#zv-delay",popover:{title:"Definir o atraso",description:"Aqui você pode definir o atraso antes de enviar a mensagem<br/><br/> 🤖 <i>Para esse tour, iremos definir o atraso em 10 segundos</i>",side:"right",align:"center",onPopoverRender:(e,t)=>{var l;const n=t.state.activeElement;bt=t.state.activeIndex??0;const r=n==null?void 0:n.querySelectorAll("input"),a=n==null?void 0:n.querySelectorAll("button");r==null||r.forEach(c=>{c.setAttribute("disabled","disabled")}),a==null||a.forEach(c=>{c.replaceWith(c.cloneNode(!0))});const o=(l=n==null?void 0:n.lastElementChild)==null?void 0:l.querySelector("input");o&&(o.value="10");const i=n==null?void 0:n.querySelector("span");i&&(i.innerHTML="10s")}}},{element:"#zv-alert-dialog-footer",popover:{title:"Cancelar / Salvar",description:"Aqui você pode escolher se deseja <b>salvar</b> ou <b>cancelar</b> a adição do item ao funil",showButtons:["previous","next"],side:"right",align:"center",onPrevClick:(e,t,n)=>{var l,c;const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&a.removeAttribute("disabled");const o=((l=e==null?void 0:e.parentElement)==null?void 0:l.children[0]).lastChild,i=((c=e==null?void 0:e.parentElement)==null?void 0:c.children[0]).querySelector("button");o?(o.setAttribute("id","zv-delay"),i.setAttribute("id","zv-select-item")):console.warn("Element not found after 6 seconds"),n.driver.movePrevious()},onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=n==null?void 0:n.children[0];r&&(r==null||r.removeAttribute("disabled")),a&&(a==null||a.setAttribute("disabled","disabled"))},onNextClick:async(e,t,n)=>{if(!Jp){const a=$e.textMessageList;if(a.length>0){const o=a[0],i=new $1(new vt),l=In.id===""?st.funnelList[0].id:In.id;await i.execute({funnelId:l,item:{delayBeforeSend:10,itemId:o.id,type:"message",id:new je().toString(),funnelId:l}})}Jp=!0}const r=e==null?void 0:e.children[0];r&&(r.removeAttribute("disabled"),r.click(),n.driver.moveNext())}}},{element:'div[data-rfd-droppable-id="item-funnel-list"] ul',popover:{title:"Itens de funil",description:"Aqui você pode ver todos os itens adicionados ao funil",side:"left",align:"start",showButtons:["close","previous","next"],onPrevClick:async(e,t,n)=>{const r=document.querySelector("#zv-add-funnel-item-button");if(r){if(r.click(),await Tt({queryString:"#zv-alert-dialog-footer",timeout:300})===null){console.warn('Element "#zv-alert-dialog-footer" not found after 6 seconds'),n.driver.destroy();return}n.driver.moveTo(9)}},onPopoverRender:(e,t)=>{var r,a,o,i,l,c,d,u;bt=t.state.activeIndex??0;const n=document.querySelector("#function-btns");n&&(a=(r=n.parentElement)==null?void 0:r.parentElement)!=null&&a.parentElement&&((u=(i=(o=n.parentElement)==null?void 0:o.parentElement)==null?void 0:i.parentElement)==null||u.replaceWith((d=(c=(l=n.parentElement)==null?void 0:l.parentElement)==null?void 0:c.parentElement)==null?void 0:d.cloneNode(!0)))}}},{popover:{title:"Parabéns",description:'🎉 Você acabou de criar seu primeiro funil! <br/><br/>🤖 <i>Para enviá-lo, é só seguir o mesmo passo a passo do tutorial de envio de mensagens.</i><br/>🤖 <i>Quer continuar? A gente ainda tem mais dicas pra te mostrar. É só clicar em "Continuar" pra seguir com o tour.</i>',side:"right",align:"center",nextBtnText:"Continuar",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{bt=t.state.activeIndex??0;const n=document.createElement("button");n.textContent="Ficar aqui",n.setAttribute("id","zv-stay-here"),n.addEventListener("click",()=>{const o=document.querySelector("body");o==null||o.classList.remove("driver-active"),o==null||o.removeAttribute("style"),ho(),t.driver.destroy()});const r=e.footerButtons,a=Array.from(r==null?void 0:r.children);a.splice(1,0,n),r.innerHTML="",a.forEach(o=>{r.appendChild(o)})}}},{element:"#zv-dashboard-sidebar-Gatilhos",popover:{title:"Gatilhos",description:"🤖 Clique aqui para acessar a página de gatilhos.",side:"right",align:"center",showButtons:["previous","close"],onPopoverRender:(e,t)=>{var o;bt=t.state.activeIndex??0,document.getElementsByTagName("body")[0].classList.add("driver-active");const r=t.state.activeElement,a=(o=r==null?void 0:r.parentElement)==null?void 0:o.parentElement;a&&a.setAttribute("style","left: 0px"),r==null||r.removeEventListener("click",ho),r==null||r.addEventListener("click",ho)},onPrevClick:(e,t,n)=>{document.getElementById("zv-dashboard-limits-banner")?n.driver.movePrevious():n.driver.moveTo(1)}}},{popover:{title:"😕 Deseja sair do tour?",description:"Você poderá assistir esse tutorial posteriormente no menu",side:"bottom",align:"center",prevBtnText:"Não quero ver o tour",nextBtnText:"Quero ver o tour",onPopoverRender:()=>{document.getElementsByTagName("body")[0].classList.add("driver-active")},onNextClick:(e,t,n)=>{n.driver.moveTo(bt)},onPrevClick:(e,t,n)=>{const r=document.querySelector("body");r==null||r.classList.remove("driver-active"),r==null||r.removeAttribute("style"),ho(),n.driver.destroy()}}}]};let Ql=0;async function Qp(){var t;if(!this)return;const e=(t=this.parentElement)==null?void 0:t.parentElement;e&&e.removeAttribute("style"),Xr({path:"/home"})}const fq={showProgress:!0,allowClose:!1,nextBtnText:"Próximo",prevBtnText:"Voltar",onCloseClick:async(e,t,n)=>{n.driver.moveTo(3)},steps:[{popover:{title:"Tour pela ZapVoice",description:"Preparamos um tour rapidinho pra te mostrar os principais cantos do dashboard e te ajudar a enviar sua primeira mensagem com a ZapVoice. <br/><br/> 🤖 <i>Bora dar uma olhada?</i>",side:"bottom",align:"center",nextBtnText:"Vamos lá!",prevBtnText:"Não, obrigado!",disableButtons:[],showButtons:["close","next","previous"],onPopoverRender:(e,t)=>{Ql=t.state.activeIndex??0;const n=e.wrapper.getAttribute("style");n&&e.wrapper.setAttribute("style",`${n} z-index: 10002 !important`),document.getElementsByTagName("body")[0].classList.remove("driver-active")},onPrevClick:(e,t,n)=>{n.driver.moveTo(3)}}},{element:"#zv-dashboard-limits-banner",popover:{title:"Limites de uso!",description:"Nesta área, você pode acompanhar os limites de uso de cada recurso. Se estiver no plano Básico ou Gratuito, alguns limites diários se aplicam.<br/><br/> 🤖 Caso necessite de mais, você pode fazer um upgrade posteriormente",side:"bottom",align:"center",showButtons:["close","next","previous"],onPopoverRender:(e,t)=>{document.getElementsByTagName("body")[0].classList.add("driver-active"),document.getElementById("zv-dashboard-limits-banner")?Ql=t.state.activeIndex??0:t.driver.moveNext()}}},{element:"#zv-dashboard-sidebar-Mensagens",popover:{title:"Mensagens",description:"Clique aqui para ir para a página de mensagens",side:"right",align:"center",showButtons:["previous","close"],onPopoverRender:(e,t)=>{var o;document.getElementsByTagName("body")[0].classList.add("driver-active");const r=t.state.activeElement,a=(o=r==null?void 0:r.parentElement)==null?void 0:o.parentElement;a&&a.setAttribute("style","left: 0px"),r==null||r.removeEventListener("click",Qp),r==null||r.addEventListener("click",Qp)},onPrevClick:(e,t,n)=>{document.getElementById("zv-dashboard-limits-banner")?n.driver.movePrevious():n.driver.moveTo(0)}}},{element:"#zv-dashboard-help-tour-btn",popover:{title:"😕 Deseja sair do tour?",description:"Você poderá assistir esse tutorial posteriormente clicando neste botão.",side:"bottom",align:"center",prevBtnText:"Não quero ver o tour",nextBtnText:"Quero ver o tour",showButtons:["previous","next"],onPopoverRender:()=>{document.getElementsByTagName("body")[0].classList.add("driver-active")},onNextClick:(e,t,n)=>{n.driver.moveTo(Ql)},onPrevClick:(e,t,n)=>{Xr({path:"/home"}),n.driver.destroy()}}}]};async function pq(e){if(chrome.tabs){const t=await dd();if(t!=null&&t.id)await chrome.tabs.update(t.id,{active:!0}),chrome.tabs.sendMessage(t.id,{type:Ko["Util:Request:RunWhatsappTour"],data:e});else{const n=ct.phoneNumber;await chrome.tabs.create({url:`https://web.whatsapp.com/send/?phone=${n}`,active:!0})}}}function e1(){Xr({path:"/messages"})}const mn={id:"",name:"Mensagem de boas-vindas",data:"Bem vindo ao ZapVoice, estamos muito felizes em ter você aqui! 💜",isFavorite:!0};let t1=!1,Er=0;const hq={showProgress:!0,nextBtnText:"Próximo",allowClose:!1,prevBtnText:"Voltar",doneBtnText:"Finalizar",onCloseClick:(e,t,n)=>{var a,o;const r=(o=(a=n.config)==null?void 0:a.steps)==null?void 0:o.length;r&&n.driver.moveTo(r-1)},steps:[{popover:{title:"Tour pelas mensagens da ZapVoice",description:"Essa é nossa página de mensagens, aqui serão listadas todas as mensagens que você criar além de poder gerenciar cada uma delas",side:"bottom",align:"center",showButtons:["close","next"],onPopoverRender:(e,t)=>{Er=t.state.activeIndex??0;const n=e.wrapper.getAttribute("style");n&&e.wrapper.setAttribute("style",`${n} z-index: 10002 !important`),document.getElementsByTagName("body")[0].classList.remove("driver-active")}}},{element:"#zv-add-text-message-button",popover:{title:"Adicionar mensagem",description:"🤖 <i>Clique aqui para adicionar uma nova mensagem</i>",side:"bottom",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{document.getElementsByTagName("body")[0].classList.add("driver-active"),Er=t.state.activeIndex??0;const r=document.querySelector("svg.driver-overlay");if(r){let i=r.getAttribute("style");i&&(i=i.replace("z-index: 10000;","z-index: 10005;"),r.setAttribute("style",i))}const a=t.state.activeElement;async function o(){if(await Tt({queryString:"#textMessageName",timeout:300})===null){console.warn('Element "#textMessageName" not found after 6 seconds'),t.driver.destroy();return}t.driver.moveNext(),a==null||a.removeEventListener("click",o)}a==null||a.removeEventListener("click",o),a==null||a.addEventListener("click",o)},onPrevClick:(e,t,n)=>{const r=document.querySelector("svg.driver-overlay");if(r){let a=r.getAttribute("style");a&&(a=a.replace("z-index: 10005;","z-index: 10000;"),r.setAttribute("style",a))}n.driver.movePrevious()},onNextClick:async e=>{const t=e;t&&t.click()}}},{element:"#textMessageName",popover:{title:"Nome da mensagem",description:"Aqui você pode informar o nome da mensagem <br/><br/> 🤖 <i>Irei informar um aleatório para esse tour...</i>",side:"right",align:"center",showButtons:["close","previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer");r!=null&&r.children[0]&&r.children[0].click(),n.driver.movePrevious()},onPopoverRender(e,t){const n=t.state.activeElement;Er=t.state.activeIndex??0;const r=mn.name;n&&(n.setAttribute("disabled","disabled"),Ca(n,r)),mn.name=r}}},{element:"#textMessageData",popover:{title:"Texto da mensagem",description:"Aqui você pode informar o conteúdo da mensagem que está sendo criada",side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender(e,t){const n=t.state.activeElement;Er=t.state.activeIndex??0;const r=mn.data;n&&(n.setAttribute("disabled","disabled"),Ca(n,r)),mn.data=r}}},{element:"#zv-alert-dialog-footer",popover:{title:"Cancelar / Salvar",description:"Aqui você pode escolher se deseja <b>salvar</b> ou <b>cancelar</b> o cadastro da mensagem",side:"right",align:"center",showButtons:["previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&a.removeAttribute("disabled"),n.driver.movePrevious()},onPopoverRender:(e,t)=>{Er=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=n==null?void 0:n.children[0];r&&(r==null||r.removeAttribute("disabled")),a&&(a==null||a.setAttribute("disabled","disabled"))},onNextClick:async(e,t,n)=>{if(!t1){const o=await new Xy($e).execute({base64:mn.data,name:mn.name});mn.id=o.textMessage.id;const i=new dx($e),l=$e.textMessageList.length;await i.execute({destinationIndex:0,sourceIndex:l-1}),t1=!0}const r=e==null?void 0:e.children[0];if(r){if(r.removeAttribute("disabled"),r.click(),await Tt({queryString:"#message-details #details-card",timeout:300})===null){console.warn('Element "#message-details #details-card" not found after 6 seconds'),n.driver.destroy();return}n.driver.moveNext()}}}},{element:"#message-details #details-card",popover:{title:"Funções",description:"Após selecionar uma mensagem, aqui você pode excluir, copiar, editar ou favoritar a mensagem<br/><br/> 🤖 <i>Passe o mouse por cima de cada ícone para ver o que cada um faz</i> 😉",side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{Er=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=r==null?void 0:r.querySelectorAll("button");a==null||a.forEach(o=>{o.setAttribute("disabled","disabled")})},onNextClick:(e,t,n)=>{const r=e==null?void 0:e.children[1],a=r==null?void 0:r.querySelectorAll("button");a==null||a.forEach(o=>{o.removeAttribute("disabled")}),n.driver.moveNext()},onPrevClick:async(e,t,n)=>{const r=document.querySelector("#zv-add-text-message-button");if(r){if(r.click(),await Tt({queryString:"#zv-alert-dialog-footer",timeout:300})===null){console.warn('Element "#zv-alert-dialog-footer" not found after 6 seconds'),n.driver.destroy();return}n.driver.movePrevious()}}}},{popover:{title:"Enviando sua primeira mensagem",description:"🎉 Você acabou de criar sua primeira mensagem! <br/><br/>🤖 <i>Criar áudios, mídias e documentos segue o mesmo passo a passo. Agora que você já pegou o jeito, vamos ao que interessa: enviar sua primeira mensagem!</i>",side:"right",align:"center",showButtons:["close","previous","next"],onNextClick:(e,t,n)=>{pq({type:"send-message",data:{itemId:mn.id,itemName:mn.name,itemDescription:mn.data}}),Le.changeAskToSendSingleItem(!1),e1(),n.driver.destroy()}}},{popover:{title:"😕 Deseja sair do tour?",description:"Você poderá assistir esse tutorial posteriormente no menu",side:"bottom",align:"center",prevBtnText:"Não quero ver o tour",nextBtnText:"Quero ver o tour",onPopoverRender:()=>{document.getElementsByTagName("body")[0].classList.add("driver-active")},onNextClick:(e,t,n)=>{n.driver.moveTo(Er)},onPrevClick:(e,t,n)=>{e1();const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&(a.removeAttribute("disabled"),a.click()),n.driver.destroy()}}}]};class Mu extends j1{get funnelId(){return this.props.funnelId}set funnelId(t){this.props.funnelId=t}get isCaseSensitive(){return this.props.isCaseSensitive}set isCaseSensitive(t){this.props.isCaseSensitive=t}get isEnabled(){return this.props.isEnabled}set isEnabled(t){this.props.isEnabled=t}get isFavorite(){return this.props.isFavorite}set isFavorite(t){this.props.isFavorite=t}get keywordRules(){return this.props.keywordRules}set keywordRules(t){this.props.keywordRules=t}get millisecondsBeforeSend(){return this.props.millisecondsBeforeSend}set millisecondsBeforeSend(t){this.props.millisecondsBeforeSend=t}get name(){return this.props.name}set name(t){this.props.name=t}get sendToContacts(){return this.props.sendToContacts}set sendToContacts(t){this.props.sendToContacts=t}get sendToGroups(){return this.props.sendToGroups}set sendToGroups(t){this.props.sendToGroups=t}get triggeredAt(){return this.props.triggeredAt}set triggeredAt(t){this.props.triggeredAt=t}get webhook(){return this.props.webhook}set webhook(t){this.props.webhook=t}get metadata(){return{funnelId:this.props.funnelId,id:this.id,isCaseSensitive:this.props.isCaseSensitive,isEnabled:this.props.isEnabled,isFavorite:this.props.isFavorite,keywordRules:this.props.keywordRules,millisecondsBeforeSend:this.props.millisecondsBeforeSend,name:this.props.name,sendToContacts:this.props.sendToContacts,sendToGroups:this.props.sendToGroups,triggeredAt:this.props.triggeredAt,webhook:this.props.webhook}}static create(t,n){return new Mu({...t},n)}}class R8{constructor(t){this.repository=t}async execute({funnelId:t,isCaseSensitive:n,isEnabled:r,isFavorite:a,keywordRules:o,millisecondsBeforeSend:i,name:l,sendToContacts:c,sendToGroups:d,webhook:u}){const m=l.trim();if(!m)throw new Error("CreateTrigger: Cannot create an trigger with empty name");const f=Mu.create({name:m,isFavorite:a,isCaseSensitive:n,isEnabled:r,keywordRules:o,millisecondsBeforeSend:i,sendToContacts:c,sendToGroups:d,triggeredAt:null,funnelId:t,webhook:u});return await this.repository.add(f),{trigger:f}}}function go(){Xr({path:"/triggers"})}let ec=!1;async function gq(e){if(await Tt({queryString:"#triggerName",timeout:400})===null){console.warn('Element "#triggerName" not found after 6 seconds'),e.destroy();return}e.moveNext()}async function tc(e){if(await Tt({queryString:"#zv-select-funnel",timeout:300})===null){console.warn('Element "#zv-select-funnel" not found after 6 seconds'),e.destroy();return}e.moveNext()}const as={id:"",name:"Gatilho de boas-vindas",funnelId:"",isCaseSensitive:!1,isEnabled:!1,keywordRules:[],millisecondsBeforeSend:1e4,sendToContacts:!1,sendToGroups:!1,triggeredAt:new Date,isFavorite:!1};let n1=!1;async function xq(){if(!n1){const e=new Kr;await new R8(e).execute({...as,funnelId:as.funnelId??""})&&(n1=!0)}}let Xt=0;const vq={showProgress:!0,nextBtnText:"Próximo",allowClose:!1,prevBtnText:"Voltar",doneBtnText:"Finalizar",progressText:"{{current}}/{{total}}",onCloseClick:(e,t,n)=>{var a,o;const r=(o=(a=n.config)==null?void 0:a.steps)==null?void 0:o.length;r&&n.driver.moveTo(r-1)},steps:[{popover:{title:"Tour pelos gatilhos da ZapVoice",description:'Bem-vindo à página de gatilhos! Lembra que falamos rapidamente sobre eles no tour de funis? Agora vamos te mostrar direitinho como funcionam.<br/>Em resumo: gatilhos são palavras-chave que você configura pra que um funil seja enviado automaticamente quando um contato mandar essa palavra.<br/><br/>Por exemplo: se você usar "Oi" como palavra-chave de um funil, sempre que um contato te mandar "Oi", o funil será enviado automaticamente — sem precisar clicar em nada.<br/><i>🤖 Quer ver na prática? Você pode montar um gatilho de boas-vindas que envia um funil. </i>',side:"bottom",align:"center",showButtons:["close","next"],onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0;const n=e.wrapper.getAttribute("style");n&&e.wrapper.setAttribute("style",`${n} z-index: 10002 !important`),document.getElementsByTagName("body")[0].classList.remove("driver-active")}}},{element:"#zv-add-trigger-button",popover:{title:"Adicionar gatilho",description:"🤖 <i>Clique aqui para adicionar um novo gatilho</i>",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0,document.getElementsByTagName("body")[0].classList.add("driver-active");const r=document.querySelector("svg.driver-overlay");if(r){let o=r.getAttribute("style");o&&(o=o.replace("z-index: 10000;","z-index: 10005;"),r.setAttribute("style",o))}const a=t.state.activeElement;ec||(a==null||a.addEventListener("click",()=>gq(t.driver)),ec=!0)},onPrevClick:(e,t,n)=>{const r=document.querySelector("svg.driver-overlay");if(r){let a=r.getAttribute("style");a&&(a=a.replace("z-index: 10005;","z-index: 10000;"),r.setAttribute("style",a))}n.driver.movePrevious()},onNextClick:async e=>{const t=e;t&&t.click()}}},{element:"#triggerName",popover:{title:"Títutlo do gatilho",description:"Aqui você pode informar o título do gatilho <br/><br/> 🤖 <i>Irei informar um aleatório para esse tour...</i>",side:"right",align:"center",showButtons:["close","previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer");r!=null&&r.children[0]&&r.children[0].click(),n.driver.movePrevious()},onPopoverRender(e,t){const n=t.state.activeElement;Xt=t.state.activeIndex??0;const r=as.name;n&&(n.setAttribute("disabled","disabled"),Ca(n,r)),as.name=r}}},{element:"#trigger-conditions",popover:{title:"Condições de disparo",description:'Aqui você adiciona as condições que o gatilho precisa atender pra ser disparado.<br/><br/> 🤖 <i>Nesse tour, vamos configurar uma condição simples: o gatilho será disparado quando o contato mandar uma mensagem que contenha "Oi".<br/>💡 <i>Dica: na hora de criar seus próprios gatilhos, você pode adicionar várias palavras-chave. Depois de digitar cada uma, aperte Enter pra salvar.</i>',side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{var a,o;const n=document.querySelector("#trigger-conditions input"),r=(a=t.state.activeElement)==null?void 0:a.querySelector('button[role="combobox"]');if(r){const i=(o=r.parentElement)==null?void 0:o.lastElementChild;i&&i.setAttribute("disabled","disabled"),r.setAttribute("disabled","disabled"),r.replaceWith(r.cloneNode(!0))}n&&(Ca(n,"Oi"),as.keywordRules=[{id:new je().toString(),keywords:["Oi"],type:"contains"}],document.querySelector(".zv-condition-keyword")||(setTimeout(()=>{const l=document.createElement("div");l.setAttribute("class","inline-flex items-center border transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground shadow font-black py-2 px-3 text-sm rounded-lg max-w-fit select-none gap-1 hover:bg-primary zv-condition-keyword"),l.textContent="Oi";const c=n.parentElement;c&&c.prepend(l),n.textContent="",n.value=""},1e3),n.setAttribute("disabled","disabled")))}}},{element:"#zv-alert-dialog-footer",popover:{title:"Cancelar / Próximo",description:"Aqui você pode escolher se deseja <b>ir para o próximo passo</b> ou <b>cancelar</b> o cadastro do gatilho",side:"right",align:"center",showButtons:["previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&a.removeAttribute("disabled"),n.driver.movePrevious()},onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=n==null?void 0:n.children[0];r&&(r==null||r.setAttribute("disabled","disabled")),a&&(a==null||a.setAttribute("disabled","disabled"))},onNextClick:async(e,t,n)=>{const r=e==null?void 0:e.children[0],a=e==null?void 0:e.children[1];r&&(a.removeAttribute("disabled"),r.removeAttribute("disabled"),a.click(),tc(n.driver))}}},{element:"#zv-select-funnel",popover:{title:"Selecione o funil",description:"Aqui você pode selecionar o funil que deseja adicionar ao gatilho",side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender:async(e,t)=>{Xt=t.state.activeIndex??0;const n=t.state.activeElement,r=st.funnelList;r.length>0?(as.funnelId=r[0].id,n.click(),n.setAttribute("disabled","disabled"),e.description.innerHTML="Aqui você pode selecionar o funil que será acionado se as condições previamente configuradas forem atendidas<br/><br/> 🤖 <i>Para esse tour, iremos selecionar o primeiro item da lista</i>"):e.description.innerHTML="Aqui você pode selecionar o funil que deseja adicionar ao gatilho</i>"},onNextClick:async(e,t,n)=>{var l;const r=e,a=document.querySelector("div[data-radix-popper-content-wrapper]");a&&a.setAttribute("style","display: none;");const o=(l=r.parentElement)==null?void 0:l.parentElement,i=o==null?void 0:o.children[1];i?(i.setAttribute("id","zv-delay"),n.driver.moveNext()):console.warn('Element "button" not found after 6 seconds')},onPrevClick:async(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer");if(r!=null&&r.children[0]&&r.children[0].click(),!await Tt({queryString:"#zv-alert-dialog-footer",timeout:300})){console.warn('Element "#zv-alert-dialog-footer" not found after 6 seconds'),n.driver.destroy();return}n.driver.movePrevious()}}},{element:"#zv-delay",popover:{title:"Definir o atraso",description:"Aqui você pode definir o atraso antes de enviar a mensagem<br/><br/> 🤖 <i>Para esse tour, iremos definir o atraso em 10 segundos</i>",side:"right",align:"center",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{var c,d;const n=t.state.activeElement;Xt=t.state.activeIndex??0;const r=n==null?void 0:n.querySelectorAll("input"),a=n==null?void 0:n.querySelectorAll("button");if(r)for(const u of r)u.setAttribute("disabled","disabled");if(a)for(const u of a)u.replaceWith(u.cloneNode(!0));const o=(c=n==null?void 0:n.lastElementChild)==null?void 0:c.querySelector("input");o&&(o.value="10");const i=n==null?void 0:n.querySelector("span");i&&(i.innerHTML="10s");const l=(d=n==null?void 0:n.parentElement)==null?void 0:d.lastElementChild;l&&l.setAttribute("id","zv-options")}}},{element:"#zv-options",popover:{title:"Opções do gatilho",description:"Aqui você pode definir as configurações do disparo do gatilho",side:"right",align:"center",showButtons:["close","previous","next"]}},{element:"#zv-alert-dialog-footer",popover:{title:"Anterior / Salvar",description:"Aqui você pode escolher se deseja <b>voltar para o passo anterior</b> ou <b>salvar</b> o cadastro do gatilho",side:"right",align:"center",showButtons:["previous","next"],onPrevClick:(e,t,n)=>{const r=document.querySelector("#zv-alert-dialog-footer"),a=r==null?void 0:r.children[0];a&&a.removeAttribute("disabled"),n.driver.movePrevious()},onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[0],a=n==null?void 0:n.children[1];r&&(r==null||r.setAttribute("disabled","disabled")),a&&(a==null||a.setAttribute("disabled","disabled")),a==null||a.removeEventListener("click",()=>{tc(t.driver)})},onNextClick:async(e,t,n)=>{const r=e==null?void 0:e.children[1];r&&(r==null||r.removeEventListener("click",()=>{tc(n.driver)}),r.removeAttribute("disabled"),xq(),r.click(),await Tt({queryString:"#details-card",timeout:300})||(console.warn('Element "#details-card" not found after 6 seconds'),n.driver.destroy()),n.driver.moveNext())}}},{element:"#details-card",popover:{title:"Funções",description:"Após selecionar uma mensagem, aqui você pode excluir, editar ou favoritar o gatilho<br/><br/> 🤖 <i>Passe o mouse por cima de cada ícone para ver o que cada um faz</i> 😉",side:"right",align:"center",nextBtnText:"Continuar",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{var i;Xt=t.state.activeIndex??0;const n=t.state.activeElement,r=n==null?void 0:n.children[1],a=r==null?void 0:r.querySelectorAll("button");if(a)for(const l of a)l.setAttribute("disabled","disabled");const o=(i=n==null?void 0:n.parentElement)==null?void 0:i.lastElementChild;o&&o.setAttribute("id","zv-trigger-content")},onNextClick:(e,t,n)=>{const r=e==null?void 0:e.children[1],a=r==null?void 0:r.querySelectorAll("button");if(a)for(const o of a)o.removeAttribute("disabled");n.driver.moveNext()},onPrevClick:async(e,t,n)=>{const r=document.querySelector("#zv-add-trigger-button");if(r){if(r.click(),await Tt({queryString:"#zv-alert-dialog-footer",timeout:300})===null){console.warn('Element "#zv-alert-dialog-footer" not found after 6 seconds'),n.driver.destroy();return}n.driver.moveTo(3)}}}},{element:"#zv-trigger-content",popover:{title:"Detalhes do gatilho",description:"Aqui você pode ver os detalhes do gatilho criado",side:"left",align:"start",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0}}},{popover:{title:"Parabéns",description:"🎉 Você acabou de criar seu primeiro gatilho! <br/><br/>🤖 <i>Os gatilhos são disparados quando o contato envia uma mensagem que contém a palavra-chave informada</i>",side:"right",align:"center",nextBtnText:"Finalizar",showButtons:["close","previous","next"],onPopoverRender:(e,t)=>{Xt=t.state.activeIndex??0},onNextClick:(e,t,n)=>{go(),n.driver.destroy()}}},{element:"#zv-dashboard-sidebar-Fluxos",popover:{title:"Fluxos",description:"Clique aqui para ir para a página de fluxos",side:"right",align:"center",showButtons:["previous","close"],onPopoverRender:(e,t)=>{var o;document.getElementsByTagName("body")[0].classList.add("driver-active");const r=t.state.activeElement,a=(o=r==null?void 0:r.parentElement)==null?void 0:o.parentElement;a&&a.setAttribute("style","left: 0px"),r==null||r.removeEventListener("click",go),r==null||r.addEventListener("click",go)}}},{popover:{title:"😕 Deseja sair do tour?",description:"Você poderá assistir esse tutorial posteriormente no menu",side:"bottom",align:"center",prevBtnText:"Não quero ver o tour",nextBtnText:"Quero ver o tour",onPopoverRender:()=>{document.getElementsByTagName("body")[0].classList.add("driver-active")},onNextClick:(e,t,n)=>{n.driver.moveTo(Xt)},onPrevClick:(e,t,n)=>{const r=document.querySelector("body");r==null||r.classList.remove("driver-active"),r==null||r.removeAttribute("style"),go(),ec=!1,n.driver.destroy()}}}]},r1={"/home":fq,"/messages":hq,"/funnels":mq,"/triggers":vq},V8=v.createContext({modals:void 0,openModal:()=>null,closeModal:()=>null,setAlreadySeen:()=>null,setModal:()=>null,startDriver:()=>null,currentDriver:void 0});function yq({children:e}){const[t,n]=v.useState(),[r,a]=v.useState(),o=new ud;async function i(){const f=await o.getParsedFromStorage("ZV:welcomeModals"),p=Object.keys(yl).reduce((g,x)=>(g&&(g[x]={alreadySeen:!1,version:""}),g),{});f||await o.setOnStorage({"ZV:welcomeModals":JSON.stringify(p)}),n(f??p)}function l(f){if(!t)return;const p={...t,[f]:{...t[f],isOpen:!0}};n(p)}function c(f){if(!t)return;const p={...t,[f]:{...t[f],isOpen:!1}};n(p)}async function d(f){if(!t)return;const p={...t,[f]:{...t[f],alreadySeen:!0}};n(p),await o.setOnStorage({"ZV:welcomeModals":JSON.stringify(p)})}async function u(f,p){if(!t)return;const g={...t,[f]:{...t[f],...p}};await o.setOnStorage({"ZV:welcomeModals":JSON.stringify(g)}),n(g)}async function m(f){var y;if(!Object.keys(r1).includes(f)||!de.flags.tour)return;r&&r.destroy();const g=Jy(r1[f]),x=await o.getParsedFromStorage("ZV:driver");(x&&!((y=x[f])!=null&&y.alreadySeen)||!x)&&g.drive(),a(g)}return v.useEffect(()=>{i()},[]),s.jsx(V8.Provider,{value:{modals:t,openModal:l,closeModal:c,setAlreadySeen:d,setModal:u,startDriver:m,currentDriver:r},children:e})}function eo(){return v.useContext(V8)}function bq(){const[e]=ye("video-tutorial",de),[t]=ye("tour",de),{startDriver:n}=eo(),r=()=>{Au.util.sendOpenSupportChatRequest({message:"Pugno vi sua ferramenta crackeada do zapvoice",trackParams:{zv_help_details:"greetings-card",zv_help_type:"chat",zv_scope:"dashboard"}})},a=e==null?void 0:e.payload,o=a==null?void 0:a["video-url"];return s.jsx(gl,{className:"w-full rounded-lg border-none bg-card text-base",children:s.jsx(xl,{className:"flex-row justify-between gap-2 text-foreground",children:s.jsxs(vl,{className:"flex w-full justify-between gap-6 text-foreground",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{children:"Precisa de ajuda?"}),s.jsx("div",{className:"text-sm opacity-60",children:"Assista nossos vídeo-tutoriais ou fale com nosso suporte"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[t&&s.jsx(K,{variant:"outline",childrenVariant:"no-dark",icon:s.jsx(rh,{size:20}),id:"zv-dashboard-help-tour-btn",onClick:async()=>{await new ud().removeFromStorage("ZV:driver"),n("/home")},children:"Fazer passo a passo"}),o&&s.jsx("a",{href:o,target:"_blank",rel:"noreferrer",children:s.jsx(K,{variant:"outline",childrenVariant:"no-dark",icon:s.jsx(vd,{size:20}),children:"Ver tutoriais"})}),s.jsx(K,{childrenVariant:"no-dark",className:"text-sm",variant:"link",size:"sm",onClick:r,children:s.jsx("span",{children:"Falar com Pugno"})})]})]})})})}function wq(){const{permissions:e}=ct.useGetAuthData(),t=ft.useGetLabelCount(),[n]=ye("dashboard-label-help-video",de),[r]=ye("label",de),a=n==null?void 0:n.payload,o=a==null?void 0:a["video-url"],i=e.includes("label");return r&&i&&s.jsx(br,{icon:s.jsx(gd,{size:20,weight:"bold"}),itemCount:t,className:"cursor-pointer",title:"Etiquetas",variant:"label",onClick:()=>{ut.setRoute("/labels")},help:s.jsx(wr,{content:t===0?"Percebemos que você ainda não adicionou nenhuma etiqueta.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar etiquetas, por favor.",videoUrl:o})})}function jq(){const e=Ye.useGetMediaCount(),[t]=ye("dashboard-media-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(aa,{size:20,weight:"bold"}),itemCount:e,title:"Mídias",className:"cursor-pointer",variant:"media",onClick:()=>{ut.setRoute("/medias")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhuma mídia.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar mídias, por favor.",videoUrl:r})})}function Nq(){const e=$e.useGetTextMessageCount(),[t]=ye("dashboard-message-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(Fn,{size:20,weight:"bold"}),itemCount:e,title:"Mensagens",variant:"message",className:"cursor-pointer",onClick:()=>{ut.setRoute("/messages")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhuma mensagem de texto.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar mensagens de texto, por favor.",videoUrl:r})})}function Sq(){const e=sn.useGetTriggerCount(),[t]=ye("dashboard-trigger-help-video",de),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return s.jsx(br,{icon:s.jsx(ld,{size:20,weight:"bold"}),itemCount:e,title:"Gatilhos",className:"cursor-pointer",variant:"trigger",onClick:()=>{ut.setRoute("/triggers")},help:s.jsx(wr,{content:e===0?"Percebemos que você ainda não adicionou nenhum gatilho.":"",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar gatilhos, por favor.",videoUrl:r})})}function Eq(){return s.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-y-auto p-3 md:px-8",children:s.jsxs("div",{className:"flex h-full max-w-7xl flex-col gap-6",children:[s.jsx(cq,{}),s.jsx(bq,{}),s.jsxs("div",{className:"w-full space-y-2",children:[s.jsx("div",{className:"mx-auto w-full text-center text-2xl",children:s.jsx("span",{children:"Total de itens cadastrados"})}),s.jsxs("div",{className:"mx-auto flex max-w-5xl flex-wrap justify-center gap-x-5 gap-y-3.5 pb-3",children:[s.jsx(Nq,{}),s.jsx(aq,{}),s.jsx(jq,{}),s.jsx(oq,{}),s.jsx(lq,{}),s.jsx(Sq,{}),s.jsx(iq,{}),s.jsx(wq,{})]})]})]})})}function Cq(){return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),s.jsx(Eq,{})]})}class Jr{constructor(){pe(this,"labelStore",ft)}addLabel(...t){return this.labelStore.addLabel(...t)}deleteLabel(...t){return this.labelStore.deleteLabel(...t)}findById(...t){return this.labelStore.findById(...t)}findByName(...t){return this.labelStore.findByName(...t)}findByPhoneNumber(...t){return this.labelStore.findByPhoneNumber(...t)}getAll(...t){return this.labelStore.getAll(...t)}saveLabel(...t){return this.labelStore.saveLabel(...t)}}class Iq{constructor(t){this.repository=t}async execute({sourceIndex:t,destinationIndex:n}){var a;const r=this.repository.labelStore;(a=r==null?void 0:r.store)!=null&&a.setState&&r.store.setState(o=>{const i=[...o.labelList],[l]=i.splice(t,1);return i.splice(n,0,l),{...o,labelList:i}})}}function Aq(e){const t=new Iq(e);return t.execute.bind(t)}class Mq{constructor(t){this.repository=t}async execute(t){var r;const n=this.repository.labelStore;(r=n==null?void 0:n.store)!=null&&r.setState&&n.store.setState(a=>({...a,filterTerm:t}))}}function Dq(e){const t=new Mq(e);return t.execute.bind(t)}const kq=e=>async(...[t])=>{t.type===Ko["Label:Response:FetchWhatsappLabels"]&&e(t.data)};function Oq(e){const t=kq(e),{removeListener:n}=Eb(t);return{removeListener:n}}const Tq={listenFetchWhatsappLabelsResponse:Oq},Fq={label:Tq},Lq=()=>{const e=new Jr,t=new Te,[n,r]=v.useState(!1),[a,o]=v.useState(!1),[i,l]=v.useState([]),[c,d]=v.useState([]),u=xn(t),m=vn(t),f=Qy(e),p=eb(e),g=ft.useGetLabels(),x=async M=>{await f(M),await u({optionKey:"labels",optionToAdd:{id:M.id,name:M.name,size:await Ne(M)}})},y=async M=>{const T=g.find($=>$.whatsappId===M.whatsappId);T&&(await p(b1.create({...M,createdAtInMs:T.createdAtInMs,createdBy:T.createdBy},new je(T.id)).metadata),await m({optionKey:"labels",optionToUpdate:{id:T.id,name:M.name,size:await Ne(M)}}))},b=()=>{l([])};v.useEffect(()=>{const{removeListener:M}=Fq.label.listenFetchWhatsappLabelsResponse(T=>{l(T),d(T),o(!1)});return()=>M()},[]);const w=M=>{r(M),M&&(o(!0),Au.label.sendFetchWhatsappLabelsRequest())},j=async()=>{for(const M of i)g.find($=>$.whatsappId===M.whatsappId)?await y(M):await x(M);b()},N=()=>{b()},I=({checked:M,item:T})=>{l($=>M?$.concat(T):$.filter(P=>P.id!==T.id))},S=c.every(M=>i.find(T=>T.id===M.id)),E=c.some(M=>i.find(T=>T.id===M.id))&&"indeterminate";return{handleModalAction:j,handleModalCancel:N,handleOpenChange:w,handleToggleItem:I,loading:a,open:n,selectedLabels:i,whatsappLabels:c,rootSelectedState:S||E,handleToggleRootSelection:()=>{l(S?[]:c)}}};function H8(){const{handleModalAction:e,handleModalCancel:t,handleOpenChange:n,handleToggleItem:r,loading:a,open:o,selectedLabels:i,whatsappLabels:l,handleToggleRootSelection:c,rootSelectedState:d}=Lq();return s.jsx(ve,{open:o,onOpenChange:n,trigger:s.jsx(K,{icon:s.jsx(Wr,{weight:"bold",className:"shrink-0"}),children:"Importar etiquetas do WhatsApp"}),title:"Importar etiquetas do WhatsApp",descriptionProps:{className:"flex flex-row gap-2 justify-between items-start"},description:s.jsx("div",{children:s.jsx("div",{className:"flex-1",children:a?"Carregando etiquetas do whatsapp":l.length===0?s.jsx("p",{className:"text-lg font-semibold",children:"Não há etiquetas para importar"}):s.jsxs("ul",{children:[s.jsx("li",{className:"mb-4",children:s.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[s.jsx(qt,{className:"mt-0.5",id:"allLabels",checked:d,onCheckedChange:c}),s.jsx(ie,{htmlFor:"allLabels",className:"flex cursor-pointer gap-2 text-sm font-bold",children:s.jsx("span",{children:"Selecionar tudo"})})]})},"allLabels"),l.map(u=>{const m=!!i.find(f=>f.id===u.id);return u&&s.jsx("li",{children:s.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[s.jsx(qt,{className:"mt-0.5",id:u.id,checked:m,onCheckedChange:f=>r({checked:f,item:u})}),s.jsx(ie,{htmlFor:u.id,className:"flex cursor-pointer gap-2 text-sm",children:s.jsx("span",{children:u.name})})]})},u.id)})]})})}),action:l.length>0?"Salvar":null,onAction:e,actionProps:{icon:s.jsx(Ct,{})},cancel:l.length>0?"Cancelar":"Fechar",onCancel:t})}class Pq{constructor(t){this.repository=t}async execute(t){const n=this.repository.labelStore;if(n!=null&&n.setSelectedLabel){const r=await this.repository.findById(t);n.setSelectedLabel(r)}}}function $q(e){const t=new Pq(e);return t.execute.bind(t)}const _q=({label:e})=>s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(tb,{backupDataRepository:new Te,itemId:e==null?void 0:e.id,labelColor:e==null?void 0:e.color,labelDescription:e==null?void 0:e.description,labelName:e==null?void 0:e.name,labelPhoneNumbersParam:e==null?void 0:e.phoneNumbers,labelRepository:new Jr,mode:"edit",trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),s.jsx(fe,{children:"Editar"})]}),B8=v.memo(_q,(e,t)=>e.label.id===t.label.id&&e.label.name===t.label.name);class Rq{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleLabelIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleLabelIsFavorite: Label not found");const r=b1.create({...n,isFavorite:!n.isFavorite,updatedAtInMs:new Date().getTime()},new je(n.id));await this.repository.saveLabel(r)}}function Vq(e){const t=new Rq(e);return t.execute.bind(t)}function z8({label:e}){const t=Vq(new Jr);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(K,{icon:s.jsx(lr,{size:24,weight:e.isFavorite?"fill":"regular"}),variant:"action",childrenVariant:"no-dark",size:"action",onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Etiqueta "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcada":"marcada"} como favorita com sucesso.`})}})})}),s.jsx(fe,{children:e.isFavorite?"Remover dos favoritos":"Adicionar aos favoritos"})]})}function Hq({label:e,className:t,isSelected:n}){var a;const r=$q(new Jr);return s.jsx(hr,{labelColor:e.color,cardBgColor:Y(n?"bg-item-label/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-label",t),onClick:()=>r(e.id),actions:s.jsxs(s.Fragment,{children:[s.jsx(B8,{label:e}),s.jsx(z8,{label:e})]}),subtitle:`${((a=e.phoneNumbers)==null?void 0:a.length)||0} números`,title:e.name})}const Bq=v.memo(Hq,(e,t)=>e.label.id===t.label.id&&e.label.updatedAtInMs===t.label.updatedAtInMs&&e.isSelected===t.isSelected),s1=({moveAll:e,destination:t,origin:n})=>{const r=e?n.phones:n.selectedItems,a=[];if(t.setter(o=>{const i=structuredClone(o);for(const l of r)i.find(c=>c.number===l.number)?a.push(l):i.push(l);return i}),e?n.setter(o=>o.filter(l=>a.find(d=>d.number===l.number))):n.setter(o=>o.filter(l=>{const c=a.find(u=>u.number===l.number),d=!n.selectedItems.find(u=>u.number===l.number);return c||d})),n.selectedSetter([]),a.length>0){const o=a.length===1?`Não foi possível mover o número 
          ${a.map(i=>i.number).join(", ")} porque
          o mesmo já está na etiqueta de destino`:`Não foi possível mover os números 
          ${a.map(i=>i.number).join(", ")} porque
          os mesmos já estão na etiqueta de destino`;he({title:"Números duplicados",description:o})}},zq=()=>{const[e,t]=v.useState(null),[n,r]=v.useState(null),[a,o]=v.useState([]),[i,l]=v.useState([]),[c,d]=v.useState([]),[u,m]=v.useState([]),f=vn(new Te),p=()=>{t(null),r(null),o([]),l([]),d([]),m([])},g=async()=>{if(e&&n){const S={...e,phoneNumbers:c},E={...n,phoneNumbers:u},[A,O]=await Promise.all([Ne(S),Ne(E)]);await Promise.allSettled([ft.saveLabel(S),ft.saveLabel(E),f({optionKey:"labels",optionToUpdate:{id:S.id,name:S.name,size:A}}),f({optionKey:"labels",optionToUpdate:{id:E.id,name:E.name,size:O}})])}p()},x=()=>{p()},y=({moveAll:S})=>s1({moveAll:S,destination:{setter:m},origin:{phones:c,selectedItems:a,selectedSetter:o,setter:d}}),b=({moveAll:S})=>s1({moveAll:S,destination:{setter:d},origin:{phones:u,selectedItems:i,selectedSetter:l,setter:m}}),w={onValueChange:S=>{t(S),S&&(d(S.phoneNumbers),m((n==null?void 0:n.phoneNumbers)??[]))},value:(e==null?void 0:e.name)??""},j={onValueChange:S=>{r(S),S&&(m(S.phoneNumbers),d((e==null?void 0:e.phoneNumbers)??[]))},value:(n==null?void 0:n.name)??""};return{handleModalAction:g,handleModalCancel:x,handleSelectAItem:(S,E)=>o(A=>S?A.concat([E]):A.filter(O=>O.number!==E.number)),handleSelectBItem:(S,E)=>l(A=>S?A.concat([E]):A.filter(O=>O.number!==E.number)),labelA:e,labelAHandler:w,labelB:n,labelBHandler:j,labelPhonesA:c,labelPhonesB:u,moveFromAtoB:y,moveFromBtoA:b,selectedItemsA:a,selectedItemsB:i}};function Zq(){const{handleModalAction:e,handleModalCancel:t,handleSelectAItem:n,handleSelectBItem:r,labelA:a,labelAHandler:o,labelB:i,labelBHandler:l,labelPhonesA:c,labelPhonesB:d,moveFromAtoB:u,moveFromBtoA:m,selectedItemsA:f,selectedItemsB:p}=zq();return s.jsx(ve,{trigger:s.jsx(K,{icon:s.jsx(lc,{weight:"bold",className:"shrink-0"}),children:"Mover contatos entre etiquetas"}),title:"Mover contatos entre etiquetas",descriptionProps:{className:"flex flex-row gap-2 justify-between items-start"},description:s.jsxs("div",{children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(rc,{filterListFunction:g=>g.id!==(i==null?void 0:i.id),store:ft,handler:o}),a&&i&&s.jsx(K,{disabled:c.length===0,className:"-mt-3 mb-6 h-6 w-full",onClick:()=>u({moveAll:!0}),icon:s.jsx(q1,{size:18}),children:"Mover todos"}),s.jsx("ul",{children:c.map(g=>{const x=!!f.find(b=>b.number===g.number),y=`${g.number}-${g.title}`;return g&&s.jsx("li",{children:s.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[s.jsx(qt,{id:y,checked:x,onCheckedChange:b=>n(b,g)}),s.jsx(ie,{htmlFor:y,className:"flex cursor-pointer gap-2 text-sm",children:s.jsx("span",{children:g.title})})]})},y)})})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(lc,{weight:"duotone",size:30,className:"m-2"}),a&&i&&s.jsxs(s.Fragment,{children:[s.jsx(K,{disabled:f.length===0,size:"sm",onClick:()=>u({moveAll:!1}),icon:s.jsx(W1,{size:18})}),s.jsx(K,{disabled:p.length===0,size:"sm",onClick:()=>m({moveAll:!1}),icon:s.jsx(md,{size:18})})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(rc,{filterListFunction:g=>g.id!==(a==null?void 0:a.id),store:ft,handler:l}),i&&a&&s.jsx(K,{disabled:d.length===0,className:"-mt-3 mb-6 h-6 w-full",onClick:()=>m({moveAll:!0}),icon:s.jsx(Z1,{size:18}),children:"Mover todos"}),s.jsx("ul",{children:d.map(g=>{const x=!!p.find(b=>b.number===g.number),y=`${g.number}-${g.title}`;return g&&s.jsx("li",{children:s.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[s.jsx(qt,{id:y,checked:x,onCheckedChange:b=>r(b,g)}),s.jsx(ie,{htmlFor:y,className:"flex cursor-pointer gap-2 text-sm",children:s.jsx("span",{children:g.title})})]})},y)})})]})]}),action:"Salvar",onAction:e,actionProps:{icon:s.jsx(Ct,{})},cancel:"Cancelar",onCancel:t})}function qq(){const e=new Jr,t=new Te,n=Dq(e),r=Aq(e),{filterTerm:a,filteredLabelList:o,selectedLabelId:i}=ft.useDashboardLabelList(),{listRef:l}=Gr(o.length);return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5 pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:n,storeSearchTerm:a}),s.jsx(w1,{backupDataRepository:t,labelRepository:e})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Zq,{}),s.jsx(H8,{})]}),o.length>0?s.jsx(_n,{className:"h-full",children:s.jsx(yn,{className:"pb-0",ref:l,onDragEnd:c=>{c.destination&&r({destinationIndex:c.destination.index,sourceIndex:c.source.index})},droppableId:"label-list",bgColor:"bg-item-label-light/70 zv-dark:bg-item-label-light/10",children:o.map((c,d)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-label",draggableId:c.id,index:d,isSelected:i===c.id,customHandle:!0,customHandleColor:"text-item-label",children:s.jsx(Bq,{label:c,isSelected:i===c.id,className:"w-full"},c.id)},c.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhuma etiqueta encontrada",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-label/70"})]})}class Wq{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("DeleteLabel: Id must be provided");if(!await this.repository.findById(t))throw new Error("DeleteLabel: Label not found");await this.repository.deleteLabel(t)}}function Uq(e){const t=new Wq(e);return t.execute.bind(t)}function Gq({label:e}){const t=Uq(new Jr);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{ae({title:`Etiqueta "${e==null?void 0:e.name}" excluída com sucesso.`})}).catch(n=>{n instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir a etiqueta "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),n.message.split(`
`).map((r,a)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:r},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir a etiqueta"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir etiqueta"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function Kq(){return s.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 rounded-lg bg-card p-8 text-center shadow-sm",children:[s.jsx("img",{src:"./label.svg",alt:"Imagem indicativa de que nenhuma etiqueta foi selecionada",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Nenhuma etiqueta selecionada"}),s.jsx("p",{children:"Selecione uma etiqueta para ver seus detalhes"})]})]})}function Yq(){const e=ft.useGetSelectedLabel(),t=ft.useGetLabels(),[n,r]=v.useState(null);return v.useEffect(()=>{const a=t.find(o=>o.id===(e==null?void 0:e.id));a&&r(a)},[e,t]),s.jsx("div",{className:Be("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?s.jsx(qr,{actions:n&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Gq,{label:n}),s.jsx(B8,{label:n}),s.jsx(z8,{label:n})]}),body:n&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm",children:["Data da criação:"," ",Nl(n.createdAtInMs).format("DD/MM/YYYY HH:mm:ss")]}),s.jsxs("p",{className:"!mt-0 ms-2",children:["| Criado por"," ",n.createdBy==="user"?"você":n.createdBy]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"!mt-0 text-sm",children:["Última atualização:"," ",Nl(n.updatedAtInMs).format("DD/MM/YYYY HH:mm:ss")]}),s.jsxs("p",{className:"!mt-0 ms-2",children:["| Atualizado por"," ",n.updatedBy==="user"?"você":n.updatedBy]})]}),s.jsxs("div",{className:"space-y-1 bg-background/50 p-2 text-muted-foreground",children:[s.jsx(_e,{variant:"outline",children:"Descrição:"}),n.description?n.description.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap break-all font-sans",children:a},o)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma descrição fornecida"})]}),s.jsxs("div",{children:[s.jsxs(_e,{variant:"outline",className:"mb-2",children:[n.phoneNumbers.length," Números associados:"]}),n.phoneNumbers.length>0?s.jsx("div",{className:"flex max-h-56 flex-wrap gap-2 overflow-y-auto",children:n.phoneNumbers.map(a=>s.jsxs(ue,{children:[s.jsx(me,{children:s.jsx(_e,{title:"Clique para copiar",className:"cursor-pointer",onClick:o=>{o.stopPropagation(),navigator.clipboard.writeText(a.number),ae({title:"Número copiado para a área de transferência"})},children:a.title})}),s.jsxs(fe,{children:[s.jsx("p",{children:Nl(a.createdAtInMs).format("DD/MM/YYYY HH:mm:ss")}),a.createReason&&s.jsx("p",{children:a.createReason})]})]},a.number))}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum número associado"})]})]}),title:n==null?void 0:n.name}):s.jsx(Kq,{})})}function Xq(){const[e]=ye("dashboard-label-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[s.jsx("img",{src:"./label.svg",alt:"Imagem indicativa de que não há etiquetas cadastradas",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhuma etiqueta cadastrada aqui."}),s.jsx("p",{children:"Que tal adicionar a sua primeira etiqueta?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(w1,{backupDataRepository:new Te,labelRepository:new Jr}),s.jsx(H8,{})]})]})}function Jq(){const e=ft.useGetHasLabels();return s.jsx(s.Fragment,{children:e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1060px] gap-5 max-md:flex-wrap",children:[s.jsx(qq,{}),s.jsx(Yq,{})]})}):s.jsx(Xq,{})})}function Qq(){return s.jsx(YZ,{})}function Du({size:e}){return s.jsx(yu,{trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),children:"Adicionar"})})}const eW=function({media:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(yu,{mode:"edit",itemId:e==null?void 0:e.id,mediaName:e==null?void 0:e.name,viewOnce:e==null?void 0:e.asViewOnce,isPtv:e==null?void 0:e.isPtv,trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),s.jsx(fe,{children:"Editar"})]})},Z8=v.memo(eW,(e,t)=>e.media.id===t.media.id&&e.media.name===t.media.name);function q8({media:e}){const t=rD(new jn);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Mídia "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcada":"marcada"} como favorita com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}const tW=function({media:e,className:t,isSelected:n}){const r=QM(new jn);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-media/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-media",t),onClick:()=>{r(e.id)},actions:s.jsxs(s.Fragment,{children:[s.jsx(Z8,{media:e}),s.jsx(q8,{media:e})]}),title:e.name})},nW=v.memo(tW,(e,t)=>e.media.id===t.media.id&&e.media.name===t.media.name&&e.media.isFavorite===t.media.isFavorite&&e.isSelected===t.isSelected);function rW(){const e=new jn,t=tD(e),n=XM(e),{filterTerm:r,filteredMediaList:a,selectedMediaId:o}=Ye.useDashboardMediaList(),{listRef:i}=Gr(a.length);return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),s.jsx(Du,{})]}),a.length>0?s.jsx(_n,{className:"h-full",children:s.jsx(yn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"media-list",bgColor:"bg-item-media-light/70 zv-dark:bg-item-media-light/15",children:a.map((l,c)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-media",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-media",children:s.jsx(nW,{media:l,className:"w-full",isSelected:o===l.id},l.id)},l.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhuma mídia encontrada",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-media/70"})]})}function sW({media:e}){const t=GM(new jn,new vt,new Se),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"medias",optionIdToRemove:e.id})}).then(()=>{ae({title:`Mídia "${e==null?void 0:e.name}" excluída com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir a mídia "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir a mídia"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir mídia"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function aW({media:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("a",{download:e==null?void 0:e.name,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:s.jsx(K,{icon:s.jsx(Wr,{size:24}),variant:"action",size:"action"})})}),s.jsx(fe,{children:"Baixar"})]})}function oW(){const[e]=ye("dashboard-media-help-video",de);return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[s.jsx("img",{src:"./media.svg",alt:"Imagem indicativa de que não há mídias cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione uma mídia para visualizar ou clique em "}),s.jsx(Du,{size:"sm"}),s.jsx("span",{children:" para criar uma nova mídia."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})})]})}function iW(){const e=Ye.useGetMediaList(),{dummyTrigger:t}=Ye.useGetSelectedMedia(),n=qa(new jn),{selectedMediaId:r}=Ye.useGetSelectedMedia(),[a,o]=v.useState(null);return v.useEffect(()=>{const i=e.find(c=>c.id===r);o(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",asViewOnce:(i==null?void 0:i.asViewOnce)??!1,caption:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.caption)??"":"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":"",isPtv:(i==null?void 0:i.isPtv)??!1}));async function l(){try{const c=await n(r);if(!c)return;o(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",asViewOnce:(d==null?void 0:d.asViewOnce)??!1,caption:c.caption??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data,isPtv:(d==null?void 0:d.isPtv)??!1}))}catch{}}l()},[r,t]),s.jsx("div",{className:Be("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!r&&"justify-center"),children:r.trim()!==""?s.jsx(qr,{actions:a&&s.jsxs(s.Fragment,{children:[s.jsx(sW,{media:a}),s.jsx(aW,{media:a}),s.jsx(Z8,{media:a}),s.jsx(q8,{media:a})]}),body:a&&s.jsxs("div",{children:[a.asViewOnce&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xo,{size:20,weight:"duotone",className:"text-primary"}),"Enviando mídia como visualização única"]}),s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsxs("div",{className:"mb-2 h-full space-y-1 rounded-md bg-background/50 p-2 text-muted-foreground",children:[s.jsx(_e,{variant:"outline",children:"Texto da legenda: "}),a.caption.split(`
`).map((i,l)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap break-all font-sans",children:i},l))]})}),s.jsx(fe,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-2",children:["Clique no botão",s.jsx("div",{className:"rounded-full p-1 ring-1 ring-primary-foreground",children:s.jsx(Kt,{size:20})}),"para editar"]})})]}),s.jsx(Ia,{className:"flex justify-center",data:a.data}),s.jsx("br",{})]}),title:a==null?void 0:a.name}):s.jsx(oW,{})})}function lW(){const[e]=ye("dashboard-media-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[s.jsx("img",{src:"./media.svg",alt:"Imagem indicativa de que não há mídias cadastradas",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhuma mídia cadastrada aqui."}),s.jsx("p",{children:"Que tal adicionar a sua primeira mídia?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(Du,{})]})]})}function cW(){const e=Ye.useGetHasMedias();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(rW,{}),s.jsx(iW,{})]})}):s.jsx(lW,{})]})}const dW=function({textMessage:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(bu,{mode:"edit",itemId:e==null?void 0:e.id,textMessageName:e==null?void 0:e.name,trigger:s.jsx(K,{onClick:t=>t.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),s.jsx(fe,{children:"Editar"})]})},W8=v.memo(dW,(e,t)=>e.textMessage.id===t.textMessage.id&&e.textMessage.name===t.textMessage.name);function U8({textMessage:e}){const t=hD(new Nn);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ae({title:`Mensagem "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcada":"marcada"} como favorita com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}const uW=function({textMessage:e,className:t,isSelected:n}){const r=uD(new Nn);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-message/5":"bg-card"),className:Y(n&&"rounded-sm ring-1 ring-item-message",t),onClick:()=>r(e.id),actions:s.jsxs(s.Fragment,{children:[s.jsx(W8,{textMessage:e}),s.jsx(U8,{textMessage:e})]}),subtitle:"",title:e.name})},mW=v.memo(uW,(e,t)=>e.textMessage.id===t.textMessage.id&&e.textMessage.name===t.textMessage.name&&e.textMessage.isFavorite===t.textMessage.isFavorite&&e.isSelected===t.isSelected);function ku({size:e,id:t="zv-add-text-message-button"}){return s.jsx(bu,{trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),id:t,children:"Adicionar"})})}function fW(){const e=new Nn,t=fD(e),n=cD(e),{filterTerm:r,filteredTextMessageList:a,selectedTextMessageId:o}=$e.useDashboardTextMessageList(),{listRef:i}=Gr(a.length);return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),s.jsx(ku,{id:"zv-add-text-message-button"})]}),a.length>0?s.jsx(_n,{className:"h-full",children:s.jsx(yn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"textMessage-list",bgColor:"bg-item-message-light/70 zv-dark:bg-item-message-light/10",children:a.map((l,c)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-message",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-message",children:s.jsx(mW,{textMessage:l,className:"w-full",isSelected:o===l.id},l.id)},l.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhuma mensagem encontrada",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-message/70"})]})}function pW({textMessage:e}){return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{icon:s.jsx(Y1,{size:24}),variant:"action",size:"action",onClick:async()=>{await navigator.clipboard.writeText(`${e.name}

${e.data}`),ae({title:`Mensagem "${e.name.trim()}" copiada com sucesso para a área de transferência.`})}})}),s.jsx(fe,{children:"Copiar"})]})}function hW({textMessage:e}){const t=iD(new Nn,new vt,new Se),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"messages",optionIdToRemove:e.id})}).then(()=>{ae({title:`Mensagem "${e==null?void 0:e.name}" excluída com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir a mensagem "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir a mensagem"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir mensagem"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function gW(){const[e]=ye("dashboard-message-help-video",de),{startDriver:t}=eo();return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[s.jsx("img",{src:"./textMessage.svg",alt:"Imagem indicativa de que não há mensagens cadastradas",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione uma mensagem para visualizar ou clique em "}),s.jsx(ku,{size:"sm"}),s.jsx("span",{children:" para criar uma nova mensagem."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[s.jsx(K,{variant:"outline",onClick:async()=>{await Xr({path:"/messages",value:!1}),t("/messages")},children:"Fazer um tour"}),(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})]})]})}function xW(){const{selectedTextMessageId:e}=$e.useGetSelectedTextMessage(),t=$e.useGetTextMessageList(),{dummyTrigger:n}=$e.useGetSelectedTextMessage(),r=Wa(new Nn),[a,o]=v.useState(null);return v.useEffect(()=>{const i=t.find(c=>c.id===e);o(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){try{const c=await r(e);if(!c)return;o(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}catch{}}l()},[e,n]),s.jsx("div",{className:Be("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),id:"message-details",children:e?s.jsx(qr,{actions:a&&s.jsxs(s.Fragment,{children:[s.jsx(hW,{textMessage:a}),s.jsx(pW,{textMessage:a}),s.jsx(W8,{textMessage:a}),s.jsx(U8,{textMessage:a})]}),body:a&&s.jsx("div",{children:s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsxs("div",{className:"h-full space-y-1 bg-background/50 p-2 text-muted-foreground",children:[s.jsx(_e,{variant:"outline",children:"Texto da mensagem: "}),a.data.split(`
`).map((i,l)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap break-all font-sans",children:i},l))]})}),s.jsx(fe,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-2",children:["Clique no botão",s.jsx("div",{className:"rounded-full p-1 ring-1 ring-primary-foreground",children:s.jsx(Kt,{size:20})}),"para editar"]})})]})}),title:a==null?void 0:a.name}):s.jsx(gW,{})})}function vW(){const[e]=ye("dashboard-message-help-video",de),{startDriver:t}=eo();return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[s.jsx("img",{src:"./textMessage.svg",alt:"Imagem indicativa de que não há mensagens cadastradas",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhuma mensagem cadastrada aqui."}),s.jsx("p",{children:"Que tal adicionar a sua primeira mensagem?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[s.jsx(K,{variant:"outline",onClick:async()=>{await Xr({path:"/messages",value:!1}),t("/messages")},children:"Fazer um tour"}),(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(ku,{id:"zv-add-text-message-button"})]})]})}function yW(){const e=$e.useGetHasTextMessages();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(fW,{}),s.jsx(xW,{})]})}):s.jsx(vW,{})]})}function bW(e){const t=new R8(e);return t.execute.bind(t)}class wW{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("DeleteTrigger: Id must be provided");await this.repository.delete(t)}}function jW(e){const t=new wW(e);return t.execute.bind(t)}class NW{constructor(t){this.repository=t}async execute(t){await this.repository.reorderList(t)}}function SW(e){const t=new NW(e);return t.execute.bind(t)}class EW{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectTrigger: Id must be provided");await this.repository.select(t)}}function CW(e){const t=new EW(e);return t.execute.bind(t)}class IW{constructor(t){this.repository=t}async execute(t){await this.repository.setFilter(t)}}function AW(e){return v.useMemo(()=>{const t=new IW(e);return t.execute.bind(t)},[e])}class MW{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTriggerIsEnabled: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTriggerIsEnabled: Trigger not found");await this.repository.save({id:n.id,isEnabled:!n.isEnabled})}}function DW(e){const t=new MW(e);return t.execute.bind(t)}class kW{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTriggerIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTriggerIsFavorite: Trigger not found");await this.repository.save({id:n.id,isFavorite:!n.isFavorite})}}function OW(e){const t=new kW(e);return t.execute.bind(t)}class TW{constructor(t){this.repository=t}async execute(t){if(!t.id)throw new Error("UpdateTriggerData: Id must be provided");const n=await this.repository.findById(t.id);if(!n)throw new Error("UpdateTriggerData: Trigger not found");const r={...n,...t};return await this.repository.save(r),{trigger:r}}}function FW(e){const t=new TW(e);return t.execute.bind(t)}function G8({trigger:e}){const t=OW(new Kr);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(K,{onClick:n=>{n.stopPropagation(),t(e.id),ae({title:`Gatilho "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:s.jsx(lr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),s.jsx(fe,{children:"Favoritar"})]})}const LW=function({trigger:e,className:t,isSelected:n}){const r=new Kr,a=CW(r),o=DW(r);return s.jsx(hr,{cardBgColor:Y(n?"bg-item-trigger/5":"bg-card"),className:Y(!e.isEnabled&&"opacity-40",n&&"rounded-sm ring-1 ring-item-trigger",t),onClick:()=>a(e.id),actions:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xt,{checked:e.isEnabled,onClick:i=>{i.stopPropagation(),o(e.id)}}),s.jsx(G8,{trigger:e})]}),subtitle:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{children:[s.jsx(me,{children:s.jsx(Nt,{icon:s.jsx(Aa,{size:16}),iconColor:"text-item-funnel",slashed:!e.funnelId})}),s.jsx(fe,{children:e.funnelId?"Vinculado a um funil":"Não vinculado a um funil"})]}),s.jsxs(ue,{children:[s.jsx(me,{children:s.jsx(Nt,{icon:s.jsx(od,{size:16}),iconColor:"text-secondary",slashed:!e.sendToGroups})}),s.jsx(fe,{children:e.sendToGroups?"Enviando para grupos":"Não enviando para grupos"})]}),s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(Nt,{icon:s.jsx(Mn,{size:16}),iconColor:"text-item-trigger",slashed:!e.sendToContacts})}),s.jsx(fe,{children:e.sendToContacts?"Enviando para contatos salvos":"Não enviando para contatos salvos"})]}),s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx(Nt,{icon:s.jsx(xd,{size:16}),iconColor:"text-accent-foreground",slashed:!e.isCaseSensitive})}),s.jsx(fe,{children:e.isCaseSensitive?"Não ignorando maiúsculas e minúsculas":"Ignorando maiúsculas e minúsculas"})]})]}),title:e.name})},PW=v.memo(LW,(e,t)=>e.trigger.id===t.trigger.id&&e.trigger.name===t.trigger.name&&e.trigger.isCaseSensitive===t.trigger.isCaseSensitive&&e.trigger.isEnabled===t.trigger.isEnabled&&e.trigger.funnelId===t.trigger.funnelId&&e.trigger.sendToContacts===t.trigger.sendToContacts&&e.trigger.sendToGroups===t.trigger.sendToGroups&&e.trigger.keywordRules.length===t.trigger.keywordRules.length&&e.trigger.millisecondsBeforeSend===t.trigger.millisecondsBeforeSend&&e.trigger.isFavorite===t.trigger.isFavorite&&e.isSelected===t.isSelected);function a1({onKeywordsChange:e,onTypeChange:t,value:n,ruleTypes:r,onRemoveCondition:a}){return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{children:s.jsxs(St,{value:n.type,onValueChange:o=>t(o),children:[s.jsxs("div",{className:"grid grid-cols-[65%_1fr] items-center gap-2",children:[s.jsx(ht,{className:"whitespace-pre-wrap break-all bg-background p-4",value:"equals",children:s.jsx(Zt,{placeholder:"Selecione um item"})}),s.jsx(K,{className:"h-auto p-1.5",variant:"actionDestructive",size:"sm",childrenVariant:"no-dark",onClick:a,children:"Remover condição"})]}),s.jsx(gt,{className:"z-[10006] max-h-[40dvh] w-[562px]",children:s.jsx("div",{className:"divide-y",children:Array.from(r).map(([o,i])=>s.jsx(Me,{value:o,className:"whitespace-pre-wrap break-all",children:i},o))})})]})}),s.jsx("p",{className:"-my-0.5 rounded-full bg-secondary text-center text-secondary-foreground",children:"Para mais de uma palavra-chave aperte ⏎ ENTER"}),s.jsx(fl,{values:n.keywords,changeValue:o=>e(o)})]})}const Kc=new Map([["equals","Se a mensagem for igual a (alguma):"],["contains","Se a mensagem contém (alguma):"],["startsWith","Se a mensagem começa com (alguma):"],["notContains","Se a mensagem não contém (nenhuma):"]]);function $W({handler:e}){const t=e.value,n=t.length,r=n>0,a=n-1;return r?t.map((o,i)=>s.jsxs("div",{children:[s.jsx(a1,{onRemoveCondition:()=>{const l=t.filter(c=>c.id!==o.id);return e.onChange(l)},value:o,ruleTypes:new Map(Array.from(Kc).filter(([l])=>!(n>1&&l==="equals"))),onKeywordsChange:l=>{const c=t.map(d=>d.id===o.id?{...d,keywords:l}:d);return e.onChange(c)},onTypeChange:l=>{const c=t.map(d=>d.id===o.id?{...d,type:l}:d);return e.onChange(c)}}),i<a&&s.jsx(cs,{label:"E",labelWeight:"bold",rootSpacing:"xs"})]},o.id)):s.jsx(a1,{ruleTypes:Kc,value:{id:er(),keywords:[],type:"contains"},onKeywordsChange:o=>{e.onChange([{id:er(),keywords:o,type:"contains"}])},onTypeChange:o=>{e.onChange([{id:er(),keywords:[],type:o}])}})}const _W="_|ZV:NO_FUNNEL_ID|_",RW=({caseSensitive:e,delayMinutes:t,delaySeconds:n,funnelId:r,itemId:a,keywordRules:o,mode:i,sendToContacts:l,sendToGroups:c,triggerName:d,triggerWebhook:u})=>{const[m,f]=v.useState(l??!0),[p,g]=v.useState(t??0),[x,y]=v.useState(n??0),[b,w]=v.useState(!!e),[j,N]=v.useState(r??""),[I,S]=v.useState(c??!1),[E,A]=v.useState(d??""),[O,M]=v.useState(o??[]),[T,$]=v.useState(0),[P,C]=v.useState(u??""),D=new Te,k=new Kr,L=new Se,F=bW(k),_=FW(k),H=xn(D),q=vn(D);v.useEffect(()=>{e!==b&&w(!!e),l!==m&&f(l??!0),t!==p&&g(t??0),n!==x&&y(n??0),r!==j&&N(r??""),c!==I&&S(c??!1),d!==E&&A(d??""),o!==O&&M(o??[]),u!==P&&C(u??"")},[e,t,n,r,o,l,c,d,u]);const z=()=>{i==="edit"?(f(l??!0),g(t??0),y(n??0),S(c??!1),w(!!e),A(d??""),M(o??[]),$(0),C(u??"")):(f(!0),g(0),y(0),S(!0),w(!0),A(""),M([]),$(0),C(""))},V=O.length===0||O.length===1&&O[0].keywords.length===0,R=async()=>{if(T===0){const ce="contains";let At="";const dn=(await L.findAll()).filter(J=>J.publishedStartNode.enabledTrigger&&J.publishedStartNode.trigger.keywordRules.find(Ie=>O.find(Oe=>{if(Oe.type==="notContains")return!1;let qe=!1;for(const Vt of Oe.keywords)if(qe=oc(Ie,b,Vt),qe)return At=Vt,!0;return qe}))&&J.published.nodes.length>0?J:null);dn.length>0?he({id:"trigger-conflict",title:"Atenção",className:"pointer-events-auto",duration:2e4,description:s.jsxs("div",{children:[s.jsxs("p",{children:["A condição de disparo '",s.jsxs("b",{children:[" ",Kc.get(ce)," "]}),"' que contém a palavra-chave: '",s.jsxs("b",{children:[" ",At," "]}),"' pode causar conflitos com alguns fluxo(s), isso pode gerar um duplo disparo, do seu gatilho e dos fluxos abaixo:"]}),s.jsx("ul",{className:"mt-2 max-h-14 list-disc divide-y-2 overflow-auto",children:dn.map(J=>s.jsx("li",{className:"ml-4",children:J.published.name},J.id))}),s.jsx(K,{className:"float-right mt-2 flex-row-reverse",variant:"link",icon:s.jsx(ar,{}),onClick:()=>{$(1),M(O.filter(J=>J.keywords.length>0)),We.dismiss("trigger-conflict")},children:"Estou ciente, continuar"})]})}):(We.dismiss("trigger-conflict"),$(1),M(O.filter(J=>J.keywords.length>0)))}else if(i==="create"){const{trigger:ce}=await F({funnelId:j,isCaseSensitive:b,isEnabled:!(j===""||V),isFavorite:!1,keywordRules:O.filter(At=>At.keywords.length>0),millisecondsBeforeSend:(p*60+x)*1e3,name:E.trim(),sendToContacts:m,sendToGroups:I,webhook:P});await H({optionKey:"triggers",optionToAdd:{id:ce.id,name:ce.name,size:await Ne(ce)}}),ae({title:`Gatilho "${E.trim()}" adicionado com sucesso.`}),z()}else if(i==="edit"&&a){const{trigger:ce}=await _({funnelId:j,id:a,isEnabled:!(j===""||V),isCaseSensitive:b,keywordRules:O.filter(At=>At.keywords.length>0),millisecondsBeforeSend:(p*60+x)*1e3,name:E.trim(),sendToContacts:m,sendToGroups:I,webhook:P});await q({optionKey:"triggers",optionToUpdate:{id:ce.id,name:ce.name,size:await Ne(ce)}}),ae({title:`Gatilho "${E.trim()}" atualizado com sucesso.`})}},B=()=>{T===1?$(0):z(),We.dismiss("trigger-conflict")},W=ce=>{ce&&$(0)},Z={checked:!!b,onCheckedChange:ce=>w(ce)},U={value:String(p),onValueChange:({valueAsNumber:ce})=>{Number.isNaN(ce)&&(ce=0),g(ce)}},ee={value:String(x),onValueChange:({valueAsNumber:ce})=>{Number.isNaN(ce)&&(ce=0),y(ce)}},X={value:j??"",onValueChange:ce=>N(ce===_W?"":ce)},te={value:O??[],onChange:ce=>M(ce)},G={value:E??"",onChange:ce=>A(ce.target.value)},ne={checked:!!m,onCheckedChange:ce=>f(ce)},ge={checked:!!I,onCheckedChange:ce=>S(ce)},Ve={value:P??"",onChange:ce=>C(ce.target.value)},He=T===1,ot=E.trim()==="";return{caseSensitiveHandler:Z,closeOnAction:He,closeOnCancel:!He,delayMinutesHandler:U,delaySecondsHandler:ee,funnelIdHandler:X,handleModalAction:R,handleModalCancel:B,handleOpenChange:W,isLastStep:He,keywordRulesHandler:te,nameHandler:G,notReady:He&&(m===void 0||I===void 0||b===void 0)||ot,sendToContactsHandler:ne,sendToGroupsHandler:ge,step:T,title:i==="create"?`Adicionar gatilho ${T+1}/2`:`Editar gatilho ${T+1}/2`,webhookHandler:Ve}};function VW({handler:e}){return s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"triggerName",className:"max-sm:hidden",children:"Nome"}),s.jsx(ze,{required:!0,className:"bg-background text-base",id:"triggerName",placeholder:"Título do gatilho",ref:$n,...e,errorMessage:!e.value.trim()&&"Campo obrigatório"})]})}function HW({keywordRulesHandler:e,nameHandler:t}){var a;const n=e.value.length===0||e.value.length===1&&e.value[0].keywords.length===0,r=e.value.length;return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(VW,{handler:t}),s.jsxs("div",{id:"trigger-conditions",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{icon:s.jsx(fi,{size:16}),iconColor:"text-item-trigger",slashed:n}),s.jsxs("p",{className:"text-sm font-bold",children:["Condições de disparo (",r,")"]})]}),s.jsx(_n,{className:"h-80 rounded-md bg-main-background px-3 py-2.5 ring-1 ring-primary-foreground",children:s.jsx($W,{handler:e})})]}),((a=e.value[0])==null?void 0:a.type)!=="equals"&&r<5&&s.jsx(K,{disabled:n,icon:s.jsx(_t,{}),onClick:()=>e.onChange([...e.value,{id:er(),keywords:[],type:"contains"}]),children:"Adicionar outra condição"})]})}function K8({handler:e,withSwitch:t=!0}){const n=t?ie:"div";return s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&s.jsx(xt,{id:"case-sensitive",...e}),s.jsx(n,{htmlFor:t?"case-sensitive":void 0,className:"cursor-pointer",children:s.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[s.jsx(Nt,{icon:s.jsx(xd,{size:16}),iconColor:"text-accent-foreground",slashed:!e.checked}),"Ignorar maiúsculas e minúsculas"]})})]})}function BW({minutesHandler:e,secondsHandler:t}){return s.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[s.jsxs(ie,{htmlFor:"delay-min",className:"flex w-48 flex-wrap gap-x-1.5 text-base",children:["Enviando após"," ",s.jsx("span",{className:"font-bold text-primary",children:`${e.value} min e ${t.value}s`})]}),s.jsx(dt,{...e,hint:"Minutos"}),s.jsx(dt,{...t,hint:"Segundos"})]})}const zW={audio:"text-item-audio bg-gradient-to-r from-item-audio-light from-10% zv-dark:from-item-audio/5 border-item-audio-light zv-dark:border-item-audio/50 to-item-audio/20",delay:"text-item-trigger bg-gradient-to-r from-item-trigger-light from-10% zv-dark:from-item-trigger/5 border-item-trigger-light zv-dark:border-item-trigger/50 to-item-trigger/20",document:"text-item-document bg-gradient-to-r from-item-document-light from-10% zv-dark:from-item-document/5 border-item-document-light zv-dark:border-item-document/50 to-item-document/20",media:"text-item-media bg-gradient-to-r from-item-media-light from-10% zv-dark:from-item-media/5 border-item-media-light zv-dark:border-item-media/50 to-item-media/20",message:"text-item-message bg-gradient-to-r from-item-message-light from-10% zv-dark:from-item-message/5 border-item-message-light zv-dark:border-item-message/50 to-item-message/20"};let Gs,Cr;function Y8({className:e,itemsSequence:t}){const n=rt.useGetAudioList(),r=Ke.useGetDocumentList(),a=Ye.useGetMediaList(),o=$e.useGetTextMessageList();return t.map(i=>{switch(i.type){case"audio":Cr=n==null?void 0:n.find(d=>d.id===i.itemId),Gs=s.jsx(Tn,{size:24,className:"text-item-audio"});break;case"document":Cr=r==null?void 0:r.find(d=>d.id===i.itemId),Gs=s.jsx(hn,{size:24,className:"text-item-document"});break;case"media":Cr=a==null?void 0:a.find(d=>d.id===i.itemId),Gs=s.jsx(oi,{size:24,className:"text-item-media"});break;case"message":Cr=o==null?void 0:o.find(d=>d.id===i.itemId),Gs=s.jsx(Fn,{size:24});break}const{minutes:l,seconds:c}=on.fromMillisecondsToMinutes(i.delayBeforeSend);return s.jsx("div",{className:Y("flex w-full justify-between rounded-md border border-solid bg-main-background px-3 py-1 transition-all",zW[i.type],e),children:s.jsxs("div",{className:"flex items-center gap-2",children:[W6({children:[Gs],className:"shrink-0 "}),s.jsxs("p",{className:"break-all text-sm font-bold",children:[Cr==null?void 0:Cr.name,s.jsxs("time",{dateTime:`delay de: ${i.delayBeforeSend} segs`,className:"flex gap-1",children:[s.jsx(id,{size:16,className:"min-h-4 min-w-4 rotate-90"}),s.jsx("span",{className:"text-xs font-light",children:i.delayBeforeSend===0?"Enviando imediatamente":`Enviando após ${l} min e ${c}s`})]})]})]})},i.id)})}function ZW({handler:e}){var a;const[t,n]=v.useState(!1),r=st.useGetFunnelList();return s.jsxs("div",{children:[s.jsxs(Ma,{open:t,onOpenChange:n,modal:!0,children:[s.jsx(Da,{asChild:!0,children:s.jsxs(K,{id:"zv-select-funnel",variant:"outline",role:"combobox","aria-expanded":t,className:Y("flex h-9 w-full items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid",!e.value&&"border-red-400",e.value&&"border-transparent"),children:[s.jsx("p",{className:"truncate",children:e.value?(a=r.find(o=>o.id===e.value))==null?void 0:a.name:"Selecione um item"}),s.jsx(Es,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(ka,{className:"z-[10006] w-[var(--radix-popper-anchor-width)] p-0",children:s.jsxs(Oa,{defaultValue:e.value,filter:(o,i)=>{var u;const l=(u=r.find(m=>m.id===o))==null?void 0:u.name;if(!l)return 0;const c=Pt(l),d=Pt(i);return c.includes(d)?1:0},children:[s.jsx(Ta,{placeholder:"Pesquisar funil",className:"h-9"}),s.jsxs(Fa,{children:[s.jsx(La,{className:"py-2",children:"Nenhum funil encontrado."}),s.jsx(Pa,{children:s.jsx("div",{className:"divide-y",children:r.map(o=>s.jsxs($a,{value:o.id,onSelect:i=>{e.onValueChange(i),n(!1)},children:[o.name,s.jsx(Cs,{className:Y("ml-auto h-4 w-4",e.value===o.id?"opacity-100":"opacity-0")}),s.jsxs(Jo,{closeDelay:200,openDelay:200,children:[s.jsx(Qo,{className:"absolute right-8",children:s.jsx(nd,{size:20})}),s.jsx(ei,{className:"flex w-full flex-col gap-2 p-2",children:s.jsx(Y8,{className:"w-auto py-0",itemsSequence:o.itemsSequence})})]})]},o.id))})})]})]})})]}),s.jsx("span",{className:Y("-my-2.5 ml-2 text-start text-sm font-light",e.value?"text-transparent":"text-red-400"),children:"Campo obrigatório"})]})}function X8({handler:e,withSwitch:t=!0}){const n=t?ie:"div";return s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&s.jsx(xt,{id:"send-to-contacts",...e}),s.jsx(n,{htmlFor:t?"send-to-contacts":void 0,className:"cursor-pointer",children:s.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[s.jsx(Nt,{icon:s.jsx(Mn,{size:16}),iconColor:"text-item-trigger",slashed:!e.checked}),s.jsxs("div",{children:[s.jsx("p",{children:"Enviar também para contatos salvos"}),t&&s.jsxs(ue,{delayDuration:1e3,children:[s.jsx(me,{asChild:!0,children:s.jsxs("div",{className:"mt-1 flex  max-w-[300px] items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(pr,{size:20}),"A ativação dessa opção não evitará o disparo para contatos não salvos"]})}),s.jsxs(fe,{side:"top",className:"max-w-[400px]",children:[s.jsx("p",{children:"Ao ativar esta opção, a ZapVoice poderá disparar mensagens para qualquer contato, seja ele salvo ou não."}),s.jsx("p",{className:"mt-2",children:"Se quiser que o disparo ocorra apenas para contatos não salvos, desmarque esta opção."})]})]})]})]})})]})}function J8({handler:e,withSwitch:t=!0}){const n=t?ie:"div";return s.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&s.jsx(xt,{id:"send-to-groups",...e}),s.jsx(n,{htmlFor:t?"send-to-groups":void 0,className:"cursor-pointer",children:s.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[s.jsx(Nt,{icon:s.jsx(od,{size:16}),iconColor:"text-secondary",slashed:!e.checked}),"Enviar para grupos"]})})]})}function qW({caseSensitiveHandler:e,funnelIdHandler:t,minutesHandler:n,secondsHandler:r,sendToContactsHandler:a,sendToGroupsHandler:o,webhookHandler:i}){const[l]=ye("trigger-webhooks",de);return s.jsxs(s.Fragment,{children:[s.jsx(ZW,{handler:t}),s.jsx(BW,{minutesHandler:n,secondsHandler:r}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ie,{className:"max-sm:hidden",children:"Opções"}),s.jsx(J8,{handler:o}),s.jsx(X8,{handler:a}),s.jsx(K8,{handler:e})]}),l&&s.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[s.jsx(ie,{htmlFor:"trigger-webhook",className:"max-sm:hidden",children:"Webhook"}),s.jsx(ze,{beforeIcon:s.jsx(pi,{className:"h-4 w-4",size:24}),...i,className:"bg-background text-base",id:"trigger-webhook"})]})]})}function Q8({caseSensitive:e,delayMinutes:t=0,delaySeconds:n=0,funnelId:r,itemId:a,keywordRules:o,mode:i="create",sendToContacts:l,sendToGroups:c,trigger:d,triggerName:u="",triggerWebhook:m=""}){const{currentDriver:f}=eo(),p=f==null?void 0:f.isActive(),{caseSensitiveHandler:g,closeOnAction:x,closeOnCancel:y,delayMinutesHandler:b,delaySecondsHandler:w,funnelIdHandler:j,handleModalAction:N,handleModalCancel:I,handleOpenChange:S,isLastStep:E,keywordRulesHandler:A,nameHandler:O,notReady:M,sendToContactsHandler:T,sendToGroupsHandler:$,step:P,title:C,webhookHandler:D}=RW({caseSensitive:e,delayMinutes:t,delaySeconds:n,funnelId:r,itemId:a,keywordRules:o,mode:i,sendToContacts:l,sendToGroups:c,triggerName:u,triggerWebhook:m,isActiveDriver:p}),k=[s.jsx(HW,{keywordRulesHandler:A,nameHandler:O},"step-1"),s.jsx(qW,{caseSensitiveHandler:g,funnelIdHandler:j,minutesHandler:b,secondsHandler:w,sendToContactsHandler:T,sendToGroupsHandler:$,webhookHandler:D},"step-2")];return s.jsx(ve,{closeOnAction:x,closeOnCancel:y,onAction:N,action:E?"Salvar":"Próximo",actionProps:{disabled:p?!1:M,icon:E?s.jsx(Ct,{}):s.jsx(ar,{})},description:s.jsx("div",{className:"flex min-h-80 !gap-4",children:k[P]}),onOpenChange:S,title:C,trigger:d,cancel:E?"Anterior":"Cancelar",onCancel:I})}function Ou({size:e,id:t}){return s.jsx(Q8,{keywordRules:[],mode:"create",trigger:s.jsx(K,{size:e,icon:s.jsx(_t,{weight:"bold"}),id:t,children:"Adicionar"})})}function WW(){const e=new Kr,t=AW(e),n=SW(e),{authError:r,isPremium:a}=ct.useGetAuthData(),{filterTerm:o,filteredTriggerList:i,selectedTriggerId:l}=sn.useDashboardTriggerList(),{listRef:c}=Gr(i.length),d=!a||r;return s.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[s.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[s.jsx(zr,{className:"flex-1",onSearch:t,storeSearchTerm:o}),s.jsx(Ou,{id:"zv-add-trigger-button"})]}),i.length>0?s.jsx(_n,{className:Y(d?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:s.jsx(yn,{className:"pb-0",ref:c,onDragEnd:u=>{u.destination&&n({destinationIndex:u.destination.index,sourceIndex:u.source.index})},droppableId:"trigger-list",bgColor:"bg-item-trigger-light/70",children:i.map((u,m)=>s.jsx(Rn,{className:"p-0.5",color:"ring-item-trigger",draggableId:u.id,index:m,customHandle:!0,customHandleColor:"text-item-trigger",children:s.jsx(PW,{trigger:u,className:"w-full",isSelected:l===u.id},u.id)},u.id))})}):s.jsx(cr,{description:s.jsxs("p",{className:"text-center text-2xl",children:["Nenhum gatilho encontrado",s.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-trigger/70"})]})}function UW(){const[e]=ye("dashboard-trigger-help-video",de);return s.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[s.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{children:[s.jsx("p",{children:"Ainda não há nenhum gatilho cadastrado aqui."}),s.jsx("p",{children:"Que tal adicionar o seu primeiro gatilho?"})]}),s.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e}),s.jsx(Ou,{id:"zv-add-trigger-button"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(dr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:s.jsxs(ur,{value:"important",children:[s.jsx(mr,{className:"px-4 py-3 ",children:s.jsxs("div",{className:"flex items-center gap-4 ",children:[s.jsx(pr,{size:24,weight:"thin"}),s.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um gatilho?"})]})}),s.jsx(fr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:s.jsxs("section",{className:"rounded-md p-4",children:[s.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),s.jsx("p",{className:"text-start text-sm font-light",children:'Gatilhos são palavras-chave que você pode criar para que o funil seja enviado automaticamente para o contato. Por exemplo: Caso você coloque "Oi" como palavra-chave de um funil, todo contato que te enviar "Oi" receberá esse funil de forma automática, sem que seja necessário clicar para enviar.'}),s.jsx("p",{className:" mt-2 text-start font-light underline",children:"Obs: Para que os gatilhos funcionem é necessário que o web whatsapp esteja aberto na tela do aparelho."})]})})]})})})]})}function GW({trigger:e}){const t=jW(new Kr),n=Ur(new Te);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(ve,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"triggers",optionIdToRemove:e.id})}).then(()=>{ae({title:"Sucesso",description:`Gatilho "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:s.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o gatilho "${e==null?void 0:e.name}":`,s.jsx("p",{children:" "}),r.message.split(`
`).map((a,o)=>s.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:a},o))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:s.jsx("div",{children:s.jsxs("div",{className:"mb-3 text-center",children:[s.jsxs("span",{children:["Tem certeza que deseja excluir o gatilho"," ",s.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),s.jsx("br",{}),s.jsx("span",{children:"Essa ação é irreversível."})]})}),title:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(Ge,{size:32}),s.jsx("p",{children:"Excluir gatilho"})]}),trigger:s.jsx(K,{icon:s.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),s.jsx(fe,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}const KW=function({trigger:e}){const{minutes:t,seconds:n}=on.fromMillisecondsToMinutes(e.millisecondsBeforeSend);return s.jsxs(ue,{children:[s.jsx(me,{asChild:!0,children:s.jsx("div",{children:s.jsx(Q8,{keywordRules:e.keywordRules,caseSensitive:e.isCaseSensitive,delayMinutes:t,delaySeconds:n,funnelId:e.funnelId,sendToContacts:e.sendToContacts,sendToGroups:e.sendToGroups,mode:"edit",itemId:e.id,triggerName:e.name,triggerWebhook:e.webhook,trigger:s.jsx(K,{onClick:r=>r.stopPropagation(),icon:s.jsx(Kt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),s.jsx(fe,{children:"Editar"})]})},YW=v.memo(KW,(e,t)=>e.trigger.id===t.trigger.id);function XW({funnel:e}){const{minutes:t,seconds:n}=on.fromMillisecondsToMinutes((e==null?void 0:e.itemsSequence.map(l=>l.delayBeforeSend).reduce((l,c)=>l+c,0))??0),{audioCount:r,documentCount:a,mediaCount:o,textMessageCount:i}=M8((e==null?void 0:e.itemsSequence)??[]);return s.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{icon:s.jsx(Aa,{size:16}),iconColor:"text-item-funnel",slashed:!e}),s.jsx("p",{className:"text-sm font-bold",children:"Enviando o seguinte funil"})]}),e?s.jsx("div",{className:"flex w-full items-center rounded-md bg-background px-6 py-3 shadow-lg transition-all hover:no-underline",children:s.jsx(dr,{type:"single",collapsible:!0,asChild:!0,className:"w-full border-none",children:s.jsxs(ur,{value:e.id,children:[s.jsx(mr,{className:"py-0 pr-4 hover:no-underline",triggerIconClasses:"inline-flex items-center w-10 h-10 p-2 justify-center rounded-full bg-action text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:s.jsx(hr,{cardSpacing:"p-1",cardBgColor:"bg-background",className:"flex-1",noShadow:!0,subtitle:s.jsxs("span",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(id,{size:16})," ",s.jsxs("span",{children:[t," min e ",n,"s"]})," ",s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Tn,{size:16})," ",r]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(oi,{size:16})," ",o]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Fn,{size:16})," ",i]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hn,{size:16})," ",a]})]})]}),title:e.name})}),s.jsx(fr,{className:"flex flex-col gap-2 pb-0 pt-2",children:s.jsx(Y8,{itemsSequence:e.itemsSequence})})]})})}):s.jsx("div",{className:"flex items-center gap-2 text-base",children:s.jsx("span",{children:"Nenhum funil associado"})})]})}function JW({delay:e,isCaseSensitive:t,sendToContacts:n,sendToGroups:r}){const{minutes:a,seconds:o}=on.fromMillisecondsToMinutes(e??0);return s.jsxs("div",{className:"flex gap-12",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-bold",children:"Atraso antes de enviar"}),`${a} min e ${o} seg`]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-bold",children:"Demais regras e excessões"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(J8,{withSwitch:!1,handler:{checked:r,onCheckedChange:()=>null}}),s.jsx(X8,{withSwitch:!1,handler:{checked:n,onCheckedChange:()=>null}}),s.jsx(K8,{withSwitch:!1,handler:{checked:t,onCheckedChange:()=>null}})]})]})]})}function QW({rules:e}){return s.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{icon:s.jsx(fi,{size:16}),iconColor:"text-item-trigger",slashed:e.length===0}),s.jsx("p",{className:"text-sm font-bold",children:"Condições de disparo"})]}),e.length>0?s.jsx("ul",{className:"flex flex-col gap-4 rounded-md bg-background p-4 shadow-lg transition-all",children:e.map((t,n)=>{let r=n===0?"Se a mensagem ":"E a mensagem ";switch(t.type){case"contains":r+="contém";break;case"equals":r+="for igual a";break;case"startsWith":r+="começa com";break;case"notContains":r+="não contém";break}return s.jsxs("li",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-bold",children:r}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((a,o)=>s.jsxs("div",{className:"flex items-center gap-2 font-bold text-primary",children:[s.jsx(_e,{className:"cursor-pointer",title:"Clique para copiar",onClick:i=>{navigator.clipboard.writeText(i.currentTarget.innerText),ae({id:"copy-keyword",title:"Palavra copiada para a área de transferência"})},children:a}),o<t.keywords.length-1&&s.jsx("span",{children:"OU"})]},a))})]},t.id)})}):s.jsx("div",{className:"flex items-center gap-2 text-base",children:s.jsx("span",{children:"Nenhuma regra cadastrada"})})]})}function eU(){const[e]=ye("dashboard-trigger-help-video",de);return s.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[s.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),s.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[s.jsxs("p",{children:[s.jsx("span",{children:"Selecione um gatilho para visualizar ou clique em "}),s.jsx(Ou,{size:"sm"}),s.jsx("span",{children:" para criar um novo gatilho."})]}),(e==null?void 0:e.enabled)&&s.jsx("p",{children:"Dúvidas?"})]}),s.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&s.jsx(It,{tutorial:e})})]})}function tU(){const{selectedTriggerId:e}=sn.useGetSelectedTrigger(),[t,n]=v.useState(null),[r,a]=v.useState(null),[o]=ye("trigger-webhooks",de),{dummyTrigger:i}=sn.useGetSelectedTrigger();return v.useEffect(()=>{e&&(async()=>{const c=await sn.findById(e),d=await st.findById((c==null?void 0:c.funnelId)??"");a(c),n(d)})()},[e,i]),s.jsx("div",{className:Be("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?s.jsx(qr,{actions:r&&s.jsxs(s.Fragment,{children:[s.jsx(GW,{trigger:r}),s.jsx(YW,{trigger:r}),s.jsx(G8,{trigger:r})]}),body:r&&s.jsxs("div",{children:[s.jsx(QW,{rules:r.keywordRules}),s.jsx(XW,{funnel:t}),s.jsx(JW,{delay:r.millisecondsBeforeSend,isCaseSensitive:r.isCaseSensitive,sendToContacts:r.sendToContacts,sendToGroups:r.sendToGroups}),o&&s.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nt,{icon:s.jsx(pi,{size:16}),iconColor:"text-item-media",slashed:!r.webhook}),s.jsx("p",{className:"text-sm font-bold",children:"Webhook"})]}),s.jsx("div",{className:"flex min-h-14 flex-col justify-center gap-4 rounded-md bg-background p-4 shadow-lg transition-all",children:r.webhook?s.jsx(_e,{children:r.webhook}):s.jsx("div",{children:"Sem webhook cadastrado"})})]})]}),title:r==null?void 0:r.name}):s.jsx(eU,{})})}function nU(){const e=sn.useGetHasTriggers();return s.jsxs(s.Fragment,{children:[s.jsx(Vn,{}),e?s.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:s.jsxs("div",{className:"relative flex h-full w-full max-w-[1050px] gap-5 max-md:flex-wrap",children:[s.jsx(WW,{}),s.jsx(tU,{})]})}):s.jsx(UW,{})]})}function rU(){return s.jsxs("div",{className:"flex flex-col justify-center gap-6 text-center",children:[s.jsx("div",{className:"text-red-500",children:"NOT FOUND"}),s.jsx(K,{onClick:()=>ut.setRoute("/home"),children:"Go to home"})]})}const yl={"/audios":s.jsx(S9,{}),"/backups":s.jsx(rM,{}),"/crm":s.jsx(hM,{}),"/documents":s.jsx(HM,{}),"/flows":s.jsx(FZ,{}),"/funnels":s.jsx(KZ,{}),"/home":s.jsx(Cq,{}),"/labels":s.jsx(Jq,{}),"/login":s.jsx(Qq,{}),"/medias":s.jsx(cW,{}),"/messages":s.jsx(yW,{}),"/not-found":s.jsx(rU,{}),"/triggers":s.jsx(nU,{})},sU={"/audios":s.jsx(Tn,{size:32,className:"min-w-max text-item-audio"}),"/backups":s.jsx(K1,{size:32,className:"min-w-max text-accent-foreground"}),"/crm":s.jsx(th,{size:32,className:"min-w-max text-item-funnel/80"}),"/documents":s.jsx(hn,{size:32,className:"min-w-max text-item-document"}),"/flows":s.jsx(ad,{size:32,className:"min-w-max text-item-trigger "}),"/funnels":s.jsx(Aa,{size:32,className:"min-w-max text-item-funnel"}),"/home":s.jsx(eh,{size:32,className:"min-w-max text-accent-foreground"}),"/labels":s.jsx(gd,{size:32,className:"min-w-max text-primary"}),"/login":null,"/medias":s.jsx(aa,{size:32,className:"min-w-max text-item-media"}),"/messages":s.jsx(Fn,{size:32,className:"min-w-max text-item-message"}),"/not-found":null,"/triggers":s.jsx(ld,{size:32,className:"min-w-max text-item-trigger"})},aU=ir("m-2 flex max-w-72 flex-col gap-4 rounded-md shadow-lg bg-background/50 text-card-foreground hover:scale-105 transition-all border border-solid border-transparent",{variants:{variant:{default:"hover:border-gray-300 hover:shadow-2xl hover:shadow-gray-300",basic:"hover:border-item-trigger hover:shadow-2xl hover:shadow-item-trigger/50",premium:"hover:border-item-message hover:shadow-2xl hover:shadow-item-message/50",enterprise:"hover:border-primary hover:shadow-2xl hover:shadow-primary/50"}},defaultVariants:{variant:"default"}}),oU=ir("rounded-t-sm border-b p-2",{variants:{variant:{default:"bg-gray-800 text-background",basic:"!bg-item-trigger/50",premium:"!bg-item-message/50",enterprise:"!bg-primary/50"}},defaultVariants:{variant:"default"}});function iU({data:{price:e,title:t,discountPercent:n,maxInstallments:r,redirectUrl:a,peremissions:o},containerClassName:i,headerClassName:l,variant:c="default"}){function d(){window.open(a,"_blank")}const u=e.to.value+e.to.cents/100,m=r&&`ou em até ${r}x de ${(u/r).toFixed(2)}`;return s.jsxs("div",{className:aU({variant:c,className:i}),children:[s.jsxs("header",{className:oU({variant:c,className:l}),children:[s.jsx("h1",{className:"text-xl font-bold uppercase",children:t}),n&&s.jsxs("p",{className:"w-fit rounded-md px-1 py-0.5 text-xs font-semibold uppercase tracking-tighter",children:[n,"% de desconto"]})]}),s.jsxs("main",{className:"flex flex-col gap-6 px-3",children:[s.jsxs("div",{className:"text-xs leading-4",children:[s.jsxs("p",{children:["De ",s.jsxs("span",{className:"line-through",children:["R$ ",e.from]})," por"," "]}),s.jsxs("h2",{className:"text-3xl font-bold tracking-tighter",children:["R$ ",e.to.value,s.jsxs("span",{className:"text-xs",children:[", ",e.to.cents," / mês"]})]}),m&&s.jsx("p",{className:"text-sm font-semibold",children:m}),s.jsx("span",{className:"opacity-85",children:"economize R$ 78,50"})]}),s.jsx(K,{onClick:d,type:"button",variant:"default",size:"lg",className:"w-full rounded-sm text-xs font-bold uppercase",children:"Assinar"})]}),s.jsx("footer",{className:"px-3",children:s.jsx("ul",{className:"divide-y divide-card-foreground/20",children:o==null?void 0:o.map((f,p)=>s.jsxs("li",{className:"flex items-center gap-2 border-t border-solid border-t-card-foreground/20 p-2 text-sm first:border-t-transparent",children:[s.jsx(G1,{weight:"bold",size:16,className:"min-w-4"})," ",f]},p))})})]})}const lU={type:"basic",price:{to:{value:220,cents:90},from:299},title:"Plano básico",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",s.jsxs("p",{children:["Aprimoramentos básicos ",s.jsx("span",{className:"text-sm",children:"(não rolar a tela)"})]},"basic-apr"),s.jsx("p",{children:"Fluxos (15 envios por dia)"},"basic-flow"),"Funis","Gatilhos"]},cU={type:"premium",price:{to:{value:220,cents:90},from:299},title:"Plano Premium",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",s.jsxs("p",{children:["Aprimoramentos avançados"," ",s.jsx("span",{className:"text-sm",children:"(não rolar a tela, contador de chats)"})]},"basic-apr"),s.jsx("p",{children:"Fluxos ilimitados"},"basic-flow"),"Funis","Gatilhos","Agendamento de mensagens","Disparo em massa","Salvar contatos (Zapsaver)","Etiquetas"]},dU={type:"enterprise",price:{to:{value:220,cents:90},from:299},title:"Plano Empresarial",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",s.jsxs("p",{children:["Aprimoramentos avançados"," ",s.jsx("span",{className:"text-sm",children:"(não rolar a tela, contador de chats)"})]},"basic-apr"),s.jsx("p",{children:"Fluxos ilimitado"},"basic-flow"),"Funis","Gatilhos","Agendamento de mensagens","Disparo em massa","Salvar contatos (Zapsaver)","Etiquetas","Suporte preferencial","Onboarding","Treinamento"]},uU=[lU,cU,dU];function mU(){const{handleCloseModal:e,openModalState:t}=px();return s.jsx(s.Fragment,{children:s.jsx(ds,{className:"max-h-[90vh] max-w-5xl",open:t,action:null,description:s.jsxs("div",{children:[s.jsxs("header",{children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Seu plano não pode utilizar esta funcionalidade"}),s.jsx("p",{children:"Para poder utilizar esta funcionalidade, é necessário que você compre um outro plano com a função desejada."})]}),s.jsx("main",{className:"flex flex-wrap justify-center gap-1",children:uU.map(n=>s.jsx(iU,{data:n,variant:n.type},n.title+n.type))})]}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{size:32,className:"text-status-caution"}),"Aviso"]}),cancel:"Fechar",onCancel:()=>{e()}})})}function fU(){const e=cx(new Wi);return s.jsx(ve,{action:"Sim, tenho certeza",actionProps:{icon:s.jsx(Ge,{size:24}),childrenVariant:"no-dark",onClick:e},actionVariant:"actionDestructive",cancel:"Cancelar",description:s.jsx("div",{children:"Sua chave será removida, mas seus itens e configurações permanecerão NESSE COMPUTADOR. Caso precise transferir, faça um backup antes."}),title:"Tem certeza que deseja deslogar?",trigger:s.jsx("li",{className:"flex cursor-pointer items-center",children:s.jsx(K,{variant:"ghost",size:"action",icon:s.jsx(hd,{size:26})})})})}function pU(e,t,n,r,a){const o=(e-t)/(n-t)*(a-r)+r;return Math.floor(o)}function o1(e){return pU(e,65,90,0,360)}function i1(e,t){return Math.max(0,Math.min(100,e+t))}function l1(e,t){return Math.floor((360+e+t)%360)}function hU(e,t){const n=/hsla?\(\s*(\d+),\s*(\d+)%,\s*(\d+)%/i,r=e.match(n),a=t.match(n);if(!r||!a)throw new Error("Invalid color format");const o=parseFloat(r[3]),i=parseFloat(a[3]);return Math.abs(o-i)>=70}function gU(e,t){let n=o1(Math.min(e.toUpperCase().charCodeAt(0),t.toUpperCase().charCodeAt(0))),r=o1(Math.max(e.toUpperCase().charCodeAt(0),t.toUpperCase().charCodeAt(0))),a=50,o=50,i=`hsl(${n},  100%,  ${a}%)`,l=`hsl(${r},  100%,  ${o}%)`;for(;!hU(i,l);)n=l1(n,6),r=l1(r,-6),a=i1(a,10),o=i1(o,-10),i=`hsl(${n},  100%, ${a}%)`,l=`hsl(${r},  100%, ${o}%)`;return[i,l]}function xU(){const e=ct.useGetUserName(),t=ct.useGetPhoneNumber(),n=ct.useGetUserProfilePic(),r=Le.useGetOption("theme")==="dark",a=(e==null?void 0:e.split(" ").splice(0,2).map(l=>l[0]).join(""))??"ZV";let[o,i]=["hsl(243,  38%, 93%)","hsl(243,  35%, 56%)"];try{const[l,c]=gU(a[0]??"Z",a[1]??"V");o=l,i=c}catch(l){console.warn(l)}return s.jsxs("li",{className:"flex items-center justify-end gap-4 overflow-hidden",children:[s.jsxs("section",{className:"flex w-full flex-col text-sm md:ms-1",children:[s.jsx("p",{className:"overflow-hidden text-end max-sm:truncate",children:e??"Não logado"}),s.jsx("p",{className:"m-0 text-end text-muted-foreground",children:e?t:null})]}),s.jsxs(p1,{className:Y(e&&!n&&"border-2 border-solid"),style:{borderColor:r?o:i},children:[s.jsx(h1,{src:(e&&n)??"",className:"w-11"}),s.jsx(g1,{className:"font-bold",style:{backgroundColor:r?i:o,color:r?o:i},children:e?a:s.jsx(ih,{size:32})})]})]})}function vU({closeParentModal:e}){const t=ii(new _a,de,T1),n=ut.setRoute,[r,a]=v.useState(!1),{setIsBusy:o}=Is(),i=()=>a(!1);return s.jsxs(s.Fragment,{children:[s.jsx(ds,{onCancel:i,onSecondaryAction:()=>{n("/backups"),i(),e()},secondaryAction:"Fazer backup",secondaryActionProps:{childrenVariant:"no-dark"},open:r,className:"md:w-fit",action:"Limpar ZapVoice",actionProps:{variant:"actionDestructive",childrenVariant:"no-dark"},description:s.jsx("div",{children:s.jsxs("div",{children:["Tem certeza que deseja"," ",s.jsx("span",{className:"text-item-document",children:"limpar"})," o ZapVoice?",s.jsx("br",{}),"Esta ação não poderá ser desfeita."," ",s.jsx("span",{className:"text-item-document",children:"Todos os seus itens atuais serão removidos."})," ",s.jsx("br",{}),s.jsx("br",{}),"Em caso de dúvida, por favor faça um backup antes de prosseguir."]})}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de limpeza do ZapVoice"]}),onAction:async()=>{o(!0);const l=We.loading("Limpando ZapVoice... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});i(),e();try{t.trackEvent("misc:clear_all_data"),await L1({awaitAfter:5e3}),n("/home"),ae({id:l,title:"Limpeza realizada com sucesso",duration:4e3})}catch(c){let d="";c instanceof Error?d=c.message:d=JSON.stringify(c),t.trackException("exception:clear_all_data",{exc_message:d,fatal:!1}),le({id:l,title:"Falha ao realizar a limpeza",description:d,duration:4e3})}finally{o(!1)}},cancel:"Cancelar"}),s.jsx(K,{icon:s.jsx(z1,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",className:"w-full rounded-md",size:"lg",title:"Limpar o ZapVoice",onClick:()=>a(!0),children:"Limpar ZapVoice"})]})}function Fs({checked:e,label:t,onSelect:n}){return s.jsxs(en,{className:"cursor-pointer space-x-2",onSelect:n,children:[s.jsx(xt,{checked:e}),s.jsx(ie,{className:"cursor-pointer",children:t})]})}function yU(){const e=nb(new Zr),t=Le.useGetOption("askToSendFlows"),n=async r=>{r.preventDefault(),e(!t)};return s.jsx(Fs,{onSelect:n,checked:t,label:"Perguntar ao enviar fluxos"})}function bU(){const e=rb(new Zr),t=Le.useGetOption("askToSendFunnels"),n=async r=>{r.preventDefault(),e(!t)};return s.jsx(Fs,{onSelect:n,checked:t,label:"Perguntar ao enviar funis"})}function wU(){const e=sb(new Zr),t=Le.useGetOption("askToSendSingleItem"),n=async r=>{r.preventDefault(),e(!t)};return s.jsx(Fs,{onSelect:n,checked:t,label:"Perguntar ao enviar itens únicos"})}function jU(){const e=F1(new Zr),t=Le.useGetOption("theme")==="dark",n=async r=>{r.preventDefault(),e(!t)};return s.jsx(Fs,{onSelect:n,checked:t,label:"Modo escuro"})}function NU(){const e=Le.useGetOption("hideItemsBar"),t=ab(new Zr),n=async r=>{r.preventDefault(),t(!e)};return s.jsx(Fs,{onSelect:n,checked:e,label:"Ocultar barra de itens"})}function SU(){const e=Le.useGetOption("showOnlyFavoritesOnItemsBar"),t=ob(new Zr),n=async r=>{r.preventDefault(),t(!e)};return s.jsx(Fs,{onSelect:n,checked:e,label:"Mostrar apenas favoritos na barra de itens"})}function EU(){const e=cx(new Wi),[t,n]=v.useState(!1);return s.jsx("li",{className:"flex cursor-pointer items-center",children:s.jsxs(Jc,{open:t,onOpenChange:n,modal:!1,children:[s.jsx(Qc,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"action",icon:s.jsx(mt,{size:26})})}),s.jsxs(m1,{className:"border-transparent shadow-primary/10 max-md:max-w-[90vw]",collisionPadding:10,children:[s.jsx("a",{href:`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}`,target:"_blank",rel:"noopener noreferrer",children:s.jsxs(en,{className:"cursor-pointer space-x-2 pb-0",children:[s.jsx("span",{children:"Abrir gerenciador de chaves"}),s.jsx(U6,{size:18,className:"mb-1"})]})}),s.jsx("a",{href:`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/chaves`,target:"_blank",rel:"noopener noreferrer",children:s.jsx(en,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Gerencie suas chaves"})}),s.jsx("a",{href:`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/backup-fixer`,target:"_blank",rel:"noopener noreferrer",children:s.jsx(en,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Corrija backups"})}),s.jsx("a",{href:`${kr("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/converter`,target:"_blank",rel:"noopener noreferrer",children:s.jsx(en,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Converta tipo de áudios"})}),s.jsx(Ir,{}),s.jsx(ts,{className:"italic text-primary-200",children:"Opções"}),s.jsxs(ed,{children:[s.jsx(Ir,{}),s.jsx(ts,{className:"text-xs font-normal",children:"Envio dos ítens"}),s.jsx(wU,{}),s.jsx(bU,{}),s.jsx(yU,{}),s.jsx(Ir,{}),s.jsx(ts,{className:"text-xs font-normal",children:"Barra de acesso rápido aos ítens"}),s.jsx(NU,{}),s.jsx(SU,{}),s.jsx(Ir,{}),s.jsx(ts,{className:"text-xs font-normal",children:"Aparência"}),s.jsx(jU,{}),s.jsx(Ir,{className:"md:hidden"}),s.jsx(en,{className:"p-0 md:hidden",children:s.jsx(ve,{action:"Sim, tenho certeza",actionProps:{childrenVariant:"no-dark",icon:s.jsx(Ge,{size:24}),onClick:e},actionVariant:"actionDestructive",cancel:"Cancelar",description:s.jsx("div",{children:"Sua chave será removida, mas seus itens e configurações permanecerão NESSE COMPUTADOR. Caso precise transferir, faça um backup antes."}),title:"Tem certeza que deseja deslogar?",trigger:s.jsxs("div",{className:"flex w-full cursor-pointer items-center justify-center space-x-2 bg-destructive/5 p-2 text-destructive",children:[s.jsx(hd,{size:18}),s.jsx("span",{children:"Sair do dashboard"})]})})}),s.jsx(Ir,{}),s.jsx(en,{onClick:r=>r.preventDefault(),children:s.jsx(dr,{type:"single",collapsible:!0,className:"w-full",children:s.jsxs(ur,{value:"advanced-options",className:"border-none",children:[s.jsx(mr,{className:"py-2 hover:no-underline",children:"Avançado"}),s.jsx(fr,{className:"p-0",children:s.jsx(vU,{closeParentModal:()=>n(!1)})})]})})})]})]})]})})}const nc={expiredKey:"Chave expirada",inactiveKey:"Chave inativa",managerNotFound:"Assinatura não encontrada",restrictedKey:"Chave restrita",unathorizedNumber:"Chave não autorizada para este número de WhatsApp",unknown:"Chave com erro desconhecido",userNotFound:"Usuário não encontrado"},CU=({authError:e,isBasicPlan:t,isFreePlan:n})=>e?n?`Plano gratuito - ${nc[e]}`:t?`Plano Básico - ${nc[e]}`:`Plano PRO - ${nc[e]}`:n?"Plano gratuito":t?"Plano Básico":"Plano PRO",IU=({authError:e,isBasicPlan:t,isFreePlan:n})=>e?"duotoneError":n?"duotoneWarning":t?"duotoneNeutral":"duotoneSuccess";function AU(){const{authError:e,isBasicPlan:t,plan_id:n}=ct.useGetAuthData(),r=t===!1&&n==="ZV_FREE";return s.jsxs(_e,{className:"h-min select-none gap-1 self-center rounded-full text-sm",variant:IU({authError:e,isBasicPlan:t,isFreePlan:r}),children:[s.jsx(pr,{className:"-ml-0.5 shrink-0",size:20}),CU({authError:e,isBasicPlan:t,isFreePlan:r})]})}function MU({toggleMobileSidebar:e}){const t=ut.useGetCurrentRoute();return s.jsxs("div",{className:"flex justify-between border-b-[1px] border-border p-3 md:px-8 md:py-7",children:[s.jsx(K,{className:"xl:hidden",variant:"ghost",size:"action",icon:s.jsx(ib,{size:26}),onClick:e}),s.jsx("h1",{className:"text-lg text-foreground max-md:hidden md:text-4xl",children:t.name}),s.jsxs("ul",{className:"flex justify-end gap-1 overflow-hidden md:gap-5",children:[s.jsx(AU,{}),s.jsx(xU,{}),s.jsx(EU,{}),s.jsx("div",{className:"max-md:hidden",children:s.jsx(fU,{})})]})]})}class DU{constructor(){pe(this,"routerStore",ut)}getCurrentRoute(){return this.routerStore.useGetCurrentRoute()}setRoute(...t){return this.routerStore.setRoute(...t)}}function kU({sealClasses:e,className:t}){return s.jsxs("div",{className:Y("zv-new-badge pointer-events-none absolute -right-3.5 z-10 flex items-center gap-1 rounded px-1 text-xs font-bold drop-shadow-messageLight zv-dark:drop-shadow-message",t),children:[s.jsx(lb,{size:18,weight:"duotone",className:Y("z-[1] text-item-message transition-all group-hover/zv-tab-trigger:w-3.5",e)}),s.jsx("p",{className:"new-text-badge z-[2] -translate-x-6 rounded border border-solid border-item-message bg-item-message-light px-1 leading-normal text-item-message opacity-0 transition-all group-hover/zv-tab-trigger:-translate-x-10 group-hover/zv-tab-trigger:opacity-100 zv-dark:bg-item-message zv-dark:text-item-message-light",children:"Novo"})]})}function OU({currentRoute:e,isCollapsedMobile:t=!1,hasLabelPermission:n,toggleMobileSidebar:r}){const a=new DU,[o]=ye("label",de),i=Object.entries(Cb).filter(([f])=>f!=="/login").filter(([f])=>f!=="/crm").filter(([f])=>o&&n||f!=="/labels"),[l,c]=v.useState(!1),d=O1();function u(){c(!l)}const m=f=>{e.path!==f&&f!=="/crm"&&(!(o&&n)&&f==="/labels"||e.path==="/flows"&&f!=="/flows"&&Ue.getIsDraftSelectedFlow()&&!window.confirm('Tem certeza que deseja trocar de página? É possível que as alterações feitas não sejam salvas. Clique no botão amarelo "Publicar alterações" para salvar.')||(a.setRoute(f),r()))};return s.jsxs("aside",{id:"zv-dashboard-sidebar",className:Y("max-xl:absolute max-xl:z-[60]","relative flex h-full flex-col items-center gap-0 bg-card shadow-md","overflow-y-auto overflow-x-hidden",l&&"w-20",!l&&"w-64",!t&&"max-xl:-left-64",t&&"max-xl:left-0"),children:[s.jsx(K,{className:"absolute right-2 top-2 xl:hidden",variant:"ghost",size:"action",icon:s.jsx(ai,{size:26}),onClick:r}),s.jsx("img",{src:"./SmallLogo.svg",alt:"Small Logo ZapVoice",title:"Small Logo ZapVoice",className:Be("min-h-[69px] w-10 transition-all duration-300",!l&&"invisible absolute scale-0 opacity-0")}),s.jsx("img",{src:"./Logo.svg",alt:"Logo ZapVoice",title:"Logo ZapVoice",className:Be("min-h-[69px] w-36 transition-all duration-300",l&&"invisible absolute scale-0 opacity-0")}),s.jsx(_e,{className:"my-1",variant:"default",size:"sm",children:l?`v.${d}`:`versão: ${d}`}),s.jsx("ul",{className:"flex h-full w-full flex-col gap-2",children:i.map(([f,p])=>s.jsxs("li",{id:`zv-dashboard-sidebar-${p.name}`,onClick:()=>m(f),onKeyUp:g=>{(g.key==="Enter"||g.key===" ")&&m(f)},className:Be("group/zv-tab-trigger relative flex cursor-pointer select-none items-center gap-6 px-5 py-4 text-xl font-bold text-card-foreground last:mt-auto",p.path===e.path&&`border-l-[3px] ${p.colors}`),children:[sU[p.path],["/crm","/labels"].includes(p.path)?s.jsx(kU,{className:Y(l&&"-right-7 top-0")}):null,s.jsx("span",{className:Be(p.textColor,l&&"-translate-x-64 opacity-0 [transition:opacity_100ms,_transform_500ms]",!l&&"relative flex translate-x-0 opacity-100 [transition:opacity_500ms,_transform_250ms]"),children:p.name})]},p.name))}),s.jsx(K,{className:"h-14 w-full rounded-none",variant:"ghost",onClick:()=>u(),iconClasses:Y("transform transition-all duration-300",l&&"rotate-180 "),icon:s.jsx(md,{size:32})})]})}const TU={"/audios":"dashboard-audio-help-video","/backups":"dashboard-backup-help-video","/documents":"dashboard-document-help-video","/flows":"dashboard-flow-help-video","/funnels":"dashboard-funnel-help-video","/home":"dashboard-home-help-video","/labels":"dashboard-label-help-video","/medias":"dashboard-media-help-video","/messages":"dashboard-message-help-video","/triggers":"dashboard-trigger-help-video"};function FU({currentRoute:e}){var u;const{modals:t,setAlreadySeen:n,setModal:r,startDriver:a}=eo();if(v.useEffect(()=>{a(e)},[e]),!t||e==="/login"||e==="/not-found"||e==="/crm")return null;const o=TU[e],i=de.flags[o];if(((u=i==null?void 0:i.payload)==null?void 0:u.modal)===void 0)return null;const l=JSON.stringify(i.payload),c=t[e].version;let d=!t[e].alreadySeen;return l!==c&&(r(e,{version:l,alreadySeen:!1}),d=!0),s.jsx(ve,{open:d,closeOnAction:!0,onAction:()=>{n(e)},action:i.payload.modal.actionButtonText??"Fechar",description:s.jsxs("div",{children:[s.jsxs("section",{className:"flex flex-col gap-2",children:[i.payload.modal.subtitle&&s.jsx("h2",{className:"text-lg font-bold",children:i.payload.modal.subtitle}),i.payload.modal.description&&s.jsx("p",{children:i.payload.modal.description}),i.payload.modal.contentHTML&&s.jsx("div",{className:"flex flex-col gap-2",dangerouslySetInnerHTML:{__html:i.payload.modal.contentHTML}})]}),s.jsx("section",{children:s.jsx(cb,{className:"mb-2",url:i.payload["video-url"],title:"Bem-vindo a ZapVoice",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-presentation",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",disableControls:!1})})]}),title:i.payload.modal.title??""})}function LU({route:e}){const[t,n]=v.useState(!1),{keyId:r,managerId:a,ownerId:o,permissions:i}=ct.useGetAuthData(),l=lh.useGetExportOptions();function c(){n(!t)}v.useEffect(()=>{(async()=>{await new _a().setTrackerUserProperties({keyId:r,managerId:a,userId:o})})()},[r,a,o]);const d=i.includes("label");return s.jsx(db,{children:s.jsxs(yq,{children:[s.jsx(FU,{currentRoute:e.path}),s.jsxs(BD,{children:[s.jsx(mU,{}),s.jsx(_8,{}),s.jsx(OU,{currentRoute:e,isCollapsedMobile:t,hasLabelPermission:d,toggleMobileSidebar:c}),s.jsxs("div",{className:"flex w-full flex-1 flex-col overflow-x-auto",children:[s.jsx(MU,{toggleMobileSidebar:c}),s.jsx(Q9,{exportOptions:l,children:yl[e.path]})]})]})]})})}function PU(){const e=ct.useGetAuthData(),t=Le.useGetOption("theme")==="dark",n=ut.useGetCurrentRoute(),r=ut.useSetRoute();document.body.classList.toggle("zv-dark",t);const a=e.permissions.includes("label");return v.useEffect(()=>{!e.isLoggedIn&&n.path!=="/login"&&r("/login"),e.isLoggedIn&&n.path==="/login"&&r("/home"),n.path==="/labels"&&!a&&r("/home")},[e.isLoggedIn,n.path,a,r]),s.jsx(Lb,{children:s.jsx("div",{className:Y("relative flex h-screen min-h-full flex-row bg-background font-sans text-foreground zv-dark:bg-main-background"),children:e.isLoggedIn?s.jsx(LU,{route:n}):yl["/login"]})})}function $U(){return s.jsxs("div",{className:"zv_scope",children:[s.jsx(PU,{}),s.jsx(ub,{closeButton:!0})]})}G6.createRoot(document.getElementById("root")).render(s.jsx(h.StrictMode,{children:s.jsx($U,{})}));
